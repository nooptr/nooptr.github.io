{"componentChunkName":"component---src-templates-post-template-js","path":"/2019/05/05/cac-ki-su-eureka-da-toi-uu-ung-dung-chat-su-dung-grpc-nhu-the-nao/","result":{"data":{"markdownRemark":{"id":"bf5af0b5-760b-5ee1-8d2b-1c0694c7b08a","html":"<p>NÃ³i Ä‘áº¿n á»©ng dá»¥ng chat realtime, cháº¯c ai cÅ©ng nghÄ© ngay Ä‘áº¿n viá»‡c dÃ¹ng thÆ° viá»‡n hay service bÃªn thá»© 3 nhÆ° websocket, Firebase RealTimeDatabase â€¦ pháº£i khÃ´ng nÃ o?</p>\n<p>Má»—i cÃ´ng nghá»‡ sáº½ cÃ³ Æ°u Ä‘iá»ƒm, nhÆ°á»£c Ä‘iá»ƒm riÃªng, mÃ  quan trá»ng nháº¥t pháº£i phÃ¹ há»£p vá»›i há»‡ thá»‘ng hiá»‡n táº¡i.</p>\n<p>Váº­y hÃ£y cÃ¹ng xem cÃ¡c kÄ© sÆ° Eureka táº¡i sao chá»n gRPC cho giáº£i phÃ¡p cá»§a mÃ¬nh, vÃ  Ä‘Ã£ tá»‘i Æ°u nÃ³ nhÆ° tháº¿ nÃ o nhÃ©.</p>\n<p>TrÆ°á»›c khi Ä‘i vÃ o pháº§n chÃ­nh cÃ¹ng tÃ¬m hiá»ƒu xem Eureka lÃ  cÃ´ng ty nhÆ° tháº¿ nÃ o Ä‘Ã£ nhÃ©.</p>\n<h2 id=\"eureka-lÃ -cÃ´ng-ty-nhÆ°-tháº¿-nÃ o\"><a href=\"#eureka-l%C3%A0-c%C3%B4ng-ty-nh%C6%B0-th%E1%BA%BF-n%C3%A0o\" aria-label=\"eureka lÃ  cÃ´ng ty nhÆ° tháº¿ nÃ o permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Eureka lÃ  cÃ´ng ty nhÆ° tháº¿ nÃ o</h2>\n<p>CÃ´ng ty <a href=\"https://eure.jp/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Eureka</a> lÃ  cÃ´ng ty Nháº­t báº£n, Ä‘Æ°á»£c thÃ nh láº­p vÃ o nÄƒm 2008, Ä‘áº¿n thá»i Ä‘iá»ƒm hiá»‡n táº¡i Eureka Ä‘Ã£ cÃ³ 130 nhÃ¢n viÃªn.</p>\n<p>Eureka Ä‘ang váº­n hÃ nh 1 service vá» tÃ¬nh yÃªu vÃ  dá»‹ch vá»¥ káº¿t hÃ´n lá»›n nháº¥t Nháº­t Báº£n cÃ³ tÃªn lÃ  <a href=\"https://www.pairs.lv/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Pairs</a> (Hay nÃ³i cÃ¡ch khÃ¡c Ä‘Ã¢y lÃ  1 dá»‹ch vá»¥ vá» háº¹n hÃ² thÃ¬ Ä‘Ãºng hÆ¡n).</p>\n<p>Chá»©c nÄƒng chÃ­nh trong Pairs thÃ¬ cÃ³ ráº¥t nhiá»u nhÆ°ng mÃ¬nh chá»‰ Ä‘iá»ƒm qua 1 sá»‘ Ä‘iá»ƒm chÃ­nh thÃ´i nhÃ©:</p>\n<ul>\n<li>NgÆ°á»i dÃ¹ng sáº½ vÃ o website Ä‘Ã³ Ä‘á»ƒ Ä‘Äƒng kÃ­ tÃ i khoáº£n (cÃ³ thá»ƒ Ä‘Äƒng kÃ­ thÃ´ng qua Facebook). Sau Ä‘Ã³ sáº½ chá»n áº£nh báº¡n gÃ¡i mÃ  mÃ¬nh yÃªu thÃ­ch vÃ  like.</li>\n<li>Náº¿u cÃ³ cáº£m tÃ¬nh thÃ¬ tiáº¿n hÃ nh nháº¯n tin háº¹n hÃ².</li>\n<li>Ban Ä‘áº§u Pairs sáº½ cho má»—i tÃ i khoáº£n 1 sá»‘ lÆ°á»£ng point nháº¥t Ä‘á»‹nh. Náº¿u dÃ¹ng háº¿t sáº½ pháº£i náº¡p thÃªm point.</li>\n<li>Khi like hay nháº¯n tin thÃ¬ báº¡n sáº½ máº¥t 1 pháº§n point nÃ o Ä‘Ã³. Cá»© 1 tin nháº¯n lÃ  1 point cháº³ng háº¡n.</li>\n</ul>\n<p>Äiá»ƒm mÃ  mÃ¬nh thÃ­ch nháº¥t á»Ÿ Pairs Ä‘Ã³ lÃ  máº·c dÃ¹ mÃ¬nh Ä‘Äƒng kÃ­ tÃ i khoáº£n thÃ´ng qua Facebook. NhÆ°ng Pairs sáº½ luÃ´n lá»±a chá»n áº£nh â€œbáº¡n gÃ¡iâ€ mÃ  khÃ´ng cÃ¹ng Friend trÃªn Facebook vá»›i mÃ¬nh (ká»ƒ cáº£ Friend cá»§a friend cÅ©ng khÃ´ng hiá»ƒn thá»‹ ra luÃ´n).</p>\n<p>VÃ o Ä‘Ã³ háº¹n hÃ² lÃ©n lÃºt mÃ  gáº·p pháº£i báº¡n thÃ¢n cá»§a vá»£ thÃ¬ â€¦ MÃ  thÃ´i nÃ³i Ä‘áº¿n Ä‘Ã¢y cÃ¡c báº¡n tá»± hiá»ƒu. =))</p>\n<p>Váº­y Ä‘áº¿n Ä‘Ã¢y cÃ¡c báº¡n cÅ©ng hiá»ƒu Ä‘Ã´i chÃºt vá» Pairs cá»§a Eureka rá»“i pháº£i khÃ´ng.</p>\n<p>Tiáº¿p theo chÃºng ta Ä‘i vÃ o váº¥n Ä‘á» chÃ­nh nhÃ©.</p>\n<h2 id=\"váº¥n-Ä‘á»-Ä‘ang-gáº·p-pháº£i\"><a href=\"#v%E1%BA%A5n-%C4%91%E1%BB%81-%C4%91ang-g%E1%BA%B7p-ph%E1%BA%A3i\" aria-label=\"váº¥n Ä‘á» Ä‘ang gáº·p pháº£i permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Váº¥n Ä‘á» Ä‘ang gáº·p pháº£i</h2>\n<p>NhÆ° mÃ¬nh giá»›i thiá»‡u á»Ÿ trÃªn, Pairs cÃ³ 1 chá»©c nÄƒng gá»i lÃ  â€œchat háº¹n hÃ²â€. Tháº¿ nhÆ°ng, hiá»‡n táº¡i chá»©c nÄƒng nÃ y Ä‘ang thá»±c hiá»‡n theo hÃ¬nh thá»©c <strong>polling</strong> (tá»©c lÃ  cá»© máº¥y giÃ¢y sáº½ request lÃªn api server láº¥y dá»¯ liá»‡u 1 láº§n).</p>\n<p>ChÃ­nh vÃ¬ Ä‘iá»u Ä‘Ã³ mÃ  tin nháº¯n Ä‘Æ°á»£c gá»­i Ä‘áº¿n Ä‘á»‘i phÆ°Æ¡ng sáº½ bá»‹ delay máº¥t khoáº£ng máº¥y giÃ¢y. (Tá»©c lÃ  sau khi A gá»­i tin nháº¯n cho B thÃ¬ sau khoáº£ng máº¥y giÃ¢y tin nháº¯n má»›i hiá»ƒn thá»‹ trÃªn mÃ n hÃ¬nh cá»§a B).</p>\n<p>VÃ¬ Ä‘Ã¢y lÃ  app háº¹n hÃ². Náº¿u tin nháº¯n mÃ  bá»‹ delay nhiá»u nhÆ° tháº¿ thÃ¬ vá» UX khÃ´ng Ä‘Æ°á»£c thÃ¢n thiá»‡n cho láº¯m. NÃªn Eureka quyáº¿t Ä‘á»‹nh cáº£i thiá»‡n chá»©c nÄƒng chat nÃ y.</p>\n<h2 id=\"táº¡i-sao-láº¡i-chá»n-grpc\"><a href=\"#t%E1%BA%A1i-sao-l%E1%BA%A1i-ch%E1%BB%8Dn-grpc\" aria-label=\"táº¡i sao láº¡i chá»n grpc permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Táº¡i sao láº¡i chá»n gRPC?</h2>\n<p>BÃ i toÃ¡n Ä‘Ã£ cÃ³, bÆ°á»›c tiáº¿p theo lÃ  tÃ¬m hÆ°á»›ng giáº£i quyáº¿t. NÃ³i lÃ  tÃ¬m hÆ°á»›ng giáº£i quyáº¿t nhÆ°ng viá»‡c lá»±a chá»n cÃ´ng nghÃª phÃ¹ há»£p quáº£ tháº­t lÃ  1 váº¥n Ä‘á» Ä‘au Ä‘áº§u.</p>\n<p>NgoÃ i gRPC ra thÃ¬ cÃ²n cÃ³ 1 sá»‘ cÃ´ng nghá»‡ khÃ¡c ná»¯a cÃ³ thá»ƒ giáº£i quyáº¿t Ä‘Æ°á»£c bÃ i toÃ¡n nÃ y. NÃ³i khÃ´ng xa Ä‘Ã³ chÃ­nh lÃ  WebSocket Ä‘Ã£ cÃ³ tá»« ráº¥t lÃ¢u Ä‘á»i.</p>\n<p>Hay 1 cÃ´ng nghá»‡ mÃ  message Facebook Ä‘ang sá»­ dá»¥ng Ä‘Ã³ lÃ  MQTT.</p>\n<p>1 sá»‘ dá»‹ch vá»¥ bÃªn thá»© 3 cung cáº¥p cÅ©ng Ä‘ang ráº¥t ná»•i tiáº¿ng nhÆ° AWS AppSync, Firebase RealTimeDatabase cÅ©ng chuyÃªn cung cáº¥p giáº£i phÃ¡p gá»­i nháº­n real time.</p>\n<p>CÃ³ ráº¥t nhiá»u thá»© khÃ¡c ná»¯a, nhÆ°ng do má»—i thá»© cÃ³ Æ°u Ä‘iá»ƒm nhÆ°á»£c Ä‘iá»ƒm riÃªng, cá»™ng vá»›i viá»‡c cÃ´ng nghá»‡ Ä‘Ã³ pháº£i phÃ¹ há»£p vá»›i project hiá»‡n táº¡i. NÃªn cÃ¡c kÄ© sÆ° Eureka quyáº¿t Ä‘á»‹nh chá»n gRPC cho giáº£i phÃ¡p láº§n nÃ y.</p>\n<p>DÆ°á»›i Ä‘Ã¢y lÃ  1 sá»‘ lÃ­ do:</p>\n<ul>\n<li>NgÃ´n ngá»¯ chÃ­nh cá»§a cÃ¡c kÄ© sÆ° Eureka lÃ  Golang. MÃ  gRPC thÃ¬ cÅ©ng Ä‘ang support Golang.</li>\n<li>Trong 1 sá»‘ ngÃ´n ngá»¯ mÃ  Eureka Ä‘ang sá»­ dá»¥ng nhÆ° go/java/swift thÃ¬ gRPC cÃ³ phÆ°Æ¡ng thá»©c tá»± Ä‘á»™ng sinh ra Document, Code dá»±a vÃ o Ä‘á»‹nh nghÄ©a IDL.</li>\n<li>Trong váº¥n Ä‘á» giao tiáº¿p dáº¡ng stream (lÃ  chá»©c nÄƒng má»›i cá»§a HTTP/2) Ä‘á»u cÃ³ sample hay interface khÃ¡ Ä‘áº§y Ä‘á»§. NÃªn khÃ´ng cáº§n Ä‘á»ƒ Ã½ Ä‘áº¿n táº§ng communication cÅ©ng Ä‘Æ°á»£c.</li>\n<li>Pattern xung quanh interceptor cÅ©ng Ä‘Æ°á»£c trang bá»‹ ráº¥t Ä‘áº§y Ä‘á»§ nÃªn viá»‡c implement cÅ©ng khÃ¡ Ä‘Æ¡n giáº£n.</li>\n<li>Chá»‰ cáº§n xem vÃ­ dá»¥ hay code cá»§a pháº§nÂ  <a href=\"https://github.com/grpc-ecosystem/go-grpc-middleware\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">grpc-middleware</a> lÃ  thá»ƒ sá»­ dá»¥ng Ä‘Æ°á»£c ngay nÃªn khÃ¡ tiá»‡n.</li>\n</ul>\n<h2 id=\"implement-two-way-communication-báº±ng-grpc\"><a href=\"#implement-two-way-communication-b%E1%BA%B1ng-grpc\" aria-label=\"implement two way communication báº±ng grpc permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Implement Two-way communication báº±ng gRPC</h2>\n<p>TrÃªn proto, chá»‰ cáº§n gáº¯n stream vÃ o trong request láº«n response lÃ  cÃ³ thá»ƒ sinh ra Ä‘Æ°á»£c interface dÃ¹ng cho viá»‡c truyá»n thÃ´ng Two-way á»Ÿ phÃ­a client.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">rpc Chat(stream ChatRequest) returns (stream MessageResponse);</code></pre></div>\n<p>VÃ¬ cÃ¡ch thá»±c thi nÃ³ sáº½ khÃ¡c nhau vá»›i tá»«ng ngÃ´n ngá»¯, nÃªn Ä‘á»ƒ hiá»ƒu rÃµ hÆ¡n cÃ¡c báº¡n cÃ³ thá»ƒ xem qua tutorial á»Ÿ Ä‘Ã¢y nhÃ©:Â  <a href=\"https://grpc.io/docs/tutorials/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">gRPC tutorial</a></p>\n<h2 id=\"hÆ°á»›ng-cáº£i-thiá»‡n-tá»‘c-Ä‘á»™\"><a href=\"#h%C6%B0%E1%BB%9Bng-c%E1%BA%A3i-thi%E1%BB%87n-t%E1%BB%91c-%C4%91%E1%BB%99\" aria-label=\"hÆ°á»›ng cáº£i thiá»‡n tá»‘c Ä‘á»™ permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>HÆ°á»›ng cáº£i thiá»‡n tá»‘c Ä‘á»™</h2>\n<p>Cáº¥u trÃºc há»‡ thá»‘ng hiá»‡n táº¡i Ä‘ang nhÆ° sau:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 620px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/40ac6bc66ea96986ea61039aa11b61e9/a5ed1/1c1b083e9604f2c95721cdae1726f3ae.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 77.90322580645162%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAIAAACZeshMAAAACXBIWXMAAAsSAAALEgHS3X78AAACLklEQVQoz21S227TQBD1r/OCCA8NIGhFIVLLRarEAw+0CJBaEAGp4qUqF1HjxLZ8i+31Jb6u12s7HGfbKE07to5XszNnzoxHWtywrut0VVen6j+lf7SJqk7UkITiaj1SEp+2bfXQuPAUkodGbJ1p517sM1q5kX+m/TzXf/22/uqR2XZtH9y1WmhokXGZzFu+f3pw//2jk8m31z/eDI4eXPgK/DKZDD/tPD55Pvy4M/r+quQUTtpUT7/u7X7Zk+q6DnuLNFu3Ajst0nk+j8uk6RrEAVOWzWmCN2PFSnBaZQlNJQimS2OUobEiz2vGFt0CpBWrgLzmXdstbpnNVc/CmqYBF6aSZZnjOKZpCrRsC05cMcaqqsJBDE9aH/JqmIICKOigCzlxHNu2rWlatDSIuiUZ0a7ripowJECI4FpRQwLwmmy4UMSyLEVRgIZhTKdTZAZBAAkbu3BN9qpn6AELXxrO8EAz8iEBQiAKvBCPYGlFs97zhoECybPZDDmyLAPR/6ZsaOYNxwUaBj2KeJ7HmwaVRZOoBiLgpew8zwkhCCIecSwnIEESz2lRFnmR5VlRlJzxhvGbP7n/z+BDbyD2MyLbSpAEWO+gilhb94JbHlZxQCNShhGdi76AIY3DMpa6ngRB9bPxy7vvto6V8YvTgztvB39cGX7gvcPh1ocng8OHu+P91W5vfx5tH4+kKxWdlxIjtNIq9bMAByriODWxGrFjRrab+qIS0E28WeL9B9WNg9sRRMM8AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n        <source\n          srcset=\"/static/40ac6bc66ea96986ea61039aa11b61e9/01472/1c1b083e9604f2c95721cdae1726f3ae.webp 240w,\n/static/40ac6bc66ea96986ea61039aa11b61e9/222bd/1c1b083e9604f2c95721cdae1726f3ae.webp 480w,\n/static/40ac6bc66ea96986ea61039aa11b61e9/5077d/1c1b083e9604f2c95721cdae1726f3ae.webp 620w\"\n          sizes=\"(max-width: 620px) 100vw, 620px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/40ac6bc66ea96986ea61039aa11b61e9/0783d/1c1b083e9604f2c95721cdae1726f3ae.png 240w,\n/static/40ac6bc66ea96986ea61039aa11b61e9/782f4/1c1b083e9604f2c95721cdae1726f3ae.png 480w,\n/static/40ac6bc66ea96986ea61039aa11b61e9/a5ed1/1c1b083e9604f2c95721cdae1726f3ae.png 620w\"\n          sizes=\"(max-width: 620px) 100vw, 620px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          src=\"/static/40ac6bc66ea96986ea61039aa11b61e9/a5ed1/1c1b083e9604f2c95721cdae1726f3ae.png\"\n          alt=\"CaÌ‚Ìu truÌc heÌ£Ì‚ thoÌ‚Ìng hieÌ£Ì‚n taÌ£i\"\n          title=\"CaÌ‚Ìu truÌc heÌ£Ì‚ thoÌ‚Ìng hieÌ£Ì‚n taÌ£i\"\n          loading=\"lazy\"\n        />\n      </picture>\n  </a>\n    </span></p>\n<p>Cáº¥u trÃºc sau khi Ä‘Æ°a gRPC vÃ o sáº½ Ä‘Æ°á»£c thay Ä‘á»•i nhÆ° sau:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 821px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/fca235c87474d973c93f662f4007e20d/4d248/99a9aa0ff64fce0bd2ce7a7296335a65.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 48.721071863580995%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsSAAALEgHS3X78AAABlUlEQVQoz3WRfU+jQBDG+f6f4zTqWU3UpJ45vcQ3WltCa1tRKALyVl62lLK7sNAuN4J/eEnvl81mZ2ee2SezQv0veZ57nrfwF3YDnGGPoqjehbDfP3ZWXhtI9nhf/Hmt3F5N/5wMzquqMkJr7+HoQOzcvN2N3dnF86+eMTjsdc7lboRjQbJGduCs03WapjPzpTcfWonzjiw10qFdxvBrNJ96ih6bXrpQfPUjccfOTFmomFGh5jUlNGugmBY0b12wnAVBgGKULtOSlbttc86/x7xZQLWpGGNlWRZFgTFGcey6boaztp43VV9i3vCpqapNA8i2220bgjgMQ03TYHhJkhBCILXjZUIJDBx2wzQAba7puu77Pgwc9DAXsEMpbVWfYmi/Wq0QQpD4Ms95TnJ4kGCyqTb1fxB+3B++BwYrGJgRtacD8eRRf7rTxKvZDaT9NDgbdU+li1v1ceK9XE6vh5bcGZ51J79jgoS+KS1p0nYykNU3hm/hXAnUkT2BmyVJBqY8sGS4sRNn5Ezhz/qGJNuTdZH9BR0EKTkCw5HsAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n        <source\n          srcset=\"/static/fca235c87474d973c93f662f4007e20d/01472/99a9aa0ff64fce0bd2ce7a7296335a65.webp 240w,\n/static/fca235c87474d973c93f662f4007e20d/222bd/99a9aa0ff64fce0bd2ce7a7296335a65.webp 480w,\n/static/fca235c87474d973c93f662f4007e20d/55f62/99a9aa0ff64fce0bd2ce7a7296335a65.webp 821w\"\n          sizes=\"(max-width: 821px) 100vw, 821px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/fca235c87474d973c93f662f4007e20d/0783d/99a9aa0ff64fce0bd2ce7a7296335a65.png 240w,\n/static/fca235c87474d973c93f662f4007e20d/782f4/99a9aa0ff64fce0bd2ce7a7296335a65.png 480w,\n/static/fca235c87474d973c93f662f4007e20d/4d248/99a9aa0ff64fce0bd2ce7a7296335a65.png 821w\"\n          sizes=\"(max-width: 821px) 100vw, 821px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          src=\"/static/fca235c87474d973c93f662f4007e20d/4d248/99a9aa0ff64fce0bd2ce7a7296335a65.png\"\n          alt=\"CaÌ‚Ìu truÌc heÌ£Ì‚ thoÌ‚Ìng sau khi Ä‘uÌ›a gRPC\"\n          title=\"CaÌ‚Ìu truÌc heÌ£Ì‚ thoÌ‚Ìng sau khi Ä‘uÌ›a gRPC\"\n          loading=\"lazy\"\n        />\n      </picture>\n  </a>\n    </span></p>\n<p>Qua 2 cáº¥u trÃºc bÃªn trÃªn, ta tháº¥y sá»± khÃ¡c nhau chá»§ yáº¿u lÃ  á»Ÿ phÃ­a receiver. Cá»¥ thá»ƒ nhÆ° sau:</p>\n<ul>\n<li>VÃ¬ Ä‘Ã£ thá»±c hiá»‡n káº¿t ná»‘i ngay tá»« Ä‘áº§u nÃªn sáº½ khÃ´ng máº¥t cost káº¿t ná»‘i HTTP ná»¯a</li>\n<li>Viá»‡c káº¿t ná»‘i Ä‘áº¿n mysql Ä‘á»ƒ láº¥y message thÃ¬ bÃ¢y giá» khÃ´ng cáº§n ná»¯a.</li>\n<li>KhÃ´ng tá»“n táº¡i Polling.</li>\n</ul>\n<p>Dá»±a vÃ o cáº¥u trÃºc nhÆ° nÃ y sáº½ tháº¥y khÃ´ng cÃ²n sá»± delay cá»§a viá»‡c Polling ná»¯a. Thay vÃ o Ä‘Ã³ phÃ­a receiver cÃ³ thá»ƒ nháº­n Ä‘Æ°á»£c message ngay tá»©c thÃ¬.</p>\n<h2 id=\"cáº¥u-trÃºc-toÃ n-thá»ƒ-cá»§a-há»‡-thá»‘ng\"><a href=\"#c%E1%BA%A5u-tr%C3%BAc-to%C3%A0n-th%E1%BB%83-c%E1%BB%A7a-h%E1%BB%87-th%E1%BB%91ng\" aria-label=\"cáº¥u trÃºc toÃ n thá»ƒ cá»§a há»‡ thá»‘ng permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Cáº¥u trÃºc toÃ n thá»ƒ cá»§a há»‡ thá»‘ng</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 960px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a6f6dcda674859a8b096c2c38cbee087/f4f98/184baa3e947151b5b9eee7a5c0b95b70.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.01754385964912%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAAB70lEQVQoz01SPW/TUBT1r2DjbzCyMPIbKiRmFiRGJBbGdkcsFaISElAxBISo2orKIJQoCcjKkLgNtnFiO07smNjvPb8vm2OHBq7edN8995xz7zU4L/EQWuv6OoSQZJORVcBKzhiljFVVtfvVulJtsRHHS9u+dByHECKlbFpUWtT15Zt958ntmiQAkSKfTqeu604mNt2k+8eDwwuvAaM6z4skTYGfTCarJN0sAzo6ibof+vdvim8vUcRLxlpyqdQmSz9+tc4HtihpA46iqCgKFFVtxItw3DcZJdbjO6uDu8jDVJIkeZ5DHee80lIKJoQw8JemKVSNx+M4jpECvqCMCuV+fp1evGiZy9FoZJrmcPidFJvzfmj+iBvZW8LlchkEARorpZChlMyC0HZnbrBA6/V6rduAfyn520/W8cmorpQBM8CAEDAMrNGtNa/q4Mu7+OhRzXNVQXYj8noRwvf9me+zkhlZlg0GA9D+W4YSSjDn/bPhvRt6fIaEFByOFosFnEMFRgCiv9MGM2YGfBSGq3S9mnuJeVT+ToYPb2XP91AEdVhEt9vt9XqWZQG/FWJAbRhGnvfr7PS00+mgoiiIbdtU1levnkaHD5qBtVe0O5KdRmO7CbjFIWEN25asLLH2n6535XjzeUAo3Q7yfyTiD+hiXNmJEWOFAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n        <source\n          srcset=\"/static/a6f6dcda674859a8b096c2c38cbee087/01472/184baa3e947151b5b9eee7a5c0b95b70.webp 240w,\n/static/a6f6dcda674859a8b096c2c38cbee087/222bd/184baa3e947151b5b9eee7a5c0b95b70.webp 480w,\n/static/a6f6dcda674859a8b096c2c38cbee087/620b9/184baa3e947151b5b9eee7a5c0b95b70.webp 960w,\n/static/a6f6dcda674859a8b096c2c38cbee087/0afbb/184baa3e947151b5b9eee7a5c0b95b70.webp 1140w\"\n          sizes=\"(max-width: 960px) 100vw, 960px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/a6f6dcda674859a8b096c2c38cbee087/0783d/184baa3e947151b5b9eee7a5c0b95b70.png 240w,\n/static/a6f6dcda674859a8b096c2c38cbee087/782f4/184baa3e947151b5b9eee7a5c0b95b70.png 480w,\n/static/a6f6dcda674859a8b096c2c38cbee087/f570d/184baa3e947151b5b9eee7a5c0b95b70.png 960w,\n/static/a6f6dcda674859a8b096c2c38cbee087/f4f98/184baa3e947151b5b9eee7a5c0b95b70.png 1140w\"\n          sizes=\"(max-width: 960px) 100vw, 960px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          src=\"/static/a6f6dcda674859a8b096c2c38cbee087/f570d/184baa3e947151b5b9eee7a5c0b95b70.png\"\n          alt=\"CaÌ‚Ìu truÌc toaÌ€n theÌ‚Ì‰ cuÌ‰a heÌ£Ì‚ thoÌ‚Ìng\"\n          title=\"CaÌ‚Ìu truÌc toaÌ€n theÌ‚Ì‰ cuÌ‰a heÌ£Ì‚ thoÌ‚Ìng\"\n          loading=\"lazy\"\n        />\n      </picture>\n  </a>\n    </span></p>\n<p>Nhá» viá»‡c sá»­ dá»¥ng RedisPubSub nhÆ° lÃ  nÆ¡i giao tiáº¿p giá»¯a cÃ¡c server (má»›i vÃ  cÅ©) Ä‘Ã£ giÃºp cho ngÆ°á»i dÃ¹ng cÃ³ thá»ƒ gá»­i vÃ  nháº­n message 1 cÃ¡ch tá»©c thá»i.</p>\n<h2 id=\"lÃ m-tháº¿-nÃ o-Ä‘á»ƒ-release-an-toÃ n\"><a href=\"#l%C3%A0m-th%E1%BA%BF-n%C3%A0o-%C4%91%E1%BB%83-release-an-to%C3%A0n\" aria-label=\"lÃ m tháº¿ nÃ o Ä‘á»ƒ release an toÃ n permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>LÃ m tháº¿ nÃ o Ä‘á»ƒ release an toÃ n?</h2>\n<p>Chá»©c nÄƒng chat cÃ³ thá»ƒ nÃ³i lÃ  1 trong nhá»¯ng chá»©c nÄƒng chÃ­nh cá»§a há»‡ thá»‘ng Pairs, nÃªn viá»‡c cÃ³ bug xáº£y ra cÃ³ thá»ƒ gÃ¢y áº£nh hÆ°á»Ÿng vÃ´ cÃ¹ng lá»›n.</p>\n<p>VÃ¬ pháº¡m vi áº£nh hÆ°á»Ÿng vÃ´ cÃ¹ng lá»›n nÃªn khi cÃ³ báº¥t kÃ¬ bug nÃ o thÃ¬ viá»‡c rollback, detect lá»—i lÃ  Ä‘iá»u vÃ´ cÃ¹ng quan trá»ng.</p>\n<p>TrÆ°á»›c khi release thÃ¬ test code lÃ  Ä‘iá»u Ä‘Æ°Æ¡ng nhiÃªn pháº£i lÃ m. Tháº¿ nhÆ°ng Ä‘á»ƒ co háº¹p pháº¡m vi áº£nh hÆ°á»Ÿng, Eureka Ä‘Ã£ nghÄ© Ä‘áº¿n viá»‡c sáº½ release chá»©c nÄƒng chat má»›i nÃ y trÃªn thiáº¿t bá»‹ Android trÆ°á»›c. Sau khi cháº¡y á»•n Ä‘á»‹nh sáº½ release tiáº¿p trÃªn iOS.</p>\n<p>ChÃ­nh vÃ¬ Ä‘iá»u Ä‘Ã³ mÃ  sÆ¡ Ä‘á»“ cáº¥u trÃºc há»‡ thá»‘ng á»Ÿ bÃªn trÃªn má»›i cÃ³ pháº§n API cÅ© vÃ  API má»›i lÃ  nhÆ° tháº¿.</p>\n<h2 id=\"cÃ¡ch-quáº£n-lÃ½-proto\"><a href=\"#c%C3%A1ch-qu%E1%BA%A3n-l%C3%BD-proto\" aria-label=\"cÃ¡ch quáº£n lÃ½ proto permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CÃ¡ch quáº£n lÃ½ proto</h2>\n<p><strong>ãƒ»TÃ¡ch repository ra riÃªng</strong></p>\n<p>File proto sáº½ khÃ´ng náº±m trong repository cá»§a cÃ¡c platform (ios/android/serverside) mÃ  sáº½ náº±m ra 1 repository riÃªng biá»‡t. VÃ  dÃ¹ng git submodule Ä‘á»ƒ chÃ¨n nÃ³ vÃ o trong cÃ¡c repository cá»§a platform.</p>\n<p><strong>ãƒ»CÃ¡ch generate document vÃ  code</strong></p>\n<p>1 trong sá»‘ nhá»¯ng Ä‘iá»ƒm máº¡nh cá»§a gRPC lÃ  cÃ³ thá»ƒ generate document vÃ  code 1 cÃ¡ch tá»± Ä‘á»™ng nhá» sá»­ dá»¥ng protoc.</p>\n<p>HÆ¡n ná»¯a chÃºng ta cÃ³ thá»ƒ dá»… dÃ ng viáº¿t command line Make Ä‘á»ƒ generate ra document vÃ  code nhÆ° bÃªn dÆ°á»›i:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">gen-doc:\n docker run --rm -v $(CURRENT_DIR):$(CURRENT_DIR) -w $(CURRENT_DIR) xxxx/protoc --doc_out=markdown,README.md:./ -I. *.proto</code></pre></div>\n<p>ÄÃ¢y lÃ  vÃ­ dá»¥ vá» sample Document vÃ  proto Ä‘Ã£ Ä‘Æ°á»£c sinh ra nhá» command line phÃ­a trÃªn:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">message ChatRequest {\n string message_body = 1;\n string sticker_id = 2;\n string user_message_partner_id = 3;\n}</code></pre></div>\n<p>ÄÃºng quáº£ lÃ  tiá»‡n tháº­t.</p>\n<h2 id=\"káº¿t-quáº£-tá»‘i-Æ°u-tá»‘c-Ä‘á»™-vÃ -Ä‘o-hiá»‡u-nÄƒng\"><a href=\"#k%E1%BA%BFt-qu%E1%BA%A3-t%E1%BB%91i-%C6%B0u-t%E1%BB%91c-%C4%91%E1%BB%99-v%C3%A0-%C4%91o-hi%E1%BB%87u-n%C4%83ng\" aria-label=\"káº¿t quáº£ tá»‘i Æ°u tá»‘c Ä‘á»™ vÃ  Ä‘o hiá»‡u nÄƒng permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Káº¿t quáº£ tá»‘i Æ°u tá»‘c Ä‘á»™ vÃ  Ä‘o hiá»‡u nÄƒng</h2>\n<p>Vá»›i gRPC Ä‘ang gáº·p pháº£i 1 váº¥n Ä‘á» lÃ  ráº¥t khÃ³ khÄƒn trong viá»‡c Ä‘o hiá»‡u nÄƒng.</p>\n<p>ThÃ´ng thÆ°á»ng, 1 request 1 response thÃ¬ chá»‰ cáº§n xem log nginx hay apache lÃ  cÃ³ thá»ƒ biáº¿t Ä‘Æ°á»£c request Ä‘Ã³ xá»­ lÃ½ máº¥t bao lÃ¢u, thá»i gian trung bÃ¬nh cá»§a latency lÃ  bao nhiÃªu.</p>\n<p>Tháº¿ nhÆ°ng vá»›i dÃ²ng stream cá»§a gRPC thÃ¬ láº¡i khÃ¡c, tÆ°Æ¡ng á»©ng vá»›i 1 request thÃ¬ cÃ³ bao nhiÃªu response, vÃ  khi nÃ o sáº½ tráº£ vá». Dá»¯ liá»‡u khi nÃ o xáº£y ra, khi nÃ o Ä‘áº¿n â€¦ Ä‘á»u khÃ´ng thá»ƒ biáº¿t Ä‘Æ°á»£c.</p>\n<p>Do Ä‘Ã³ náº¿u khÃ´ng cáº£i thiá»‡n chá»— nÃ y thÃ¬ khÃ³ cÃ³ thá»ƒ tÃ­nh toÃ¡n, Ä‘o Ä‘áº¡c hiá»‡u nÄƒng Ä‘Æ°á»£c.</p>\n<p>ChÃ­nh vÃ¬ váº­y, Eureka Ä‘Ã£ lÆ°u 3 giÃ¡ trá»‹ metrics á»Ÿ bÃªn dÆ°á»›i vÃ o StackDriver &#x26; BigQuery vÃ  tiáº¿n hÃ nh Ä‘o Ä‘áº¡c:</p>\n<ol>\n<li>Thá»i gian (Î¼s) lÆ°u data Ä‘áº¿n database á»Ÿ phÃ­a sender.</li>\n<li>Thá»i gian (Î¼s) broadcast message Ä‘áº¿n gRPC server.</li>\n<li>Thá»i gian (Î¼s) send message Ä‘áº¿n sender tá»« gRPC server.</li>\n</ol>\n<p>Káº¿t quáº£ lÃ  tá»•ng thá»i gian tá»« 1 -> 3 chá»‰ máº¥t dÆ°á»›i 0.2s nÃªn viá»‡c tá»‘i Æ°u tá»‘c Ä‘á»™ láº§n nÃ y cÃ³ thá»ƒ coi lÃ  thÃ nh cÃ´ng.</p>\n<p>NgoÃ i ra nhá» cÃ³ thá»ƒ láº¥y Ä‘Æ°á»£c giÃ¡ trá»‹ cá»¥ thá»ƒ nÃ y mÃ  dá»… dÃ ng detect khi tá»•ng thá»i gian vÆ°á»£t quÃ¡ giÃ¡ trá»‹ cho phÃ©p.</p>\n<h2 id=\"sá»±-háº¡n-cháº¿-vá»-máº·t-infrastructure-monitoring-accesslog\"><a href=\"#s%E1%BB%B1-h%E1%BA%A1n-ch%E1%BA%BF-v%E1%BB%81-m%E1%BA%B7t-infrastructure-monitoring-accesslog\" aria-label=\"sá»± háº¡n cháº¿ vá» máº·t infrastructure monitoring accesslog permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Sá»± háº¡n cháº¿ vá» máº·t infrastructure, monitoring, AccessLog</h2>\n<p>Vá» phÆ°Æ¡ng diá»‡n implement code thÃ¬ khÃ´ng gáº·p nhiá»u khÃ³ khÄƒn, tháº¿ nhÆ°ng vá» phÆ°Æ¡ng diá»‡n váº­n hÃ nh, monitoring server thÃ¬ Ä‘ang gáº·p ráº¥t nhiá»u váº¥n Ä‘á». Cáº§n pháº£i mapping láº¡i cÃ¡c error code, cÃ¡c metrics thÃ¬ má»›i cÃ³ thá»ƒ Ä‘o Ä‘áº¡c Ä‘Æ°Æ¡c. Cá»¥ thá»ƒ nhÆ° sau:</p>\n<ul>\n<li>Viá»‡c monitoring RateBase trÃªn ELB (4xx, 5xx) thÃ¬ bÃ¢y giá» pháº£i chuyá»ƒn sang monitoring Rate cá»§a tá»«ng con gRPC server vá»›i mÃ£ <a href=\"https://github.com/grpc/grpc-go/blob/master/codes/codes.go\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">error codes</a> khÃ¡c</li>\n<li>Äá»ƒ Ä‘o Ä‘áº¡c Ä‘Æ°á»£c latency trong giao tiáº¿p stream thÃ¬ cáº§n pháº£i láº¥y Ä‘Æ°á»£c giÃ¡ trá»‹ vá» thá»i gian phÃ¡t sinh dá»¯ liá»‡u (event), thá»i gian nháº­n dá»¯ liá»‡u, thá»i gian update dá»¯ liá»‡u.</li>\n<li>Vá» Logging cá»§a Send vá»›i Receive trong Stream thÃ¬ hiá»‡n táº¡i chÆ°a support, do Ä‘Ã³ cáº§n pháº£i viáº¿t láº¡i Wrapper cho tháº±ng ServerStream.</li>\n<li>Pháº§n giao tiáº¿p vá»›i BackendTarget thÃ¬ hiá»‡n táº¡i AWS ALB chÆ°a support HTTP2. TCPMode cá»§a AWS ELB cÅ©ng chÆ°a support ALPN. Do Ä‘Ã³ hiá»‡n táº¡i Eureka Ä‘ang sá»­ dá»¥ng NetworkLoadBalancer.</li>\n</ul>\n<h2 id=\"káº¿t-luáº­n\"><a href=\"#k%E1%BA%BFt-lu%E1%BA%ADn\" aria-label=\"káº¿t luáº­n permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Káº¿t luáº­n</h2>\n<p>Máº·c dÃ¹ viá»‡c váº­n hÃ nh gRPC cÃ²n cÃ³ chÃºt try hard, nhÆ°ng vá»›i case táº¡o API mÃ  sá»­ dá»¥ng micro framework, hay vá»›i nhá»¯ng dÃ²ng stream sá»­ dá»¥ng HTTP/2 thÃ¬ gRPC ráº¥t thÃ­ch há»£p vÃ  dá»… dÃ¹ng, dá»… implement.</p>\n<p>NÃªn náº¿u báº¡n nÃ o Ä‘ang cÃ³ nhu cáº§u Ä‘Æ°a gRPC vÃ o há»‡ thá»‘ng thÃ¬ hi vá»ng bÃ i viáº¿t nÃ y sáº½ giÃºp cÃ¡c báº¡n 1 pháº§n nÃ o Ä‘Ã³.</p>\n<p>==============</p>\n<p>Äá»ƒ nháº­n thÃ´ng bÃ¡o khi cÃ³ bÃ i viáº¿t má»›i nháº¥t thÃ¬ cÃ¡c báº¡n cÃ³ thá»ƒ like fanpage cá»§a mÃ¬nh á»Ÿ bÃªn dÆ°á»›i nhÃ©:</p>\n<p>ğŸ‘‰ğŸ‘‰ğŸ‘‰ <a href=\"https://www.facebook.com/669339543503374\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Nghá»‡ thuáº­t Coding Fanpage Facebook</a></p>\n<p>ChÃºc cÃ¡c báº¡n 1 tuáº§n tháº­t vui váº».</p>","fields":{"slug":"2019/05/05/cac-ki-su-eureka-da-toi-uu-ung-dung-chat-su-dung-grpc-nhu-the-nao/","tagSlugs":null},"frontmatter":{"date":"2019-05-05T00:00:53.000Z","description":null,"tags":null,"title":"CÃ¡c kÄ© sÆ° Eureka Ä‘Ã£ tá»‘i Æ°u á»©ng dá»¥ng chat sá»­ dá»¥ng gRPC nhÆ° tháº¿ nÃ o","socialImage":null}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"2019/05/05/cac-ki-su-eureka-da-toi-uu-ung-dung-chat-su-dung-grpc-nhu-the-nao/"}}}