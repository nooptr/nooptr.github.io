{"componentChunkName":"component---src-templates-post-template-js","path":"/call-api-trong-vuejs-theo-cach-thong-minh-nhat","result":{"data":{"markdownRemark":{"id":"41ed70f3-4a91-5e98-bcde-6583ce4756cc","html":"<p>Gáº§n Ä‘Ã¢y tháº¥y VueJs cÃ³ váº» Ä‘ang hot nÃªn thá»­ tÃ¬m hiá»ƒu xem thá»±c sá»± nÃ³ nhÆ° tháº¿ nÃ o.</p>\n<p>MÃ¬nh cÅ©ng thá»­ Ä‘á»c code cá»§a 1 vÃ i sample, tutorial thÃ¬ tháº¥y chá»— call API Ä‘a sá»‘ Ä‘á»u dÃ¹ng axios á»Ÿ Component hay lÃ  á»Ÿ bÃªn trong Vuex.</p>\n<p>Náº¿u mÃ  Ã¡p dá»¥ng nhá»¯ng cÃ¡i Ä‘Ã³ vÃ o trong dá»± Ã¡n thá»±c táº¿ thÃ¬ sáº½ xáº£y ra nhá»¯ng váº¥n Ä‘á» sau:</p>\n<ul>\n<li>Viá»‡c viáº¿t API trá»±c tiáº¿p trong component sáº½ ráº¥t khÃ³ cho viá»‡c viáº¿t unit test.</li>\n<li>TÃ­nh má»Ÿ rá»™ng cá»§a Vuex(actions) (Ä‘á»‘i vá»›i nhá»¯ng xá»­ lÃ½ khÃ´ng dÃ¹ng láº¡i thÃ¬ khÃ´ng nÃªn viáº¿t á»Ÿ trong Store)</li>\n<li>Viá»‡c module hoÃ¡ pháº§n giao tiáº¿p API vá»›i PureJS khÃ´ng lÃ m giáº£m Ä‘i Ä‘á»™ phá»¥ thuá»™c. VÃ¬ API Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a trong component nÃªn muá»‘n thay Ä‘á»•i API hay logic sáº½ pháº£i sá»­a trong nhiá»u file khÃ¡c.</li>\n</ul>\n<p>VÃ  cÃ²n ráº¥t nhiá»u váº¥n Ä‘á» ná»¯aâ€¦</p>\n<p>Sau khi tÃ¬m hiá»ƒu thÃ¬ mÃ¬nh tháº¥y cÃ³ ráº¥t nhiá»u design pattern cÃ³ thá»ƒ Ã¡p dá»¥ng cho viá»‡c gá»i API. NhÆ°ng cÃ³ 1 design pattern mÃ  mÃ¬nh tháº¥y tá»‘t nháº¥t Ä‘Ã³ lÃ  **RepositoryFactory.Â **</p>\n<p>Quáº£ thá»±c mÃ¬nh ráº¥t thÃ­ch cÃ¡i pattern nÃ y vÃ¬ nÃ³ scale khÃ¡ lÃ  dá»….</p>\n<p><strong>Má»¥c Ä‘Ã­ch bÃ i viáº¿t:</strong></p>\n<ul>\n<li>Biáº¿t cÃ¡ch Ã¡p dá»¥ng design pattern vÃ o viá»‡c call API. Äáº·c biá»‡t lÃ Â **RepositoryFactory **pattern.</li>\n<li>Máº·c dÃ¹ bÃ i viáº¿t láº¥y vÃ­ dá»¥ lÃ  VueJS nhÆ°ng mÃ  Angular, ReactJS mÃ¬nh tháº¥y Ä‘á»u cÃ³ thá»ƒ Ã¡p dá»¥ng Ä‘Æ°á»£c.</li>\n</ul>\n<h2 id=\"táº¡i-sao-láº¡i-dÃ¹ng-nÃ³\"><a href=\"#t%E1%BA%A1i-sao-l%E1%BA%A1i-d%C3%B9ng-n%C3%B3\" aria-label=\"táº¡i sao láº¡i dÃ¹ng nÃ³ permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Táº¡i sao láº¡i dÃ¹ng nÃ³?</h2>\n<p>Äáº§u tiÃªn mÃ¬nh sáº½ dÃ¹ng <a href=\"https://docs.microsoft.com/en-gb/dotnet/standard/microservices-architecture/microservice-ddd-cqrs-patterns/infrastructure-persistence-layer-design?view=aspnetcore-2.1#the-repository-pattern\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">repository pattern</a> Ä‘á»ƒ truy cáº­p vÃ o tÃ i nguyÃªn theo cÃ¡ch Ä‘á»™c láº­p, khÃ´ng cÃ³ báº¥t kÃ¬ logic nÃ o ngoÃ i viá»‡c tráº£ vá» dá»¯ liá»‡u.</p>\n<p>CÃ¡i thá»© 2 lÃ  sáº½ sá»­ dá»¥ng <a href=\"https://en.wikipedia.org/wiki/Factory_method_pattern\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">factory pattern</a> Ä‘á»ƒ khá»Ÿi táº¡o logic cá»§a mÃ´i trÆ°á»ng hay repository cáº§n thiáº¿t cho tá»«ng case. Factory cÃ³ 1 lá»£i tháº¿ lÃ  cÃ³ thá»ƒ khá»Ÿi táº¡o 1 mock repository hoáº·c lÃ  production repository náº¿u cáº§n thiáº¿t.</p>\n<p>Cháº¯c háº³n má»i ngÆ°á»i Ä‘á»c example hay tutorial cÅ©ng Ä‘á»u tháº¥y axios luÃ´n Ä‘Æ°á»£c sá»­ dá»¥ng trong component. Váº­y cÃ³ váº¥n Ä‘á» gÃ¬ xáº£y ra chá»— nÃ y:</p>\n<ul>\n<li>Äiá»u gÃ¬ sáº½ xáº£y ra náº¿u chÃºng ta muá»‘n tÃ¡i sá»­ dá»¥ng viá»‡c call api?</li>\n<li>Äiá»u gÃ¬ xáº£y ra náº¿u endpoint thay Ä‘á»•i?</li>\n<li>Äiá»u gÃ¬ xáº£y ra náº¿u muá»‘n tÃ¡i sá»­ dá»¥ng viá»‡c call api cho dá»± Ã¡n khÃ¡c?</li>\n<li>Äiá»u gÃ¬ xáº£y ra náº¿u muá»‘n refactor 1 vÃ i lá»i gá»i hÃ m hoáº·c muá»‘n di chuyá»ƒn nÃ³ Ä‘áº¿n Vuex actions?</li>\n<li>MÃ¬nh cÃ³ nhiá»u hÆ¡n 1 cÃ¡i resource, tháº¿ bÃ¢y giá» pháº£i Ä‘á»‹nh nghÄ©a táº­n 4 cÃ¡i endpoint?</li>\n<li>LÃ m tháº¿ nÃ o cÃ³ thá»ƒ dÃ¹ng 1 cÃ¡i mock api cho viá»‡c test?</li>\n</ul>\n<p>ÄÆ°Æ¡ng nhiÃªn lÃ  thay Ä‘á»•i 1 file sáº½ dá»… dÃ ng hÆ¡n lÃ  thay Ä‘á»•i 30 file rá»“i Ä‘Ãºng khÃ´ng?</p>\n<h2 id=\"phÆ°Æ¡ng-phÃ¡p-Ä‘Ãºng\"><a href=\"#ph%C6%B0%C6%A1ng-ph%C3%A1p-%C4%91%C3%BAng\" aria-label=\"phÆ°Æ¡ng phÃ¡p Ä‘Ãºng permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>PhÆ°Æ¡ng phÃ¡p Ä‘Ãºng</h2>\n<p>Trong case nÃ y, Ä‘á»ƒ Ä‘Æ¡n giáº£n hoÃ¡ code vÃ  cÃ³ thá»ƒ Ä‘á»‹nh nghÄ©a Ä‘Æ°á»£c 1 vÃ i loáº¡i resource khÃ¡c nhau thÃ¬ mÃ¬nh sáº½ sá»­ dá»¥ng <strong>POJO (Plain Old JavaScript Objects)</strong>. ÄÆ°Æ¡ng nhiÃªn cÃ³ thá»ƒ sá»­ dá»¥ng Class náº¿u báº¡n muá»‘n.</p>\n<p>BÃ¢y giá» cÃ¹ng báº¯t Ä‘áº§u Ä‘i Ä‘á»‹nh nghÄ©a asxios nhÃ©.</p>\n<p>MÃ¬nh sáº½ Ä‘áº·t tÃªn file lÃ  <strong>Repository.js</strong> vÃ¬ nÃ³ Ä‘áº£m nhiá»‡m viá»‡c káº¿t ná»‘i Ä‘áº¿n cÃ¡c resources.</p>\n<p>CÅ©ng cÃ³ 1 vÃ i ngÆ°á»i thÃ­ch cÃ¡i tÃªn Service hay lÃ  API, nhÆ°ng trong hoÃ n cáº£nh nÃ y mÃ¬nh tháº¥y cÃ¡i tÃªn Repository cÃ³ váº» há»£p lÃ­ hÆ¡n.</p>\n<p><img src=\"https://nghethuatcoding.com/wp-content/uploads/2019/05/repository-vuejs.png\" alt=\"repository vuejs.png\"></p>\n<p>Tiáº¿p theo chÃºng ta sáº½ Ä‘i Ä‘á»‹nh nghÄ©a cho tá»«ng Entity cá»§a project.</p>\n<p>VÃ­ dá»¥ nhÆ° báº¡n cÃ³ 1 blog. Khi Ä‘Ã³ chÃºng ta sáº½ cÃ³ 1 Entity lÃ  posts. VÃ  bÃ¢y giá» chÃºng ta sáº½ Ä‘i Ä‘á»‹nh nghÄ©a táº¥t cáº£ cÃ¡c thao tÃ¡c <strong>CRUD (Create Update Delete)</strong>.</p>\n<p>VÃ  khi Ä‘Ã³ <strong>postsRepository.js</strong> sáº½ trá»Ÿ thÃ nh nhÆ° sau:</p>\n<p><img src=\"https://nghethuatcoding.com/wp-content/uploads/2019/05/postRepository-Vuejs-design-pattern-javascript.png\" alt=\"postRepository Vuejs design pattern javascript\"></p>\n<p>Tiáº¿p theo chÃºng ta sáº½ Ä‘i táº¡o <strong>Factory</strong>.</p>\n<p><img src=\"https://nghethuatcoding.com/wp-content/uploads/2019/05/design-pattern-repository-factory.png\" alt=\"design pattern repository factory\"></p>\n<p>NhÃ¬n vÃ o trÃªn ta tháº¥y viá»‡c táº¡o Repository tá»« Factory trá»Ÿ nÃªn tháº­t <strong>simple</strong> pháº£i khÃ´ng?</p>\n<p>HÆ¡n ná»¯a á»Ÿ Ä‘Ã¢y ta cÅ©ng dá»… dÃ ng táº¡o <strong>mock repository (phÃ¹ há»£p vá»›i tá»«ng mÃ´i trÆ°á»ng vÃ­ dá»¥ develop, staging, production)</strong> hay thÃªm 1 vÃ i logic vÃ o trong hÃ m <strong>get</strong> á»Ÿ trÃªn cÅ©ng Ä‘á»u Ä‘Æ°á»£c háº¿t.</p>\n<p>CÃ²n Ä‘Ã¢y lÃ  cÃ¡ch Ã¡p dá»¥ng vÃ o trong component:<img src=\"https://nghethuatcoding.com/wp-content/uploads/2019/05/parentComponent-VueJs-4.png\" alt=\"parentComponent VueJs\"></p>\n<p>NhÃ¬n vÃ o chÃºng ta tháº¥y nÃ³ simple pháº£i khÃ´ng nÃ o? VÃ¬ pháº§n logic Ä‘Ã£ Ä‘Æ°á»£c tÃ¡ch ra á»Ÿ 1 chá»— khÃ¡c nÃªn viá»‡c dÃ¹ng 1 endpoint khÃ¡c nhÆ° GraphSQL cÅ©ng hoÃ n toÃ n cÃ³ thá»ƒ.</p>\n<h2 id=\"káº¿t-luáº­n\"><a href=\"#k%E1%BA%BFt-lu%E1%BA%ADn\" aria-label=\"káº¿t luáº­n permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Káº¿t luáº­n</h2>\n<p>Hiá»‡n táº¡i pattern nÃ y mÃ¬nh Ä‘ang Ã¡p dá»¥ng vÃ o dá»± Ã¡n tháº¥y khÃ¡ ngon. NhÆ°ng Ä‘iá»u Ä‘Ã³ cÅ©ng khÃ´ng cÃ³ nghÄ©a lÃ  nÃ³ phÃ¹ há»£p vá»›i dá»± Ã¡n cá»§a cÃ¡c báº¡n.</p>\n<p>Tuy nhiÃªn, theo mÃ¬nh tháº¥y thÃ¬ pattern nÃ y cÃ³ 1 sá»‘ Æ°u Ä‘iá»ƒm sau:</p>\n<ul>\n<li>CÃ³ thá»ƒ dá»… dÃ ng test 1 Ä‘oáº¡n code nÃ o Ä‘Ã³ 1 cÃ¡ch Ä‘Æ¡n giáº£n</li>\n<li>Code cá»§a component trÃ´ng Ä‘áº¹p hÆ¡n</li>\n<li>CÃ³ thá»ƒ dá»… dÃ ng má»Ÿ rá»™ng (ÄÃºng khÃ´ng ta?)</li>\n<li>CÃ³ thá»ƒ Ä‘áº£m báº£o tÃ­nh DRY (Donot repeat your self)</li>\n</ul>\n<p>Náº¿u báº¡n nÃ o cÃ³ Ã½ kiáº¿n gÃ¬ thÃ¬ hÃ£y Ä‘á»ƒ láº¡i á»Ÿ pháº§n comment bÃªn dÆ°á»›i nhÃ©.</p>\n<p>==============</p>\n<p>Äá»ƒ nháº­n thÃ´ng bÃ¡o khi cÃ³ bÃ i viáº¿t má»›i nháº¥t thÃ¬ cÃ¡c báº¡n cÃ³ thá»ƒ like fanpage cá»§a mÃ¬nh á»Ÿ bÃªn dÆ°á»›i nhÃ©:</p>\n<p><img src=\"https://s.w.org/images/core/emoji/11.2.0/svg/1f449.svg\" alt=\"ğŸ‘‰\"><img src=\"https://s.w.org/images/core/emoji/11.2.0/svg/1f449.svg\" alt=\"ğŸ‘‰\"><img src=\"https://s.w.org/images/core/emoji/11.2.0/svg/1f449.svg\" alt=\"ğŸ‘‰\">Â <a href=\"https://www.facebook.com/669339543503374\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Nghá»‡ thuáº­t Coding Fanpage Facebook</a></p>\n<p>ChÃºc cÃ¡c báº¡n 1 tuáº§n tháº­t vui váº».</p>","fields":{"slug":"call-api-trong-vuejs-theo-cach-thong-minh-nhat","tagSlugs":["/tag/api/","/tag/design-pattern/","/tag/vuejs/"]},"frontmatter":{"date":"2019-05-16T14:03:50.000Z","description":null,"tags":["api","design pattern","vuejs"],"title":"Call API trong VueJS theo cÃ¡ch thÃ´ng minh nháº¥t","socialImage":null}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"call-api-trong-vuejs-theo-cach-thong-minh-nhat"}}}