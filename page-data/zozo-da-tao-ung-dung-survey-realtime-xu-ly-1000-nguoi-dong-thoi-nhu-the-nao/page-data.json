{"componentChunkName":"component---src-templates-post-template-js","path":"/zozo-da-tao-ung-dung-survey-realtime-xu-ly-1000-nguoi-dong-thoi-nhu-the-nao","result":{"data":{"markdownRemark":{"id":"d0db0282-e8aa-5cc0-a801-03fedac84b24","html":"<p>Chắc hẳn nhiều người cũng đã từng làm 1 ứng dụng trả lời <strong>Survey</strong> bằng việc sử dụng thư viện hay service bên thứ 3 như Google Form.</p>\n<p>Nếu không có yêu cầu gì đặc biệt thì Google Form quả thực quá đủ. Nhưng mà để hiển thị kết quả <strong>Survey</strong> bằng realtime thì có lẽ Google Form không phải là sự lựa chọn hợp lý.</p>\n<p>Vậy cùng xem các kĩ sư ZOZO đã tạo ra ứng dụng <strong>Survey</strong> realtime như thế nào nhé.</p>\n<h2 id=\"bối-cảnh\"><a href=\"#b%E1%BB%91i-c%E1%BA%A3nh\" aria-label=\"bối cảnh permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Bối cảnh</h2>\n<p><a href=\"https://zozo.jp/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">ZOZO</a> là 1 trang web bán hàng online gần như lớn nhất Nhật Bản. Công ty được thành lập vào năm 1998, đến nay đã đạt hơn 1000 nhân viên.</p>\n<p>Đa số các công ty Nhật bản, họ thường tổ chức bữa tiệc tổng kết cuối năm để báo cáo tình hình tài chính, giới thiệu dịch vụ công ty đang vận hành đến toàn thể nhân viên.</p>\n<p>Và ZOZO cũng vậy. Vào buổi tổng kết cuối năm, họ quay video giới thiệu về dịch vụ trong công ty. Và mỗi khi kết thúc 1 phần nào đó trong video, họ tổ chức 1 cái <strong>Survey</strong> thăm dò ý kiến của toàn bộ nhân viên, và sẽ hiển thị kết quả ra màn hình 1 cách <strong>realtime</strong>. Và cái <strong>Survey</strong> này sẽ được chèn vào giữa các đoạn trong video.</p>\n<p>Đây là toàn bộ khung cảnh hội trường lúc đó. Công ty to có khác, hội trường trông hoành tráng quá.</p>\n<p><img src=\"https://nghethuatcoding.com/wp-content/uploads/2019/05/f33457d95132887df78803ef92bbebd4.jpg\"><img src=\"https://nghethuatcoding.com/wp-content/uploads/2019/05/5f4ad28ef59e9fadb92d7a1205df46e6.jpg\"> <img src=\"https://nghethuatcoding.com/wp-content/uploads/2019/05/ce1e3c4bfbafee31ab046d5a2a898f7d.jpg\"> <img src=\"https://nghethuatcoding.com/wp-content/uploads/2019/05/63dd434e4918b940ffa8e1de7bb63853.jpg\"> <img src=\"https://nghethuatcoding.com/wp-content/uploads/2019/05/409c41bdd3f24b4f84cb754db058d8c6.jpg\"></p>\n<h2 id=\"điều-kiện-khi-thực-hiện-survey\"><a href=\"#%C4%91i%E1%BB%81u-ki%E1%BB%87n-khi-th%E1%BB%B1c-hi%E1%BB%87n-survey\" aria-label=\"điều kiện khi thực hiện survey permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Điều kiện khi thực hiện Survey</h2>\n<p>Trước buổi tổng kết 2 tuần thì đã nhận được 1 số request từ bên admin như sau:</p>\n<ul>\n<li>Ở hội trường sẽ thực hiện <strong>làm survey ở trên web 1 cách realtime</strong>, <strong>kết quả thống kê</strong> sẽ <strong>hiển thị ngay lập tức</strong> trên màn hình hội trường.</li>\n<li>Câu trả lời chỉ có YES hoặc NO</li>\n<li>Có khoảng từ 7 đến 8 câu hỏi</li>\n<li>Có thể trả lời thông qua smartphone bằng cách quét mã QR Code</li>\n<li>Muốn hiển thị kết quả trên màn hình hội trường với UI dễ nhìn, bắt mắt.</li>\n<li>Câu hỏi và câu trả lời sẽ thực hiện giữa các đoạn video.</li>\n</ul>\n<h2 id=\"hướng-giải-quyết\"><a href=\"#h%C6%B0%E1%BB%9Bng-gi%E1%BA%A3i-quy%E1%BA%BFt\" aria-label=\"hướng giải quyết permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Hướng giải quyết</h2>\n<p>Sau khi nhận được 1 số request từ bên quản lý, các kĩ sư ZOZO đã đưa ra 1 số giải pháp như sau:</p>\n<ol>\n<li>Dùng tool  <a href=\"https://www.polly.ai/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Polly</a> trên Slack, mọi người vào đó trả lời Survey. Rồi thông qua Slack API sẽ thống kê và hiển thị kết quả lên màn hình.</li>\n</ol>\n<p>=> Ở công ty cũng có người không có account slack nên việc thực hiện là không thể. => Loại</p>\n<ol start=\"2\">\n<li>Dùng 1 dịch vụ của bên thứ 3 chuyên về Survey đó là  <a href=\"https://respon.jp/biz/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">respon</a>. Nhưng mà tool này lại không biết là có thể dễ dàng customize được hay không, với cả thời gian lần này chỉ có 2 tuần nên có thể sẽ không thể làm xong hoàn toàn được => Loại</li>\n<li>Team Frontend đang vận hành  <a href=\"https://zozo.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://zozo.com/</a> sẽ đảm nhiệm</li>\n</ol>\n<p>=> Vì team này đã từng có kinh nghiệm với Firebase, hơn nữa Firebase có thể thống kê kết quả realtime. Nên team đã quyết định chọn Firebase để giải quyết vấn đề này.</p>\n<h2 id=\"tổng-kết-lại-điều-kiện-khi-làm-survey\"><a href=\"#t%E1%BB%95ng-k%E1%BA%BFt-l%E1%BA%A1i-%C4%91i%E1%BB%81u-ki%E1%BB%87n-khi-l%C3%A0m-survey\" aria-label=\"tổng kết lại điều kiện khi làm survey permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Tổng kết lại điều kiện khi làm Survey</h2>\n<p>Sau khi chọn Firebase làm giải pháp chính, thì mình sẽ tổng hợp lại yêu cầu khi làm Survey như sau:</p>\n<ul>\n<li>Có tổng từ 7 đến 8 câu hỏi</li>\n<li>Chèn câu hỏi vào giữa các đoạn trong video</li>\n<li>Đáp án trả lời sẽ có 2 lựa chọn là YES và NO</li>\n<li>Có thể quyét mã QR code để hiển thị trang web Survey.</li>\n<li>Kết quả trả lời Survey sẽ được thống kê và hiển thị ra màn hình hội trường <strong>ngay lập tức</strong></li>\n<li>Khi chuyển sang câu hỏi tiếp theo sẽ không reload lại page</li>\n<li>Việc thay đổi câu hỏi sẽ được thực hiện thông qua màn hình quản lý</li>\n<li>Trên smartphone chỉ được trả lời 1 lần duy nhất, và không thể xoá</li>\n<li>Thời gian trả lời câu hỏi là 15s (Thời gian hiển thị câu hỏi là 10s, còn 5s sẽ hiển thị count down)</li>\n<li>Kết quả sẽ hiển thị tỉ lệ phần trăm của YES/NO</li>\n</ul>\n<h2 id=\"những-việc-cần-chuẩn-bị\"><a href=\"#nh%E1%BB%AFng-vi%E1%BB%87c-c%E1%BA%A7n-chu%E1%BA%A9n-b%E1%BB%8B\" aria-label=\"những việc cần chuẩn bị permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Những việc cần chuẩn bị</h2>\n<p>Để buổi tổng kết không có vấn đề gì xảy ra, các kĩ sư ZOZO đã tổng kết lại quy mô hệ thống và những việc cần thiết nên chuẩn bị như sau:</p>\n<ul>\n<li>Số lượng người tham gia: 1000 người</li>\n<li>Chuẩn bị mạng Internet có thể chịu được 1000 người</li>\n<li>Spec về độ phân giải màn hình: 1920×1080</li>\n<li>Số lượng màn hình: 4 màn hình</li>\n<li>Buổi hôm đó có thể demo được không? => Từ 15:00 có thể demo được từ 30~40p</li>\n<li>Thực hiện việc test tải hệ thống (với quy mô là 1000 người)</li>\n<li>Nếu có bug xảy ra thì làm thế nào? => Chuẩn bị 1 slide về toàn các câu hỏi, và nhờ mọi người làm trên đó.</li>\n<li>Thực hiện test việc hiển thị trên 1 số loại smartphone</li>\n</ul>\n<h2 id=\"công-nghệ-sử-dụng\"><a href=\"#c%C3%B4ng-ngh%E1%BB%87-s%E1%BB%AD-d%E1%BB%A5ng\" aria-label=\"công nghệ sử dụng permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Công nghệ sử dụng</h2>\n<p>Vì team Frontend ZOZO quyết định tự build lấy nên họ đã quyết định chọn 1 số công nghệ dưới đây:</p>\n<ul>\n<li>Data Management:  <a href=\"https://firebase.google.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Firebase</a></li>\n<li>Frontend:  <a href=\"https://vuejs.org/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Vuejs</a></li>\n<li>Animation khi hiển thị kết quả:  <a href=\"https://greensock.com/tweenmax\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Tweenmax</a></li>\n</ul>\n<h2 id=\"design-màn-hình\"><a href=\"#design-m%C3%A0n-h%C3%ACnh\" aria-label=\"design màn hình permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Design màn hình</h2>\n<p>ZOZO đã chuẩn bị ra 3 màn hình:</p>\n<ol>\n<li>Màn hình trả lời câu hỏi</li>\n<li>Mỗi người dùng sẽ trả lời câu hỏi trên smartphone</li>\n<li>Sẽ enable/disable màn hình khi câu hỏi bắt đầu và kết thúc</li>\n</ol>\n<p><img src=\"https://nghethuatcoding.com/wp-content/uploads/2019/05/005a97a8db3ff2a335f4079415a69b42.png\" alt=\"màn hình kết quả\"></p>\n<ol start=\"2\">\n<li>Màn hình kết quả</li>\n<li>Hiển thị câu hỏi và kết quả ra màn hình</li>\n</ol>\n<p><img src=\"https://nghethuatcoding.com/wp-content/uploads/2019/05/1dca8f55415351bed0d6a5f0a79d2868-1024x640.png\" alt=\"màn hình trả lời câu hỏi@2x\"></p>\n<ol start=\"3\">\n<li>Màn hình quản lý</li>\n<li>Màn hình dùng cho Admin thể thay đổi được câu hỏi</li>\n<li>Khi thay đổi câu hỏi thì cũng setting luôn thời gian kết thúc câu hỏi</li>\n</ol>\n<p><img src=\"https://nghethuatcoding.com/wp-content/uploads/2019/05/20190108164417.gif\"></p>\n<h2 id=\"setting-firebase\"><a href=\"#setting-firebase\" aria-label=\"setting firebase permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Setting Firebase</h2>\n<p><strong>Điều kiện:</strong> Cần phải có tài khoản Google.</p>\n<p>Đầu tiên cần login vào trong tài khoản Google, sau đó từ  <a href=\"https://console.firebase.google.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Firebase Console</a> sẽ tạo ra 1 project.</p>\n<ul>\n<li>Nhập tên project</li>\n<li>Check vào những mục điều khoản sau đó ấn vào nút Create Project</li>\n</ul>\n<p><img src=\"https://nghethuatcoding.com/wp-content/uploads/2019/05/create-project-firebase.png\"></p>\n<p>Sau khi tạo xong sẽ đi đến màn hình Project Dashboard.</p>\n<p>Mặc định thì đang dùng Plan là Spark. Với ứng dụng nào ít request thì mình thấy plan này cũng đủ dùng.</p>\n<p>Nhưng mà do quy mô lần này là 1000 người, nên để an toàn ZOZO đã quyết định dùng plan Blaze (Pay as you go - dùng đến đâu trả tiền đến đó)</p>\n<h2 id=\"setting-firestore\"><a href=\"#setting-firestore\" aria-label=\"setting firestore permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Setting FireStore</h2>\n<p>Tiếp theo mình sẽ đi cài đặt thằng FireStore.</p>\n<p>Ở menu bên trái màn hình, chọn <strong>Develop -> Database</strong></p>\n<p><img src=\"https://nghethuatcoding.com/wp-content/uploads/2019/05/create-firestore.png\"></p>\n<p>Về chỗ <strong>Security rules</strong>: Do lần này thực hiện ở trong công ty nên không cần để ý đến security cũng được. Do đó sẽ chọn <strong>Start in test mode</strong>.</p>\n<p>Sau khi tạo xong thì 1 database (Giống như RDS) đã được tạo ra. FireStore là NoSQL nên không cần thiết phải tạo schema.</p>\n<p>Bước tiếp theo mình sẽ liên kết với phần Web Application. Trong màn hình chính, chúng ta click vào cái nút &#x3C;/> ở trong hình ảnh bên dưới.</p>\n<p><img src=\"https://nghethuatcoding.com/wp-content/uploads/2019/05/e97885ffc2fa3bc5c4c28bd34544290d.png\" alt=\"liên kết với web application\"></p>\n<p>Và thực hiện theo các bước trong hình, cuối cùng chúng ta sẽ add cái đoạn javascript vào trong file src/main.js.</p>\n<p><img src=\"https://nghethuatcoding.com/wp-content/uploads/2019/05/Add-firebase-to-your-web-app.png\" alt=\"Add firebase to your web app\"></p>\n<p>Do ở phía Application mình vẫn chưa tạo, ở đây mình sẽ tạo bằng VueJs. Về cách tạo ứng dụng VueJS ở trên mạng khá nhiều nên ở đây mình sẽ không nói lại nữa. Các bạn có thể Google để tìm hiểu nhé.</p>\n<p>Sau khi có ứng dụng VueJS rồi thì bước tiếp theo là nhúng đoạn Javascript phía trên vào file src/main.js.</p>\n<p><img src=\"https://nghethuatcoding.com/wp-content/uploads/2019/05/add-firebase-javascript-to-html.jpg\" alt=\"add firebase javascript to html\"></p>\n<h2 id=\"setting-firebase-hosting\"><a href=\"#setting-firebase-hosting\" aria-label=\"setting firebase hosting permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Setting Firebase Hosting</h2>\n<p>Về hosting của web application, ZOZO cũng quyết định dùng luôn hosting của firebase.</p>\n<p>So với Firestore thì Firebase Hosting cài đặt khá đơn giản.</p>\n<p>Ở menu, chọn **Develop -> Hosting. **Sau đó ấn vào nút **Get Started **và thực hiện 1 số câu lệnh ở bên dưới màn hình.</p>\n<p><img src=\"https://nghethuatcoding.com/wp-content/uploads/2019/05/Setup-firebase-hosting.png\" alt=\"Setup firebase hosting\"> <img src=\"https://nghethuatcoding.com/wp-content/uploads/2019/05/setup-firebase-hosting-2.png\"></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ firebase login\n\n$ firebase init hosting</code></pre></div>\n<p>Sau khi thực hiện xong 2 câu lệnh trên thì chúng ta sẽ thấy 1 file được tạo ra đó là <strong>firebase.json.</strong> Trong file này thì **hosting.public **đó chính là đối tượng sẽ được deploy.</p>\n<p>Nhưng do VueJS đang sử dụng webpack để build, và thư mục sau khi build xong là <strong>dist</strong> nên trong <strong>firebase.json</strong> chúng ta sẽ chuyển <strong>hosting.public</strong> thành <strong>dist</strong>. Cụ thể sẽ như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">{\n  &quot;hosting&quot;: {\n    &quot;public&quot;: &quot;dist&quot;,\n    &quot;ignore&quot;: [\n      &quot;firebase.json&quot;,\n      &quot;**/.*&quot;,\n      &quot;**/node_modules/**&quot;\n    ],\n    &quot;rewrites&quot;: [\n      {\n        &quot;source&quot;: &quot;**&quot;,\n        &quot;destination&quot;: &quot;/index.html&quot;\n      }\n    ]\n  }\n}</code></pre></div>\n<p>Tiếp theo chúng ta cùng thực hiện deploy firebase nhé</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ npm run build\n\n$ firebase deploy</code></pre></div>\n<p>Sau khi deploy xong thì ở màn hình Hosting sẽ hiển thị ra domain đã được deploy, và có thể access được từ URL đó.</p>\n<p>Vậy việc cài đặt Firebase đến đây là kết thúc.</p>\n<h2 id=\"liên-kết-màn-hình-với-firestore\"><a href=\"#li%C3%AAn-k%E1%BA%BFt-m%C3%A0n-h%C3%ACnh-v%E1%BB%9Bi-firestore\" aria-label=\"liên kết màn hình với firestore permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Liên kết màn hình với Firestore</h2>\n<p>Tiếp theo chúng ta đến bước liên kết màn hình web với firestore nhé.</p>\n<p>Cấu trúc của FireStore sẽ đặt như sau:</p>\n<ul>\n<li>id của câu hỏi hiện tại</li>\n<li>thời gian kết thúc câu trả lời</li>\n<li>câu trả lời của người dùng</li>\n</ul>\n<p>・Thực tế cấu trúc dữ liệu không phải dạng JSON, nhưng để dễ hiểu mình sẽ viết lại dưới dạng JSON</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">{\n  &quot;questions&quot;: {\n    &quot;current&quot;: {\n      &quot;id&quot;: 1, // id câu hỏi hiện tại\n      &quot;endTime&quot;: 1545906141 // thời gian kết thúc câu trả lời\n    },\n  },\n  &quot;votes&quot;: { // câu trả lời của mỗi người dùng\n    &quot;001EjYAwtSMXlrWWTP5r&quot;: { // (ID mà Firestore đã sinh ra)\n      &quot;answerId&quot;: 0, // id câu trả lời\n      &quot;questionId&quot;: 2 // id câu hỏi\n    },\n    &quot;004gO0YzXUJ2bNFSbc5y&quot;: {\n      &quot;answerId&quot;: 1,\n      &quot;questionId&quot;: 3\n    },\n    .\n    .\n    .\n  }\n}</code></pre></div>\n<p>・Update dữ liệu tại màn hình kết quả</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import firebase from &#39;firebase&#39;\n\nexport default {\n  .\n  .\n  .\n  created() {\n    // this.db = firebase.firestore()\n    this.unsubscribe = this.db.collection(&#39;questions&#39;).doc(&#39;current&#39;)\n      .onSnapshot((doc) =&gt; {\n        const currentQuestion = doc.data()\n        // =&gt;\n        //   {\n        //     &quot;id&quot;: 1,\n        //     &quot;endTime&quot;: 1545906141\n        //   }\n      })\n  }\n  .\n  .\n  .\n}</code></pre></div>\n<p>・Câu trả lời của mỗi người dùng:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import firebase from &#39;firebase&#39;\n\nconst db = firebase.firestore()\nexport default {\n  .\n  .\n  .\n  created() {\n    // this.db = firebase.firestore()\n    this.db.collection(&#39;votes&#39;).onSnapshot((collection) =&gt; {\n      this.votes = collection.docChanges().reduce((votes, c) =&gt; {\n        const vote = c.doc.data()\n        // =&gt;\n        //   {\n        //     &quot;answerId&quot;: 0,\n        //     &quot;questionId&quot;: 2\n        //   }\n        return {\n          ...votes,\n          [vote.questionId]: [...(votes[vote.questionId] || []), vote]\n        }\n      }, this.votes)\n      // =&gt;\n      //   {\n      //     .\n      //     .\n      //     .\n      //     &quot;2&quot;: [ // thống kê dựa vào từng id của câu hỏi\n      //       {\n      //         &quot;answerId&quot;: 0,\n      //         &quot;questionId&quot;: 2\n      //       },\n      //       .\n      //       .\n      //       .\n      //     ],\n      //     &quot;3&quot;: [\n      //       {\n      //         &quot;answerId&quot;: 1,\n      //         &quot;questionId&quot;: 3\n      //       },\n      //       .\n      //       .\n      //       .\n      //     ],\n      //     .\n      //     .\n      //     .\n      //   }\n    })\n  }\n}</code></pre></div>\n<p>Tại màn hình kết quả sẽ đi thống kê dữ liệu dựa vào từng id câu hỏi. Đối với dữ liệu của câu trả lời, để làm tối thiểu cost nên ZOZO đã sử dụng hàm docChanges() để chỉ lấy cái sự khác nhau của từng kết quả.</p>\n<p>・ Ở màn hình Admin, sẽ tiến hành việc ghi dữ liệu câu hỏi vào trong FireStore</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import firebase from &#39;firebase&#39;\nimport moment from &#39;moment&#39;\n\nexport default {\n  .\n  .\n  .\n  methods: {\n    setQuestion() {\n      db.collection(&#39;questions&#39;).doc(&#39;current&#39;).set({\n        id: questionId,\n        endTime: moment().add(questionTime, &#39;second&#39;).unix()\n      })\n    }\n  }\n  .\n  .\n  .\n}</code></pre></div>\n<p>Ở màn hình Admin khi mà bắt đầu 1 câu hỏi, khi đó nó sẽ ghi question_id với endTime vào trong FireStore.</p>\n<p>Sau khi ghi vào FireStore xong, ngay lập tức sẽ gửi thông báo đến toàn bộ smartphone và thời gian bắt đầu câu hỏi sẽ được bắt đầu. Và khi thời gian kết thúc, màn hình hiển thị câu hỏi sẽ bị mất đi và sẽ đi đến màn hình kết quả.</p>\n<p>OK, vậy phần liên kết FireStore với màn hình đến đây đã xong.</p>\n<p>Và đây là phòng điều hành buổi tổng kết. Nhìn đã thấy sự chuyên nghiệp rồi. Đúng là nước ngoài có khác. Họ làm gì cũng thấy chuyên nghiệp</p>\n<p><img src=\"https://nghethuatcoding.com/wp-content/uploads/2019/05/050a68e18db83f3b801caf1d18998bd5.jpg\" alt=\"phòng điều hành buổi tổng kết cuối năm\"></p>\n<h2 id=\"về-pricing-của-firebase\"><a href=\"#v%E1%BB%81-pricing-c%E1%BB%A7a-firebase\" aria-label=\"về pricing của firebase permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Về Pricing của Firebase</h2>\n<p>Sau khi event kết thúc, vào màn hình Firebase để xác nhận xem mất bao nhiêu tiền.</p>\n<p><strong>0.02$</strong></p>\n<p>Làm đc 1 ứng dụng như vậy mà chỉ mất có 0.02$. Quá kinh khủng.</p>\n<h2 id=\"tổng-kết\"><a href=\"#t%E1%BB%95ng-k%E1%BA%BFt\" aria-label=\"tổng kết permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Tổng kết</h2>\n<p>Nếu bạn nào đang có ý định làm 1 ứng dụng trả lời survey realtime thì có thể tham khảo bài viết này nhé.</p>\n<p>Chúc các bạn thành công.</p>\n<p>==============</p>\n<p>Để nhận thông báo khi có bài viết mới nhất thì các bạn có thể like fanpage của mình ở bên dưới nhé:</p>\n<p>👉👉👉 <a href=\"https://www.facebook.com/669339543503374\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Nghệ thuật Coding Fanpage Facebook</a></p>\n<p>Chúc các bạn 1 tuần thật vui vẻ.</p>","fields":{"slug":"zozo-da-tao-ung-dung-survey-realtime-xu-ly-1000-nguoi-dong-thoi-nhu-the-nao","tagSlugs":null},"frontmatter":{"date":"2019-05-04T03:27:26.000Z","description":null,"tags":null,"title":"Các kĩ sư ZOZO đã tạo ứng dụng Survey realtime xử lý 1000 người đồng thời như thế nào","socialImage":null}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"zozo-da-tao-ung-dung-survey-realtime-xu-ly-1000-nguoi-dong-thoi-nhu-the-nao"}}}