<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title><![CDATA[Nghệ Thuật Coding]]></title><description><![CDATA[Chia sẻ những kinh nghiệm, kiến thức, các case study giúp mọi người có thể tạo ra những service chuyên nghiệp hơn]]></description><link>https://nghethuatcoding.com</link><generator>GatsbyJS</generator><lastBuildDate>Sun, 10 May 2020 13:53:39 GMT</lastBuildDate><item><title><![CDATA[6 câu lệnh linux hay dùng trong phân tích log]]></title><description><![CDATA[Hôm nay mình chia sẻ cho mọi người 1 số câu lệnh linux mình hay dùng trong phân tích log trên server.]]></description><link>https://nghethuatcoding.com2020/05/10/cau-lenh-linux-hay-dung-trong-phan-tich-log</link><guid isPermaLink="false">https://nghethuatcoding.com2020/05/10/cau-lenh-linux-hay-dung-trong-phan-tich-log</guid><pubDate>Sun, 10 May 2020 22:10:30 GMT</pubDate><content:encoded>&lt;p&gt;Hôm nay mình chia sẻ cho mọi người 1 số câu lệnh linux mình hay dùng trong phân tích log trên server.&lt;/p&gt;
&lt;h1 id=&quot;1-các-usecase-hay-dùng&quot;&gt;&lt;a href=&quot;#1-c%C3%A1c-usecase-hay-d%C3%B9ng&quot; aria-label=&quot;1 các usecase hay dùng permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;1. Các usecase hay dùng&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;Muốn điều tra nguyên nhân khi số lượng access đến server tăng dột biến&lt;/li&gt;
&lt;li&gt;Đã phát hiện trên server có lỗ hổng và muốn điều tra xem đã có ai xâm nhập vào hay chưa&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;2-các-câu-lệnh-linux-hay-dùng&quot;&gt;&lt;a href=&quot;#2-c%C3%A1c-c%C3%A2u-l%E1%BB%87nh-linux-hay-d%C3%B9ng&quot; aria-label=&quot;2 các câu lệnh linux hay dùng permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;2. Các câu lệnh linux hay dùng&lt;/h1&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Command line&lt;/th&gt;
&lt;th&gt;Giải thích&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;grep&lt;/td&gt;
&lt;td&gt;Tìm các dòng chứa chuỗi được chỉ định&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;awk&lt;/td&gt;
&lt;td&gt;Phân tách cột và tìm kiếm hàng có điều kiện&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;sort&lt;/td&gt;
&lt;td&gt;Sắp xếp dòng&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;uniq&lt;/td&gt;
&lt;td&gt;Loại bỏ các hàng trùng lặp và đếm&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;wc&lt;/td&gt;
&lt;td&gt;Đếm số ký tự, số dòng&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;sed&lt;/td&gt;
&lt;td&gt;Thay thế điều kiện quy định&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h1 id=&quot;3-đối-tượng-phân-tích&quot;&gt;&lt;a href=&quot;#3-%C4%91%E1%BB%91i-t%C6%B0%E1%BB%A3ng-ph%C3%A2n-t%C3%ADch&quot; aria-label=&quot;3 đối tượng phân tích permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;3. Đối tượng phân tích&lt;/h1&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;# access_log

203.0.113.1 - - [03/May/2020:12:00:00 +0900] &amp;quot;GET /index.html HTTP/1.1&amp;quot; 200 1000 &amp;quot;http://example.com/&amp;quot; &amp;quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64)&amp;quot;
203.0.113.1 - - [03/May/2020:12:10:00 +0900] &amp;quot;GET /index.html HTTP/1.1&amp;quot; 200 1000 &amp;quot;http://example.com/&amp;quot; &amp;quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64)&amp;quot;
203.0.113.2 - - [03/May/2020:12:20:00 +0900] &amp;quot;GET /index.html HTTP/1.1&amp;quot; 200 1000 &amp;quot;http://example.com/&amp;quot; &amp;quot;Mozilla/5.0 (Windows NT 6.3; Win64; x64)&amp;quot;
203.0.113.2 - - [03/May/2020:12:30:00 +0900] &amp;quot;GET /index.html HTTP/1.1&amp;quot; 200 1000 &amp;quot;http://example.com/&amp;quot; &amp;quot;Mozilla/5.0 (Windows NT 6.3; Win64; x64)&amp;quot;
203.0.113.2 - - [03/May/2020:12:40:00 +0900] &amp;quot;GET /index.html HTTP/1.1&amp;quot; 200 1000 &amp;quot;http://example.com/&amp;quot; &amp;quot;Mozilla/5.0 (Windows NT 6.3; Win64; x64)&amp;quot;
198.51.100.3 - - [03/May/2020:12:50:00 +0900] &amp;quot;GET /index.cgi?page=&amp;lt;Script&amp;gt;alert(&amp;#39;Evil&amp;#39;)&amp;lt;/Script&amp;gt; HTTP/1.1&amp;quot; 200 3000 &amp;quot;-&amp;quot; &amp;quot;Evil User Agent&amp;quot;
198.51.100.3 - - [03/May/2020:13:00:00 +0900] &amp;quot;GET /../../../../../etc/shadow HTTP/1.1&amp;quot; 200 3000 &amp;quot;-&amp;quot; &amp;quot;Evil User Agent&amp;quot;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Trong đó:  &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;203.0.113.0/24 là địa chỉ ip đúng từ người dùng&lt;/li&gt;
&lt;li&gt;198.51.100.0/24 là địa chỉ ip từ nguồn đáng ngờ&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;4-áp-dụng&quot;&gt;&lt;a href=&quot;#4-%C3%A1p-d%E1%BB%A5ng&quot; aria-label=&quot;4 áp dụng permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;4. Áp dụng&lt;/h1&gt;
&lt;h2 id=&quot;41-tìm-kiếm-đặc-biệt-grep&quot;&gt;&lt;a href=&quot;#41-t%C3%ACm-ki%E1%BA%BFm-%C4%91%E1%BA%B7c-bi%E1%BB%87t-grep&quot; aria-label=&quot;41 tìm kiếm đặc biệt grep permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;4.1. Tìm kiếm đặc biệt (grep)&lt;/h2&gt;
&lt;h3 id=&quot;・điều-tra-cuộc-tấn-công-vào-thư-mục&quot;&gt;&lt;a href=&quot;#%E3%83%BB%C4%91i%E1%BB%81u-tra-cu%E1%BB%99c-t%E1%BA%A5n-c%C3%B4ng-v%C3%A0o-th%C6%B0-m%E1%BB%A5c&quot; aria-label=&quot;・điều tra cuộc tấn công vào thư mục permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;・Điều tra cuộc tấn công vào thư mục&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;$ grep -n &amp;quot;\.\.&amp;quot; access_log
7:198.51.100.3 - - [03/May/2020:13:00:00 +0900] &amp;quot;GET /../../../../../etc/shadow HTTP/1.1&amp;quot; 200 3000 &amp;quot;-&amp;quot; &amp;quot;Evil User Agent&amp;quot;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;・điều-tra-chèn-script-đáng-ngờ&quot;&gt;&lt;a href=&quot;#%E3%83%BB%C4%91i%E1%BB%81u-tra-ch%C3%A8n-script-%C4%91%C3%A1ng-ng%E1%BB%9D&quot; aria-label=&quot;・điều tra chèn script đáng ngờ permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;・Điều tra chèn script đáng ngờ&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;$ grep -i &amp;quot;&amp;lt;script&amp;gt;&amp;quot; --color access_log
198.51.100.3 - - [03/May/2020:12:50:00 +0900] &amp;quot;GET /index.cgi?page=&amp;lt;Script&amp;gt;alert(&amp;#39;Evil&amp;#39;)&amp;lt;/Script&amp;gt; HTTP/1.1&amp;quot; 200 3000 &amp;quot;-&amp;quot; &amp;quot;Evil User Agent&amp;quot;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;・điều-tra-chèn-thẻ-tag-html-đáng-ngờ&quot;&gt;&lt;a href=&quot;#%E3%83%BB%C4%91i%E1%BB%81u-tra-ch%C3%A8n-th%E1%BA%BB-tag-html-%C4%91%C3%A1ng-ng%E1%BB%9D&quot; aria-label=&quot;・điều tra chèn thẻ tag html đáng ngờ permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;・Điều tra chèn thẻ tag html đáng ngờ&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;$ grep -E &amp;quot;&amp;lt;[^&amp;gt;]+&amp;gt;[^&amp;lt;]+&amp;lt;[^&amp;gt;]+&amp;gt;&amp;quot; -o access_log
&amp;lt;Script&amp;gt;alert(&amp;#39;Evil&amp;#39;)&amp;lt;/Script&amp;gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Giải thích về option trong grep:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;option&lt;/th&gt;
&lt;th&gt;Giải thích&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;-n&lt;/td&gt;
&lt;td&gt;Hiển thị số dòng của dòng match&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-i&lt;/td&gt;
&lt;td&gt;Không phân biệt chữ hoa và chữ thường&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;—color&lt;/td&gt;
&lt;td&gt;Hiển thị màu đối với từ đã match&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-o&lt;/td&gt;
&lt;td&gt;Hiển thị phần đã match&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-E&lt;/td&gt;
&lt;td&gt;Sử dụng biểu thức regex&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&quot;42-loại-bỏ-log-không-cần-thiết&quot;&gt;&lt;a href=&quot;#42-lo%E1%BA%A1i-b%E1%BB%8F-log-kh%C3%B4ng-c%E1%BA%A7n-thi%E1%BA%BFt&quot; aria-label=&quot;42 loại bỏ log không cần thiết permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;4.2. Loại bỏ log không cần thiết&lt;/h2&gt;
&lt;h3 id=&quot;・loại-bỏ-log-từ-nguồn-chuẩn&quot;&gt;&lt;a href=&quot;#%E3%83%BBlo%E1%BA%A1i-b%E1%BB%8F-log-t%E1%BB%AB-ngu%E1%BB%93n-chu%E1%BA%A9n&quot; aria-label=&quot;・loại bỏ log từ nguồn chuẩn permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;・Loại bỏ log từ nguồn chuẩn&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;$ grep -v &amp;quot;203.0.113.&amp;quot; access_log
198.51.100.3 - - [03/May/2020:12:50:00 +0900] &amp;quot;GET /index.cgi?page=&amp;lt;Script&amp;gt;alert(&amp;#39;Evil&amp;#39;)&amp;lt;/Script&amp;gt; HTTP/1.1&amp;quot; 200 3000 &amp;quot;-&amp;quot; &amp;quot;Evil User Agent&amp;quot;
198.51.100.3 - - [03/May/2020:13:00:00 +0900] &amp;quot;GET /../../../../../etc/shadow HTTP/1.1&amp;quot; 200 3000 &amp;quot;-&amp;quot; &amp;quot;Evil User Agent&amp;quot;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Giải thích về option trong grep:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;option&lt;/th&gt;
&lt;th&gt;Giải thích&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;-v&lt;/td&gt;
&lt;td&gt;Không hiển thị dòng match&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&quot;43-trích-xuất-phần-tửawk&quot;&gt;&lt;a href=&quot;#43-tr%C3%ADch-xu%E1%BA%A5t-ph%E1%BA%A7n-t%E1%BB%ADawk&quot; aria-label=&quot;43 trích xuất phần tửawk permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;4.3. Trích xuất phần tử(awk)&lt;/h2&gt;
&lt;h3 id=&quot;・trích-xuất-ra-địa-chỉ-ip-client&quot;&gt;&lt;a href=&quot;#%E3%83%BBtr%C3%ADch-xu%E1%BA%A5t-ra-%C4%91%E1%BB%8Ba-ch%E1%BB%89-ip-client&quot; aria-label=&quot;・trích xuất ra địa chỉ ip client permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;・Trích xuất ra địa chỉ ip client&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;$ awk &amp;#39;{print $1}&amp;#39; access_log 
203.0.113.1
203.0.113.1
203.0.113.2
203.0.113.2
203.0.113.2
198.51.100.3
198.51.100.3&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;・trích-xuất-ra-user-agent-của-client&quot;&gt;&lt;a href=&quot;#%E3%83%BBtr%C3%ADch-xu%E1%BA%A5t-ra-user-agent-c%E1%BB%A7a-client&quot; aria-label=&quot;・trích xuất ra user agent của client permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;・Trích xuất ra User Agent của client&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;$ awk -F[\&amp;quot;] &amp;#39;{print $6}&amp;#39; access_log 
Mozilla/5.0 (Windows NT 10.0; Win64; x64)
Mozilla/5.0 (Windows NT 10.0; Win64; x64)
Mozilla/5.0 (Windows NT 6.3; Win64; x64)
Mozilla/5.0 (Windows NT 6.3; Win64; x64)
Mozilla/5.0 (Windows NT 6.3; Win64; x64)
Evil User Agent
Evil User Agent&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Giải thích về option trong awk:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;option&lt;/th&gt;
&lt;th&gt;Giải thích&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;{print $1}&lt;/td&gt;
&lt;td&gt;Hiển thị ra cột đầu tiên được phân tách bằng dấu phân cách&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-F&lt;/td&gt;
&lt;td&gt;Chỉ định dấu phân cách (mặc định là khoảng trắng)&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&quot;44-thống-kê-và-sắp-xếp-sortuniqwc&quot;&gt;&lt;a href=&quot;#44-th%E1%BB%91ng-k%C3%AA-v%C3%A0-s%E1%BA%AFp-x%E1%BA%BFp-sortuniqwc&quot; aria-label=&quot;44 thống kê và sắp xếp sortuniqwc permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;4.4. Thống kê và sắp xếp (sort/uniq/wc)&lt;/h2&gt;
&lt;h3 id=&quot;・hiển-thị-ra-số-lượng-của-mỗi-địa-chỉ-ip-client&quot;&gt;&lt;a href=&quot;#%E3%83%BBhi%E1%BB%83n-th%E1%BB%8B-ra-s%E1%BB%91-l%C6%B0%E1%BB%A3ng-c%E1%BB%A7a-m%E1%BB%97i-%C4%91%E1%BB%8Ba-ch%E1%BB%89-ip-client&quot; aria-label=&quot;・hiển thị ra số lượng của mỗi địa chỉ ip client permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;・Hiển thị ra số lượng của mỗi địa chỉ ip client&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;$ awk &amp;#39;{print $1}&amp;#39; access_log | sort | uniq -c | sort -rn
      3 203.0.113.2
      2 203.0.113.1
      2 198.51.100.3&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;・tổng-số-lượng-của-địa-chỉ-duy-nhất-ip-client&quot;&gt;&lt;a href=&quot;#%E3%83%BBt%E1%BB%95ng-s%E1%BB%91-l%C6%B0%E1%BB%A3ng-c%E1%BB%A7a-%C4%91%E1%BB%8Ba-ch%E1%BB%89-duy-nh%E1%BA%A5t-ip-client&quot; aria-label=&quot;・tổng số lượng của địa chỉ duy nhất ip client permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;・Tổng số lượng của địa chỉ duy nhất ip client&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;$ awk &amp;#39;{print $1}&amp;#39; access_log | sort | uniq | wc -l
3&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Giải thích:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;command line, option&lt;/th&gt;
&lt;th&gt;Giải thích&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;uniq -c&lt;/td&gt;
&lt;td&gt;Hiển thị số trùng lặp (yêu cầu sắp xếp để so sánh trước và sau)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;sort -n&lt;/td&gt;
&lt;td&gt;Sắp xếp các trường số theo giá trị số học&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;sort -r&lt;/td&gt;
&lt;td&gt;Sắp xếp theo thứ tự giảm dần (mặc định là thứ tự tăng dần)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;wc -l&lt;/td&gt;
&lt;td&gt;Hiển thị ra số dòng&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&quot;45-thay-thế-sed&quot;&gt;&lt;a href=&quot;#45-thay-th%E1%BA%BF-sed&quot; aria-label=&quot;45 thay thế sed permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;4.5. Thay thế (sed)&lt;/h2&gt;
&lt;h3 id=&quot;・ẩn-danh-địa-chỉ-ip-nguồn-để-truy-cập-bình-thường&quot;&gt;&lt;a href=&quot;#%E3%83%BB%E1%BA%A9n-danh-%C4%91%E1%BB%8Ba-ch%E1%BB%89-ip-ngu%E1%BB%93n-%C4%91%E1%BB%83-truy-c%E1%BA%ADp-b%C3%ACnh-th%C6%B0%E1%BB%9Dng&quot; aria-label=&quot;・ẩn danh địa chỉ ip nguồn để truy cập bình thường permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;・Ẩn danh địa chỉ IP nguồn để truy cập bình thường&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;$ sed &amp;quot;s/203\.0\.113\.[0-9]\{1\,3\}/xxx.xxx.xxx.xxx/g&amp;quot; access_log
xxx.xxx.xxx.xxx - - [03/May/2020:12:00:00 +0900] &amp;quot;GET /index.html HTTP/1.1&amp;quot; 200 1000 &amp;quot;http://example.com/&amp;quot; &amp;quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64)&amp;quot;
xxx.xxx.xxx.xxx - - [03/May/2020:12:10:00 +0900] &amp;quot;GET /index.html HTTP/1.1&amp;quot; 200 1000 &amp;quot;http://example.com/&amp;quot; &amp;quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64)&amp;quot;
xxx.xxx.xxx.xxx - - [03/May/2020:12:20:00 +0900] &amp;quot;GET /index.html HTTP/1.1&amp;quot; 200 1000 &amp;quot;http://example.com/&amp;quot; &amp;quot;Mozilla/5.0 (Windows NT 6.3; Win64; x64)&amp;quot;
xxx.xxx.xxx.xxx - - [03/May/2020:12:30:00 +0900] &amp;quot;GET /index.html HTTP/1.1&amp;quot; 200 1000 &amp;quot;http://example.com/&amp;quot; &amp;quot;Mozilla/5.0 (Windows NT 6.3; Win64; x64)&amp;quot;
xxx.xxx.xxx.xxx - - [03/May/2020:12:40:00 +0900] &amp;quot;GET /index.html HTTP/1.1&amp;quot; 200 1000 &amp;quot;http://example.com/&amp;quot; &amp;quot;Mozilla/5.0 (Windows NT 6.3; Win64; x64)&amp;quot;
198.51.100.3 - - [03/May/2020:12:50:00 +0900] &amp;quot;GET /index.cgi?page=&amp;lt;Script&amp;gt;alert(&amp;#39;Evil&amp;#39;)&amp;lt;/Script&amp;gt; HTTP/1.1&amp;quot; 200 3000 &amp;quot;-&amp;quot; &amp;quot;Evil User Agent&amp;quot;
198.51.100.3 - - [03/May/2020:13:00:00 +0900] &amp;quot;GET /../../../../../etc/shadow HTTP/1.1&amp;quot; 200 3000 &amp;quot;-&amp;quot; &amp;quot;Evil User Agent&amp;quot;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Giải thích:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;option&lt;/th&gt;
&lt;th&gt;Giải thích&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;s/string A/string B/g&lt;/td&gt;
&lt;td&gt;Thay chuỗi A bằng chuỗi B. Thay thế tất cả bằng cách thêm g.&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h1 id=&quot;kết-luận&quot;&gt;&lt;a href=&quot;#k%E1%BA%BFt-lu%E1%BA%ADn&quot; aria-label=&quot;kết luận permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Kết luận&lt;/h1&gt;
&lt;p&gt;Nếu sử dụng 6 câu lệnh mình bảo bên trên thì chúng ta có thể phân tích log 1 cách dễ dàng.&lt;/p&gt;
&lt;p&gt;Hơn nữa, thông thường hay sử dụng kí tự pipe line | để phân tích log 1 cách hiệu quả hơn.&lt;/p&gt;
&lt;p&gt;Ví dụ:  &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;$ grep -v &amp;quot;203.0.113.&amp;quot; access_log | awk &amp;#39;{print $1}&amp;#39; | sort | uniq -c | sort -rn
      2 198.51.100.3&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;==============&lt;/p&gt;
&lt;p&gt;Để nhận thông báo khi có bài viết mới nhất thì các bạn có thể like fanpage của mình ở bên dưới nhé:&lt;/p&gt;
&lt;p&gt;→→→ &lt;a href=&quot;https://www.facebook.com/669339543503374&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Nghệ thuật Coding Fanpage Facebook&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Toàn tập về startup - Burn Rate]]></title><description><![CDATA[Hôm nay mình chia sẻ cho mọi người 1 số kiến thức cơ bản về startup, đặc biệt là 1 số khái niêm cơ bản về nguồn tiền trong startup...]]></description><link>https://nghethuatcoding.com2020/05/09/toan-tap-ve-startup-burnrate</link><guid isPermaLink="false">https://nghethuatcoding.com2020/05/09/toan-tap-ve-startup-burnrate</guid><pubDate>Sat, 09 May 2020 12:20:30 GMT</pubDate><content:encoded>&lt;p&gt;Hôm nay mình chia sẻ cho mọi người 1 số kiến thức cơ bản về startup, đặc biệt là 1 số thuật ngữ cơ bản về nguồn tiền trong startup, các từ ngữ hay dùng giữa nhà đầu tư và nhà khởi nghiệp.
Khi nào thì cần thêm vốn đầu tư…&lt;/p&gt;
&lt;p&gt;Mình sẽ cố gắng chia sẻ theo nhiều bài nhỏ. Ai đọc cũng có thể hiểu được.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;/2020/05/09/toan-tap-ve-startup-burnrate&quot;&gt;Burn Rate&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Lợi nhuận (Revenue &amp;#x26; MRR &amp;#x26; SaaS Quick Ratio) &lt;/li&gt;
&lt;li&gt;Lợi nhuận với tỉ lệ lợi nhuận (Profit &amp;#x26; Margin) &lt;/li&gt;
&lt;li&gt;Churn Rate &lt;/li&gt;
&lt;li&gt;Unit Economics (CAC &amp;#x26; LTV) &lt;/li&gt;
&lt;li&gt;Tỉ lệ tăng trưởng (MoM &amp;#x26; CMGR) &lt;/li&gt;
&lt;li&gt;Tổng hợp &lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Đầu tiên mình sẽ đi vào phần đầu tiên là Burn Rate nhé.&lt;/p&gt;
&lt;h2 id=&quot;burn-rate-là-gì&quot;&gt;&lt;a href=&quot;#burn-rate-l%C3%A0-g%C3%AC&quot; aria-label=&quot;burn rate là gì permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Burn Rate là gì?&lt;/h2&gt;
&lt;p&gt;Burn Rate là 1 chỉ số về số tiền mà bạn đã chi tiêu trong tháng. Hay nói cách khác nó còn gọi là tỉ lệ đốt tiền hàng tháng.&lt;/p&gt;
&lt;p&gt;Burn Rate có 2 loại. Là Gross Burn Rate và Net Burn Rate. &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Gross Burn Rate: Số tiền thực tế đã chi tiêu trong 1 tháng (ví dụ tiền trả lương nhân viên, tiền thuê server …)&lt;/li&gt;
&lt;li&gt;Net Burn Rate: Số tiền 1 tháng nhận được sau khi đã trừ đi doanh thu của tháng đó&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 960px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/67e6ef2bc1d9b042e3f74157adebdd4f/2f8d2/Burn_Rate.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 58.82352941176471%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAABSklEQVQoz4VTi26DMAzk/3+OTki0k0ZLR6tODBivlOZ5cwK0gECNZAVjc7bvjIeVY8x4G/fc32bDN5NcA+8dGD1NowsfMzB7vBFkaSOA0AAnE4NJ6/MHmqZBVVWo63oG7Jnn19MRemPCoJPAb5ricPgEYwyKIin5QRBgv9/jfD6jKAoqwqcdGnDKtMnWXDfK4E5gd3KuPymiOEGa/7l427bIsgx5nkMpBSEEtNYjoIGmhhiXuF4u+E4SVDROQ2CdXOdr6wyiDIA0Xs06Z+whXXdc9RRI3edIpR2/tpvRloW8uaKvowihpSJWEE5ARdU86SjLEnEc43Q6Of4s8HNtpqK8JO6DtktGiAnR4O8+kBFnNvoVRdj5Po7HI8IwxO12m468tTZ9ITv2nfjthHK3sqNL6cRY7uCbxd4SwKwKNONwHXT9N1t/9+rwH9IVr6ERGxF6AAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/67e6ef2bc1d9b042e3f74157adebdd4f/01472/Burn_Rate.webp 240w,
/static/67e6ef2bc1d9b042e3f74157adebdd4f/222bd/Burn_Rate.webp 480w,
/static/67e6ef2bc1d9b042e3f74157adebdd4f/620b9/Burn_Rate.webp 960w,
/static/67e6ef2bc1d9b042e3f74157adebdd4f/bdd6f/Burn_Rate.webp 1360w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/67e6ef2bc1d9b042e3f74157adebdd4f/0783d/Burn_Rate.png 240w,
/static/67e6ef2bc1d9b042e3f74157adebdd4f/782f4/Burn_Rate.png 480w,
/static/67e6ef2bc1d9b042e3f74157adebdd4f/f570d/Burn_Rate.png 960w,
/static/67e6ef2bc1d9b042e3f74157adebdd4f/2f8d2/Burn_Rate.png 1360w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/png&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/67e6ef2bc1d9b042e3f74157adebdd4f/f570d/Burn_Rate.png&quot;
          alt=&quot;Burn Rate&quot;
          title=&quot;Burn Rate&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Thông thường khi mà nói đến Burn Rate tức là nói đến Net Burn Rate nhé. Công thức tính Net Burn Rate sẽ được tính như sau:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;Net Burn Rate = Gross Burn Rate - Revenue (doanh thu 1 tháng)&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Ví dụ:
Tổng số tiền chi trong 1 tháng hết 1000\$. Số tiền doanh thu kiếm được tháng đó được 200\$.
-&gt; Vậy Net Burn Rate = 1000 - 200 = 800$&lt;/p&gt;
&lt;h2 id=&quot;burn-rate-với-huy-động-vốn-có-liên-quan-gì&quot;&gt;&lt;a href=&quot;#burn-rate-v%E1%BB%9Bi-huy-%C4%91%E1%BB%99ng-v%E1%BB%91n-c%C3%B3-li%C3%AAn-quan-g%C3%AC&quot; aria-label=&quot;burn rate với huy động vốn có liên quan gì permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Burn Rate với huy động vốn có liên quan gì?&lt;/h2&gt;
&lt;p&gt;Burn Rate với huy động vốn có liên quan như bảng dưới đây.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 960px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/635ca9549f0003b172299c3189664335/2f8d2/huy_dong_von2.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 58.82352941176471%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAABxUlEQVQoz32Ta2/aMBSG8/9/Sj9PU/etq/ZhKkOqUmAU0kAupeQOiUlsx84720lot1EiHfly7Mfn8saaz+eYzWawbRtlWUJ/XdcZu/Zd8us9K01TEEKMUUr/Ao6XLq3HkTFm7kkpzZ6lN669fGn9ER6EIZ5XKwghemDTNIZ+LSLt11Hos93gl7L3bTKGB58M57oe+FlEHx94Xq3hed67bxiXUYOviwJC9gEYoLaqqtC27X9QOcynwQnbnJt501AwruaSY/FG8G15AGv7LE0NsyzDYrkEZ3QM7ZzyCLxzjpio1ETL4fs+Jr+m8N01pm5sgFwMwJZTFI3A95cKVHSomThDdGJjrX64JR68ChUVJr00SVSEDPauxu3v4h0oFXBfctw8ZoirFm/KYiJQsQ5cKUEO6DunxE8FTEmL7KT8NcXxxHD/UuLLvAATg2y46l56JJi4KeIDgR8V2O5zeMr0GEQ5cuW3/QJOTFAQhqSkiA41jk0LJ6nxFJamhlrLVl8rRe/6kOv6hN3uFdvNRnV1iyjaK8kw49cl6BumSqF0l+cZwsDHaxggUSXQ0rL+lcGnv1rfq7MCdDO1jBzHwWq9huu6Ril/AJ1NoQxwHREVAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/635ca9549f0003b172299c3189664335/01472/huy_dong_von2.webp 240w,
/static/635ca9549f0003b172299c3189664335/222bd/huy_dong_von2.webp 480w,
/static/635ca9549f0003b172299c3189664335/620b9/huy_dong_von2.webp 960w,
/static/635ca9549f0003b172299c3189664335/bdd6f/huy_dong_von2.webp 1360w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/635ca9549f0003b172299c3189664335/0783d/huy_dong_von2.png 240w,
/static/635ca9549f0003b172299c3189664335/782f4/huy_dong_von2.png 480w,
/static/635ca9549f0003b172299c3189664335/f570d/huy_dong_von2.png 960w,
/static/635ca9549f0003b172299c3189664335/2f8d2/huy_dong_von2.png 1360w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/png&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/635ca9549f0003b172299c3189664335/f570d/huy_dong_von2.png&quot;
          alt=&quot;huy dong von2&quot;
          title=&quot;huy dong von2&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Đại đa số với giai đoạn đầu của startup thì tỉ lệ Burn Rate đều khá cao (vì hầu như chưa có doanh thu).&lt;/p&gt;
&lt;p&gt;Khoản phải chi lớn hơn rất nhiều so với khoản thu được nên dẫn đến tiền vốn cũng càng ngày càng ít đi.
Sau khi gần hết tiền thì việc huy động vốn là vô cùng quan trọng.&lt;/p&gt;
&lt;p&gt;Giai đoạn tiếp theo sau khi bắt đầu có doanh thu thì lúc này Burn Rate dần dần tiến đến 0. Và khi có lợi nhuận thì Burn Rate &gt; 0&lt;/p&gt;
&lt;p&gt;Mặc dù đã có lãi nhưng để tăng trưởng nhanh hơn nữa thì nhiều công ty startup vẫn tiếp tục huy động vốn.&lt;/p&gt;
&lt;p&gt;Sau khi đã nắm bắt được tỉ lệ Burn Rate thì từ đó có thể biết được công ty của chúng ta sẽ kéo dài được bao nhiêu tháng. Công thức đơn giản sẽ như sau:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;Số tháng có thể kéo dài = Tiền còn lại trong tài khoản ngân hàng / Net Burn Rate&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;burn-rate-với-doanh-thu-hàng-tháng&quot;&gt;&lt;a href=&quot;#burn-rate-v%E1%BB%9Bi-doanh-thu-h%C3%A0ng-th%C3%A1ng&quot; aria-label=&quot;burn rate với doanh thu hàng tháng permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Burn Rate với doanh thu hàng tháng&lt;/h2&gt;
&lt;p&gt;Burn Rate và doanh thu có quan hệ như sau:&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 960px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/e25d8139fc587195012cac8b5ba11951/2f8d2/Burn%20Rate%20vs%20Revenue.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 39.705882352941174%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAABU0lEQVQoz11Si27DIAzk/39v06Rq6qY26fIGAgGS8LgZEqndkBwTnw13NiwBCGQ+b84VU0KMFKdYfIaRU1JMILjk57r4itGH9XzG2+cdH98P3B4N2mHC5gP04vB+rXCtO9Q/Leqmg1BLKe5GSViNy63BtWrQjxz9JBCIBZtnib5tMAsOPk2QUpQiv3vwcYDgU4lrpTK9gjlrIQXlUo3WGiEExBAKxlJ60XpS995T0lNs07Zwbi3yPLGP8ahZSfflqwLXtrDzdChrh5EkEGWhMJItdiV2Gyz5UcwQ2kDpBTP5gdqjFgtzYlwZaOOgzArtdhi3gZl1Lz1quSrebp4Y5NsSKvqfpCpscl8HLuEI34nZnfot6ZK8LJ0xTrxgLJ4T8/GYmCFpXIhDGo5J57bkyZfJ5imThRM7pEdkYtmzc+Av9u8d0CY9A0cs/c3Pl+0hld7+AmM3bk258UMgAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/e25d8139fc587195012cac8b5ba11951/01472/Burn%20Rate%20vs%20Revenue.webp 240w,
/static/e25d8139fc587195012cac8b5ba11951/222bd/Burn%20Rate%20vs%20Revenue.webp 480w,
/static/e25d8139fc587195012cac8b5ba11951/620b9/Burn%20Rate%20vs%20Revenue.webp 960w,
/static/e25d8139fc587195012cac8b5ba11951/bdd6f/Burn%20Rate%20vs%20Revenue.webp 1360w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/e25d8139fc587195012cac8b5ba11951/0783d/Burn%20Rate%20vs%20Revenue.png 240w,
/static/e25d8139fc587195012cac8b5ba11951/782f4/Burn%20Rate%20vs%20Revenue.png 480w,
/static/e25d8139fc587195012cac8b5ba11951/f570d/Burn%20Rate%20vs%20Revenue.png 960w,
/static/e25d8139fc587195012cac8b5ba11951/2f8d2/Burn%20Rate%20vs%20Revenue.png 1360w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/png&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/e25d8139fc587195012cac8b5ba11951/f570d/Burn%20Rate%20vs%20Revenue.png&quot;
          alt=&quot;Burn Rate vs Revenue&quot;
          title=&quot;Burn Rate vs Revenue&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Từ bảng trên ta có thể thấy được, doanh thu càng lớn thì tỉ lệ Burn Rate càng ngày càng thấp đi. Và khi nào có lãi thì tỉ lệ Burn Rate sẽ nhỏ hơn 0.&lt;/p&gt;
&lt;p&gt;Về cơ bản các công ty startup đều nhắm đến sự tăng trưởng nhanh. Trong khi doanh thu không cao, càng ngày càng thâm hụt.
Và khi này tỉ lệ Burn Rate được gọi là Default Dead (mặc định chết).&lt;/p&gt;
&lt;p&gt;Chính vì vậy, chúng ta cần nắm bắt rõ bản thân chúng ta đang ở giai đoạn nào? “Default Dead” (Mặc định là chết) hay “Default Alive” (mặc định là sống).
Và cần phải nhanh chóng đưa bản thân mình đến trạng thái “Default Alive” càng sớm càng tốt.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 960px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/e902ab75f92485e6b4e4eb40986b61f4/2f8d2/y-combinator.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 56.470588235294116%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAAC2UlEQVQoz22SWUiUYRSGf52Z30az1LHMBaVccUxTSUrbbZnCLMstq5suEkEwCnOcLLOZchm3cMsILDIFu9AWtQtxNAoxIouiokxNU0gw8aKEFJ9+/yEi6sD3fYfvvO97DrxHEO1UiHZKFEpbHBxE3J3VxPi5sC/SG083J6mmkP7tEAQB/8A16PU5NDXdoaOjnebmJnJz9QQE+Mt1O0lLWLxEUYFaeg9t8MGwN4BHhhRaDMfJiQtFs9wqlpmZwczMDP+LHz++c+pUloyTBW1VCrxd1JzR+dGTF8d0q5Gfb7qYstwiyMsZ3T6dTJyenqa3t5e+vj4GBgbo7++X89+RnJyEIIoqFNKEPhp70qI86C5I5GVVBs9K0/l6r5z4TVpuNNyUCRMTE0xOTv413cLCAvPz83Le3v7wj6D7cjVl+8N4mp/AeKuZTzfz+dZWwRFdDAUmk0wYGxuTJxsZGWF8fJzBwUGGh4eZmpqS642NjVZBcYmSpWqRuyd38visjqGGHJ6XZ/GhRk9WWhwVVVUyYW5ujqGhIQY/fpQFF4VHR0fl2uzsLBER6xBUKhX2askdhQ3bfF1pTAnhiTGZ19ey+dxk5sTBbWhDQ0lKSqCnx/KPIT+lJt2WbiIjI6ymiKpFlyVBWxt8NY40pK7lWqqWtuyDdJkzCfX1tAKlYythNm2IpEifQX1dDeaSIo4dTSVEG4Srxtm6Nr/3x8tNg4eTA6YD4XSe3k3tYS33cxM5FB3GCo0TSqWNBLYh0FHgVfoy3j1+wNunnbzvbeX78AvKjAZrYz9vD2LXr2VHeBArXRxxdXLkXNoevjyoo+VKFhlH4qkym4iJCMFzlRurJXx0iA8xG6PYsjmanbFb2bNrO8HBgdjbL0GoryylurSYyuJCTMaL5OXlcTbXwEtLJzXlxdxuqOd5n4XmG7Xcvl6L6bKJwpJSKqqLKK8xUllXyNX6IgrNl7hw/jy/ADVSCQwSzbcxAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/e902ab75f92485e6b4e4eb40986b61f4/01472/y-combinator.webp 240w,
/static/e902ab75f92485e6b4e4eb40986b61f4/222bd/y-combinator.webp 480w,
/static/e902ab75f92485e6b4e4eb40986b61f4/620b9/y-combinator.webp 960w,
/static/e902ab75f92485e6b4e4eb40986b61f4/bdd6f/y-combinator.webp 1360w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/e902ab75f92485e6b4e4eb40986b61f4/0783d/y-combinator.png 240w,
/static/e902ab75f92485e6b4e4eb40986b61f4/782f4/y-combinator.png 480w,
/static/e902ab75f92485e6b4e4eb40986b61f4/f570d/y-combinator.png 960w,
/static/e902ab75f92485e6b4e4eb40986b61f4/2f8d2/y-combinator.png 1360w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/png&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/e902ab75f92485e6b4e4eb40986b61f4/f570d/y-combinator.png&quot;
          alt=&quot;y combinator&quot;
          title=&quot;y combinator&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2 id=&quot;làm-thế-nào-để-giảm-burn-rate-xuống&quot;&gt;&lt;a href=&quot;#l%C3%A0m-th%E1%BA%BF-n%C3%A0o-%C4%91%E1%BB%83-gi%E1%BA%A3m-burn-rate-xu%E1%BB%91ng&quot; aria-label=&quot;làm thế nào để giảm burn rate xuống permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Làm thế nào để giảm Burn Rate xuống?&lt;/h2&gt;
&lt;p&gt;Trong phần lớn startup thì chi phí nhân sự (tiền lương cho nhân viên) đang chiếm phần lớn Burn Rate. Do đó để giảm được Burn Rate thì đơn giản nhất là cần giảm chi phí này xuống mức có thể.
Cần tối ưu hoá tài nguyên con ngừời trong công ty, không nên tuyển dụng quá nhiều. Hoặc có thể thuê tài nguyên bên ngoài để giảm chi phí.&lt;/p&gt;
&lt;p&gt;Giám đốc của Y Combinator đã cảnh báo rằng, đa số nhà sáng lập trẻ thường có xu hướng tuyển thêm rất nhiều người. Bởi vì như thế mới giống 1 công ty.
Nên mọi người hãy chú ý nhé. Biết tận dụng tốt tài nguyên trong công ty là điều vô cùng quan trọng.&lt;/p&gt;
&lt;h2 id=&quot;tuy-nhiên-tỉ-lệ-burn-rate-cao-không-có-nghĩa-là-xấu&quot;&gt;&lt;a href=&quot;#tuy-nhi%C3%AAn-t%E1%BB%89-l%E1%BB%87-burn-rate-cao-kh%C3%B4ng-c%C3%B3-ngh%C4%A9a-l%C3%A0-x%E1%BA%A5u&quot; aria-label=&quot;tuy nhiên tỉ lệ burn rate cao không có nghĩa là xấu permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Tuy nhiên tỉ lệ Burn Rate cao không có nghĩa là xấu&lt;/h2&gt;
&lt;p&gt;Bản thân việc Burn Rate cao thì không phải là xấu. Nhưng vấn đề ở đây là: &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Tiền vốn không còn nhưng mà Burn Rate thì vẫn cao&lt;/li&gt;
&lt;li&gt;Burn Rate cao nhưng mà vẫn không đạt được milestone đã đề ra&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Đặc biệt là trường hợp thứ 2. Vì nếu trường hợp này xảy ra thì việc huy động vốn lần tiếp theo vô cùng khó, hoặc có thể sẽ mất khá nhiều thời gian mới kêu gọi vốn được.&lt;/p&gt;
&lt;p&gt;Tuy nhiên nếu mà quá để ý đến Burn Rate thì có khả năng sẽ làm tốc độ phát triển của dự án giảm xuống. Nên hãy cân bằng nó cho tốt nhé.&lt;/p&gt;
&lt;p&gt;==============&lt;/p&gt;
&lt;p&gt;Để nhận thông báo khi có bài viết mới nhất thì các bạn có thể like fanpage của mình ở bên dưới nhé:&lt;/p&gt;
&lt;p&gt;→→→ &lt;a href=&quot;https://www.facebook.com/669339543503374&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Nghệ thuật Coding Fanpage Facebook&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Đào sâu về MySQL]]></title><description><![CDATA[Hầu như ai cũng đã từng và đang dùng MySQL nhưng mà cũng có nhiều thứ mà ít ai biết về MySQL. Nên hôm nay mình sẽ đào sâu về nó để chỉ cho mọi người biết nhé ...]]></description><link>https://nghethuatcoding.com2020/05/02/dao-sau-ve-mysql</link><guid isPermaLink="false">https://nghethuatcoding.com2020/05/02/dao-sau-ve-mysql</guid><pubDate>Sat, 02 May 2020 23:55:30 GMT</pubDate><content:encoded>&lt;p&gt;Hôm nay tình cờ đọc được 1 quyển sách về MySQL thấy khá hay nên muốn chia sẻ lại với mọi người những cái mình đã học được.&lt;/p&gt;
&lt;p&gt;Về MySQL thì chắc ai cũng đã từng dùng hay đang dùng nó cho một số dự án từ vài người dùng đến hàng triệu người dùng. Từ các website về blog cho đến các trang thương mại điện tử, các server dành cho game…&lt;/p&gt;
&lt;p&gt;Với hệ thống nhỏ nhỏ thì chắc chẳng cần quan tâm gì nhiều đến cách hoạt động của nó làm gì cho mệt. Nhưng mà khi hệ thống dã lớn lên, phải xử lí hàng nghìn, hàng triệu queries/s thì việc hiểu rõ được cơ chế hoạt động cũng nó là điều vô cùng quan trọng.&lt;/p&gt;
&lt;p&gt;Việc master được tất tần tật về MySQL thì vô cùng khó, nhưng mà hiểu được cái gì đó sâu sâu 1 chút thì cũng giúp chúng ta hơn hẳn được nhiều người rồi.&lt;/p&gt;
&lt;p&gt;Nên hôm nay mình sẽ giới thiệu đến mọi người 1 số vấn đề mà mọi người đang chưa hiểu hoặc hiểu nhầm về MySQL nhé.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Mục tiêu bài viết:&lt;/strong&gt;&lt;br&gt;
・Hiểu được chức năng bên trong MySQL&lt;br&gt;
・Biết cách thiết kế dữ liệu cho tối ưu nhất  &lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Đối tượng hướng đến:&lt;/strong&gt;&lt;br&gt;
・Người đã từng làm việc với MySQL&lt;br&gt;
・Người muốn tối ưu hiệu năng MySQL  &lt;/p&gt;
&lt;h2 id=&quot;1-đơn-vị-io&quot;&gt;&lt;a href=&quot;#1-%C4%91%C6%A1n-v%E1%BB%8B-io&quot; aria-label=&quot;1 đơn vị io permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;1. Đơn vị I/O&lt;/h2&gt;
&lt;p&gt;Khi dùng MySQL thì đa số là thao tác trên các record(bản ghi) của MySQL. Nên đa số chúng ta đều nghĩ là dữ liệu được xử lí theo đơn vị record. Nhưng thực tế MySQL lại thao tác dữ liệu theo từng đơn vị page (trang) có kích thước được định nghĩa trước.&lt;/p&gt;
&lt;p&gt;Để dễ hiểu thì chúng ta cùng xem ảnh bên dưới:&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 960px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/5755d0f08e492040065f9f20dabfdf5a/2f950/20200502_mysql_page.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAAB6UlEQVQoz22S22/SYBiH90d7qVnihYlXXpgZY1C2xTmJm0aHHHQHJ5siYxkI4QwRXSiHQQv0DO3j14bGRv2SJ83b3/c+fb+2a67r4i3XcXEWjs/SXvoENd4WQTgL516v7xCutaDQGzO0NyOspMwyPcVOKVgJGe1gROFJllIkhxYfYScVFiKzxT4zOfF7vN5gqLVgQm00QGtXUZoVqp8/0cqeMamXMH616Oe+MXl3in14ibR/TG37gJ+xD5gf8xjxr0LYXQmdP8LxrEdXLtCU8qQzrzjPvafdvaCtZWnOz2hJ4iGDU84Le8SPn3KS26XRO6FynaY/aa2OHBIqcwVJlhhOh/zod4lJR+zIR2zNE2waCV7aSfaXKaJSjI1alEh3h9dWkhfWW8pGzXc4YeHCNMG2vbsCh8qiw5XTpLhsU7SbbE3rPFA73OvkuHN1yO1KhvtKk3W5TmY+8B1L76M4K2FXNfgyNcmrNheCkgrlOVR0gQaP+wvujmC9PeXW9x4PG0NSisve2KU6s1YThoSXis6jgc7m2OTZjUnkxvDZuJZ9tscGz8c6u4pFdGJRnmnesbB1FVPXQr/NSmjoukDDFke3TENg+tSqVUrFop97tWkYPoaHqFVNQxfZP0Lv6oh39zfB+l8WEHb8BqON5hfQX4CfAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/5755d0f08e492040065f9f20dabfdf5a/01472/20200502_mysql_page.webp 240w,
/static/5755d0f08e492040065f9f20dabfdf5a/222bd/20200502_mysql_page.webp 480w,
/static/5755d0f08e492040065f9f20dabfdf5a/620b9/20200502_mysql_page.webp 960w,
/static/5755d0f08e492040065f9f20dabfdf5a/28063/20200502_mysql_page.webp 1440w,
/static/5755d0f08e492040065f9f20dabfdf5a/ded3f/20200502_mysql_page.webp 1600w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/5755d0f08e492040065f9f20dabfdf5a/0783d/20200502_mysql_page.png 240w,
/static/5755d0f08e492040065f9f20dabfdf5a/782f4/20200502_mysql_page.png 480w,
/static/5755d0f08e492040065f9f20dabfdf5a/f570d/20200502_mysql_page.png 960w,
/static/5755d0f08e492040065f9f20dabfdf5a/8d0ff/20200502_mysql_page.png 1440w,
/static/5755d0f08e492040065f9f20dabfdf5a/2f950/20200502_mysql_page.png 1600w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/png&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/5755d0f08e492040065f9f20dabfdf5a/f570d/20200502_mysql_page.png&quot;
          alt=&quot;20200502 mysql page&quot;
          title=&quot;20200502 mysql page&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Nhìn vào ảnh bên trên thì mình nghĩ mọi người có thể hiểu được. Thì đơn vị I/0 nhỏ nhất trong MySQL không phải là record mà là page nhé.&lt;/p&gt;
&lt;p&gt;Với MySQL thì kích thước của page default là 16KB. (Ở đây mọi người nên chú ý 1 điểm là nếu muốn change size của page thì chúng ta phải xoá instance đi và tạo lại thì mới change được, còn chỉ start stop mysql thì không thể change được nhé)&lt;/p&gt;
&lt;p&gt;Chính vì lí do đó mà thằng RDS của AWS không có option change được size của page.&lt;/p&gt;
&lt;p&gt;Vậy đến đây đa số cũng biết được đơn vị cấu tạo nhỏ nhất của I/O trong MySQL là gì rồi đúng không ak? &lt;/p&gt;
&lt;p&gt;Vậy biết được cái này để làm gì? Thì đi đến phần tiếp theo nhá.&lt;/p&gt;
&lt;h2 id=&quot;2-ảnh-hưởng-to-lớn-của-auto_increment&quot;&gt;&lt;a href=&quot;#2-%E1%BA%A3nh-h%C6%B0%E1%BB%9Fng-to-l%E1%BB%9Bn-c%E1%BB%A7a-auto_increment&quot; aria-label=&quot;2 ảnh hưởng to lớn của auto_increment permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;2. Ảnh hưởng to lớn của AUTO_INCREMENT&lt;/h2&gt;
&lt;p&gt;Việc setting primary key (khoá chính) với AUTO_INCREMENT thì chắc ai cũng biết rồi. Nhưng mà việc setting này có ảnh hưởng to lớn đến hiệu năng như thế nào thì chúng ta cùng đi xem 2 ví dụ dưới đây nhé.&lt;/p&gt;
&lt;p&gt;Để dễ hiểu, mình sẽ lấy 1 ví dụ trong game nhé. Đó là muốn tạo ra 1 bảng lưu giữ thông tin nhân vật(character) của người dùng.&lt;/p&gt;
&lt;p&gt;Ví dụ 1:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;CREATE TABLE user_characters &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  user_id INT NOT NULL DEFAULT &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;,
  user_character_id INT NOT NULL DEFAULT &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;,
  character_id INT NOT NULL DEFAULT &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;,
  PRIMARY_KEY &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;user_id, user_character_id&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;,
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Ví dụ 2:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;CREATE TABLE user_characters &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;id&lt;/span&gt; INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
  user_id INT NOT NULL DEFAULT &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;,
  user_character_id INT NOT NULL DEFAULT &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;,
  character_id INT NOT NULL DEFAULT &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;,
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Khi chúng ta muốn lấy thông tin nhân vật mà người dùng có ID =4 1234 đang giữ thì sẽ thực hiện câu SQL như sau:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;SELECT * FROM user_characters WHERE user_id = 41234&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Vậy hiệu năng khi thực hiện câu SQL này trên 2 ví dụ trên khác nhau thế nào?&lt;/p&gt;
&lt;p&gt;Cụ thể như ảnh bên dưới:
&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 960px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/f0e614dffb5dacb4954a7493fb7c7665/2f950/20200502_01_mysql_page_primary_key.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 68%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsSAAALEgHS3X78AAACw0lEQVQ4y31TaVNaQRDkRydlGY9SEXjIJYKIPEAgIPFAuQRPjAJiQgA1XvmSRAIqICYV0SBXZ94K+MVkqrp6p3e337yaWVGr1YIQAjcaTYZ6vQFBvry8wv7+BySTn5BKpVGp3KPZbJ9rPp1tEnfuCyHqLCqVO8zO8HBapjGtVYLXaQhqWKd0cPBGmCe1TDNNqOE0G+G2mWmtQjIRZ/c7xl3Dh/s7BFzj8Ls0mOfFWLRIGS/b5AjN6SiXMCyYJUz3OpRwTw3gJLXzsuGfhwo2loxY90wh6FIh9G6cPqAk1mLLZ2bayqwGK24NAk4lO+dzyPHlaO8fhlRheF6H1Xk9lmak8Nrl8FglVMkYVhcMTFu2cQxLpAdcaizwwzjLRLuGgpeo1XauUoXRVReiYRc2vTwiPgurbDfkQGJjDu8DVmz7rYj4Saf9aNiJdfqjr+fpdlPaFeI/Ua1WUSgUCEXc3JRZXqvVCbU21/H4WGvnTxCViiWUCiUU6ZKA8s0toYzbchkX378hnUrR2HzE0eFhdzReCmGP/bJa2g8NNwiNbBBKSR+MWhl0CjFGel9DNtgHLSeBanQIZr0W+VweP7I5ZC+yKFwXGPK5S1Z5x1S0rR9GjOewZ5ETyxAzybA+KYae64dW0gvV0Cuohl9jQvoGBsUQlJSrR3pof4DlGnEPrnLZbmNEa2SyZVMhYlcRK7A5QyNhU2JtUU8dn0DIrabRUSM8p8WGx4DgrJLWwkgpGAdptH6Vr7uNEXnsHDx2GRZtNMgWGmSnAsG3CuxMjiJqkGKfVxDGEDNypEmRMMmZJnB8mkPcKMNd8erZMBMPI7P3hHRsBcfJCFK7foTsYwhaZfDRq/Dzo/CbRxGiV+M1jSBAL8ZHzPaJfxbzz4YvdazRaOD8cwKnBzGcZHYZTg+iOKdXcZzeYesT4rPDGMsf7n93m/IXXdakXFHdu/AAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/f0e614dffb5dacb4954a7493fb7c7665/01472/20200502_01_mysql_page_primary_key.webp 240w,
/static/f0e614dffb5dacb4954a7493fb7c7665/222bd/20200502_01_mysql_page_primary_key.webp 480w,
/static/f0e614dffb5dacb4954a7493fb7c7665/620b9/20200502_01_mysql_page_primary_key.webp 960w,
/static/f0e614dffb5dacb4954a7493fb7c7665/28063/20200502_01_mysql_page_primary_key.webp 1440w,
/static/f0e614dffb5dacb4954a7493fb7c7665/ded3f/20200502_01_mysql_page_primary_key.webp 1600w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/f0e614dffb5dacb4954a7493fb7c7665/0783d/20200502_01_mysql_page_primary_key.png 240w,
/static/f0e614dffb5dacb4954a7493fb7c7665/782f4/20200502_01_mysql_page_primary_key.png 480w,
/static/f0e614dffb5dacb4954a7493fb7c7665/f570d/20200502_01_mysql_page_primary_key.png 960w,
/static/f0e614dffb5dacb4954a7493fb7c7665/8d0ff/20200502_01_mysql_page_primary_key.png 1440w,
/static/f0e614dffb5dacb4954a7493fb7c7665/2f950/20200502_01_mysql_page_primary_key.png 1600w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/png&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/f0e614dffb5dacb4954a7493fb7c7665/f570d/20200502_01_mysql_page_primary_key.png&quot;
          alt=&quot;20200502 01 mysql page primary key&quot;
          title=&quot;20200502 01 mysql page primary key&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Với ví dụ 1, thì user&lt;em&gt;id được gắn là khoá chính. Nên dữ liệu sẽ được sắp xếp theo thứ tự của user&lt;/em&gt;id. Do đó mà thông tin lấy được từ user_characters khả năng cao sẽ được nằm trong 1 page. Mà nếu dữ liệu được nằm trong 1 page thì chắc chắn I/O sẽ được giảm mạnh, và hiệu suất query sẽ tốt hơn.&lt;/p&gt;
&lt;p&gt;Nhưng với ví dụ 2 thì hoàn toàn khác. Lúc này khoá chính của chúng ta là id. Nên việc dữ liệu tất cả nhân vật mà user_id = 41234 đang nắm giữ khả năng cao sẽ nằm rải rác trên nhiều page khác nhau. Kết quả là I/O sẽ tăng và hiệu năng query sẽ giảm đi rất là nhiều.&lt;/p&gt;
&lt;p&gt;Chính vì vậy, với nhiều dữ liệu sử dụng đồng thời như ví dụ trên thì chúng ta cố gắng sắp xếp nó cùng vào 1 page nhé.&lt;/p&gt;
&lt;h2 id=&quot;kết-luận&quot;&gt;&lt;a href=&quot;#k%E1%BA%BFt-lu%E1%BA%ADn&quot; aria-label=&quot;kết luận permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Kết luận&lt;/h2&gt;
&lt;p&gt;Hôm nay thế thôi nhỉ. Để hôm khác mình sẽ bổ sung thêm(Tại ngại vẽ hình). Hi vọng qua bài này sẽ giúp ích mọi người trong quá trình thiết kế cơ sở dữ liệu sao cho hiệu năng tốt nhất.&lt;/p&gt;
&lt;p&gt;Chúc mọi người cuối tuần vui vẻ.&lt;/p&gt;
&lt;p&gt;==============&lt;/p&gt;
&lt;p&gt;Để nhận thông báo khi có bài viết mới nhất thì các bạn có thể like fanpage của mình ở bên dưới nhé:&lt;/p&gt;
&lt;p&gt;→→→ &lt;a href=&quot;https://www.facebook.com/669339543503374&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Nghệ thuật Coding Fanpage Facebook&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Ginco đã sử dụng và tối ưu Cloud Functions như thế nào]]></title><description><![CDATA[Hôm nay mình chia sẻ đến mọi người 1 case study khá hay mà Ginco đã thực hiện để quản lí giao dịch trong Blockchain bằng cách sử dụng hệ sinh thái Firebase.]]></description><link>https://nghethuatcoding.com2019/08/03/ginco-da-su-dung-va-toi-uu-cloud-functions-nhu-the-nao</link><guid isPermaLink="false">https://nghethuatcoding.com2019/08/03/ginco-da-su-dung-va-toi-uu-cloud-functions-nhu-the-nao</guid><pubDate>Sat, 03 Aug 2019 14:55:30 GMT</pubDate><content:encoded>&lt;p&gt;Xin chào mọi người. Dạo này ăn hành nhiều quá thành ra không có thời gian viết bài.&lt;/p&gt;
&lt;p&gt;Hôm nay mình chia sẻ đến mọi người 1 case study khá hay mà &lt;a href=&quot;https://ginco.io/en/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Ginco&lt;/a&gt; đã thực hiện để quản lí giao dịch trong Blockchain bằng cách sử dụng hệ sinh thái Firebase.&lt;/p&gt;
&lt;p&gt;Gần đây công ty mình cũng bắt đầu đưa Firebase vào hệ thống. Đúng quả thật dùng Firebase xong thấy yêu nó hẳn. Nó quả thực rất mạnh và cũng khá rẻ. Nên thời gian tới mình sẽ tập trung viết nhiều bài hơn nữa về Firebase để mọi người có cái nhìn tổng quan hơn về nó.&lt;/p&gt;
&lt;p&gt;Bây giờ chúng ta cùng nhau tìm hiểu xem Ginco đã sử dụng Firebase để xử lí các bài toán liên quan đến giao dịch Blockchain như thế nào.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Mục tiêu bài viết:&lt;/strong&gt;&lt;br&gt;
・Hiểu được cách dùng Cloud Functions trong hệ thống&lt;br&gt;
・Biết cách tối ưu Cloud Functions để đạt hiệu năng tốt nhất&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Đối tượng hướng đến:&lt;/strong&gt;&lt;br&gt;
・Người có chút hiểu biết về Cloud Functions&lt;br&gt;
・Người đã từng làm việc với Firebase&lt;/p&gt;
&lt;h2 id=&quot;ginco-là-công-ty-như-thế-nào&quot;&gt;&lt;a href=&quot;#ginco-l%C3%A0-c%C3%B4ng-ty-nh%C6%B0-th%E1%BA%BF-n%C3%A0o&quot; aria-label=&quot;ginco là công ty như thế nào permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Ginco là công ty như thế nào?&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://ginco.io/en/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Ginco&lt;/a&gt; là công ty Nhật Bản chuyên cung cấp hệ thống quản lí wallet tiền ảo 1 cách an toàn và bảo mật. Nó có thể gửi, nhận tiền ảo 1 cách đơn giản thông qua hệ thống Blockchain.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 377px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/ab890d2160a04ec8b30ad3fd66b467d0/f6cb0/Screen-Shot-2019-08-03-at-22.29.11.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 164.19098143236076%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAhCAIAAABWXBxEAAAACXBIWXMAAAsSAAALEgHS3X78AAAEiElEQVQ4y3VV+09TVxz3H1sySNQszm2ALSxQ27igCZIAWXzMbC5LhlmyuWzxlzm3ZIb9MJ1DiQrLACVFkAprWV+0tqXSXqCv2/a+73nd7nvuxQqlnpzce8499/N9ne/38z3SsAejjBJKMcUIwySYtEz7lMARMhCsGxZHHeFIxpGOFFggE1HKtxazYMuRlDZ1GJquazosmmCKMNNMvrcsLlPTtJ2dHUmSEEKNg8M0TFVRwcY9sMWYqtPtCt8zG1wqlubm5paXloqFYlNiezAFhzExDF3XDefssMK3ghmlhBCAas5QNdiCn/sVtgc7fwh5YfKvyampqTt/3Fl5/vzxo8cTtyfqtfp+m+EN87DPFuxj0VgykYxGY6mXKVjHonGwpYlpGsHBsgpX8NpnbiNIoo23D8Iaks4MxLCJDoB5hlAq5GtCTi3smoWCWSqZ5ZJZqeDmFLbRqzxCxEL7wdwcquxEg1dG41dGwheHI58OR8/5Imc8kTPe6Ce+uM8bP3c2MTqSvHwh9XBR0TlYIagJJtKmf3rQHTg/EBjyvBjy/us+udpzYs31Yaj7g5CrO9zfF/WejvlOx27erwJYO6hZyvhnxnwvPh9eG78c/upi+PvxxLUv4t9+/fK7a6kB97qra72nK9znivwyVdMA/OaqHPDC9GdnA9evhsYvBb8cC10dXb80FBwbDF0Y+s9zKvhxd6i3Z73fHf75frUNOOufOd+9MNL3dLR/cfAjv7vjad8xf+/xZ6eOLve+F3CfWHWdXPO4Qj/dE1WjBUyk3NITb+ezgXf+8XbO+o7N+44veI76+zqW3R0r7s6AqzPQ9e6K5/3VW5OHwUzaeDR991auJqJMQkrH6zXRnH2wO/+wUC6Yyaic2lDEMnowIfzwW0lDuMVsOetfvPlNcuVJYXZS+PtPIbBQuv1jeuJGenmuOH03P3NPWJov/3o9/fuUeMBnO8MII3gzIUdWxY1QDWZ0TYyHqvFgNbJWjYdqsWAtvFrNbEjwo6GbB8DAJFBGjGFY2kkK02qboZhYh0rSBtvVaOiaoSoa5OAe7zBgCqgry0BWsUZ1xNDhqsKISLKGMYYylGVZkZV6vV6tVkGuU5VAD0B0sAKzWzRbFGvZREKsyK+yWShJKG+oR9M0nWI2KcpK25m6YBCEDdTCJMz5yeYPAvodGnlDAw2LgF7GP7b6DMaAmu2tLUWqZTKb2WxWyOc3M5uCIDh4TElRqZTVKmYEtWiGmCDK6pWiqcnlsihWxEqlUigUwGdi8zliZNcQd4xyGzAnfc6BFGNOgxBq6AyN1xY7T2IShlk79rQazFSKyYQkadnMJhicTqW3BWFrKwe87wQsrxTyahFR3KqZ8t5hVWVL1UGRxfVrOqc1wluXHTfLpNjAJmfPlquC7AKMP0wTOdswE0t1ybFaVVXIH/5RN5yPrWBIEp4npEGo3ahUFe4ZGg3ELJ/LQ8rYCviA30ye2xojzatyrtoWAbExdAN6VblUqpRKsIAGwi/aPgJH4JSHs9li9+LKbBOoLWLfcFo3PPkk/Mll2eN//J4B6Ki0L9AAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/ab890d2160a04ec8b30ad3fd66b467d0/01472/Screen-Shot-2019-08-03-at-22.29.11.webp 240w,
/static/ab890d2160a04ec8b30ad3fd66b467d0/9de00/Screen-Shot-2019-08-03-at-22.29.11.webp 377w&quot;
          sizes=&quot;(max-width: 377px) 100vw, 377px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/ab890d2160a04ec8b30ad3fd66b467d0/0783d/Screen-Shot-2019-08-03-at-22.29.11.png 240w,
/static/ab890d2160a04ec8b30ad3fd66b467d0/f6cb0/Screen-Shot-2019-08-03-at-22.29.11.png 377w&quot;
          sizes=&quot;(max-width: 377px) 100vw, 377px&quot;
          type=&quot;image/png&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/ab890d2160a04ec8b30ad3fd66b467d0/f6cb0/Screen-Shot-2019-08-03-at-22.29.11.png&quot;
          alt=&quot;Screen Shot 2019 08 03 at 22 29 11&quot;
          title=&quot;Screen Shot 2019 08 03 at 22 29 11&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;cloud-functions-là-gì&quot;&gt;&lt;a href=&quot;#cloud-functions-l%C3%A0-g%C3%AC&quot; aria-label=&quot;cloud functions là gì permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Cloud Functions là gì?&lt;/h2&gt;
&lt;p&gt;Cloud Functions là 1 sản phẩm của Google.&lt;/p&gt;
&lt;p&gt;Cloud Functions cho phép bạn chạy code backend tự động &lt;strong&gt;&lt;a href=&quot;https://cloud.google.com/functions/docs/concepts/events-triggers&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;trigger các event&lt;/a&gt;&lt;/strong&gt; được kích hoạt bởi tính năng của Firebase (Google).&lt;/p&gt;
&lt;p&gt;Ví dụ như khi chúng ta upload 1 ảnh lên Google Storage thì Cloud Functions sẽ tự động trigger sự kiện đó để xử lí 1 tác vụ nào đó. Ví dụ như resize ảnh chẳng hạn …&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Các lợi ích khi sử dụng Cloud Functions:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Tạo API 1 cách đơn giản&lt;/li&gt;
&lt;li&gt;Mỗi 1 hàm được deploy đều được chạy trong 1 môi trường hoàn toàn khác nhau. Do đó chức năng của hàm này sẽ không ảnh hưởng đến hàm khác. Và việc thêm sửa xoá chức năng được thực hiện 1 cách khá đơn giản.&lt;/li&gt;
&lt;li&gt;Dựa vào số lượng request mà hệ thống sẽ tự động được scale&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;ứng-dụng-cloud-functions-trong-ginco&quot;&gt;&lt;a href=&quot;#%E1%BB%A9ng-d%E1%BB%A5ng-cloud-functions-trong-ginco&quot; aria-label=&quot;ứng dụng cloud functions trong ginco permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Ứng dụng Cloud Functions trong Ginco&lt;/h2&gt;
&lt;p&gt;Ở Ginco thì Cloud Functions đảm nhiệm 4 chức năng chính:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Cung cấp API gọi giao thức RPC của Blockchain&lt;/li&gt;
&lt;li&gt;Cung cấp API thu thập thông tin về market (giá cả thị trường, volume …)&lt;/li&gt;
&lt;li&gt;Push Notification&lt;/li&gt;
&lt;li&gt;Thực hiện backup Firestore định kì&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Dưới đây là kiến trúc hệ thống xung quanh Cloud Functions trong Ginco&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 846px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/a7a0bc1d07d17b5fd737000526c2d38c/c5f2c/ginco-architecture.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 68.91252955082743%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsSAAALEgHS3X78AAACJklEQVQoz3VTTY/TMBDNL0X8D/7AnhA3bgiJGxXSallWdFdaEKBKq7LblqZN04/QpknTJHbctE5iO3bCpCkFqmWUg8fym3kz70Ur/4kC48j1UJalh7woOOdKqfKx0I6nXEo/K2Pnbtc940UFrC7zHPAnGClloYSSQlP7gKuU5zgry8wy717RNK8fCSHCMIxIjKJ4syEYY0I2nud8eViN7fhP51SoHcuhjLfl0FbuiwJ/XR+sl7P5qDMcGpZlGcbIdeyX7/FtL9N0/cdwoAM4ETLOqoZ2GEuZK1WxlYJ3h1P98nmhv268O3+4/97rdhuNt3PbDUKsXTVvL68/+zsWUg5YxeItcYMgjDACMKXUNMejsUmQ1+0PgfbctifWT0IihJDWnvltG3vRjqTcZ+XWfGOcP+3YieHiJUnnfvS13WkNrP7M+dYb96eLe2M2XTjTsQm70JrNjzc317UqwFQyfzLpUKaYLFAieK4QvAr8IAgQnIBSAHkIOQihLddovgpqcKUNzBzRev9xJrP8cYUPOjNVUAHAAlYky1IkKCFWrSyiLCBbIbhKVgqUrZao3Eh6RNW9NJ7L9ZbhRGCaIV7y5Qe/9aw2SZwJO0rRhkSfniwdE1wAc5xdpC+uKv/BjNoJk5SixXzCmDgOwlJqjVqe51UAmU8W4WJFykId7Fn8/qSSYCawd5Ike3BVbkcTElPG2d+/wKm3/xdHe8MWwU7WbAalQX9w7i/WRxSi+AXY9QAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/a7a0bc1d07d17b5fd737000526c2d38c/01472/ginco-architecture.webp 240w,
/static/a7a0bc1d07d17b5fd737000526c2d38c/222bd/ginco-architecture.webp 480w,
/static/a7a0bc1d07d17b5fd737000526c2d38c/34963/ginco-architecture.webp 846w&quot;
          sizes=&quot;(max-width: 846px) 100vw, 846px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/a7a0bc1d07d17b5fd737000526c2d38c/0783d/ginco-architecture.png 240w,
/static/a7a0bc1d07d17b5fd737000526c2d38c/782f4/ginco-architecture.png 480w,
/static/a7a0bc1d07d17b5fd737000526c2d38c/c5f2c/ginco-architecture.png 846w&quot;
          sizes=&quot;(max-width: 846px) 100vw, 846px&quot;
          type=&quot;image/png&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/a7a0bc1d07d17b5fd737000526c2d38c/c5f2c/ginco-architecture.png&quot;
          alt=&quot;ginco architecture&quot;
          title=&quot;ginco architecture&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;1-cung-cấp-api-gọi-giao-thức-rpc-của-blockchain&quot;&gt;&lt;a href=&quot;#1-cung-c%E1%BA%A5p-api-g%E1%BB%8Di-giao-th%E1%BB%A9c-rpc-c%E1%BB%A7a-blockchain&quot; aria-label=&quot;1 cung cấp api gọi giao thức rpc của blockchain permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;1. Cung cấp API gọi giao thức RPC của Blockchain&lt;/h3&gt;
&lt;p&gt;Toàn bộ các node blockchain được chạy trên GKE.&lt;/p&gt;
&lt;p&gt;Bởi vì các API trong các node blockchain (ví dụ như bitcoin, ethereum…) này hoàn toàn khác nhau. Nên họ đã cung cấp 1 API đã wrapper lại tất cả các API đó thành chung 1 interface để dễ dàng sử dụng.&lt;/p&gt;
&lt;p&gt;Giai đoạn đầu thì họ đã dùng &lt;a href=&quot;https://firebase.google.com/docs/functions/http-events&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;HTTP trigger&lt;/a&gt;, nhưng cái này có 1 nhược điểm là khi gọi API thì nó không tự động gửi access token của người dùng lên. Nên thành ra mỗi lần gọi API phải tự mình đính kèm access token vào header của request.&lt;/p&gt;
&lt;p&gt;Họ đã dùng &lt;a href=&quot;https://firebase.google.com/docs/functions/callable&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;onCall trigger&lt;/a&gt;. Cái này thì nó tự động đính kèm access token của người dùng vào header. Nên khá dễ dàng để chứng thực người dùng.&lt;/p&gt;
&lt;h3 id=&quot;2-cung-cấp-api-thu-thập-thông-tin-về-market-giá-cả-thị-trường-volume-&quot;&gt;&lt;a href=&quot;#2-cung-c%E1%BA%A5p-api-thu-th%E1%BA%ADp-th%C3%B4ng-tin-v%E1%BB%81-market-gi%C3%A1-c%E1%BA%A3-th%E1%BB%8B-tr%C6%B0%E1%BB%9Dng-volume-&quot; aria-label=&quot;2 cung cấp api thu thập thông tin về market giá cả thị trường volume  permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;2. Cung cấp API thu thập thông tin về market (giá cả thị trường, volume …)&lt;/h3&gt;
&lt;p&gt;Ginco sử dụng Firestore là cơ sở dữ liệu chính để lưu trữ thông tin về market (giá cả thị trường, volume …)&lt;/p&gt;
&lt;p&gt;Các thao tác CRUD liên quan đến dữ liệu sẽ được thực hiện trực tiếp từ phía Client (sử dụng Firebase SDK)&lt;/p&gt;
&lt;p&gt;Còn 1 số dữ liệu quan trọng cần tính bảo mật cao hơn thì sẽ không gọi trực tiếp từ SDK Firebase phía Client mà sẽ thông qua Cloud Functions. &lt;/p&gt;
&lt;h3 id=&quot;3-push-notification&quot;&gt;&lt;a href=&quot;#3-push-notification&quot; aria-label=&quot;3 push notification permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;3. Push Notification&lt;/h3&gt;
&lt;p&gt;1 số event liên quan đến lịch sử gửi nhận coin sẽ thực hiện việc gửi thông báo (push notification) đến người dùng.&lt;/p&gt;
&lt;p&gt;Vì Cloud Functions có thể trigger được các &lt;a href=&quot;https://firebase.google.com/docs/functions/firestore-events&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;sự kiện liên quan đến Firestore&lt;/a&gt; nên khi dữ liệu trong Firestore mà bị thay đổi nó sẽ detect được và tiến hành gửi thông báo đến người dùng.&lt;/p&gt;
&lt;h3 id=&quot;4-thực-hiện-backup-firestore-định-kì&quot;&gt;&lt;a href=&quot;#4-th%E1%BB%B1c-hi%E1%BB%87n-backup-firestore-%C4%91%E1%BB%8Bnh-k%C3%AC&quot; aria-label=&quot;4 thực hiện backup firestore định kì permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;4. Thực hiện backup Firestore định kì&lt;/h3&gt;
&lt;p&gt;Việc backup Firestore sẽ được thực hiện thông qua Cloud Functions.&lt;/p&gt;
&lt;p&gt;Bằng việc trigger &lt;a href=&quot;https://firebase.google.com/docs/functions/pubsub-events?&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Cloud Pub/Sub&lt;/a&gt;, Cloud functions sẽ dễ dàng backup được dữ liệu của Firestore thông qua &lt;a href=&quot;https://firebase.google.com/docs/firestore/reference/rest/v1beta1/projects.databases/exportDocuments&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Firestore command line&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Chúng ta chỉ cần sử dụng cronjob trong App Engine để gửi message đến Pub/Sub. Khi đó Cloud Functions sẽ trigger được event đó và thực hiện backup.&lt;/p&gt;
&lt;h2 id=&quot;tối-ưu-cloud-functions&quot;&gt;&lt;a href=&quot;#t%E1%BB%91i-%C6%B0u-cloud-functions&quot; aria-label=&quot;tối ưu cloud functions permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Tối ưu Cloud Functions&lt;/h2&gt;
&lt;p&gt;Mặc dù Cloud Functions khá là tiện nhưng khi số lượng function tăng lên thì tốc độ response của nó cũng giảm xuống đáng kể (đôi khi mất 13s cho 1 request). &lt;/p&gt;
&lt;p&gt;Ở đây mình sẽ nói qua 1 số vấn đề gặp phải và cách khắc phục nó.&lt;/p&gt;
&lt;h3 id=&quot;kiến-trúc-cloud-functions&quot;&gt;&lt;a href=&quot;#ki%E1%BA%BFn-tr%C3%BAc-cloud-functions&quot; aria-label=&quot;kiến trúc cloud functions permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Kiến trúc Cloud Functions&lt;/h3&gt;
&lt;p&gt;Cloud Functions được thực hiện như sau:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;1 request sẽ được xử lí bằng 1 instance&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Trong trường hợp nhận được request mới:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Nếu có instance còn trống thì sẽ gửi request đó đến instance trống đó&lt;/li&gt;
&lt;li&gt;Nếu không có instance trống thì sẽ tạo instance mới, và gửi request đến instance đó&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Nếu trong 1 khoảng thời gian nào đó mà instance không xử lí request thì instance đó sẽ bị xoá đi.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Và trường hợp tạo instance mới và xử lí request là tốn thời gian nhất. Trường hợp này người ta gọi là &lt;strong&gt;Cold Start&lt;/strong&gt;. (Mặc dù bản thân việc tạo 1 instance mới chỉ mất tầm mấy trăm ms thôi)&lt;/p&gt;
&lt;p&gt;Dưới đây là hình ảnh về hiện tượng Cold Start. Nếu không có instance nào trống thì sẽ tạo ra instance mới để xử lí request.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 670px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/f8d90b83507ea271afb3f5cf0bdced44/9b1de/coldstart.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 46.26865671641791%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsSAAALEgHS3X78AAAB9ElEQVQoz2P4uZMBDED01+0MDAcO+UMEXPczMWTv5AIxDYtrGf7uZWD4DlX7YydIPTsDTvBzF6ZY8tv/rEL910SJUYuugBFKiwJt3vd7N8PJZ6sZjt9ZxnT2zkr2S0D2CaD4EaD8FaAvoqFqmX/u5MBu4PedLIxQWurbTuaHP3czv3qymuXF1YXsb28u4/l8bQHLy8/bWZ9938Xy+/tOphyIWiYWnF7+29rC8G9aDfN/y/9g/tLpNzmfnD/H+/DGIeH2dUfVazeel5+y7idH6TeI/P89EH08Id0MRprKDCaW1gy6uroMqqqqDJpaWmjhtmgOE1Zba84J8lfvhzjp0H8GzkW/GRkCmxg6musZ+iZMZDA2NmYIDAxkUFFRAdrYXCr8s6s+7nl3k9uXljy2X1214e+6G0NA7vncXe/3rbsu4X9jKgd/8yFFxea9IgyEwL/O2uj/W1f9/z+h7fj/6hyF/6vm//8/pev7vzgPWSD96f+aRf9/Npbqg9ROS0tg5Zn7SY9t6f9wfu884YTIEKXUjCxFfX19YWtra0kNDQ0hhn/t1cb/JrQd+NfbVPmvJlfwX3/rln8TWmf+D7fnAdJT/09o3f69qUySoeY/q37VGh6BaU+F2Jb9l+AMqmGrLM7nq29s4jM0NGTz9PTkUlNTYwUAV1/c2T3gkYgAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/f8d90b83507ea271afb3f5cf0bdced44/01472/coldstart.webp 240w,
/static/f8d90b83507ea271afb3f5cf0bdced44/222bd/coldstart.webp 480w,
/static/f8d90b83507ea271afb3f5cf0bdced44/5c891/coldstart.webp 670w&quot;
          sizes=&quot;(max-width: 670px) 100vw, 670px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/f8d90b83507ea271afb3f5cf0bdced44/0783d/coldstart.png 240w,
/static/f8d90b83507ea271afb3f5cf0bdced44/782f4/coldstart.png 480w,
/static/f8d90b83507ea271afb3f5cf0bdced44/9b1de/coldstart.png 670w&quot;
          sizes=&quot;(max-width: 670px) 100vw, 670px&quot;
          type=&quot;image/png&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/f8d90b83507ea271afb3f5cf0bdced44/9b1de/coldstart.png&quot;
          alt=&quot;coldstart&quot;
          title=&quot;coldstart&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;cải-thiện-cold-start&quot;&gt;&lt;a href=&quot;#c%E1%BA%A3i-thi%E1%BB%87n-cold-start&quot; aria-label=&quot;cải thiện cold start permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Cải thiện Cold Start&lt;/h3&gt;
&lt;h4 id=&quot;1-cải-thiện-cold-start-của-cloud-functions&quot;&gt;&lt;a href=&quot;#1-c%E1%BA%A3i-thi%E1%BB%87n-cold-start-c%E1%BB%A7a-cloud-functions&quot; aria-label=&quot;1 cải thiện cold start của cloud functions permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;1. Cải thiện Cold Start của Cloud Functions&lt;/h4&gt;
&lt;p&gt;Sau khi tìm hiểu thì họ thấy được, bản thân của việc tạo 1 instance mới hoàn toàn không tốn quá nhiều thời gian (chỉ mất mấy trăm ms). Mà việc tốn nhiều thời gian nhất ở đây là việc load library.&lt;/p&gt;
&lt;p&gt;Giả sử như file index.js của chúng ta có nội dung như sau:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;&amp;lt;code&amp;gt;# index.js

exports.Func1 = require(&amp;#39;./funcs/func1&amp;#39;);
exports.Func2 = require(&amp;#39;./funcs/func2&amp;#39;);&amp;lt;/code&amp;gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Nội dung của funcs/func1.js:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;&amp;lt;code&amp;gt;# funcs/func1.js

const functions = require(&amp;#39;firebase-functions&amp;#39;);
const admin = require(&amp;#39;firebase-admin&amp;#39;);
admin.initializeApp(functions.config().firebase);
const db = admin.firestore();
module.exports = functions.https.onRequest((req, res)=&amp;gt;{
    // ......
});&amp;lt;/code&amp;gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Nội dung của funcs/func2.js:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;&amp;lt;code&amp;gt;# funcs/func2.js

const functions = require(&amp;#39;firebase-functions&amp;#39;)
const google = require(&amp;#39;googleapis&amp;#39;);
const rp = require(&amp;#39;request-promise&amp;#39;);
const projectId = process.env.GCLOUD_PROJECT;
module.exports = functions.storage.bucket(`${projectId}-bucket`)
                     .object()
                     .onFinalize((obj)=&amp;gt;{
    // ......
});&amp;lt;/code&amp;gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Như ví dụ trên ta có thể thấy được, khi index.js được gọi thì func1, func2 cũng được gọi theo. Khi đó chúng ta sẽ mất thêm thời gian để load các thư viện trong func1, func2.&lt;/p&gt;
&lt;p&gt;Và điều này sẽ làm cho thời gian response của chúng ta giảm xuống. Để giải quyết bài toán này thì rất đơn giản. Chỉ cho load những thư viện cần thiết thôi. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;&amp;lt;code&amp;gt;# index.js

if (!process.env.FUNCTION_NAME || process.env.FUNCTION_NAME === &amp;#39;Func1&amp;#39;) {
    exports.Func1 = require(&amp;#39;./funcs/func1&amp;#39;);
}
if (!process.env.FUNCTION_NAME || process.env.FUNCTION_NAME === &amp;#39;Func2&amp;#39;) {
    exports.Func2 = require(&amp;#39;./funcs/func2&amp;#39;);
}&amp;lt;/code&amp;gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Khi Cloud Functions được gọi thì khi đó biến môi trường FUNCTION&lt;em&gt;NAME sẽ được gán tên của hàm được gọi. Ví dụ như chúng ta muốn gọi func1 thì khi đó giá trị trong FUNCTION&lt;/em&gt;NAME sẽ là func1.&lt;/p&gt;
&lt;h4 id=&quot;2-up-version-của-module-thành-mới-nhất&quot;&gt;&lt;a href=&quot;#2-up-version-c%E1%BB%A7a-module-th%C3%A0nh-m%E1%BB%9Bi-nh%E1%BA%A5t&quot; aria-label=&quot;2 up version của module thành mới nhất permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;2. Up version của module thành mới nhất&lt;/h4&gt;
&lt;p&gt;Cloud Functions sẽ luôn luôn cache module Nodejs lại và chia sẻ đến mọi function trên toàn thế giới. Vì vậy nếu module bạn đang sử dụng có trong cache của Google Cloud Functions thì khi đó sẽ được dùng luôn và không phải mất thời gian load nữa.&lt;/p&gt;
&lt;p&gt;Vì vậy để có thể dùng được cache trong Cloud Functions thì chúng ta cố gắng update mọi module đến phiên bản mới nhất.&lt;/p&gt;
&lt;h4 id=&quot;3-thay-đổi-region-trong-cloud-functions&quot;&gt;&lt;a href=&quot;#3-thay-%C4%91%E1%BB%95i-region-trong-cloud-functions&quot; aria-label=&quot;3 thay đổi region trong cloud functions permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;3. Thay đổi region trong Cloud Functions&lt;/h4&gt;
&lt;p&gt;Trước kia thì Cloud Functions chỉ support mỗi region ở Mỹ. Nhưng từ tháng 6 năm ngoái nó support thêm 1 số region khác nữa. Nên các bạn cố gắng chọn region nào gần với hệ thống của các bạn nhất.&lt;/p&gt;
&lt;p&gt;Để setting region cho function thì chúng ta làm như sau:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;&amp;lt;code&amp;gt;const functions = require(&amp;#39;firebase-functions&amp;#39;);
module.exports = functions.region(&amp;#39;asia-northeast1&amp;#39;)
 .https
 .onRequest((req, res) =&amp;gt; {
    // ……
});&amp;lt;/code&amp;gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Về danh sách region mà Cloud Functions đang support thì các bạn có thể xem &lt;a href=&quot;https://cloud.google.com/functions/docs/locations&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;tại đây&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id=&quot;kết-luận&quot;&gt;&lt;a href=&quot;#k%E1%BA%BFt-lu%E1%BA%ADn&quot; aria-label=&quot;kết luận permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Kết luận&lt;/h2&gt;
&lt;p&gt;Qua bài này mình đã giới thiệu cho các bạn về 1 case study mà Ginco đã sử dụng và tối ưu Cloud Functions trong hệ thống của họ như thế nào. Hi vọng nó sẽ giúp ích cho các bạn 1 phần nào đó trong việc cải thiện hiệu năng.&lt;/p&gt;
&lt;p&gt;==============&lt;/p&gt;
&lt;p&gt;Để nhận thông báo khi có bài viết mới nhất thì các bạn có thể like fanpage của mình ở bên dưới nhé:&lt;/p&gt;
&lt;p&gt;→→→ &lt;a href=&quot;https://www.facebook.com/669339543503374&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Nghệ thuật Coding Fanpage Facebook&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Tham khảo:&lt;br&gt;
&lt;a href=&quot;https://speakerdeck.com/sota1235/realtime-messaging-with-firebase-number-phpcon2017&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;https://speakerdeck.com/sota1235/realtime-messaging-with-firebase-number-phpcon2017&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Xây dựng ứng dụng realtime messaging bằng Firebase xử lí 100k request/s]]></title><description><![CDATA[Cùng nhau tìm hiểu xem các kĩ sư Mercari đã làm như thế nào để có thể xây dựng được ứng dụng realtime messaging xử lí được hàng tỉ request/s.]]></description><link>https://nghethuatcoding.com2019/07/07/xay-dung-ung-dung-realtime-messaging-bang-firebase-xu-li-100k-request-s/</link><guid isPermaLink="false">https://nghethuatcoding.com2019/07/07/xay-dung-ung-dung-realtime-messaging-bang-firebase-xu-li-100k-request-s/</guid><pubDate>Sat, 06 Jul 2019 15:58:39 GMT</pubDate><content:encoded>&lt;p&gt;Hiện nay các ứng dụng live stream mọc lên như nấm, một trong số đó có thể được kể đến như Bigo, Facebook live, Tiktok, Youtube …&lt;/p&gt;
&lt;p&gt;Trong khi live stream thì người dùng có thể thả tim, like, comment … Và tất cả những chức năng đó hoàn toàn là realtime. &lt;/p&gt;
&lt;p&gt;Vậy làm thế nào có thể làm được tính năng realtime như thế? Và có thể xử lí được hàng triệu, hàng tỉ request/s như vậy chắc cũng nhiều người quan tâm, và bản thân mình cũng thế. Cũng muốn vọc vạch xem công nghệ đằng sau những ứng dụng đó như thế nào.&lt;/p&gt;
&lt;p&gt;Trong lúc tìm hiểu thì đọc thấy 1 bài rất hay mà kĩ sư Mercari đã chia sẻ. Và bên họ sử dụng &lt;a href=&quot;https://firebase.google.com/docs/database/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Firebase Realtime Database&lt;/a&gt; để giải quyết bài toán này.&lt;/p&gt;
&lt;p&gt;Cùng nhau tìm hiểu xem cụ thể sẽ làm như thế nào để có thể xây dựng được ứng dụng realtime messaging xử lí được hàng tỉ request/s như vậy.&lt;/p&gt;
&lt;h2 id=&quot;phạm-vi--bài-toán&quot;&gt;&lt;a href=&quot;#ph%E1%BA%A1m-vi--b%C3%A0i-to%C3%A1n&quot; aria-label=&quot;phạm vi  bài toán permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Phạm vi  bài toán&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 750px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/f219ca82030f9cd829346f24f607d993/35c67/IMG_3799.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 177.86666666666667%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAkCAIAAAAGkY33AAAACXBIWXMAAAsSAAALEgHS3X78AAAIc0lEQVRIxx2SeVSTZxbGv3OsQkKQkJXwkRDIQhISCEnIvoeshCwEkkASFkMIm4CK4MJSQNGCC62jg462Vm1daOtU61ZXFg8gjA5KYRyhLGqrVq3jmY7TzpxxPnvOe95z//k9z73PvcD//vvm7ds3/3o2f2BLc2V+7vpAwKWUOzTqPEPW1o0bd3W07WiquT9+49efH//7xcPfXv34+sn866cLr374/h9PFoCn8w/uTtzacexjezhkLy/L6Whz19bkZ2lcBm1ZQVHQXRSw2TrqKmf/MjBzZ2R88PLTuXv3JwZeLE7/NH8PuHNj8MT+w7k9Pfb29zN93tSha46TXxQblB6LosjhsoLJLrV2U024u6l+R+vmvu6tfxsfHDx7/PWj6Sezk8CzR/e7tjTn5eVUBgv8RYX+ULiuoWFNRdCXbfCYjBWBMqtUXOB0OrWa1srS+XtjPz+cmbs7cXtk7Ke5O8DE1dPVOSml2pSuIqXHrrPojWs7NwUbqpVcrjSVoc9gKTlMDogXJBGtIt7k0KVfns0ODdw+euzmwsxfgemxq94sRVtx/siBLd0hj0OaKWPSFWymjssW0ykCWnImLZlLSRTQKekksHtD/cul+4ufX335hzOzl4eB4W9OWoXcfWuCD7/+49Dedp9KzKOQ08kkUQo1IzmRkRDPJiVwEokcMpFNAh1KyYOJgZcXhp4d/fbpzWHg6pdHdBzGgYbwo3OfjB7u3VDgECQnUvF4OiEuJZ5AxmISMRioZoLvVLhk4pkjfY8XJ5eW7vywMAmMnO83Z6Qeaqrs72pq8jmb3NaabK2GzaAT8BBJQqGIGBQFj4PkmAkgDY/Z3lj3YmFqaWrs0cw4cGfgvF3I3b82dKW3Zbiv60RL7fbi3A6vtUQtMnJZYmqSiJrEJoJJOByNQKDisKE82+J3o4vTo0vTt4ClyWG/WtxbFfiqc83O6uI1TmOn33Zue+NWn93BS+WRSSpWiiiZxE9KpMbhk3FYs5j/3eiVpemxhalR4MGNs4Xi9Ha/o8FpMHAYVh778PqyVyPnLvS2t7iMVVmyoEpQZ1aUKDNTCHFkHFbMoN44c3xp5tbc5E3g+dzdalf2nkr/i28/u7ar+dTmmrn+fb+MXJj49MOzXQ1XdrT0b6w/Ul++zqplQingsBxSwon9uxenx/5+exD4z+sfj+7t6fLnPf/q2MPjh2Y/75v5rPfXycGly6cONwT7W+ovdmz+tDZUkSWDYoNgGg6zq7Vxfmp0ZuI68Ob50sA3J0u0suFdWyY+2nmmdf3p9vrHF45d+6i9t8zd5rbsLMnv9Fi9kgwSGk3EoMloVIXHeW/kyvT4deCfT+fv3x6ySQS7ywtPt6ztKrTvqSjY5rdX6cQlUm6b29yWb1prURrTGHHIGBCFgpbn0ipuXvjiHfzy8eyT2buBHJNTkLa9yNlo0+yvLd5T5QupBCElv0TOC6kzq/RSXiIRG40gxCIJMTHZUuHFk59M3boOHD10+Nqpg03FViiJGrOqNc8Q1om8wnQXN9XKpKuTSQEp1y1OT0TGYhBREI+LRsg5rHPHD06OXAG6t3af3Luz2ZfLSgDTSGBQLWyyqTc59SEJL8Bjh1WZJUo+J56AgsGxCAQa/o6Hju9gT8f0+A3gg87tDb5gWKJX0pjxyBhC9MosBuXDCu++at8Gu6bOJJNQEpErIjFwOBoOj4XB0IgoYixSTqf1rK8HNjmLXKnCkFifx5UkozFxUdHU2Fh7BrPOogzrxCY2PT46GrF8+e+2cGRkJAoOB5ExSTEoMZgEuDgiX4YiLDFSUFhSLIoDxovJRGs6o0DM8UnStAxKTERk5LL3cBAMg0M1EgbDIxBEBDINRwTEJGoeR5IWR4xe9h4YHUOLxSipZL+MW6EVlWsyCyRcTjweFQnDRSGgH3KOiYzEIqIIMAQTTQA4uAQFGdJHszGgIjGFR0jigWDYIId2W6kTlqkEPik3DYzHw6KgtleuWLEyIgIDg0MwPRYPqDm8VWZnmdlZafdU2tzl5lynWF3ncfdtqO2pKd1Wvaouz6oVCHRimV4mZ9NoiPeWY2FRcbAoWiwOUKRwgubcEqO9NCvHrzF7ZDqnUFWos2yrLt+7rmJrsGB1vl3CThexUoVMllIgwEdFYyNgcTAEDYkFVIz0oNVVYnaEc/I9Cn1Al12oz3arjWGbc3d9aG9jtVurlnP5epFEzc9UCzL5dAY+8l3bNCQOMKQLvTpLQG8tNdgKIWelIUekKNCavQrD++Wlfc3rrFK5WiBUcHmMOJCOj6dg8BCZAI9OgWa28qT5amOh1lJqtK+yOCHeKdXkyrS5Es1qr7cx4JVQWJlkegaYnBARjV0WgV8BI0XFJK9EsTAEwCaQe3TmfJUB8vRpLXnyrIAhx63Q24SKAr3FxBPKklhGTqYxTShnpIloLBoah4XuBI4iR+EAM1ecp9L/bm7Ok+kcUo1dpnVrTA6Jyp9lzZFp8pV6r8bkN+YUGKweU3YGSKsEcw5m2zfatYCCwfGojB59tkdjcsl0kJBTlWXKlKpSMyChbKHcnC5xiFRQbRUqjHwJk0DsT1n/tqVnoLkAYIMkK19ml2pyhHKbSGkWyAw8MRtPTFiOYETjuDgiB4UTxCWmouM5WCJ7JZ68AvYxb/Uj68E+nh9ggaR1peVyKjtgtBVZHKIkRtgb4JOofouj2OpQU/jVpnohKZWKxHJQ8TKxSuko4sXRHI6QlqED1pSWz80vdqxtunz+4tVLl5sqV8/Ofr+hqu7cn89+/WV/o7vlt8G3PnkgARaVGkso7ezrvL6Yqs7906UpS2s3wKekhEtKNayMVQ439EQURkO4WkxhBp2eUrtLSObWuurT8CAViediQAFfy7cHaSgw2+YH2Zz/A13Y6c6zkNl+AAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/f219ca82030f9cd829346f24f607d993/01472/IMG_3799.webp 240w,
/static/f219ca82030f9cd829346f24f607d993/222bd/IMG_3799.webp 480w,
/static/f219ca82030f9cd829346f24f607d993/41df4/IMG_3799.webp 750w&quot;
          sizes=&quot;(max-width: 750px) 100vw, 750px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/f219ca82030f9cd829346f24f607d993/0783d/IMG_3799.png 240w,
/static/f219ca82030f9cd829346f24f607d993/782f4/IMG_3799.png 480w,
/static/f219ca82030f9cd829346f24f607d993/35c67/IMG_3799.png 750w&quot;
          sizes=&quot;(max-width: 750px) 100vw, 750px&quot;
          type=&quot;image/png&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/f219ca82030f9cd829346f24f607d993/35c67/IMG_3799.png&quot;
          alt=&quot;IMG 3799&quot;
          title=&quot;IMG 3799&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Hình ảnh bên trên mình chụp được thông qua ứng dụng &lt;a href=&quot;https://www.bigo.tv/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Bigo&lt;/a&gt; (thi thoảng ngắm gái :D).&lt;/p&gt;
&lt;p&gt;Ai dùng Bigo hay Facebook live rồi cũng đều biết ngoài tính năng live stream ra thì còn 1 vài tính năng khác nữa như gửi comment, like, gửi tim, tặng coin … Và tất cả những thứ này đều realtime.&lt;/p&gt;
&lt;p&gt;Nên hôm nay mình chỉ tập trung vào những tính năng realtime như comment, like, gửi tim …&lt;/p&gt;
&lt;h2 id=&quot;firebase-realtime-database-là-gì&quot;&gt;&lt;a href=&quot;#firebase-realtime-database-l%C3%A0-g%C3%AC&quot; aria-label=&quot;firebase realtime database là gì permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Firebase Realtime Database là gì?&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Là sản phẩm của Google (chính xác là được Google mua lại)&lt;/li&gt;
&lt;li&gt;Là cơ sở dữ liệu NoSQL được lưu trữ và quản lí trên đám mây.&lt;/li&gt;
&lt;li&gt;Dữ liệu được lưu đưới dạng JSON.&lt;/li&gt;
&lt;li&gt;Client có thể subscribe dữ liệu 1 cách realtime.&lt;/li&gt;
&lt;li&gt;Tại thời điểm hiện tại (2019/07/06) thì firebase realtime database xử lí được 1 triệu request đồng thời và 10k write/s. Tương lai số lượng này có thể tăng lên. Số liệu tham khảo &lt;a href=&quot;https://firebase.google.com/docs/database/rtdb-vs-firestore&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;ở đây&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Ngoài tính năng của 1 database ra thì nó còn có 1 số tính năng khác nữa như:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Tính năng Authentication thông qua Facebook, Google, Twitter …&lt;/li&gt;
&lt;li&gt;Có thể cài đặt rule để phân quyền xem ai được read, write đến resource của database. Ví dụ như ai login mới có quyền read, write chẳng hạn. &lt;/li&gt;
&lt;li&gt;Bởi vì Firebase được dùng ở phía client (web, mobile) nên việc decode để lấy ra key của firebase là điều hoàn toàn dễ dàng. Do đó nếu không cài đặt rule 1 cách cẩn thận thì có thể sẽ bị bên thứ 3 read, write tài nguyên 1 cách dễ dàng.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;kiến-trúc-hệ-thống&quot;&gt;&lt;a href=&quot;#ki%E1%BA%BFn-tr%C3%BAc-h%E1%BB%87-th%E1%BB%91ng&quot; aria-label=&quot;kiến trúc hệ thống permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Kiến trúc hệ thống&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 960px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/8b6066775e59ff9139c0a27845cfa848/2f950/mercari-realtime-mesaging-architecture.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 51.25000000000001%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsSAAALEgHS3X78AAABeElEQVQoz31Ry06DQBTlU9z7DX6Fa//HX3DnB2hcuWlijI3VJk1rsWlJgQKV18CUAQaB8pgZBxAfSfVmFnfuvefcM2cE9jOqqgTAcv3QAQwFKYRAUVxFAaqKXYdlxbkyPnq6PJlejQKLjwuUUg+ArWnallVD6KrqZDpbSpLlOLz1RUtZkzt5cvZyezy4OH2+rihpwGEUIwiRptGiKKpK13VFljHGDaaPLuOVbYJu5NkQvhFKhQCFi+Wa8FFC2L/BmVEcZ3DHbKcVQwW+1jDMMnlnlLCWm7anl9vubNM8z4Hvm5YV+363R7Bt5374WGFcI0SiiGQZn06zbGvauyD8puh07feRsTVMh69swDV3mAsqS065nM9NWWYAaGv1dSWLixVNEhKGnqq6sgx1nSYYufw7wCe4oyaEiKKobjZpnvOrB7zB3cNoPGGkJmUZYRyEYdRamKbpSpLi+AeYvwtCSHrPdkGga5pt22VVHbCu/0Lhd5H+ZfXB1gem0jTED6j5iQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/8b6066775e59ff9139c0a27845cfa848/01472/mercari-realtime-mesaging-architecture.webp 240w,
/static/8b6066775e59ff9139c0a27845cfa848/222bd/mercari-realtime-mesaging-architecture.webp 480w,
/static/8b6066775e59ff9139c0a27845cfa848/620b9/mercari-realtime-mesaging-architecture.webp 960w,
/static/8b6066775e59ff9139c0a27845cfa848/28063/mercari-realtime-mesaging-architecture.webp 1440w,
/static/8b6066775e59ff9139c0a27845cfa848/ded3f/mercari-realtime-mesaging-architecture.webp 1600w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/8b6066775e59ff9139c0a27845cfa848/0783d/mercari-realtime-mesaging-architecture.png 240w,
/static/8b6066775e59ff9139c0a27845cfa848/782f4/mercari-realtime-mesaging-architecture.png 480w,
/static/8b6066775e59ff9139c0a27845cfa848/f570d/mercari-realtime-mesaging-architecture.png 960w,
/static/8b6066775e59ff9139c0a27845cfa848/8d0ff/mercari-realtime-mesaging-architecture.png 1440w,
/static/8b6066775e59ff9139c0a27845cfa848/2f950/mercari-realtime-mesaging-architecture.png 1600w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/png&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/8b6066775e59ff9139c0a27845cfa848/f570d/mercari-realtime-mesaging-architecture.png&quot;
          alt=&quot;mercari realtime mesaging architecture&quot;
          title=&quot;mercari realtime mesaging architecture&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Kiến trúc khá là simple phải không nào. Bây giờ mình sẽ đi giải thích từng bộ phận trong kiến trúc này.&lt;/p&gt;
&lt;p&gt;Đầu tiên khi người dùng thực hiện comment, like thì khi đó sẽ gửi request đến API Server để xử lí. Tại sao ở bước này không gửi trực tiếp đến Firebase mà phải thông qua API Server để làm gì? Bởi vì ngoài mục đích insert data đến firebase database còn có 1 số nhiệm vụ khá quan trọng khác nữa như authentication người dùng, detect tấn công xâm nhập … Nên việc xử lí những logic phức tạp đó bắt buộc phải thông qua API Server.&lt;/p&gt;
&lt;p&gt;Sau khi API Server nhận được request từ phía người dùng. Khi đó nó sẽ thực hiện việc chuyển data đó vào queue để xử lí thông qua worker.&lt;/p&gt;
&lt;p&gt;Worker sẽ lấy dữ liệu từ queue ra và thực hiện insert data đến Firebase thông qua REST API của Firebase.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tại sao từ API Server không gửi data trực tiếp đến Firebase?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Chúng ta hãy luôn luôn nhớ 1 điều là ngoài mình ra không bao giờ được tin tưởng bất kì thằng nào cả (Don’t trust each other).&lt;/p&gt;
&lt;p&gt;Nếu API Server gửi request trực tiếp đến Firebase thì có vấn đề gì xảy ra ở đây? Chẳng may lúc này firebase database bị down. Khi đó API Server sẽ không thể gửi request được nữa và có thể gây ra lỗi. Khi đó phía client cũng bị lỗi theo. Và làm cho trải nghiệm người dùng bị gián đoạn.&lt;/p&gt;
&lt;p&gt;Do đó mới thông qua queue để xử lí. Nếu mà Firebase Database có bị down đi chăng nữa thì job đó sẽ bị failed và sẽ được retries lại ngay sau đó. Hơn nữa nhờ cơ chế work-queue này giúp chúng ta scalable khá tốt ở chỗ này. &lt;/p&gt;
&lt;p&gt;Về Queue thì hiện nay có rất nhiều như &lt;a href=&quot;https://kafka.apache.org/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Kafka&lt;/a&gt;, &lt;a href=&quot;https://q4m.github.io/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Q4M&lt;/a&gt; … Về cá nhân mình thích nhất thằng Kafka vì nó luôn luôn đảm bảo đúng thứ tự xử lí. Và hơn nữa nó lại phân tán nữa nên tính mở rộng của nó khá là cao.&lt;/p&gt;
&lt;p&gt;Và cuối cùng phía Client chỉ cần Subscribe event từ Firebase Realtime Database là có thể nhận dữ liệu 1 cách realtime rồi.&lt;/p&gt;
&lt;p&gt;Ở bước này chúng ta sẽ không xử lí gì cả và chỉ cho hiển thị dữ liệu thôi. Như thế tốc độ sẽ khá là nhanh.&lt;/p&gt;
&lt;h2 id=&quot;về-tính-mở-rộng-của-firebase-realtime-database&quot;&gt;&lt;a href=&quot;#v%E1%BB%81-t%C3%ADnh-m%E1%BB%9F-r%E1%BB%99ng-c%E1%BB%A7a-firebase-realtime-database&quot; aria-label=&quot;về tính mở rộng của firebase realtime database permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Về tính mở rộng của Firebase Realtime Database&lt;/h2&gt;
&lt;p&gt;Đầu tiên mình muốn nhấn mạnh 1 điều là Firebase Realtime Database không thể scale up với scale out được nhé.&lt;/p&gt;
&lt;p&gt;Do đó trước khi đưa nó vào hệ thống thì chúng ta cần &lt;a href=&quot;https://nghethuatcoding.com/2019/05/18/test-tai-he-thong-thuc-su-can-thiet/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;test tải&lt;/a&gt; kĩ càng trước xem cần bao nhiêu con database thì hợp lí, dựa vào tuỳ tình hình mà sẽ tiến hành &lt;a href=&quot;https://nghethuatcoding.com/2019/05/19/instagram-da-sinh-ra-id-trong-database-cua-ho-nhu-the-nao/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;sharding&lt;/a&gt; để đáp ứng được số lượng request đề ra.&lt;/p&gt;
&lt;p&gt;Như phần trên mình có nói, firebase realtime database hiện tại chỉ cho phép 1 triệu request đồng thời và 10k write/s. Do đó để không vượt quá ngưỡng này thì sharding là điều hoàn toàn cần thiết.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 960px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/abcbc9bd52efacf32e41b895fdcff431/2f950/realtime-mesaging-sharding.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 51.25000000000001%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsSAAALEgHS3X78AAABb0lEQVQoz6WRy07DMBBF8//fgmDDSwhYIVTEohXQNk39iEPjNnEeDk1Jm9ge7KQq7BlZV/L1PZ6x7LVthymbBShAdLZAicgAYJ2k8wAtEAkwXRJ2OBysyTeJj3CAw3id2KOilJ7WmpKQUkYJQ4hkIre5JEnxEmNE4hW3t3ZKOTjmYRiFlCWbJAjQ7rvxrKuqSu92Vu0ybWsdq+rry63KKfRlzS7LVV0rKXXTWMfBYIFPbOoCZN6njNM0hiKGWkDXDjBobUSkxcbIDLQ5wl3TofMpG2UF3TpWuQM+Wk0voumd7A7m2Bng44zNL3n0ItxWm35sBY9Xze15sSJDA6cbbu6vxfPDVis41etT83CThUs9zOeZfkiRCcKI+hPUWq3WrJRFnzN9Y6i2ZZrztmuGjNc/uWXs0/eXUlYnOM+L8eTN94P9fj84SimM6XjyHsf8F7a/xTlHCNV1fYLt30ZRJNJUD8/oqywLxtgp5sE/6gcOxjdE+TfjrwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/abcbc9bd52efacf32e41b895fdcff431/01472/realtime-mesaging-sharding.webp 240w,
/static/abcbc9bd52efacf32e41b895fdcff431/222bd/realtime-mesaging-sharding.webp 480w,
/static/abcbc9bd52efacf32e41b895fdcff431/620b9/realtime-mesaging-sharding.webp 960w,
/static/abcbc9bd52efacf32e41b895fdcff431/28063/realtime-mesaging-sharding.webp 1440w,
/static/abcbc9bd52efacf32e41b895fdcff431/ded3f/realtime-mesaging-sharding.webp 1600w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/abcbc9bd52efacf32e41b895fdcff431/0783d/realtime-mesaging-sharding.png 240w,
/static/abcbc9bd52efacf32e41b895fdcff431/782f4/realtime-mesaging-sharding.png 480w,
/static/abcbc9bd52efacf32e41b895fdcff431/f570d/realtime-mesaging-sharding.png 960w,
/static/abcbc9bd52efacf32e41b895fdcff431/8d0ff/realtime-mesaging-sharding.png 1440w,
/static/abcbc9bd52efacf32e41b895fdcff431/2f950/realtime-mesaging-sharding.png 1600w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/png&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/abcbc9bd52efacf32e41b895fdcff431/f570d/realtime-mesaging-sharding.png&quot;
          alt=&quot;realtime mesaging sharding&quot;
          title=&quot;realtime mesaging sharding&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Chúng ta sẽ sharding database theo liveID. Như trong ví dụ trên thì với live&lt;em&gt;id=1 và 4 sẽ cho trong db1, live&lt;/em&gt;id = 2 và 5 sẽ cho trong db2, và live_id=3 và 6 sẽ cho trong db3&lt;/p&gt;
&lt;p&gt;Nếu chia như thế thì chúng ta có thể xử lí được 3 triệu request đồng thời và 30k write/s.&lt;/p&gt;
&lt;p&gt;Ở đây có 1 điểm chắc nhiều người cũng đang thắc mắc. Ví dụ live_id=1 (của 1 em gái xinh xắn nào đó) có tới hàng triệu anh vào xem live và comment. Nếu số lượng request đó vượt quá 1 triệu thì sẽ bị block lại và không gửi đc nữa. Ví dụ như ai đó thả tim liên tục chăng hạn …&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Vậy ở chỗ này nên làm thế nào để có thể hạn chế được điều đó?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Có 1 solution khá đơn giản. Ví dụ như chức năng like chẳng hạn. Khi ấn like chúng ta sẽ không send ngay đến firebase mà sẽ đợi khoảng 10s sau đó mới send chẳng hạn. (Cứ miễn làm sao mà không làm giảm trải nghiệm của người dùng là được).&lt;/p&gt;
&lt;p&gt;Để thực hiện được logic này chúng ta có thể sử dụng Redis hoặc memcached để lưu lại live_id với timestamp tương ứng. Sau khoảng 10s từ lúc insert vào redis thì sẽ không làm gì cả, sau 10s thì sẽ insert data đến firebase.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;&amp;lt;code&amp;gt;&amp;lt;?php
$memcachd = new \Sample\MemcachedClient();
$firebase_client = new \Sample\FirebaseClient();
$like_counter = new \Sample\LikeCounter();
$live_id = \HttpParameter::get(&amp;#39;live_id&amp;#39;);

$like_count = $like_counter-&amp;gt;increment($live_id);

if ($memcached-&amp;gt;get(&amp;#39;key-prefix-like-&amp;#39; . $live_id)) {
    // Skip
} else {
    $firebase_client-&amp;gt;updateLikeCount($like_count);
    $memcached-&amp;gt;add(&amp;#39;key-prefix-like-&amp;#39; . $live_id, true, 10); // 10s
}&amp;lt;/code&amp;gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Ngoài ra mình nhấn mạnh 1 điều là do Firebase được dùng phía client (như web, mobile) nên việc lộ key của firebase là điều không thể tránh khỏi. Do đó việc cài đặt rule để phân quyền người dùng access đến resource là điều vô cùng cần thiết và ở bài này mình sẽ không đi sâu vào nữa. Mọi người có thể tìm hiểu thêm về &lt;a href=&quot;https://firebase.google.com/docs/database/security&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Firebase Realtime Database Rule&lt;/a&gt; ở đây nhé.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 903px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/95c8fa3101bcd9494e96dc49a9dd1490/2f110/Screen-Shot-2019-07-07-at-8.52.57.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 49.05869324473976%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAABdUlEQVQoz1VSy1LDMAzM//8SN07QZKYNeThx7LzaDoEjVxqLXRExw0FjWc9dSVmMUYZhkLquxTknfd+rhBBUaOu6TvV5nsV7rzJNk76MHcdRhXWyZVk0oW1bdTKIfxaiTrsVZQKFNjag3jSN6gTGmGxd179EFEzQE4MQnBCww54OFnzVT2EyxP5ajICyCTR6GvAZ2BXikUzb9XZTHwsZNaPNBqRNILTzJZBsjkH6tpHqcuabXFWlARRH7z+Cc/0Uw+cxrx1FNiQvKP51zFhRkzob6gxDXYkrcqlfX6Qt8hTeLqnJT9IVeQjn4jm0TWQgEr+B7oSZP4HeSqQoTuTp8OssM9IKgLxcr0L6t/sdtGMaob9vm9IGQk26w7fBxkXSxvnbco4xYIagM+AzckvOIdFrMuw7bA/opMpNE80O+4P0bY5cDIvyz2vQLWvRo4s57a7s1uz+zG53SR83/B/hLwIpy1JsHhZ8oFWdm7QTsbu0Jsyh/gNLKsYs5mQAhQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/95c8fa3101bcd9494e96dc49a9dd1490/01472/Screen-Shot-2019-07-07-at-8.52.57.webp 240w,
/static/95c8fa3101bcd9494e96dc49a9dd1490/222bd/Screen-Shot-2019-07-07-at-8.52.57.webp 480w,
/static/95c8fa3101bcd9494e96dc49a9dd1490/75e82/Screen-Shot-2019-07-07-at-8.52.57.webp 903w&quot;
          sizes=&quot;(max-width: 903px) 100vw, 903px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/95c8fa3101bcd9494e96dc49a9dd1490/0783d/Screen-Shot-2019-07-07-at-8.52.57.png 240w,
/static/95c8fa3101bcd9494e96dc49a9dd1490/782f4/Screen-Shot-2019-07-07-at-8.52.57.png 480w,
/static/95c8fa3101bcd9494e96dc49a9dd1490/2f110/Screen-Shot-2019-07-07-at-8.52.57.png 903w&quot;
          sizes=&quot;(max-width: 903px) 100vw, 903px&quot;
          type=&quot;image/png&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/95c8fa3101bcd9494e96dc49a9dd1490/2f110/Screen-Shot-2019-07-07-at-8.52.57.png&quot;
          alt=&quot;Screen Shot 2019 07 07 at 8 52 57&quot;
          title=&quot;Screen Shot 2019 07 07 at 8 52 57&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Như hình ảnh bên trên là 1 ví dụ về lộ key firebase ở phía javascript.&lt;/p&gt;
&lt;h2 id=&quot;kết-luận&quot;&gt;&lt;a href=&quot;#k%E1%BA%BFt-lu%E1%BA%ADn&quot; aria-label=&quot;kết luận permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Kết luận&lt;/h2&gt;
&lt;p&gt;Theo như các anh Mercari chia sẻ thì sau khi release tính năng live stream đó thì đến bây giờ cũng được 2 năm rồi mà &lt;strong&gt;chưa lần nào Firebase bị down&lt;/strong&gt; cả. &lt;/p&gt;
&lt;p&gt;Firebase quả thực rất mạnh. Nếu ai muốn dev thật nhanh hoặc muốn làm bản prototype thì có lẽ Firebase là 1 sự lựa chọn đúng đắn.&lt;/p&gt;
&lt;p&gt;Với loại truyền thống thì chúng ta sẽ cần phải có DB, và chuẩn bị API phía backend để thao tác với dữ liệu trong DB. Nhưng Firebase thì khác, nó cung cấp cho ta DB và API để thao tác đến DB rồi. Do đó không cần phải dev API làm gì cho mệt. Cứ dùng Firebase SDK là xong.&lt;/p&gt;
&lt;p&gt;Ngoài ra mình nhấn mạnh 1 điều là do Firebase được dùng phía client (như web, mobile) nên việc lộ key của firebase là điều không thể tránh khỏi. Do đó việc cài đặt rule để phân quyền người dùng access đến resource là điều vô cùng cần thiết và ở bài này mình sẽ không đi sâu vào nữa. Mọi người có thể tìm hiểu thêm về &lt;a href=&quot;https://firebase.google.com/docs/database/security&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Firebase Realtime Database Rule&lt;/a&gt; ở đây nhé.&lt;/p&gt;
&lt;p&gt;Hiện tại sắp tới công ty mình cũng đang chuẩn bị làm 1 service mới và sếp yêu cầu 2 tháng phải xong. Team mình cũng quyết định chọn Firebase cho giải pháp lần này.&lt;/p&gt;
&lt;p&gt;==============&lt;/p&gt;
&lt;p&gt;Để nhận thông báo khi có bài viết mới nhất thì các bạn có thể like fanpage của mình ở bên dưới nhé:&lt;/p&gt;
&lt;p&gt;→→→ &lt;a href=&quot;https://www.facebook.com/669339543503374&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Nghệ thuật Coding Fanpage Facebook&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Tham khảo:&lt;br&gt;
&lt;a href=&quot;https://speakerdeck.com/sota1235/realtime-messaging-with-firebase-number-phpcon2017&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;https://speakerdeck.com/sota1235/realtime-messaging-with-firebase-number-phpcon2017&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Engineer JAV thực hiện test theo cách kinh điển nhất như thế nào]]></title><link>https://nghethuatcoding.com2019/06/27/engineer-jav-thuc-hien-test-theo-cach-kinh-dien-nhat/</link><guid isPermaLink="false">https://nghethuatcoding.com2019/06/27/engineer-jav-thuc-hien-test-theo-cach-kinh-dien-nhat/</guid><pubDate>Thu, 27 Jun 2019 13:43:19 GMT</pubDate><content:encoded>&lt;p&gt;Hôm qua đọc được bài khá hay về 1 thanh niên nhật (tên miwa) chia sẻ cách mà engineer trong công ty của họ test như thế nào. &lt;/p&gt;
&lt;p&gt;Đọc xong thấy công nhận khâm phục thật. Công ty họ chạy theo cách đó được gần hơn chục năm rồi. Và gần như sản phẩm chạy rất khó ra bug.&lt;/p&gt;
&lt;p&gt;Cùng nhau đọc xem họ làm kiểu gì nhé.&lt;/p&gt;
&lt;h2 id=&quot;bối-cảnh&quot;&gt;&lt;a href=&quot;#b%E1%BB%91i-c%E1%BA%A3nh&quot; aria-label=&quot;bối cảnh permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Bối cảnh&lt;/h2&gt;
&lt;p&gt;Công ty này chuyên phát triển về các phần mềm cho lĩnh vực y tế và cũng chạy được gần 30 năm rồi.&lt;/p&gt;
&lt;p&gt;Hiện tại anh Miwa cũng đã từng tham gia vào nhiều dự án, làm với rất nhiều các kĩ sư nhưng team hiện tại mà a đang làm thì quả thực năng lực test của các engineer khá là đỉnh.&lt;/p&gt;
&lt;p&gt;Vậy tại sao họ lại test đỉnh như vậy?&lt;/p&gt;
&lt;p&gt;Có rất nhiều yếu tố giúp họ làm được điều đó, nhưng mà trong những thứ đó có 1 thứ làm mình thực sự ấn tượng đó là: &lt;strong&gt;Mỗi ngày mọi kĩ sư bỏ ra 1 tiếng để test hệ thống.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Từ trước đến giờ quả thực chưa gặp công ty nào kiên trì như công ty này. Kĩ sư thì mình nghĩ ai ai cũng ghét test cả, ai cũng muốn làm cho xong. Nhưng mà công ty này đã làm được, và làm được trên 15 năm mới kinh khủng.&lt;/p&gt;
&lt;h2 id=&quot;mọi-engineer-mỗi-ngày-phải-dành-ra-1-tiếng-để-test-hệ-thống&quot;&gt;&lt;a href=&quot;#m%E1%BB%8Di-engineer-m%E1%BB%97i-ng%C3%A0y-ph%E1%BA%A3i-d%C3%A0nh-ra-1-ti%E1%BA%BFng-%C4%91%E1%BB%83-test-h%E1%BB%87-th%E1%BB%91ng&quot; aria-label=&quot;mọi engineer mỗi ngày phải dành ra 1 tiếng để test hệ thống permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Mọi engineer mỗi ngày phải dành ra 1 tiếng để test hệ thống&lt;/h2&gt;
&lt;p&gt;Hằng ngày, bất kì ai trong team cũng phải bỏ ra 1 tiếng để test. &lt;/p&gt;
&lt;p&gt;Thời gian test thì sẽ từ 10:00 ~ 17:00 mỗi ngày. Không phải là trong khoảng thời gian đó ai thích test lúc nào thì test mà thời gian này sẽ được fix từ trước cùng với PC để test.&lt;/p&gt;
&lt;p&gt;Ví dụ như A sẽ test từ 10:00 ~ 11:00 sử dụng PC-01.&lt;br&gt;
B sẽ test từ 11:00 ~ 12:00 sử dụng PC-02&lt;br&gt;
Và cứ thế cho đến hết member thì thôi.&lt;/p&gt;
&lt;p&gt;PC test ở đây được cài đặt sẵn chương trình để test rồi. Việc test này cũng giống như khách hàng đang sử dụng sản phẩm thật vậy.&lt;/p&gt;
&lt;p&gt;Test case thì đã được chuẩn bị từ trước và cứ thế làm theo. Test từng case 1 và xác nhận xem kết quả có như mong đợi hay không và ghi lại kết quả đã test. Đương nhiên có thể free test. Cứ miễn là tìm ra bug thì thôi.&lt;/p&gt;
&lt;p&gt;Cứ hết thời gian là kết thúc quá trình test, kể cả chưa test xong đi chăng nữa.&lt;/p&gt;
&lt;h2 id=&quot;kết-quả-thu-được-sau-quá-trình-test-hệ-thống&quot;&gt;&lt;a href=&quot;#k%E1%BA%BFt-qu%E1%BA%A3-thu-%C4%91%C6%B0%E1%BB%A3c-sau-qu%C3%A1-tr%C3%ACnh-test-h%E1%BB%87-th%E1%BB%91ng&quot; aria-label=&quot;kết quả thu được sau quá trình test hệ thống permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Kết quả thu được sau quá trình test hệ thống&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Có thể biết được những chức năng hay sản phẩm mà bản thân mình không tham gia phát triển.&lt;/li&gt;
&lt;li&gt;Biết được workflow mà khách hàng sử dụng hệ thống&lt;/li&gt;
&lt;li&gt;Có thể phát hiện được những bug tiềm tàng.&lt;/li&gt;
&lt;li&gt;Biết được quá trình phát triển phần mềm như thế nào? ai là người đảm nhiệm, ai thiết kế …&lt;/li&gt;
&lt;li&gt;Ngoài những test case được ghi trong bản đặc tả ra thì có thể test tự do. Do đó có thể tìm ra được những bug mà ít ai để ý đến.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;kết-luận&quot;&gt;&lt;a href=&quot;#k%E1%BA%BFt-lu%E1%BA%ADn&quot; aria-label=&quot;kết luận permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Kết luận&lt;/h2&gt;
&lt;p&gt;Ai ai cũng ghét test nhưng mà nếu làm theo cách này quả thực chất lượng sản phẩm theo mình nghĩ sẽ được cải thiện rõ rệt.&lt;/p&gt;
&lt;p&gt;1 mình tester thì có thể không cover đủ hết tất tần tật các trường hợp nhưng nếu có sự giúp đỡ của các engineer thì điều đó là hoàn toàn có thể.&lt;/p&gt;
&lt;p&gt;Nếu dự án nào đang gặp phải vấn đề về chất lượng thì hi vọng qua bài này sẽ có chút giải pháp gì đó cho các bạn.&lt;/p&gt;
&lt;p&gt;Chúc các bạn thành công.&lt;/p&gt;
&lt;p&gt;==============&lt;/p&gt;
&lt;p&gt;Để nhận thông báo khi có bài viết mới nhất thì các bạn có thể like fanpage của mình ở bên dưới nhé:&lt;/p&gt;
&lt;p&gt;→→→ &lt;a href=&quot;https://www.facebook.com/669339543503374&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Nghệ thuật Coding Fanpage Facebook&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Tham khảo:&lt;br&gt;
&lt;a href=&quot;http://miwa719.hatenablog.com/entry/daily20190624&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;http://miwa719.hatenablog.com/entry/daily20190624&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Những chú ý khi chọn MySQL làm database]]></title><link>https://nghethuatcoding.com2019/06/25/nhung-chu-y-khi-chon-mysql-lam-database/</link><guid isPermaLink="false">https://nghethuatcoding.com2019/06/25/nhung-chu-y-khi-chon-mysql-lam-database/</guid><pubDate>Tue, 25 Jun 2019 13:36:57 GMT</pubDate><content:encoded>&lt;p&gt;Đến với lập trình web thì chắc hẳn ai trong số chúng ta cũng đã từng làm việc với database. Đặc biệt là hệ quản trị cơ sở dữ liệu quan hệ như MySQL, PostgreSQL …&lt;/p&gt;
&lt;p&gt;Với trường hợp nào thì nên dùng MySQL, trường hợp nào không nên dùng MySQL? Khi vận hành MySQL thì nên chú ý những thứ gì? …&lt;/p&gt;
&lt;p&gt;Hôm nay mình chia sẻ với mọi người kinh nghiệm vận hành MySQL mà mình đã học được qua nhiều năm.&lt;/p&gt;
&lt;h2 id=&quot;scaling-khá-vất-vả&quot;&gt;&lt;a href=&quot;#scaling-kh%C3%A1-v%E1%BA%A5t-v%E1%BA%A3&quot; aria-label=&quot;scaling khá vất vả permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Scaling khá vất vả&lt;/h2&gt;
&lt;h3 id=&quot;mặc-dù-khi-release-xong-chạy-rất-nhanh-nhưng-&quot;&gt;&lt;a href=&quot;#m%E1%BA%B7c-d%C3%B9-khi-release-xong-ch%E1%BA%A1y-r%E1%BA%A5t-nhanh-nh%C6%B0ng-&quot; aria-label=&quot;mặc dù khi release xong chạy rất nhanh nhưng  permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Mặc dù khi release xong chạy rất nhanh nhưng …&lt;/h3&gt;
&lt;p&gt;Để dễ hiểu thì mình lấy ra 1 ví dụ về đã dùng MySQL vào trong hệ thống chat với dữ liệu message cực lớn (Ví dụ như Facebook Messenger chẳng hạn)&lt;/p&gt;
&lt;p&gt;Khi đó bảng để lưu message mình đoán sẽ kiểu như này:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;&amp;lt;code&amp;gt;messages (id, room_id, sender_id, message_body, created_at)&amp;lt;/code&amp;gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Đương nhiên không chỉ có mỗi bảng này mà còn rất nhiều bảng khác nữa. Ví dụ như bảng &lt;strong&gt;users&lt;/strong&gt; để lưu thông tin người dùng.&lt;br&gt;
Bảng &lt;strong&gt;attachments&lt;/strong&gt; để quản lý thông tin file được đính kèm khi gửi.&lt;br&gt;
Bảng &lt;strong&gt;tags&lt;/strong&gt; để lưu thông tin tag của người dùng…&lt;/p&gt;
&lt;p&gt;Ngoài ra không chỉ có tính năng chat mà có khi chúng ta sẽ cần có cả tính năng phân tích hành vi của người dùng nữa. Nên lúc đó có thể chúng ta sẽ lưu access_log của người dùng vào MySQL (hoặc có thể lưu ở 1 số bộ phận storage bên ngoài như S3 chẳng hạn).&lt;/p&gt;
&lt;p&gt;1 dãy các luồng xử lí như thế thì quả thực khi release xong, với số lượng người dùng ít thì tốc độ query sẽ rất nhanh. Và ít ai để ý đến vấn đề scaling sau này.&lt;/p&gt;
&lt;p&gt;Vậy vấn đề ở đây là gì?&lt;/p&gt;
&lt;h3 id=&quot;dữ-liệu-to-dần-và-không-thể-cache-hết-lên-memory-dẫn-đến-phải-read-từ-disk-và-làm-tốc-độ-giảm-xuống&quot;&gt;&lt;a href=&quot;#d%E1%BB%AF-li%E1%BB%87u-to-d%E1%BA%A7n-v%C3%A0-kh%C3%B4ng-th%E1%BB%83-cache-h%E1%BA%BFt-l%C3%AAn-memory-d%E1%BA%ABn-%C4%91%E1%BA%BFn-ph%E1%BA%A3i-read-t%E1%BB%AB-disk-v%C3%A0-l%C3%A0m-t%E1%BB%91c-%C4%91%E1%BB%99-gi%E1%BA%A3m-xu%E1%BB%91ng&quot; aria-label=&quot;dữ liệu to dần và không thể cache hết lên memory dẫn đến phải read từ disk và làm tốc độ giảm xuống permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Dữ liệu to dần và không thể cache hết lên memory, dẫn đến phải read từ disk và làm tốc độ giảm xuống&lt;/h3&gt;
&lt;p&gt;Giai đoạn đầu khi release, lượng dữ liệu sử dụng trên MySQL còn nhỏ, memory cấp phát cho cache có nhỏ đi chăng nữa thì cũng có thể đẩy dữ liệu lên đó được.&lt;/p&gt;
&lt;p&gt;Thế nhưng sau 1 thời gian vận hành, lượng dữ liệu tăng khủng khiếp, số lượng access của người dùng cũng tăng lên. Dẫn đến tỉ lệ cache hit trên MySQL sẽ giảm xuống (vì không dủ memory để cache). Kết quả là phải đọc dữ liệu từ disk thay vì từ cache. Và làm cho tốc độ giảm xuống. (Đọc data trên memory nhanh gấp 200 lần HDD, và gấp 10 lần SSD).&lt;/p&gt;
&lt;p&gt;Để giải quyết vấn đề này trong thời gian ngắn thì có 2 cách:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Tăng memory lên để có thể cache được nhiều dữ liệu trên memory hơn. &lt;strong&gt;Cách này được gọi là scale up&lt;/strong&gt;.&lt;/li&gt;
&lt;li&gt;Áp dụng cơ chế master slave vào hệ thống. Master sẽ đảm nhiệm việc ghi. Slave sẽ đảm nhiệm việc đọc. Mỗi khi dữ liệu trên master bị thay đổi thì sẽ replication sang các con slave để đồng bộ dữ liệu. &lt;strong&gt;Cách này còn được gọi là scale out&lt;/strong&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Cho dù thực hiện cách nào đi chăng nữa thì cost vận hành trên MySQL sẽ càng ngày càng tăng lên.&lt;br&gt;
Đến 1 lúc nào đó cost này sẽ tăng đến 1 mức độ mà có khi tiền doanh thu hàng tháng không trả nổi tiền nuôi server.&lt;/p&gt;
&lt;p&gt;Với tình trạng như này thì các bạn sẽ suy nghĩ gì?&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Tốc độ đọc ghi sẽ chậm hơn, làm cho trải nghiệm người dùng bị giảm xuống.&lt;/li&gt;
&lt;li&gt;Muốn tung ra nhiều campaign để thu hút người dùng. Thế nhưng MySQL bị bottleneck và không thể thực hiện campaign được.&lt;/li&gt;
&lt;li&gt;Thay đổi sang 1 loại database mới. Thế nhưng do tính chất của nó khác nhau dẫn đến bắt buộc phải sửa logic phía application. Hơn thế nữa việc migration &lt;strong&gt;big data&lt;/strong&gt; từ server này sang server khác có thể mất rất nhiều ngày. (1 ngày application maintain có thể làm doanh thu giảm xuống khá nhiều).&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;tính-bảo-trì-failover-khá-lớn&quot;&gt;&lt;a href=&quot;#t%C3%ADnh-b%E1%BA%A3o-tr%C3%AC-failover-kh%C3%A1-l%E1%BB%9Bn&quot; aria-label=&quot;tính bảo trì failover khá lớn permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Tính bảo trì, failover khá lớn&lt;/h3&gt;
&lt;p&gt;Khi MySQL đang được chạy dưới cơ chế master-slave (dữ liệu luôn luôn được đồng bộ từ master sang slave). Chẳng may vì 1 lí do nào đó mà con master bị down. Khi đó MySQL sẽ thực hiện failover (chuyển con master bị down sang 1 con master dự phòng khác). Quá trình này sẽ mất vài phút (với trường hợp RDS của aws).&lt;/p&gt;
&lt;p&gt;Với business yêu cầu khắt khe về mặt downtime (ví dụ như game chẳng hạn) thì có lẽ với case mất vài phút để thực hiện failover thì chắc khó có thể chấp nhận được.&lt;/p&gt;
&lt;p&gt;Vậy thì ta nên giải quyết vấn đề đó như thế nào?&lt;/p&gt;
&lt;h2 id=&quot;chọn-database-thích-hợp-hơn&quot;&gt;&lt;a href=&quot;#ch%E1%BB%8Dn-database-th%C3%ADch-h%E1%BB%A3p-h%C6%A1n&quot; aria-label=&quot;chọn database thích hợp hơn permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Chọn database thích hợp hơn?&lt;/h2&gt;
&lt;p&gt;Để giải quyết được vấn đề này thì có lẽ ta nên chọn loại database khác không phải MySQL. Ví dụ như NoSQL chẳng hạn.&lt;/p&gt;
&lt;p&gt;Nhưng khi dữ liệu của hệ thống đã to rồi thì việc chọn 1 database khác không phải là sự lựa chọn đúng đắn lắm vì có thể sẽ phải sửa code khá nhiều, thời gian migration từ database này sang database khác sẽ mất khá nhiều thời gian (có thể mấy ngày đến 1 tuần).&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Do đó ngay trong giai đoạn thiết kế thì việc suy nghĩ chọn database nào phù hợp là 1 điều vô cùng quan trọng, đặc biệt cần suy nghĩ xem tương lai dữ liệu sẽ lớn đến mức độ nào.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Với NoSQL thì có vô số loại, ví dụ như &lt;a href=&quot;https://nghethuatcoding.com/2019/05/26/tat-tan-tat-ve-apache-cassandra/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Cassandra&lt;/a&gt;, DynamoDB.&lt;/p&gt;
&lt;p&gt;Cả 2 loại này tính scalable của nó cực lớn, các ông lớn như Facebook, &lt;a href=&quot;https://nghethuatcoding.com/2019/06/01/discord-da-luu-tru-hang-ti-messages-moi-ngay-nhu-the-nao/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Discord&lt;/a&gt;, Instagram hiện tại cũng đang dùng nó.&lt;/p&gt;
&lt;p&gt;Mình xin kể 1 số tính năng chính của 2 thằng này:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Cassandra:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Được phát triển bởi Facebook, sau đó tặng cho bên Apache.&lt;/li&gt;
&lt;li&gt;Cassandra là hệ cơ sở dữ liệu phân tán, kết hợp những gì tinh tuý nhất của Google Bigtable và Amazon DynamoDB. Ngôn ngữ phát triển Cassandra là Java.&lt;/li&gt;
&lt;li&gt;Dữ liệu được dàn trải sang nhiều node, nên 1 node có chết đi chăng nữa thì vẫn có thể query lấy được dữ liệu trên node khác. Do đó tính chịu lỗi của nó cực lớn.&lt;/li&gt;
&lt;li&gt;Throughput của nó tăng theo số lượng node. Nếu muốn nó xử lí được nhiều request hơn thì chỉ cần tăng số node lên.&lt;/li&gt;
&lt;li&gt;Tốc độ write luôn luôn nhanh hơn read. Bởi vì write chỉ cần append vào đít file. Trong khi read cần phải check tính CAP (có thể hiểu đây là tính toàn vẹn dữ liệu) giữa các node nữa nên thời gian sẽ lâu hơn. Mặc dù nói là lâu nhưng mà thời gian của read hay write cũng chỉ tính bằng ms.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;DynamoDB:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;DynamoDB là hệ cơ sở dữ liệu phân tán, được phát triển bởi Amazon.&lt;/li&gt;
&lt;li&gt;Có thể setting thông số throughput của read và write riêng. Và Amazon sẽ tự động scale để đáp ứng được số throughput đó.&lt;/li&gt;
&lt;li&gt;Ví dụ như tại thời điểm peak time thì chúng ta setting cho số throughput của read cao hơn chút, ở thời điểm ít access thì setting throughput thấp xuống. Để tiết kiệm cost.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;==&gt; Tóm lại việc chọn database nào đi chăng nữa thì điều quan trọng nhất là nó không làm mất đi tính trải nghiệm của người dùng.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Quay lại bài toán về hệ thống chat như ở bên trên, nếu số lượng người dùng tăng lên mà để trải nghiệm người dùng không bị mất đi thì chúng ta cần thiết kế hệ thống có tính scalable. Đặc biệt với database thì ta có thể kết hợp dùng cả mysql lẫn nosql chẳng hạn. Quan trọng là cách mình sử dụng sao cho đúng.&lt;/p&gt;
&lt;h2 id=&quot;kết-luận&quot;&gt;&lt;a href=&quot;#k%E1%BA%BFt-lu%E1%BA%ADn&quot; aria-label=&quot;kết luận permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Kết luận&lt;/h2&gt;
&lt;p&gt;Các bạn thấy thế nào? Cũng hình dung được thằng MySQL và thằng NoSQL nó khác nhau như thế nào chưa?&lt;/p&gt;
&lt;p&gt;Dựa vào từng bài toán mà chúng ta nên nghiên cứu và đưa ra quyết định đúng đắn. Để về sau maintain sẽ đơn giản hơn.&lt;/p&gt;
&lt;p&gt;Nói thì dễ nhưng quả thực chưa 1 hệ thống to nào trên thế giới mà thiết kế 1 phát chạy được cả đời cả. Hầu như hệ thống nào cũng có cải tiến về mặt hệ thống cả. Ví dụ như Chatwork lúc đầu code bằng PHP sau đó đã chuyển sang Scala để hiệu năng tốt hơn …&lt;/p&gt;
&lt;p&gt;==============&lt;/p&gt;
&lt;p&gt;Để nhận thông báo khi có bài viết mới nhất thì các bạn có thể like fanpage của mình ở bên dưới nhé:&lt;/p&gt;
&lt;p&gt;→→→ &lt;a href=&quot;https://www.facebook.com/669339543503374&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Nghệ thuật Coding Fanpage Facebook&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Chúc các bạn 1 tuần thật vui vẻ.  &lt;/p&gt;</content:encoded></item><item><title><![CDATA[Thiết kế API Rate Limiting]]></title><link>https://nghethuatcoding.com2019/06/15/thiet-ke-api-rate-limiting/</link><guid isPermaLink="false">https://nghethuatcoding.com2019/06/15/thiet-ke-api-rate-limiting/</guid><pubDate>Sat, 15 Jun 2019 12:49:24 GMT</pubDate><content:encoded>&lt;p&gt;Làm việc nhiều với API chắc hẳn ai cũng đã từng nghe thấy từ &lt;strong&gt;API Rate Limiting&lt;/strong&gt;. Ví dụ như với Github API thì Rate Limiting của nó như sau:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 644px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/910efdd61dc347d97e1e84aadfe54353/5b815/Screen-Shot-2019-06-15-at-12.51.33.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 20.3416149068323%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAAsSAAALEgHS3X78AAAAZElEQVQI142MSw6AIAxEuRsQpiVCQsEPJur9TyG4cuPnTTOZzasKEqLEUksaU26UXnLBzFpr84yiBVzJ70wZiK4dJWBw1vS8o2iGP5g3al+QnMWXcZchjtduUgVNaMPCGP1LPgHXFkOO40C5tgAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/910efdd61dc347d97e1e84aadfe54353/01472/Screen-Shot-2019-06-15-at-12.51.33.webp 240w,
/static/910efdd61dc347d97e1e84aadfe54353/222bd/Screen-Shot-2019-06-15-at-12.51.33.webp 480w,
/static/910efdd61dc347d97e1e84aadfe54353/ad6ba/Screen-Shot-2019-06-15-at-12.51.33.webp 644w&quot;
          sizes=&quot;(max-width: 644px) 100vw, 644px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/910efdd61dc347d97e1e84aadfe54353/0783d/Screen-Shot-2019-06-15-at-12.51.33.png 240w,
/static/910efdd61dc347d97e1e84aadfe54353/782f4/Screen-Shot-2019-06-15-at-12.51.33.png 480w,
/static/910efdd61dc347d97e1e84aadfe54353/5b815/Screen-Shot-2019-06-15-at-12.51.33.png 644w&quot;
          sizes=&quot;(max-width: 644px) 100vw, 644px&quot;
          type=&quot;image/png&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/910efdd61dc347d97e1e84aadfe54353/5b815/Screen-Shot-2019-06-15-at-12.51.33.png&quot;
          alt=&quot;Screen Shot 2019 06 15 at 12 51 33&quot;
          title=&quot;Screen Shot 2019 06 15 at 12 51 33&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Nhìn vào hình trên có thể thấy Rate Limiting của nó 60 request/min. Nếu mà trong vòng 1 phút gửi quá 60 request thì sẽ không gửi tiếp được nữa. Mà phải đợi đến phút tiếp theo mới gửi được.&lt;/p&gt;
&lt;p&gt;Hiện tại hầu hết các hệ thống lớn trên thế giới đều cung cấp Rate Liming cả. Nhưng mà ít ai để ý đến công nghệ đằng sau nó như thế nào.&lt;/p&gt;
&lt;p&gt;Hôm nay mình viết bài này để hướng dẫn mọi người cách thiết kế &lt;strong&gt;Rate Limiting&lt;/strong&gt; như thế nào.&lt;/p&gt;
&lt;h2 id=&quot;rate-limiting-là-gì&quot;&gt;&lt;a href=&quot;#rate-limiting-l%C3%A0-g%C3%AC&quot; aria-label=&quot;rate limiting là gì permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Rate Limiting là gì?&lt;/h2&gt;
&lt;p&gt;Giả sử như hệ thống của chúng ta nhận được hàng nghìn request nhưng mà trong số đó chỉ xử lí được trăm request/s chẳng hạn, và số request còn lại thì bị lỗi (do CPU hệ thống đang quá tải không thể xử lí được).&lt;/p&gt;
&lt;p&gt;Để giải quyết được vấn đề này thì cơ chế Rate Limiting đã ra đời. Mục đích của nó chỉ cho phép nhận 1 số lượng request nhất định trong 1 đơn vị thời gian. Nếu quá sẽ trả về response lỗi.&lt;/p&gt;
&lt;p&gt;1 số ví dụ hay gặp trong Rate Limiting như:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Mỗi người dùng chúng ta chỉ cho phép gửi 100request/s. Nếu vượt quá thì sẽ trả về response lỗi.&lt;/li&gt;
&lt;li&gt;Mỗi người dùng chỉ cho phép nhập sai thẻ credit 3 lần trong 1 ngày&lt;/li&gt;
&lt;li&gt;Mỗi địa chỉ IP chỉ có thể tạo được 2 account trong 1 ngày.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Về cơ bản thì rate limiter sẽ cho phép gửi bao nhiêu request trong 1 khoảng thời gian nào đó. Nếu vượt quá sẽ bị block lại.&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&quot;tại-sao-api-cần-phải-có-rate-limiting&quot;&gt;&lt;a href=&quot;#t%E1%BA%A1i-sao-api-c%E1%BA%A7n-ph%E1%BA%A3i-c%C3%B3-rate-limiting&quot; aria-label=&quot;tại sao api cần phải có rate limiting permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Tại sao API cần phải có Rate Limiting?&lt;/h2&gt;
&lt;p&gt;Rate Limiting sẽ giúp chúng ta hạn chế được 1 số việc sau:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Tấn công DOS (Denial of Service) đến hệ thống&lt;/li&gt;
&lt;li&gt;Brute force password trong hệ thống (quyét kiểu vét cạn)&lt;/li&gt;
&lt;li&gt;Brute force thông tin thẻ credit card (quyét kiểu vét cạn)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Những cuộc tấn công này nhìn có vẻ như đến từ người dùng thực, nhưng thực tế nó được tạo ra bởi bot. Do vậy mà nó rất khó bị phát hiện và dễ dàng làm service của chúng ta bị sập.&lt;/p&gt;
&lt;p&gt;Ngoài ra, Rate Limiting cũng mang lại cho chúng ta 1 số lợi ích sau:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Bảo mật&lt;/strong&gt;: Không cho phép nhập sai password quá nhiều lần&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Doanh thu&lt;/strong&gt;: Với mỗi plan sẽ có rate limit khác nhau. Nếu muốn dùng nhiều hơn thì cần mua lên plan đắt tiền hơn. &lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;yêu-cầu-hệ-thống&quot;&gt;&lt;a href=&quot;#y%C3%AAu-c%E1%BA%A7u-h%E1%BB%87-th%E1%BB%91ng&quot; aria-label=&quot;yêu cầu hệ thống permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Yêu cầu hệ thống&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;Yêu cầu chức năng:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Giới hạn số lượng request được gửi trong 1 đơn vị thời gian. Ví dụ 15 request/s&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Yêu cầu phi chức năng:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Hệ thống chịu tải cao. Bởi vì rate limiter luôn luôn phải hoạt động để bảo vệ hệ thống từ các cuộc tấn công bên ngoài vào.&lt;/li&gt;
&lt;li&gt;Rate limiting cần có latency thấp nhất để giúp trải nghiệm người dùng tốt hơn.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;rate-limiting-hoạt-động-như-thế-nào&quot;&gt;&lt;a href=&quot;#rate-limiting-ho%E1%BA%A1t-%C4%91%E1%BB%99ng-nh%C6%B0-th%E1%BA%BF-n%C3%A0o&quot; aria-label=&quot;rate limiting hoạt động như thế nào permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Rate Limiting hoạt động như thế nào?&lt;/h2&gt;
&lt;p&gt;Rate Limiting có 1 process tên là &lt;strong&gt;Throttling&lt;/strong&gt; dùng để kiểm soát tình trạng sử dụng API của người dùng trong 1 khoảng thời gian nhất định.&lt;/p&gt;
&lt;p&gt;Khi vượt quá giới hạn, nó sẽ trả về response với HTTP Status là 429 - Too many requests.&lt;/p&gt;
&lt;h2 id=&quot;thuật-toán-sử-dụng-trong-rate-limiting&quot;&gt;&lt;a href=&quot;#thu%E1%BA%ADt-to%C3%A1n-s%E1%BB%AD-d%E1%BB%A5ng-trong-rate-limiting&quot; aria-label=&quot;thuật toán sử dụng trong rate limiting permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Thuật toán sử dụng trong Rate Limiting&lt;/h2&gt;
&lt;p&gt;Có 2 loại thuật toán hay được dùng để giải quyết bài toán này:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Thuật toán Token Bucket&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Thuật toán này sẽ được tính từ đầu đơn vị thời gian cho đến hết đơn vị thời gian.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 960px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/db3e897006dbb4b136e047e99f81a32e/5e61e/api-rate-limiting-algorithm-1.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 18.30863121185702%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAAsSAAALEgHS3X78AAAAuElEQVQI1w2MS64DIQwE5/7ny+Ip2eSFzA8mJhgwfztIvSi1SrUIs/Q+aj23bXsra7Te9wnc2/ylNe7dXtf6epnjAGMmZIoyuoyxSB+c8lxGTM5Vhw2xOCc5MxHHKKXUECpic5jRR2s70TxndyH7rhGkBq5BWjCg7qf6OxQGaBGa17ftn6Ldrb5vD+kkjZyH2/okUIt3ED2KDB5NeEb95wvHZUpOJYUU8PxMJgxowExtOqWk9dy/oH+tbuPD3yZgHwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/db3e897006dbb4b136e047e99f81a32e/01472/api-rate-limiting-algorithm-1.webp 240w,
/static/db3e897006dbb4b136e047e99f81a32e/222bd/api-rate-limiting-algorithm-1.webp 480w,
/static/db3e897006dbb4b136e047e99f81a32e/620b9/api-rate-limiting-algorithm-1.webp 960w,
/static/db3e897006dbb4b136e047e99f81a32e/1b6cd/api-rate-limiting-algorithm-1.webp 1147w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/db3e897006dbb4b136e047e99f81a32e/0783d/api-rate-limiting-algorithm-1.png 240w,
/static/db3e897006dbb4b136e047e99f81a32e/782f4/api-rate-limiting-algorithm-1.png 480w,
/static/db3e897006dbb4b136e047e99f81a32e/f570d/api-rate-limiting-algorithm-1.png 960w,
/static/db3e897006dbb4b136e047e99f81a32e/5e61e/api-rate-limiting-algorithm-1.png 1147w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/png&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/db3e897006dbb4b136e047e99f81a32e/f570d/api-rate-limiting-algorithm-1.png&quot;
          alt=&quot;api rate limiting algorithm 1&quot;
          title=&quot;api rate limiting algorithm 1&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Ví dụ như trong ví dụ bên trên ta có thể thấy, trong khoảng thời gian từ giây thứ 0 cho đến giây thứ 1 có 2 request được gửi, đó là m1 và m2.&lt;/p&gt;
&lt;p&gt;Trong khoảng thời gian từ giây thứ 1 đến giây thứ 2 có 3 request là m3, m4, m5.&lt;/p&gt;
&lt;p&gt;Nếu như rate limiting đang được cài đặt là 2 thì trong ví dụ bên trên thì thằng m5 sẽ bị block lại. &lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Thuật toán Sliding Window (Rolling Window&lt;/strong&gt;)&lt;/p&gt;
&lt;p&gt;Trong thuật toán này thì thời gian sẽ được tính từ phần tử thời gian mà yêu cầu được thực hiện cộng với độ dài của time window.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 960px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/85f34890ce9e47a4e2096f54091cd585/1351f/api-rate-limiting-algorithm-2.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 27.68313458262351%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsSAAALEgHS3X78AAAA7UlEQVQY012PwU7EMAxE+/9fBzcEEgtts2naRm7STZ3EsU32Bozm9PSksQdl7q2Ii7X3eYJ9W4xx9q6taSMh4kZ+W8007c75dZ3HsSAKN2EelJrkzIg5RjwOOs8SY42xQ7lQ0qW1lvPRIcXYnXRAlzVnJRoSzJRAS9Lae87b14czb3bEFFoCDO5lurUcv/fltnxqfWhDiP51fC/BDgF8waTSlKn3fAQ4j+3wjamW60phPXx/K3Qe/FOTljPenY3gB/0dUUGVfmmgC0oGqoEzlBq5Q0X9l0FE/gBWbQo7WGOd7avBjCZAfHL+OyTyA1ksWUpFfcaVAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/85f34890ce9e47a4e2096f54091cd585/01472/api-rate-limiting-algorithm-2.webp 240w,
/static/85f34890ce9e47a4e2096f54091cd585/222bd/api-rate-limiting-algorithm-2.webp 480w,
/static/85f34890ce9e47a4e2096f54091cd585/620b9/api-rate-limiting-algorithm-2.webp 960w,
/static/85f34890ce9e47a4e2096f54091cd585/1b380/api-rate-limiting-algorithm-2.webp 1174w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/85f34890ce9e47a4e2096f54091cd585/0783d/api-rate-limiting-algorithm-2.png 240w,
/static/85f34890ce9e47a4e2096f54091cd585/782f4/api-rate-limiting-algorithm-2.png 480w,
/static/85f34890ce9e47a4e2096f54091cd585/f570d/api-rate-limiting-algorithm-2.png 960w,
/static/85f34890ce9e47a4e2096f54091cd585/1351f/api-rate-limiting-algorithm-2.png 1174w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/png&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/85f34890ce9e47a4e2096f54091cd585/f570d/api-rate-limiting-algorithm-2.png&quot;
          alt=&quot;api rate limiting algorithm 2&quot;
          title=&quot;api rate limiting algorithm 2&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Như trong ví dụ bên trên, giả sử như m1 và m2 được gửi từ giây thứ 0.3s. Khi đó từ 0.3s này sẽ bắt đầu tính. &lt;/p&gt;
&lt;p&gt;Trong khoảng 0.3s tiếp theo chúng ta thấy có 2 request tiếp theo được gửi đến đó là m3 và m4. &lt;/p&gt;
&lt;p&gt;Như vậy trong khoảng thời gian 0.6s này đã có 4 request được gửi là m1,m2,m3,m4.&lt;/p&gt;
&lt;p&gt;Nếu Rate Limiting đang cài đặt là 2 thì khi đó m3,m4 sẽ bị block lại. &lt;/p&gt;
&lt;p&gt;Giả sử như thời điểm gửi m5 là lúc 1.1s chẳng hạn. Thì khi đó lúc này rate limiting sẽ reset lại thành từ 0. Và lại lặp lại quá trình đó, và m5 sẽ được tính thành 1 lần.&lt;/p&gt;
&lt;h2 id=&quot;kiến-trúc-rate-limiting&quot;&gt;&lt;a href=&quot;#ki%E1%BA%BFn-tr%C3%BAc-rate-limiting&quot; aria-label=&quot;kiến trúc rate limiting permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Kiến trúc Rate Limiting&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 644px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/ef9e05c3c6a9c240486dc8117cb30d44/5b815/0d66e652d50897f7c4c57200408f4ca3.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 76.39751552795032%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsSAAALEgHS3X78AAAB+klEQVQ4y51Ty27TQBTtV7KgWwoV3wAfARukQFVYEAkQC1agSpVa1BSSlFCFyC1pnPqZ8TOx44T4NT6Mxw5xFkhprnQ81+M7x2fOndnBhpFlGUceSZoiDGPEcYIoSnhOafFt5y6EeaRsoa70YUpnEIVjqDcnMOXvsEyyHWGSUphkiKlxAUs+h62cwzcv4dgm8pLtCEcDeKTF1J0ypY2S0NqcsOpfmmZcoccU2moTrtaElxM6JeGysLpoOVbzlULmoSzAJw3I10cg4jHbfhu2ZawU5sW0JFz/AUVGc6T5BJ+zbRfDmx5M9Qe0YRMjqQUid5hCu2hKVU2pqSRbn6UM7niCcLEoqui/8gKlCK5wHmf40A3RVJKqcZiOfmOqC5goPYg/T7EIxqWPKYjjwnBzjGGwPIrj1bF5143x+L2Bp18CCHqAeeCDqBLU+h5uD++jf7CL0et7kFuf8CeiaHe7ePTiDR48e4m956+wz/IrWV0RhkkGZ57BmmWIEsoVRFEIX76Ef3sBX+qwsY3ZxOC7G3seznrXOGp18PlbG19/XcELZv/zcLPzyLceReyR5Mm6h1mlw2soO7wEpUUnHMfB23odmqbxZh2c6Gj0/btdPd7pkpAQglqtBkWW+PvDQxFPPirb3eWc1LIsDAYDGIbBvI4gDHX0RMK8T/AXTSR8d2hLgFUAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/ef9e05c3c6a9c240486dc8117cb30d44/01472/0d66e652d50897f7c4c57200408f4ca3.webp 240w,
/static/ef9e05c3c6a9c240486dc8117cb30d44/222bd/0d66e652d50897f7c4c57200408f4ca3.webp 480w,
/static/ef9e05c3c6a9c240486dc8117cb30d44/ad6ba/0d66e652d50897f7c4c57200408f4ca3.webp 644w&quot;
          sizes=&quot;(max-width: 644px) 100vw, 644px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/ef9e05c3c6a9c240486dc8117cb30d44/0783d/0d66e652d50897f7c4c57200408f4ca3.png 240w,
/static/ef9e05c3c6a9c240486dc8117cb30d44/782f4/0d66e652d50897f7c4c57200408f4ca3.png 480w,
/static/ef9e05c3c6a9c240486dc8117cb30d44/5b815/0d66e652d50897f7c4c57200408f4ca3.png 644w&quot;
          sizes=&quot;(max-width: 644px) 100vw, 644px&quot;
          type=&quot;image/png&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/ef9e05c3c6a9c240486dc8117cb30d44/5b815/0d66e652d50897f7c4c57200408f4ca3.png&quot;
          alt=&quot;0d66e652d50897f7c4c57200408f4ca3&quot;
          title=&quot;0d66e652d50897f7c4c57200408f4ca3&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Rate Limiting sẽ đảm nhiệm việc quyết định xem request nào sẽ được gửi đến API Server, request nào sẽ bị block.&lt;/p&gt;
&lt;p&gt;Mỗi khi Client gửi request đến Web Server, Web Server sẽ gọi đến Rate Limiter để check xem ngươi dùng này đã vượt quá số Rate Limiting hay chưa? Nếu chưa thì sẽ gửi request đó đến API Server. Nếu đã vượt quá rồi thì sẽ block lại và trả về http status 429 (Too many requests).&lt;/p&gt;
&lt;h2 id=&quot;cài-đặt-thuật-toán&quot;&gt;&lt;a href=&quot;#c%C3%A0i-%C4%91%E1%BA%B7t-thu%E1%BA%ADt-to%C3%A1n&quot; aria-label=&quot;cài đặt thuật toán permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Cài đặt thuật toán&lt;/h2&gt;
&lt;h3 id=&quot;1-thuật-toán-token-bucket&quot;&gt;&lt;a href=&quot;#1-thu%E1%BA%ADt-to%C3%A1n-token-bucket&quot; aria-label=&quot;1 thuật toán token bucket permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;1. Thuật toán Token Bucket&lt;/h3&gt;
&lt;p&gt;Khi người dùng gửi request đến hệ thống, chúng ta sẽ lưu số request đã gửi vào 1 biến &lt;strong&gt;count&lt;/strong&gt; cùng với thời điểm &lt;strong&gt;start_time&lt;/strong&gt; gửi request. &lt;/p&gt;
&lt;p&gt;Sau đó sẽ lưu count vs timestamp vào 1 hash table (Có thể là Redis, memcached …). Trong đó key sẽ là user_id và value sẽ chứa json bao gồm số lượng request đã gửi, cùng với thời điểm timestamp.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tại sao nên dùng Redis mà không nên dùng mysql?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Dùng mysql để lưu trữ dữ liệu là 1 ý tưởng khá tồi. Bởi vì thời gian đọc ghi dữ liệu ở mysql sẽ lâu hơn rất nhiều so với việc dùng redis (memory).&lt;/p&gt;
&lt;p&gt;Ví dụ như chúng ta mất 1ms để lưu 1 record vào mysql thì khi đó 1s chúng ta sẽ xử lí được 1000 request.&lt;/p&gt;
&lt;p&gt;Thế nhưng với hệ thống như Redis nó không sử dụng disk mà sử dụng memory để lưu nên tốc độ đọc ghi sẽ khá là nhanh. Ví dụ nó mất 100 nanosec để lưu 1 record thì 1s nó sẽ xử lí được tầm 10 triệu request.&lt;/p&gt;
&lt;p&gt;Mà hệ thống Rate Limiting này cần phải tối đa tốc độ query để lấy count nên Redis sẽ hợp lí hơn rất nhiều.&lt;/p&gt;
&lt;p&gt;Về cấu trúc dữ liệu lưu trong hash table sẽ như sau:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;&amp;lt;code&amp;gt;user_id: {count, start_time}

Ví dụ:
12: {3, 1560580210}
5: {2, 1560520442}&amp;lt;/code&amp;gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Giả sử như rate limiter sẽ cho phép &lt;strong&gt;3 request/min&lt;/strong&gt;. Khi đó flow thực hiện sẽ như sau:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Nếu user&lt;em&gt;id không có trong hash table, khi đó sẽ insert user&lt;/em&gt;id vào trong hash table cùng với thời điểm gửi (dạng epoch time)&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Nếu user&lt;em&gt;id có nằm trong hash table, khi đó sẽ tìm value tương ứng với user&lt;/em&gt;id đó và tính toán xem current&lt;em&gt;time - start&lt;/em&gt;time &gt;= 1 min hay không?&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Nếu có lớn hơn thì khi đó set start&lt;em&gt;time bằng current&lt;/em&gt;time và count = 1 và cho phép request gửi đến API Server.&lt;/li&gt;
&lt;li&gt;Nếu nhỏ hơn thì kiểm tra xem count có lớn hơn 3 hay không. Nếu lớn hơn thì sẽ block request đó lại. Nếu nhỏ hơn thì sẽ count = count + 1 và cho phép request gửi đến API Server.&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 960px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/5c45cb97be6325da48ef07988fa5df5f/5df5c/fixed-window-example.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 125.34482758620689%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAZABQDASIAAhEBAxEB/8QAGAABAQEBAQAAAAAAAAAAAAAAAwAEAgX/xAAXAQADAQAAAAAAAAAAAAAAAAAAAQID/9oADAMBAAIQAxAAAAH3BUc7W5mIGnDL0RSr/8QAGhAAAgMBAQAAAAAAAAAAAAAAAAECEBESMf/aAAgBAQABBQI6Ym60jWiY/CJ//8QAGBEAAgMAAAAAAAAAAAAAAAAAAAIBEBH/2gAIAQMBAT8BWkgw/8QAGBEAAgMAAAAAAAAAAAAAAAAAAAIBEBH/2gAIAQIBAT8Bank0/8QAHBAAAgICAwAAAAAAAAAAAAAAAAIDMTLRARCB/9oACAEBAAY/AjNDJTZcZaeGy4y0Oe//xAAfEAACAgIBBQAAAAAAAAAAAAAAASExEUFxEGGhsfH/2gAIAQEAAT8hrLru6HmQPKW8GnqOA5ImgGn8DoUXoPG6UP/aAAwDAQACAAMAAAAQaNGy/8QAFhEBAQEAAAAAAAAAAAAAAAAAAQAR/9oACAEDAQE/EAJIbaDJ2//EABcRAQEBAQAAAAAAAAAAAAAAAAEAESH/2gAIAQIBAT8QSMPLBIeX/8QAHhAAAQQDAQEBAAAAAAAAAAAAAQAhMXERUWGxQaH/2gAIAQEAAT8QgAEwDpLtHurRWXWY+qC4LjwWrj1y1lN9/hvUQQVwxky09s65aFnk719X6iKltf/Z&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/5c45cb97be6325da48ef07988fa5df5f/01472/fixed-window-example.webp 240w,
/static/5c45cb97be6325da48ef07988fa5df5f/222bd/fixed-window-example.webp 480w,
/static/5c45cb97be6325da48ef07988fa5df5f/620b9/fixed-window-example.webp 960w,
/static/5c45cb97be6325da48ef07988fa5df5f/e72b4/fixed-window-example.webp 1160w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/5c45cb97be6325da48ef07988fa5df5f/3bc27/fixed-window-example.jpg 240w,
/static/5c45cb97be6325da48ef07988fa5df5f/98431/fixed-window-example.jpg 480w,
/static/5c45cb97be6325da48ef07988fa5df5f/b3ee8/fixed-window-example.jpg 960w,
/static/5c45cb97be6325da48ef07988fa5df5f/5df5c/fixed-window-example.jpg 1160w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/jpeg&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/5c45cb97be6325da48ef07988fa5df5f/b3ee8/fixed-window-example.jpg&quot;
          alt=&quot;fixed window example&quot;
          title=&quot;fixed window example&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;Vấn đề với thuật toán này là gì?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Trong hệ thống phân tán thì hành vi “read and then write - đọc sau đó ghi” sẽ tạo ra 1 race condition (khi nhiều thread cùng truy cập và cùng 1 lúc muốn thay đổi dữ liệu), và làm cho dữ liệu tính toán sẽ không đúng nữa. &lt;/p&gt;
&lt;p&gt;Ví dụ như tại giây 45.01 count hiện tại đang là 2. Khi đó người dùng đó call api. Vì count vẫn đang nhỏ hơn 3 (giả sử như rate limiting đang là 3 request/min). Trong khi đang chuẩn bị update count này thành 3 thì ngay lúc đó có 1 request nữa được gửi đến. Và lúc này request đó cũng vẫn đang xác nhận count = 2 và rate limiter cho phép call api. Và kết quả là 2 thằng này đều update count bằng 3. Mặc dù chính xác count phải bằng 4.&lt;/p&gt;
&lt;p&gt;Để giải quyết được vấn đề này thì chúng ta có thể dùng &lt;a href=&quot;https://redis.io/topics/distlock&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Redis lock&lt;/a&gt; để lock lại  count trước khi update (tức là phải update xong mới cho select).&lt;/p&gt;
&lt;p&gt;Tuy nhiên điều này có thể sẽ làm cho logic của chúng ta bị chậm khi nhiều request được gửi đồng thời &lt;strong&gt;từ 1 người dùng&lt;/strong&gt;. Bởi vì khi select sẽ lock lại count của người dùng đó lại. Sau khi update count xong mới giải phóng lock để cho request tiếp theo dùng. &lt;/p&gt;
&lt;p&gt;Chú ý là cái việc lock này chỉ lock lại record của người dùng đó thôi nhé. Còn không lock lại record của người dùng khác. Hay nói cách khác chỉ lock row chứ không lock cả table.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Cần bao nhiêu memory để lưu trữ tất cả dữ liệu của người dùng?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Vì hash table của chúng ta sẽ lưu (user&lt;em&gt;id, count, start&lt;/em&gt;time) nên chúng ta sẽ cần:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;8 bytes cho user_id&lt;/li&gt;
&lt;li&gt;2 bytes cho count (vậy giá trị max của count sẽ là 2^16 = 65,536)&lt;/li&gt;
&lt;li&gt;4 bytes cho start_time (lưu dạng epoch time)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Khi đó sẽ dùng tổng cộng &lt;strong&gt;8 + 2 + 4 = 14 bytes&lt;/strong&gt; để lưu dữ liệu người dùng.&lt;/p&gt;
&lt;p&gt;Giả sử như chúng ta cần 20 bytes cho overhead của hash table. Khi đó với 1 triệu người dùng sẽ cần:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;(14 + 20 ) bytes * 1 triệu = 32.42 MB&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Giả sử chúng ta cần 4 bytes để khoá mỗi record của người dùng để giải quyết vấn đề bên trên thì tổng cộng chúng ta sẽ cần:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;(14 + 20 + 4) bytes * 1 triệu = 36 MB&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Với rate limiting là 3 request/min thì hoàn toàn có thể đặt redis trên 1 con server. Tuy nhiên nếu chúng ta tăng rate limiting thành 10 request/s thì khi đó redis sẽ phải chịu khoảng 10 triệu request/s. Khi đó 1 con redis sẽ không thể chịu được nhiệt.&lt;/p&gt;
&lt;p&gt;Để giải quyết bài toán này thì chúng ta sẽ dùng nhiều con redis đặt phân tán. Khi update count vào trong redis thì rate limiter sẽ cần phải update trong tất cả những con Redis đó thì mới được.&lt;/p&gt;
&lt;h3 id=&quot;2-thuật-toán-sliding-window&quot;&gt;&lt;a href=&quot;#2-thu%E1%BA%ADt-to%C3%A1n-sliding-window&quot; aria-label=&quot;2 thuật toán sliding window permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;2. Thuật toán Sliding Window&lt;/h3&gt;
&lt;p&gt;Để làm được thuật toán này thì chúng ta cần lưu thời gian gửi mỗi request lại, thay vì chỉ lưu giá trị gửi cuối cùng. Và sử dụng &lt;a href=&quot;https://redislabs.com/ebook/part-2-core-concepts/chapter-3-commands-in-redis/3-5-sorted-sets/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Redis Sorted Set&lt;/a&gt;.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;&amp;lt;code&amp;gt;user_id: {count, Sorted Set &amp;lt;start_time&amp;gt;}

Ví dụ:
12: {1560580210, 1560580212, 1560580213}
5: {1560520442}&amp;lt;/code&amp;gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Giả sử như rate limiter cho phép gửi &lt;strong&gt;3 request/min&lt;/strong&gt;. Khi đó flow sẽ như sau:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Xoá tất cả các start&lt;em&gt;time trong Sorted Set mà có giá trị current&lt;/em&gt;time - 1 min &amp;#x3C; 0&lt;/li&gt;
&lt;li&gt;Tính tổng số lượng phần tử trong Sorted Set. Nếu tổng này &gt; 3 thì sẽ block request đó lại. &lt;/li&gt;
&lt;li&gt;Insert start_time đó vào trong Sorted Set và cho phép request gửi đến API Server.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 960px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/bc63938564c138d5dae91716e877a7c5/5df5c/sliding-window-example.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 125.34482758620689%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAZABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAMEAgX/xAAXAQADAQAAAAAAAAAAAAAAAAAAAQID/9oADAMBAAIQAxAAAAHuKYnO2mRm0VQy6BQP/8QAGRABAQEAAwAAAAAAAAAAAAAAAQAQAhEx/9oACAEBAAEFAp5MLixncM+Rf//EABgRAAIDAAAAAAAAAAAAAAAAAAACARAR/9oACAEDAQE/AVpIMP/EABgRAAIDAAAAAAAAAAAAAAAAAAACARAR/9oACAECAQE/AWp5NP/EABwQAAICAgMAAAAAAAAAAAAAAAACAzEy0QEQgf/aAAgBAQAGPwIzQyU2XGWnhsuMtDnv/8QAIBAAAgIBAwUAAAAAAAAAAAAAAAEhMREQQXFRYaGxwf/aAAgBAQABPyGsuu7oykDSt4Ou0cCRE8WB04+B0KL0njaVP//aAAwDAQACAAMAAAAQKNyB/8QAFhEBAQEAAAAAAAAAAAAAAAAAAQAR/9oACAEDAQE/EAJIbaEnb//EABYRAQEBAAAAAAAAAAAAAAAAAAEAEf/aAAgBAgEBPxBIwuWCQ8v/xAAgEAABAwQCAwAAAAAAAAAAAAABACFxETFRYUGxEKHx/9oACAEBAAE/EAwAJgHCQLK+8Sjglxf6VgdC49iVKeNSq587g3aKlEgxfsTrF8alArqZ49r3ni/K/9k=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/bc63938564c138d5dae91716e877a7c5/01472/sliding-window-example.webp 240w,
/static/bc63938564c138d5dae91716e877a7c5/222bd/sliding-window-example.webp 480w,
/static/bc63938564c138d5dae91716e877a7c5/620b9/sliding-window-example.webp 960w,
/static/bc63938564c138d5dae91716e877a7c5/e72b4/sliding-window-example.webp 1160w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/bc63938564c138d5dae91716e877a7c5/3bc27/sliding-window-example.jpg 240w,
/static/bc63938564c138d5dae91716e877a7c5/98431/sliding-window-example.jpg 480w,
/static/bc63938564c138d5dae91716e877a7c5/b3ee8/sliding-window-example.jpg 960w,
/static/bc63938564c138d5dae91716e877a7c5/5df5c/sliding-window-example.jpg 1160w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/jpeg&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/bc63938564c138d5dae91716e877a7c5/b3ee8/sliding-window-example.jpg&quot;
          alt=&quot;sliding window example&quot;
          title=&quot;sliding window example&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Với thuật toán này thì cần bao nhiêu memory để lưu dữ liệu?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Cấu trúc dữ liệu của chúng ta sẽ như sau:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;&amp;lt;code&amp;gt;user_id: {start_time_1, start_time_2 ...., start_time_n}&amp;lt;/code&amp;gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Chúng ta sẽ cần 8 bytes để lưu user_id, 4 bytes để lưu epoch time.&lt;/p&gt;
&lt;p&gt;Giả sử như overhead của Sorted Set là 20 bytes, overhead của hash table là 20 bytes. Rate Limiting là 500 request/hour. Khi đó chúng ta sẽ cần:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;8 + (4 + 20 bytes Sorted Set overhead) * 500 + 20 bytes hash table overhead = 12KB&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Nếu chúng ta có 1 triệu user thì khi đóng tổng dung lượng bộ nhớ cần sẽ là:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;12 KB * 1 triệu = 12GB&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;So sánh với thuật toán Fixed Window thì thuật toán Sliding Window dùng khá nhiều memory để lưu trữ. &lt;/p&gt;
&lt;h2 id=&quot;kết-luận&quot;&gt;&lt;a href=&quot;#k%E1%BA%BFt-lu%E1%BA%ADn&quot; aria-label=&quot;kết luận permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Kết luận&lt;/h2&gt;
&lt;p&gt;Các bạn thấy việc thiết kế Rate Limiting cho API thế nào? Cũng không quá khó phải không nào.&lt;/p&gt;
&lt;p&gt;Hi vọng qua bài này sẽ giúp các bạn biết cách thiết kế Rate Limiting, giúp cho API của mình trở nên chuyên nghiệp hơn.&lt;/p&gt;
&lt;p&gt;==============&lt;/p&gt;
&lt;p&gt;Để nhận thông báo khi có bài viết mới nhất thì các bạn có thể like fanpage của mình ở bên dưới nhé:&lt;/p&gt;
&lt;p&gt;→→→ &lt;a href=&quot;https://www.facebook.com/669339543503374&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Nghệ thuật Coding Fanpage Facebook&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Chúc các bạn 1 tuần thật vui vẻ.&lt;/p&gt;
&lt;p&gt;Tài liệu tham khảo:&lt;br&gt;
&lt;a href=&quot;https://en.wikipedia.org/wiki/Rate_limiting&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;https://en.wikipedia.org/wiki/Rate_limiting&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;https://apisyouwonthate.com/blog/what-is-api-rate-limiting-all-about&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;https://apisyouwonthate.com/blog/what-is-api-rate-limiting-all-about&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;https://konghq.com/blog/how-to-design-a-scalable-rate-limiting-algorithm/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;https://konghq.com/blog/how-to-design-a-scalable-rate-limiting-algorithm/&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;https://www.keycdn.com/support/rate-limiting&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;https://www.keycdn.com/support/rate-limiting&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;https://engineering.classdojo.com/blog/2015/02/06/rolling-rate-limiter/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;https://engineering.classdojo.com/blog/2015/02/06/rolling-rate-limiter/&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Hệ thống Viblo Code Challenge được xây dựng như thế nào]]></title><link>https://nghethuatcoding.com2019/06/05/viblo-code-challenge-duoc-xay-dung-nhu-the-nao/</link><guid isPermaLink="false">https://nghethuatcoding.com2019/06/05/viblo-code-challenge-duoc-xay-dung-nhu-the-nao/</guid><pubDate>Wed, 05 Jun 2019 13:41:47 GMT</pubDate><content:encoded>&lt;p&gt;Chắc hẳn ai trong số chúng ta cũng đã từng tham gia 1 số cuộc thi về contest hay là code challenge. Ví dụ như &lt;a href=&quot;https://vn.talenthub.jp/coding_test&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;TalenHub&lt;/a&gt;, &lt;a href=&quot;https://code.viblo.asia/dashboard&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Viblo Code&lt;/a&gt;, &lt;a href=&quot;https://www.topcoder.com/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Top Coder&lt;/a&gt; …&lt;/p&gt;
&lt;p&gt;Nhưng ít ai để ý đến xem những service đó được làm như thế nào? Làm thế nào có thể run được đoạn code mà mình đã submit? &lt;/p&gt;
&lt;p&gt;Hôm nay mình sẽ đi đào sâu vào những hệ thống đó xem cụ thể nó được xây dựng như thế nào, và kiến trúc của nó ra sao. Đặc biệt để dễ hình dung thì mình sẽ đi lấy ví dụ về Viblo Code nhé.&lt;/p&gt;
&lt;p&gt;Mình không phải là nhân viên của Framgia nên có thể hệ thống Viblo Code sẽ khác so với cái mà mình đã phỏng đoán. Nhưng mình nghĩ cơ chế nó sẽ giống nhau.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Mục đích bài viết:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Hiểu được các hệ thống về Code challenge làm việc như thế nào&lt;/li&gt;
&lt;li&gt;Tự mình có thể xây dựng được 1 hệ thống như thế&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Đối tượng hướng đến:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Người thích làm về mảng về hệ thống&lt;/li&gt;
&lt;li&gt;Người có kinh nghiệm về Docker&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;hệ-thống-code-challenge-là-gì&quot;&gt;&lt;a href=&quot;#h%E1%BB%87-th%E1%BB%91ng-code-challenge-l%C3%A0-g%C3%AC&quot; aria-label=&quot;hệ thống code challenge là gì permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Hệ thống Code Challenge là gì?&lt;/h2&gt;
&lt;p&gt;Code Challenge là dịch vụ dành cho lập trình viên rèn luyện kĩ năng về lập trình, cũng như các tư duy về giải thuật. &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 960px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/89d8f641f6975bdd74be9bbebed67c46/72b76/viblo-code-dashboard.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 62.94859359844811%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAABUElEQVQoz5WSi27CIBiFef8X3GyphVKtdr2A3Mq1+6vb4rLNzJMvhAQOJxxAhDLK2po2tGmFlNouXIpevE1GHvsJ0yNlh34Yx5lLpWFVm8XYDaUNKsqyqvZAUWKlVF5Xxbnhl3XNV27Kn+M30G5X1ISCeVeU8zzHnCQEKJVSzDk9BuGqAkqMwTzN/NeEv0CMtZQ2TcMIoZyL58znTT3QdZ3W5jkzgZbbA9x2GAbv/f+dm7nrTuM4Qc9CCGvt43rv2IRKXBUgjF9ed6fTOaYcIvScQ/ApQaWbviagNecYo12c8x7VhOxrAoXVNRmGcZhEczhLqayxcTsFNq9X73oDFGK6fRXUMBYChEUYIeEiZXfquZA+pAeECPkZYVyxtoXHIpQqrYx1s9DWRWWcMl7ZK/eTDxxsQvC3oDBgmmaozfmgrTdLMIs39geLty7cWFx4B3qE7cAObodHAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/89d8f641f6975bdd74be9bbebed67c46/01472/viblo-code-dashboard.webp 240w,
/static/89d8f641f6975bdd74be9bbebed67c46/222bd/viblo-code-dashboard.webp 480w,
/static/89d8f641f6975bdd74be9bbebed67c46/620b9/viblo-code-dashboard.webp 960w,
/static/89d8f641f6975bdd74be9bbebed67c46/2a520/viblo-code-dashboard.webp 1031w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/89d8f641f6975bdd74be9bbebed67c46/0783d/viblo-code-dashboard.png 240w,
/static/89d8f641f6975bdd74be9bbebed67c46/782f4/viblo-code-dashboard.png 480w,
/static/89d8f641f6975bdd74be9bbebed67c46/f570d/viblo-code-dashboard.png 960w,
/static/89d8f641f6975bdd74be9bbebed67c46/72b76/viblo-code-dashboard.png 1031w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/png&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/89d8f641f6975bdd74be9bbebed67c46/f570d/viblo-code-dashboard.png&quot;
          alt=&quot;viblo code dashboard&quot;
          title=&quot;viblo code dashboard&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Như hình ảnh bên trên về Viblo Code chúng ta có thể thấy, nó bao gồm phần câu hỏi, phần viết code, phần chọn ngôn ngữ mà mình thích …&lt;/p&gt;
&lt;p&gt;Ngoài ra còn có 1 số chức năng khác nữa như Ranking (code của ai chạy nhanh sẽ được xếp hạng cao hơn …), nhận thưởng nếu đứng top.&lt;/p&gt;
&lt;h2 id=&quot;yêu-cầu-về-mặt-chức-năng&quot;&gt;&lt;a href=&quot;#y%C3%AAu-c%E1%BA%A7u-v%E1%BB%81-m%E1%BA%B7t-ch%E1%BB%A9c-n%C4%83ng&quot; aria-label=&quot;yêu cầu về mặt chức năng permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Yêu cầu về mặt chức năng&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Với mỗi câu hỏi có thể chọn ngôn ngữ lập trình (shell, php, javascript, java …) mình muốn làm.&lt;/li&gt;
&lt;li&gt;Khi submit code trả về kết quả, kèm theo thời gian thực thi&lt;/li&gt;
&lt;li&gt;Có giới hạn về thời gian làm bài (ví dụ như chỉ làm trong 15p chẳng hạn) &lt;/li&gt;
&lt;li&gt;Xếp hạng điểm của người dùng&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Hôm nay mình sẽ tập trung chủ yếu vào phần thực thi code ứng với từng language (java, php, javascript …) . Còn phần ranking mình sẽ không đề cập đến ở đây.&lt;/p&gt;
&lt;h2 id=&quot;kiến-trúc-hệ-thống&quot;&gt;&lt;a href=&quot;#ki%E1%BA%BFn-tr%C3%BAc-h%E1%BB%87-th%E1%BB%91ng&quot; aria-label=&quot;kiến trúc hệ thống permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Kiến trúc hệ thống&lt;/h2&gt;
&lt;p&gt;Mình nghĩ đầu tiên ai cũng sẽ đưa ra kiến trúc kiểu như này. Cùng xem xem nó có ổn không nhé.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 604px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/9f190cb5f707f021dbdd1b09bc37de0e/5e702/code-challenge-architecture-1.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 64.90066225165563%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAIDBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAe5NiWo//8QAGRABAAMBAQAAAAAAAAAAAAAAAQACMREh/9oACAEBAAEFAnrPQGWyuT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAXEAADAQAAAAAAAAAAAAAAAAAAICFR/9oACAEBAAY/Aoav/8QAGRAAAwEBAQAAAAAAAAAAAAAAAAERMRAh/9oACAEBAAE/IV0Q3WhrWCXUPHH/2gAMAwEAAgADAAAAEHMP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGxABAAMAAwEAAAAAAAAAAAAAAQARIRBRcZH/2gAIAQEAAT8QrLWP2aksCnZbmr5EULM2BEW3vj//2Q==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/9f190cb5f707f021dbdd1b09bc37de0e/01472/code-challenge-architecture-1.webp 240w,
/static/9f190cb5f707f021dbdd1b09bc37de0e/222bd/code-challenge-architecture-1.webp 480w,
/static/9f190cb5f707f021dbdd1b09bc37de0e/3a1dc/code-challenge-architecture-1.webp 604w&quot;
          sizes=&quot;(max-width: 604px) 100vw, 604px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/9f190cb5f707f021dbdd1b09bc37de0e/3bc27/code-challenge-architecture-1.jpg 240w,
/static/9f190cb5f707f021dbdd1b09bc37de0e/98431/code-challenge-architecture-1.jpg 480w,
/static/9f190cb5f707f021dbdd1b09bc37de0e/5e702/code-challenge-architecture-1.jpg 604w&quot;
          sizes=&quot;(max-width: 604px) 100vw, 604px&quot;
          type=&quot;image/jpeg&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/9f190cb5f707f021dbdd1b09bc37de0e/5e702/code-challenge-architecture-1.jpg&quot;
          alt=&quot;code challenge architecture 1&quot;
          title=&quot;code challenge architecture 1&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Chúng ta có 1 con web server, và ở trong con web server này sẽ cài tất cả các package liên quan đến tất cả các ngôn ngữ để có thể chạy được. Ví dụ như sẽ cài php, nodejs, java, python … tất tần tật lên con web server này.&lt;/p&gt;
&lt;p&gt;Và khi người dùng submit code của mình lên để test thì khi đó con web server này sẽ nhận request từ người dùng (giả sử như request này dạng json) bao gồm phần content và language. &lt;/p&gt;
&lt;p&gt;Nó sẽ lưu cái phần content này vào 1 file. ví dụ như với ngôn ngữ php  thì sẽ lưu file dạng main.php, nếu ngôn ngữ javascript thì sẽ lưu dạng main.js.&lt;/p&gt;
&lt;p&gt;Và để xem đoạn code này có chạy được hay không thì web server sẽ chạy 1 đoạn code kiểu như này.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;&amp;lt;code&amp;gt;START=$(date +%s.%4N)

php main.php &amp;gt; result.txt

END=$(date +%s.%4N)

runtime=$(echo &amp;quot;$END - $START&amp;quot; | bc)&amp;lt;/code&amp;gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Khi đó nó sẽ trả về cho mình output của đoạn code và thời gian runtime cho người dùng. Với trường hợp là javascript hay python … thì cũng làm theo cách tương tự.&lt;/p&gt;
&lt;p&gt;Vậy kiến trúc này có ổn không? Theo mình thì là không nhé. Có mấy lí do như sau:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Vì web server này chạy trực tiếp shell lên server của mình nên nếu như người dùng gửi 1 đoạn code kiểu như: rm -rf /var/www/html/* thì chắc ăn hành to rồi.&lt;/li&gt;
&lt;li&gt;Vì cài nhiều package lên con web quá như thế cũng là nguyên nhân gây ra 1 số rủi ro về vấn đề bảo mật. &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Để giải quyết bài toán trên thì chúng ta chỉ cần áp dụng docker vào là ok.&lt;/p&gt;
&lt;p&gt;Cụ thể dưới đây là kiến trúc mình muốn đưa ra:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 926px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/0835c907d16006307dc1bc52f766669f/d5d6f/code-challenge-architecture-2-2.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 55.50755939524837%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAMBAgX/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAAB3KOVEgH/xAAZEAACAwEAAAAAAAAAAAAAAAADMgABAjH/2gAIAQEAAQUCvu0GkKg0/8QAFhEBAQEAAAAAAAAAAAAAAAAAEQAh/9oACAEDAQE/ARyDL//EABYRAQEBAAAAAAAAAAAAAAAAAAERAP/aAAgBAgEBPwFYXDS7/8QAGhAAAgIDAAAAAAAAAAAAAAAAAAEQMUGBwf/aAAgBAQAGPwKx8M7lH//EAB0QAAICAQUAAAAAAAAAAAAAAAARASEQMVFhobH/2gAIAQEAAT8hbb4Hsfs0qh2FDZJTWN//2gAMAwEAAgADAAAAEEAP/8QAFxEBAAMAAAAAAAAAAAAAAAAAAAGBkf/aAAgBAwEBPxDUik//xAAXEQEBAQEAAAAAAAAAAAAAAAARAAFB/9oACAECAQE/EHtchgN//8QAHRABAAICAgMAAAAAAAAAAAAAAQARITFBcVFhgf/aAAgBAQABPxAIFk6EZ9HRksz6xt5RQIFNNRkpGzXc2eUVvuf/2Q==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/0835c907d16006307dc1bc52f766669f/01472/code-challenge-architecture-2-2.webp 240w,
/static/0835c907d16006307dc1bc52f766669f/222bd/code-challenge-architecture-2-2.webp 480w,
/static/0835c907d16006307dc1bc52f766669f/21a8e/code-challenge-architecture-2-2.webp 926w&quot;
          sizes=&quot;(max-width: 926px) 100vw, 926px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/0835c907d16006307dc1bc52f766669f/3bc27/code-challenge-architecture-2-2.jpg 240w,
/static/0835c907d16006307dc1bc52f766669f/98431/code-challenge-architecture-2-2.jpg 480w,
/static/0835c907d16006307dc1bc52f766669f/d5d6f/code-challenge-architecture-2-2.jpg 926w&quot;
          sizes=&quot;(max-width: 926px) 100vw, 926px&quot;
          type=&quot;image/jpeg&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/0835c907d16006307dc1bc52f766669f/d5d6f/code-challenge-architecture-2-2.jpg&quot;
          alt=&quot;code challenge architecture 2 2&quot;
          title=&quot;code challenge architecture 2 2&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Đầu tiên Web Server nhận request và khởi chạy container tương ứng với language được gửi lên. Sau đó run code thông qua container đó và nhận kết quả trả về cho người dùng.&lt;/p&gt;
&lt;p&gt;Vậy chúng ta đã quyết định được kiến trúc hệ thống hợp lý. Tiếp theo sẽ đi vào phần lập trình.&lt;/p&gt;
&lt;h2 id=&quot;thiết-kế-api&quot;&gt;&lt;a href=&quot;#thi%E1%BA%BFt-k%E1%BA%BF-api&quot; aria-label=&quot;thiết kế api permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Thiết kế API&lt;/h2&gt;
&lt;p&gt;Về API thì mình nghĩ chỉ cần 1 cái API về submit code. Thông số đầu vào là content và language. Output sẽ trả về kết quả sau khi compile đoạn code của người dùng cùng với thời gian thực thi đoạn code.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 569px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/7f7aeb796675e73baccec32bd5db5c51/9b80a/viblo-code-api.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 51.669595782073806%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsSAAALEgHS3X78AAABOUlEQVQoz4VRi46DIBD0U1qruICgCAj4TtP7/1+6Ua/mLrmkyYTsLjtkZsis08/n3DRC1qxpRWsk8UdF+QWin/ac47yQ+WBeryWFbhr619eKWjccDwlZ1qoCuCzRohBH8YeM3vdtTLYPZl5iGizaZY2hN9McMAnBDKMfRx+ONexz8SZ3Vi3rMM1xGPs0+pLlrHqD8pLdUUDtOTn0P86dnQyTMTbb2saonZMpCmvJOopBdB1NY+09dV3lHE9Ras2cpSHJ3nMpiwxOiN+JbsRz6FGaYSprGC6FLJSCz0IcE4CLArfYwS2WM6QNzes2QX/Jboe8+wkoZIfOiq78r/rwjGxDUMvcOgfB0loDeG86o/mvYP9FhrdD4M9NOy+mpEy7/1Nd42PYZ7LSvGkrRAJLyAYO91T5DvpE/gbJB2bijK9r/QAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/7f7aeb796675e73baccec32bd5db5c51/01472/viblo-code-api.webp 240w,
/static/7f7aeb796675e73baccec32bd5db5c51/222bd/viblo-code-api.webp 480w,
/static/7f7aeb796675e73baccec32bd5db5c51/c9eb1/viblo-code-api.webp 569w&quot;
          sizes=&quot;(max-width: 569px) 100vw, 569px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/7f7aeb796675e73baccec32bd5db5c51/0783d/viblo-code-api.png 240w,
/static/7f7aeb796675e73baccec32bd5db5c51/782f4/viblo-code-api.png 480w,
/static/7f7aeb796675e73baccec32bd5db5c51/9b80a/viblo-code-api.png 569w&quot;
          sizes=&quot;(max-width: 569px) 100vw, 569px&quot;
          type=&quot;image/png&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/7f7aeb796675e73baccec32bd5db5c51/9b80a/viblo-code-api.png&quot;
          alt=&quot;viblo code api&quot;
          title=&quot;viblo code api&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;demo&quot;&gt;&lt;a href=&quot;#demo&quot; aria-label=&quot;demo permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Demo&lt;/h2&gt;
&lt;p&gt;Để dễ hiểu thì mình sẽ làm 1 phần demo để các bạn dễ hình dung.&lt;/p&gt;
&lt;p&gt;Đây là kết quả sau khi gọi API để submit code.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;img src=&quot;/3f97fdc61199cc5f53fe69ab9fcff103/code-challenge-demo-3.gif&quot;&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Còn đây là màn hình mô phỏng docker container làm việc (các bạn để ý cái màn hình terminal đằng sau đấy nhé). Cứ mỗi lần 1 request được gửi lên thì 1 container được khởi chạy và thực thi code. Nhìn khá là thú vị.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;img src=&quot;/912a1d136107269814582f529fd2cc4b/code-challenge-demo-4.gif&quot;&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;OK vậy các bạn cũng hiểu hiểu rõ cái API làm việc thế nào rồi đúng không. Bây giờ đi vào phần code nhé.&lt;/p&gt;
&lt;p&gt;Về API mình sẽ code bằng Nodejs&lt;/p&gt;
&lt;p&gt;Source code: &lt;a href=&quot;https://github.com/nooptr/code-challenge&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;https://github.com/nooptr/code-challenge&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 533px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/51798c582c25eafba2ccc25105c767ff/841f8/source-code.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 76.36022514071294%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsSAAALEgHS3X78AAAA+0lEQVQoz5VS246DIBDl/z9t081ablKrUhVExev2B/Z026TtU8eEwCRwOJcZVrtW6tRkuQ+9C/0wznFaPq5xXvGedcOoTabS07mw2EMfcUHBV41jeAocyPHTsl0psDuza7sbuHb+KNSRy8JWe8CBoYLPS+1gW6jU+UCR/QDjCF1EYlleIjyi5yfzzX3tlDZcKOCnZYufMn8DA5NwmRe2j9MOzzhKW5nTmUsttUHm5FZ5BpEwnHCRlxf0nM7c+H/me84Ao6ZP2EO2rRqhNPbl9zqt2760IRWeMaToNuYE4ncwt92gUvN1+Ebg4KfYfmEeRjD/JBzkcV7psv8ABuI0jG7p7i0AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/51798c582c25eafba2ccc25105c767ff/01472/source-code.webp 240w,
/static/51798c582c25eafba2ccc25105c767ff/222bd/source-code.webp 480w,
/static/51798c582c25eafba2ccc25105c767ff/ae920/source-code.webp 533w&quot;
          sizes=&quot;(max-width: 533px) 100vw, 533px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/51798c582c25eafba2ccc25105c767ff/0783d/source-code.png 240w,
/static/51798c582c25eafba2ccc25105c767ff/782f4/source-code.png 480w,
/static/51798c582c25eafba2ccc25105c767ff/841f8/source-code.png 533w&quot;
          sizes=&quot;(max-width: 533px) 100vw, 533px&quot;
          type=&quot;image/png&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/51798c582c25eafba2ccc25105c767ff/841f8/source-code.png&quot;
          alt=&quot;source code&quot;
          title=&quot;source code&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Về image để build cho từng language mình để ở trong thư mục docker.&lt;/p&gt;
&lt;p&gt;Ví dụ như với ngôn ngữ php thì nội dung của Dockerfile sẽ như sau:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;&amp;lt;code&amp;gt;FROM php:7.3.6-cli-alpine3.9

RUN apk add --no-cache bc
RUN apk add --update coreutils &amp;amp;&amp;amp; rm -rf /var/cache/apk/*

WORKDIR /home/ntcd/

ADD script.sh /bin/script.sh
RUN chmod +x /bin/script.sh

ENTRYPOINT [&amp;quot;sh&amp;quot;, &amp;quot;/bin/script.sh&amp;quot;]&amp;lt;/code&amp;gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Trong đó nội dung của file script.sh sẽ như sau:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;&amp;lt;code&amp;gt;#!/bin/bash

# Sample execution command: ./script.sh php main.php

compiler=$1
file=$2
output=$3

START=$(date +%s.%4N)

$compiler $file &amp;gt; $output

END=$(date +%s.%4N)

runtime=$(echo &amp;quot;$END - $START&amp;quot; | bc)

echo $runtime
&amp;lt;/code&amp;gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Mục đích của file script.sh này là để thực thi compiler file code. Kết quả sau khi compiler sẽ được ghi vào file $output. Và thời gian thực thi sẽ được in ra màn hình.&lt;/p&gt;
&lt;p&gt;Để web server có thể chạy được container thì cần phải cài đặt trước bằng lệnh:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;&amp;lt;code&amp;gt;# PHP
docker build -t ntcd_php -f php/Dockerfile .

# Javascript
docker build -t ntcd_javascript -f javascript/Dockerfile .&amp;lt;/code&amp;gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Tiếp theo cùng đi xem API viết như nào nhé:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;&amp;lt;code&amp;gt;var express = require(&amp;#39;express&amp;#39;);
var router = express.Router();
var exec = require(&amp;#39;child_process&amp;#39;).exec;
var fs = require(&amp;quot;fs-extra&amp;quot;);
var crypto = require(&amp;#39;crypto&amp;#39;);

router.post(&amp;#39;/run/:language&amp;#39;, function(req, res, next) {
    var content = req.body.content;

    var folder = &amp;quot;/tmp/&amp;quot; + crypto.randomBytes(16).toString(&amp;#39;hex&amp;#39;);
    fs.mkdirSync(`${folder}`);

    if (req.params.language == &amp;quot;php&amp;quot;) {
        var inputFile = `${folder}/main.php`;
        fs.writeFileSync(inputFile, content);
        var command = `docker run --rm -v ${folder}:${folder} ntcd_php php ${inputFile} ${folder}/output`;
    } else if (req.params.language == &amp;quot;javascript&amp;quot;) {
        var inputFile = `${folder}/main.js`;
        fs.writeFileSync(inputFile, content);
        var command = `docker run --rm -v ${folder}:${folder} ntcd_javascript node ${inputFile} ${folder}/output`;
    }

    if (command == null) {
        res.json({
            stdout: &amp;quot;&amp;quot;,
            error: &amp;quot;language not support&amp;quot;,
        });
    }

    exec(command,
        (error, exec_time, stderr) =&amp;gt; {
            var stdout = fs.readFileSync(`${folder}/output`, &amp;#39;utf8&amp;#39;);
            res.json({
                stdout: stdout,
                error: stderr,
                time: exec_time
            });

            fs.remove(folder, (err) =&amp;gt; {});
        });
});

module.exports = router;
&amp;lt;/code&amp;gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Nếu ai code nodejs rồi thì mình nghĩ đọc phát có thể hiểu được ngay.&lt;/p&gt;
&lt;p&gt;Ban đầu nó sẽ nhận request từ người dùng. Dạng như sau:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;&amp;lt;code&amp;gt;{
  &amp;quot;content&amp;quot;: &amp;quot;&amp;lt;?php $a = 12; $b = $a * 2; echo $b;&amp;quot;
}&amp;lt;/code&amp;gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Nó sẽ đọc content và ghi vào 1 file gọi là main.php (cái này tuỳ vào ngôn ngữ được gửi lên. Nếu là php thì ghi vào file main.php. Nếu là javascript thì ghi vào file main.js).&lt;/p&gt;
&lt;p&gt;Sau đó, web server sẽ gọi docker container để thực thi code bằng lệnh:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;&amp;lt;code&amp;gt;docker run -it --rm -v /tmp:/tmp ntcd_php php /tmp/main.php /tmp/output&amp;lt;/code&amp;gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Cuối cùng sẽ đọc kết quả từ file /tmp/output và trả về cho người dùng với format response như sau:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;&amp;lt;code&amp;gt;{
  &amp;quot;stdout&amp;quot;: &amp;quot;24&amp;quot;,
  &amp;quot;error&amp;quot;: &amp;quot;&amp;quot;,
  &amp;quot;time&amp;quot;: &amp;quot;.0911\n&amp;quot;
}&amp;lt;/code&amp;gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;kết-luận&quot;&gt;&lt;a href=&quot;#k%E1%BA%BFt-lu%E1%BA%ADn&quot; aria-label=&quot;kết luận permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Kết luận&lt;/h2&gt;
&lt;p&gt;Các bạn thấy thế nào? Có đơn giản không ak? Chỉ với 1 đoạn code ngắn mà chúng ta có thể dễ dàng viết được  1 chương trình code challenge rồi.&lt;/p&gt;
&lt;p&gt;Source code này mình chỉ viết dưới dạng demo thôi nên có thể có nhiều chỗ code chưa hợp lí. Các bạn tự sửa theo ý mình nhé.&lt;/p&gt;
&lt;p&gt;==============&lt;/p&gt;
&lt;p&gt;Để nhận thông báo khi có bài viết mới nhất thì các bạn có thể like fanpage của mình ở bên dưới nhé:&lt;/p&gt;
&lt;p&gt;→→→ &lt;a href=&quot;https://www.facebook.com/669339543503374&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Nghệ thuật Coding Fanpage Facebook&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Chúc các bạn 1 tuần thật vui vẻ.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Discord đã lưu trữ hàng tỉ messages mỗi ngày như thế nào]]></title><link>https://nghethuatcoding.com2019/06/01/discord-da-luu-tru-hang-ti-messages-moi-ngay-nhu-the-nao/</link><guid isPermaLink="false">https://nghethuatcoding.com2019/06/01/discord-da-luu-tru-hang-ti-messages-moi-ngay-nhu-the-nao/</guid><pubDate>Sat, 01 Jun 2019 04:30:57 GMT</pubDate><content:encoded>&lt;p&gt;Mình biết đến &lt;a href=&quot;https://discordapp.com/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Discord&lt;/a&gt; cách đây khoảng 2 năm, tại thời điểm mà giá bitcoin tăng khủng khiếp ấy.&lt;/p&gt;
&lt;p&gt;Khi đó không biết mọc ở đâu lắm thầy phán bitcoin quá, kéo theo cùng các group cho kèo (thu phí) trên Discord cũng dần dần mọc ra từ đó. Không chỉ các anh tây lông mà ngay cả Việt Nam mình cũng rất nhiều.&lt;/p&gt;
&lt;p&gt;Mà thôi đi vào vấn đề chính đã.&lt;/p&gt;
&lt;p&gt;Về số lượng messages trên Discord theo thống kê như sau: vào tháng 7 năm 2017, số lượng messages 1 ngày là 40 triệu. Nhưng đến tháng 12 thì đã đạt 120 triệu messages 1 ngày. Sự tăng trưởng khá là nhanh chỉ trong vòng 5 tháng. Và đến bây giờ chắc phải hơn 1 tỉ messages 1 ngày.&lt;/p&gt;
&lt;p&gt;Vậy cùng nhau đi tìm hiểu xem họ đã lưu đống messages khổng lồ đó như thế nào nhé.&lt;/p&gt;
&lt;h2 id=&quot;bối-cảnh&quot;&gt;&lt;a href=&quot;#b%E1%BB%91i-c%E1%BA%A3nh&quot; aria-label=&quot;bối cảnh permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Bối cảnh&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://discordapp.com/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Discord&lt;/a&gt; là 1 ứng dụng chat. Nó giống như slack ấy. Cũng tạo được team, group riêng. Phân quyền người dùng, gọi điện, gửi tin nhắn, cung cấp API đủ cả.&lt;/p&gt;
&lt;p&gt;Discord được ra đời đầu tiên vào năm 2015, và họ chỉ code trong vòng đúng 2 tháng (2 tháng code xong cũng thấy pro thật). Khi đó họ sử dụng MongoDB để lưu trữ dữ liệu.&lt;/p&gt;
&lt;p&gt;Tại thời điểm này họ chỉ lưu dữ liệu trên 1 replica MongoDB duy nhất thôi, và không muốn sử dụng sharding trong MongoDB vì nó quá phức tạp, 1 phần vì bản thân Discord cũng không chắc chắn về mức độ ổn định của nó.&lt;/p&gt;
&lt;p&gt;Còn 1 điều mình thấy khá thú vị về Discord đó là về văn hoá công ty: &lt;/p&gt;
&lt;p&gt;Làm thế nào thì làm nhưng service phải được build thật nhanh để tung ra thị trường, xem phản ứng của người dùng. Tuy nhiên cũng cần phải có 1 đường lui đến 1 solution mạnh mẽ hơn.&lt;/p&gt;
&lt;p&gt;Công ty mình cũng đang đi theo hướng này. Cũng build thật nhanh, và luôn luôn có giải pháp công nghệ tốt hơn khi đối mặt với big data.&lt;/p&gt;
&lt;p&gt;Về messages được lưu trong collection của MongoDB với bộ index là &lt;strong&gt;channel_id&lt;/strong&gt; và &lt;strong&gt;created_at&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Giai đoạn đầu với dữ liệu còn nhỏ, MongoDB chạy khá là mượt mà. Tuy nhiên, vào đầu tháng 12 khi dữ liệu messages đạt đến 120 triệu messages trên 1 ngày thì đã xảy ra 1 số vấn đề như sau:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;data và index không thể fit đầy vào RAM (dữ liệu to thế mà chỉ dùng 1 node thì khó có thể fit đầy RAM được)&lt;/li&gt;
&lt;li&gt;Thời gian latency bắt đầu kéo dài ra.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Đã đến lúc cần phải chuyển sang 1 database mới phù hợp hơn với logic hiện tại.&lt;/p&gt;
&lt;h2 id=&quot;vấn-đề-đang-gặp-phải&quot;&gt;&lt;a href=&quot;#v%E1%BA%A5n-%C4%91%E1%BB%81-%C4%91ang-g%E1%BA%B7p-ph%E1%BA%A3i&quot; aria-label=&quot;vấn đề đang gặp phải permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Vấn đề đang gặp phải&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Phần voice chat làm server chịu tải khá lớn, đến nỗi không thể gửi được message. số lượng message loại này chỉ tầm khoảng 1k messages mỗi năm. Khá là ít.&lt;/li&gt;
&lt;li&gt;Phần private message (trong group private) cũng làm khá nặng server. Loại messages này mỗi năm đạt từ 100k đến 1 triệu messages. Các group private này có số lượng member không nhiều, chỉ tầm 100 member thôi.&lt;/li&gt;
&lt;li&gt;Các message trong public group thì được gửi khá là nhiều. Các public group này có số lượng thành viên lớn hơn, tầm khoảng 1000 người. Tổng messages trong 1 năm khoảng 1 triệu và gửi thường xuyên hơn. &lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;yêu-cầu-về-mặt-hệ-thống&quot;&gt;&lt;a href=&quot;#y%C3%AAu-c%E1%BA%A7u-v%E1%BB%81-m%E1%BA%B7t-h%E1%BB%87-th%E1%BB%91ng&quot; aria-label=&quot;yêu cầu về mặt hệ thống permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Yêu cầu về mặt hệ thống&lt;/h2&gt;
&lt;p&gt;Khi chọn database mới thì cần phải đáp ứng được những yêu cầu sau:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Khả năng mở rộng&lt;/li&gt;
&lt;li&gt;Chịu lỗi tốt&lt;/li&gt;
&lt;li&gt;Không mất nhiều công trong quá trình bảo trì&lt;/li&gt;
&lt;li&gt;Đã có nhiều công ty lớn dùng&lt;/li&gt;
&lt;li&gt;Có thể dự đoán được hiệu năng.&lt;/li&gt;
&lt;li&gt;Không muốn cache message trong Redis hay Memcached.&lt;/li&gt;
&lt;li&gt;Open source (muốn tự mình control được hệ thống mà không phải phụ thuộc vào bên thứ 3)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Từ những yêu cầu trên thì chỉ có &lt;strong&gt;Cassandra&lt;/strong&gt; là phù hợp nhất. &lt;/p&gt;
&lt;p&gt;Cassandra có thể dễ dàng thêm, xoá node để tăng hiệu năng. Và các node đồng bộ dữ liệu với nhau thông qua cơ chế P2P (peer to peer) nên khi 1 node có bị chết đi chăng nữa thì các node khác vẫn chứa dữ  liệu nên độ chịu lỗi khá cao.&lt;/p&gt;
&lt;p&gt;Ngoài ra còn có các công ty lớn đang dùng như Netflix, Apple, Facebook, Twitter với hàng nghìn node nên có thể tự tin về hiệu năng của nó.&lt;/p&gt;
&lt;p&gt;Nếu bạn nào chưa biết về Cassandra thì có thể tham khảo &lt;a href=&quot;https://nghethuatcoding.com/2019/05/26/tat-tan-tat-ve-apache-cassandra/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;tại đây&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id=&quot;data-modeling&quot;&gt;&lt;a href=&quot;#data-modeling&quot; aria-label=&quot;data modeling permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Data Modeling&lt;/h2&gt;
&lt;p&gt;Cơ chế tổ chức data trong Cassandra như sau:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Được tổ chức dưới dạng KKV (key key value) store.&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Trong đó, tổ hợp của 2 chữ K này là khoá chính:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Chữ K đầu tiên là partition key.&lt;/li&gt;
&lt;li&gt;Partition gồm nhiều row, mỗi row được định danh bởi K thứ 2 (được gọi là cluster key). Cluster key này cũng đóng vai trò là khoá chính trong partition.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Message được index trong MongoDB sử dụng &lt;strong&gt;channel_id&lt;/strong&gt; và &lt;strong&gt;created_at&lt;/strong&gt;. Trong đó channel&lt;em&gt;id là partition key bởi vì tất quả query đều thao tác trong channel. Nhưng mà created&lt;/em&gt;at không thể là cluster key được vì có thể 2 message đều được tạo ra cùng thời điểm.&lt;/p&gt;
&lt;p&gt;Nhưng thật may mỗi ID trong Discord luôn luôn duy nhất (vì sử dụng cơ chế &lt;a href=&quot;https://blog.twitter.com/2010/announcing-snowflake&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Snowflake&lt;/a&gt; của twitter). Khi đó khoá chính sẽ trở thành (&lt;strong&gt;channel_id&lt;/strong&gt;, &lt;strong&gt;message_id&lt;/strong&gt;). Trong đó message_id chính là snowflake.&lt;/p&gt;
&lt;p&gt;Điều đó giúp ta dễ dàng lấy được message dựa vào channel_id.&lt;/p&gt;
&lt;p&gt;Khi đó cấu trúc bảng messages sẽ như sau:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;&amp;lt;code&amp;gt;CREATE TABLE messages (
  channel_id bigint,
  message_id bigint,
  author_id bigint,
  content text,
  PRIMARY KEY (channel_id, message_id)
) WITH CLUSTERING ORDER BY (message_id DESC);&amp;lt;/code&amp;gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Khi import data from MongoDB sang Cassandra thì gặp phải 1 vấn đề sau. Đó là xuất hiện cảnh báo kích thước partition đã vượt quá 100MB. (Có lẽ dữ liệu trong 1 partition có kích thước lớn không được phân tán sang các cluster bên cạnh nên bị cảnh báo này chăng?)&lt;/p&gt;
&lt;p&gt;Do đó mà cần chia nhỏ dữ liệu ra để fit vừa 100MB. Họ kiểm tra 1 channel to nhất Discord thấy messages trong 10 ngày sẽ có kích thước tầm 100MB. Do đó quyết định cho messages vào từng bucket với khoảng thời gian là 10 ngày.&lt;/p&gt;
&lt;p&gt;Cụ thể như sau:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;&amp;lt;code&amp;gt;DISCORD_EPOCH = 1420070400000 // thời điểm lúc 12:00 1/1/2015
BUCKET_SIZE = 1000 * 60 * 60 * 24 * 10 // tin nhắn trong 10 ngày

def make_bucket(snowflake):
   if snowflake is None:
       timestamp = int(time.time() * 1000) - DISCORD_EPOCH
   else:
       # When a Snowflake is created it contains the number of
       # seconds since the DISCORD_EPOCH.
       timestamp = snowflake_id &amp;gt;&amp;gt; 22
   return int(timestamp / BUCKET_SIZE)
  
def make_buckets(start_id, end_id=None):
   return range(make_bucket(start_id), make_bucket(end_id) + 1)&amp;lt;/code&amp;gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Khi đó primary key sẽ trở thành: ((channel&lt;em&gt;id, bucket), message&lt;/em&gt;id)&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;&amp;lt;code&amp;gt;CREATE TABLE messages (
   channel_id bigint,
   bucket int,
   message_id bigint,
   author_id bigint,
   content text,
   PRIMARY KEY ((channel_id, bucket), message_id)
) WITH CLUSTERING ORDER BY (message_id DESC);&amp;lt;/code&amp;gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Để query lấy messages gần đây thì chỉ cần tạo ra 1 bucket từ current&lt;em&gt;time cho đến channel&lt;/em&gt;id (vì channel&lt;em&gt;id được tạo ra bởi Snowflake, mà channel thường được tạo trước sau đó mới đến message nên có thể coi channel&lt;/em&gt;id như message đầu tiên).&lt;/p&gt;
&lt;p&gt;Và chúng ta sẽ query tuần tự trong partition để lấy đủ message thì thôi. &lt;/p&gt;
&lt;h2 id=&quot;hiệu-năng&quot;&gt;&lt;a href=&quot;#hi%E1%BB%87u-n%C4%83ng&quot; aria-label=&quot;hiệu năng permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Hiệu năng&lt;/h2&gt;
&lt;p&gt;Quả đúng như đồn đại, tốc độ write luôn luôn nhanh hơn tốc độ read. Write mất khoảng 0.5ms trong khi read mất tầm khoảng 5ms. Mặc dù read chậm hơn thật nhưng mà chỉ mất đến milisecond thì vẫn nhanh chán.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/a1fe5f84157cd7de9989eb7f767c5984/8ff1e/cassandra-performance.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 51.87500000000001%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsSAAALEgHS3X78AAAA5ElEQVQoz41Q2Y7EIAzj//91VWC5cpCugQF1NA87UQSOabGxY2azjr7N7v9qfWJm2o1FnIhk0kT628QXTk1ilStTrAwGY6HBA4fCP5sPlUMhB2XpXbqt1r2e7hssHiZtGhDRoYyBiXBLm0WoVmmCOba5T2bste0jF2MMwV/XlVJi+qogU0rx3rucc8MIE/Bk97J0vD1zWtVnvAC4xUG9sI4mzSRIrowVKcpi1lGZTGVFnEhukjx+fhN56NjDgu0+WFUd1HvvuIL5FQ+/cqKVCm9AH8Dh6bVWvBwg70J4Z3zypxb5B6ZHSfzeGqhBAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/a1fe5f84157cd7de9989eb7f767c5984/01472/cassandra-performance.webp 240w,
/static/a1fe5f84157cd7de9989eb7f767c5984/222bd/cassandra-performance.webp 480w,
/static/a1fe5f84157cd7de9989eb7f767c5984/0cbce/cassandra-performance.webp 800w&quot;
          sizes=&quot;(max-width: 800px) 100vw, 800px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/a1fe5f84157cd7de9989eb7f767c5984/0783d/cassandra-performance.png 240w,
/static/a1fe5f84157cd7de9989eb7f767c5984/782f4/cassandra-performance.png 480w,
/static/a1fe5f84157cd7de9989eb7f767c5984/8ff1e/cassandra-performance.png 800w&quot;
          sizes=&quot;(max-width: 800px) 100vw, 800px&quot;
          type=&quot;image/png&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/a1fe5f84157cd7de9989eb7f767c5984/8ff1e/cassandra-performance.png&quot;
          alt=&quot;cassandra performance&quot;
          title=&quot;cassandra performance&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Tại sao write lại luôn nhanh hơn read?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Write nhanh hơn read vì nó không liên quan quá nhiều đến I/O. Nó chỉ cần ghi vào trong commit log và memtable là xong. Và khi memtable bị full sẽ bị đẩy xuống disk.&lt;/p&gt;
&lt;p&gt;Khi read thì có thể nó sẽ phải lấy dữ liệu trong disk nên tốc độ đương nhiên là chậm hơn rồi.&lt;/p&gt;
&lt;p&gt;Nếu mà data vẫn ở trong memtable thì chắc chắn tốc độ sẽ ngang ngửa read. Do cái này là trung bình của tất cả các trường hợp nên sẽ cho ra kết quả write luôn nhanh hơn read.&lt;/p&gt;
&lt;p&gt;Đây là kết quả khi muốn xem 1 tin nhắn cách đây 1 năm.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;img src=&quot;/5aba8e4d0eecee1054030619dd504c45/Jumping-back-one-full-year-of-chat-.gif&quot;&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Kết quả bên trên được test ở trong 1 channel to nhất Discord (có trên 1k thành viên). Tốc độ quả rất là nhanh. &lt;/p&gt;
&lt;h2 id=&quot;1-điều-ngạc-nhiên-đã-xảy-ra&quot;&gt;&lt;a href=&quot;#1-%C4%91i%E1%BB%81u-ng%E1%BA%A1c-nhi%C3%AAn-%C4%91%C3%A3-x%E1%BA%A3y-ra&quot; aria-label=&quot;1 điều ngạc nhiên đã xảy ra permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;1 điều ngạc nhiên đã xảy ra&lt;/h2&gt;
&lt;p&gt;Cassandra hoạt động khá suôn sẻ suốt 6 tháng và đến 1 ngày có 1 việc xảy ra. Họ phát hiện ra 1 kênh mất tầm 20s để load dữ liệu. Tại sao lại load lâu như vậy?&lt;/p&gt;
&lt;p&gt;Khi vào kiểm tra thấy kênh này chỉ còn duy nhất 1 tin nhắn. Kiểm tra thấy admin của channel này đã dùng api discord để xoá hàng triệu messages đi.&lt;/p&gt;
&lt;p&gt;Như chúng ta đã biết, việc xoá dữ liệu trong Cassandra sẽ không như trong Mysql. Là nó sẽ không xoá ngay. Mà nó sẽ gắn 1 cái cờ gọi là tombstones đến dữ liệu muốn xoá. Khi query để lấy dữ liệu, nó sẽ check xem dữ liệu có gắn cờ này không và trả về dữ liệu.&lt;/p&gt;
&lt;p&gt;Do đó mặc dù channel chỉ có 1 message duy nhất mà phải mất đến 20s để load. Quá là lâu.&lt;/p&gt;
&lt;p&gt;Và họ đã giải quyết bằng cách:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Giảm lifespan của tombstones từ 10 ngày xuống còn 2 ngày. Vì họ thực hiện chạy &lt;a href=&quot;https://docs.datastax.com/en/cassandra/2.1/cassandra/tools/toolsRepair.html#toolsRepair__description&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Cassandra repairs&lt;/a&gt; vào mỗi buổi tối để dọn dẹp dữ liệu, tăng tính nhất quán của hệ thống.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;kết-luận&quot;&gt;&lt;a href=&quot;#k%E1%BA%BFt-lu%E1%BA%ADn&quot; aria-label=&quot;kết luận permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Kết luận&lt;/h2&gt;
&lt;p&gt;Qua bài này chắc các bạn cũng biết được Cassandra nó được sử dụng trong các hệ thống big data như thế nào.&lt;/p&gt;
&lt;p&gt;Về Cassandra mình thích nhất là tính dễ mở rộng (càng thêm node thì hiệu năng càng cao) và mức độ chịu lỗi thấp của nó.&lt;/p&gt;
&lt;p&gt;Nên nếu bạn nào đang có ý định đưa Cassandra vào hệ thống thì mình thấy có thể sẽ là 1 sự lựa chọn đúng đắn.&lt;/p&gt;
&lt;p&gt;==============&lt;/p&gt;
&lt;p&gt;Để nhận thông báo khi có bài viết mới nhất thì các bạn có thể like fanpage của mình ở bên dưới nhé:&lt;/p&gt;
&lt;p&gt;→→→ &lt;a href=&quot;https://www.facebook.com/669339543503374&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Nghệ thuật Coding Fanpage Facebook&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Chúc các bạn 1 tuần thật vui vẻ.&lt;/p&gt;
&lt;p&gt;** &lt;a href=&quot;https://blog.discordapp.com/how-discord-stores-billions-of-messages-7fa6ec7ee4c7&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Nguồn&lt;/a&gt;**&lt;/p&gt;</content:encoded></item><item><title><![CDATA[12 plugin nên dùng trong Adobe XD]]></title><link>https://nghethuatcoding.com2019/05/31/12-plugin-nen-dung-trong-adobe-xd/</link><guid isPermaLink="false">https://nghethuatcoding.com2019/05/31/12-plugin-nen-dung-trong-adobe-xd/</guid><pubDate>Fri, 31 May 2019 12:41:09 GMT</pubDate><content:encoded>&lt;p&gt;Trước kia khi nói đến design chắc ai cũng nghĩ ngay đến bộ tool của adobe như photoshop, illustrator … Vì nó làm được mọi thứ. Từ xoá phông nền cho đến thiết kế banner, logo website. &lt;/p&gt;
&lt;p&gt;1 người mới bắt đầu mà đi dùng bộ adobe này chắc ngộp thở mất. Vì nó trang bị quá nhiều chức năng. &lt;/p&gt;
&lt;p&gt;Chính vì trong hoàn cảnh đó mà  1 số công cụ khác đã ra đời giúp dễ dùng hơn. 1 trong những công cụ không thể kể đến đó là Adobe XD.&lt;/p&gt;
&lt;p&gt;Bản thân mình cũng rất thích dùng Adobe XD. Vì nó free, mà lại còn nhẹ nữa.&lt;/p&gt;
&lt;p&gt;Logo nghệ thuật coding mình cũng dùng adobe XD để thiết kế.&lt;/p&gt;
&lt;p&gt;Hôm nay mình sẽ giới thiệu cho các bạn 1 số plugin mình thấy khá là hay khi dùng AdobeXD. Bản thân mình cũng đang dùng nó.&lt;/p&gt;
&lt;h2 id=&quot;vizzicharts-công-cụ-vẽ-đồ-thị&quot;&gt;&lt;a href=&quot;#vizzicharts-c%C3%B4ng-c%E1%BB%A5-v%E1%BA%BD-%C4%91%E1%BB%93-th%E1%BB%8B&quot; aria-label=&quot;vizzicharts công cụ vẽ đồ thị permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;VizziCharts công cụ vẽ đồ thị&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 740px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/a3c7bdeaebdfeda26ff6fbc0274ae34f/2cac7/VizziCharts.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 64.86486486486486%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAUBBv/EABUBAQEAAAAAAAAAAAAAAAAAAAID/9oADAMBAAIQAxAAAAGZtKvaXKhj/8QAGRAAAwADAAAAAAAAAAAAAAAAAAECBBAS/9oACAEBAAEFAh6wUndTPJ//xAAXEQADAQAAAAAAAAAAAAAAAAABAhAR/9oACAEDAQE/AQuz/8QAFxEBAAMAAAAAAAAAAAAAAAAAAQIQEf/aAAgBAgEBPwFnjX//xAAbEAACAQUAAAAAAAAAAAAAAAABEAACESJBkf/aAAgBAQAGPwJ1XGocRxf/xAAbEAABBAMAAAAAAAAAAAAAAAABABARMUFhcf/aAAgBAQABPyHqgaaFw7CcoI4pZ//aAAwDAQACAAMAAAAQwO//xAAVEQEBAAAAAAAAAAAAAAAAAAAREP/aAAgBAwEBPxASz//EABYRAAMAAAAAAAAAAAAAAAAAABARIf/aAAgBAgEBPxCQh//EABwQAQABBAMAAAAAAAAAAAAAAAERABAxcUFRof/aAAgBAQABPxAiThuKTEQgDObChYUi9KPqR4HWrf/Z&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/a3c7bdeaebdfeda26ff6fbc0274ae34f/01472/VizziCharts.webp 240w,
/static/a3c7bdeaebdfeda26ff6fbc0274ae34f/222bd/VizziCharts.webp 480w,
/static/a3c7bdeaebdfeda26ff6fbc0274ae34f/af5f2/VizziCharts.webp 740w&quot;
          sizes=&quot;(max-width: 740px) 100vw, 740px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/a3c7bdeaebdfeda26ff6fbc0274ae34f/3bc27/VizziCharts.jpg 240w,
/static/a3c7bdeaebdfeda26ff6fbc0274ae34f/98431/VizziCharts.jpg 480w,
/static/a3c7bdeaebdfeda26ff6fbc0274ae34f/2cac7/VizziCharts.jpg 740w&quot;
          sizes=&quot;(max-width: 740px) 100vw, 740px&quot;
          type=&quot;image/jpeg&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/a3c7bdeaebdfeda26ff6fbc0274ae34f/2cac7/VizziCharts.jpg&quot;
          alt=&quot;VizziCharts&quot;
          title=&quot;VizziCharts&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Đây là plugin giúp chúng ta vẽ đồ thị 1 cách nhanh hơn. &lt;/p&gt;
&lt;p&gt;Chi tiết xem &lt;a href=&quot;https://www.vizzycharts.com/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;ở đây&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id=&quot;yotako-tự-động-sinh-ra-source-code&quot;&gt;&lt;a href=&quot;#yotako-t%E1%BB%B1-%C4%91%E1%BB%99ng-sinh-ra-source-code&quot; aria-label=&quot;yotako tự động sinh ra source code permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Yotako tự động sinh ra source code&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 740px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/e5bea1a056c122b17cccc0d448d3540a/2cac7/Yotako.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 64.86486486486486%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAECBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAdyWxkh//8QAGhABAAEFAAAAAAAAAAAAAAAAARAAERIhMf/aAAgBAQABBQLo6gLRjX//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAXEAADAQAAAAAAAAAAAAAAAAAAASEg/9oACAEBAAY/AoyvP//EABkQAQEBAQEBAAAAAAAAAAAAAAERACFBYf/aAAgBAQABPyF6EPplyrNbjuetyUwDf//aAAwDAQACAAMAAAAQB9//xAAYEQACAwAAAAAAAAAAAAAAAAAAAREhQf/aAAgBAwEBPxBRpR//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAbEAEAAwEAAwAAAAAAAAAAAAABABEhMUFRsf/aAAgBAQABPxDcK5gpAfh6kK+QAsbJqzsplNI+ycKyf//Z&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/e5bea1a056c122b17cccc0d448d3540a/01472/Yotako.webp 240w,
/static/e5bea1a056c122b17cccc0d448d3540a/222bd/Yotako.webp 480w,
/static/e5bea1a056c122b17cccc0d448d3540a/af5f2/Yotako.webp 740w&quot;
          sizes=&quot;(max-width: 740px) 100vw, 740px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/e5bea1a056c122b17cccc0d448d3540a/3bc27/Yotako.jpg 240w,
/static/e5bea1a056c122b17cccc0d448d3540a/98431/Yotako.jpg 480w,
/static/e5bea1a056c122b17cccc0d448d3540a/2cac7/Yotako.jpg 740w&quot;
          sizes=&quot;(max-width: 740px) 100vw, 740px&quot;
          type=&quot;image/jpeg&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/e5bea1a056c122b17cccc0d448d3540a/2cac7/Yotako.jpg&quot;
          alt=&quot;Yotako&quot;
          title=&quot;Yotako&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Đây là plugin giúp chúng ta có thể tự động sinh ra source code từ 1 file design data có trước.&lt;/p&gt;
&lt;p&gt;Chi tiết xem &lt;a href=&quot;https://www.yotako.io/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;ở đây.&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;icondrop-chứa-hàng-triệu-vector-icon&quot;&gt;&lt;a href=&quot;#icondrop-ch%E1%BB%A9a-h%C3%A0ng-tri%E1%BB%87u-vector-icon&quot; aria-label=&quot;icondrop chứa hàng triệu vector icon permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Icondrop chứa hàng triệu vector icon&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 740px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/4252d2d45fd8ee547129335288e6a84c/2cac7/Icondrop.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 64.86486486486486%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAMFBv/EABUBAQEAAAAAAAAAAAAAAAAAAAEC/9oADAMBAAIQAxAAAAGc+8xvIl0b/8QAGxAAAwACAwAAAAAAAAAAAAAAAQIDABEEITL/2gAIAQEAAQUCnGj4eLXRRxkvDdK4O//EABURAQEAAAAAAAAAAAAAAAAAAAEA/9oACAEDAQE/AVSBb//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EAB0QAAIBBAMAAAAAAAAAAAAAAAABAhIhIpEyM2H/2gAIAQEABj8C4M63svF6IrxDZlKo/8QAHRABAAIBBQEAAAAAAAAAAAAAAQARMSFRYXGBsf/aAAgBAQABPyHCOVY4gkulxitD7jxPlFRZCIFy3Sp//9oADAMBAAIAAwAAABAA/wD/xAAWEQEBAQAAAAAAAAAAAAAAAAABABH/2gAIAQMBAT8QUxgNv//EABYRAQEBAAAAAAAAAAAAAAAAAAEAEf/aAAgBAgEBPxDYFNv/xAAbEAEBAQEAAwEAAAAAAAAAAAABESEAMVFxkf/aAAgBAQABPxBXfUMp9cegkC4r+HnjC9KCDOduQJny8ipEpr66EBJJiuQ7/9k=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/4252d2d45fd8ee547129335288e6a84c/01472/Icondrop.webp 240w,
/static/4252d2d45fd8ee547129335288e6a84c/222bd/Icondrop.webp 480w,
/static/4252d2d45fd8ee547129335288e6a84c/af5f2/Icondrop.webp 740w&quot;
          sizes=&quot;(max-width: 740px) 100vw, 740px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/4252d2d45fd8ee547129335288e6a84c/3bc27/Icondrop.jpg 240w,
/static/4252d2d45fd8ee547129335288e6a84c/98431/Icondrop.jpg 480w,
/static/4252d2d45fd8ee547129335288e6a84c/2cac7/Icondrop.jpg 740w&quot;
          sizes=&quot;(max-width: 740px) 100vw, 740px&quot;
          type=&quot;image/jpeg&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/4252d2d45fd8ee547129335288e6a84c/2cac7/Icondrop.jpg&quot;
          alt=&quot;Icondrop&quot;
          title=&quot;Icondrop&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Đây là 1 trong những plugin mình thích nhất. Nó cung cấp cho chúng ta hàng triệu icon free. Từ banner cho đến những ảnh infographics. Toàn hàng ngon cả. Tuy nhiên cũng có 1 số ảnh mất phí.&lt;/p&gt;
&lt;p&gt;Plugin này có thể sử dụng được trong cả sketchapp và photoshop nữa.&lt;/p&gt;
&lt;p&gt;Chi tiết xem &lt;a href=&quot;https://iconscout.com/icondrop/for-adobe-xd&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;ở đây&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id=&quot;zeplin-tự-động-sinh-ra-style-guide&quot;&gt;&lt;a href=&quot;#zeplin-t%E1%BB%B1-%C4%91%E1%BB%99ng-sinh-ra-style-guide&quot; aria-label=&quot;zeplin tự động sinh ra style guide permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Zeplin tự động sinh ra style guide&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 740px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/664190591a1d5ad1586ab7fad3bdbaee/2cac7/Zeplin.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 64.86486486486486%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAEDBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHfnRQwK//EABcQAAMBAAAAAAAAAAAAAAAAAAAQERL/2gAIAQEAAQUCLlxf/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFxAAAwEAAAAAAAAAAAAAAAAAAAEgIf/aAAgBAQAGPwI1z//EABsQAAIBBQAAAAAAAAAAAAAAAAEREAAhMUFR/9oACAEBAAE/IasNzPMSdI//2gAMAwEAAgADAAAAEO/P/8QAFREBAQAAAAAAAAAAAAAAAAAAEBH/2gAIAQMBAT8Qp//EABYRAQEBAAAAAAAAAAAAAAAAABEQIf/aAAgBAgEBPxA1n//EABoQAQADAQEBAAAAAAAAAAAAAAEAESExEEH/2gAIAQEAAT8QUOtTZT4JgQ0iD0uA18ef/9k=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/664190591a1d5ad1586ab7fad3bdbaee/01472/Zeplin.webp 240w,
/static/664190591a1d5ad1586ab7fad3bdbaee/222bd/Zeplin.webp 480w,
/static/664190591a1d5ad1586ab7fad3bdbaee/af5f2/Zeplin.webp 740w&quot;
          sizes=&quot;(max-width: 740px) 100vw, 740px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/664190591a1d5ad1586ab7fad3bdbaee/3bc27/Zeplin.jpg 240w,
/static/664190591a1d5ad1586ab7fad3bdbaee/98431/Zeplin.jpg 480w,
/static/664190591a1d5ad1586ab7fad3bdbaee/2cac7/Zeplin.jpg 740w&quot;
          sizes=&quot;(max-width: 740px) 100vw, 740px&quot;
          type=&quot;image/jpeg&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/664190591a1d5ad1586ab7fad3bdbaee/2cac7/Zeplin.jpg&quot;
          alt=&quot;Zeplin&quot;
          title=&quot;Zeplin&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Đây là 1 trong những plugin sinh ra style guide khá là tiện. &lt;/p&gt;
&lt;p&gt;Nếu làm design mà không có style guide cũng giống như việc râu ông nọ cắm cằm bà kia. Màu sắc, font chữ nó sẽ rất lộn xộn, không thống nhất.&lt;/p&gt;
&lt;p&gt;Ví dụ như designer tạo ra banner với màu sắc như này. Nhưng mà ông frontend lại dùng với màu sắc khác (không giống hoàn toàn). Rồi có khi lúc dùng font này, lúc dùng font khác.&lt;/p&gt;
&lt;p&gt;Do đó cần phải có 1 style guide chuẩn. &lt;/p&gt;
&lt;p&gt;Chi tiết xem &lt;a href=&quot;https://zeplin.io/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;ở đây&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id=&quot;airtable-chèn-ảnh-và-text-dummy-dễ-dàng&quot;&gt;&lt;a href=&quot;#airtable-ch%C3%A8n-%E1%BA%A3nh-v%C3%A0-text-dummy-d%E1%BB%85-d%C3%A0ng&quot; aria-label=&quot;airtable chèn ảnh và text dummy dễ dàng permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Airtable chèn ảnh và text dummy dễ dàng&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 740px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/765e8b46b59803474e821dc2171934d7/2cac7/Airtable.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 64.86486486486486%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAIDBAX/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAAB3FeGLAFf/8QAGhAAAgIDAAAAAAAAAAAAAAAAAQIAERMiMf/aAAgBAQABBQJjSg7RuYxc/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFhAAAwAAAAAAAAAAAAAAAAAAACBB/9oACAEBAAY/Air/AP/EABwQAQEAAgIDAAAAAAAAAAAAAAERABAhMVFh0f/aAAgBAQABPyGwtnrB4X61VgxcG7eNf//aAAwDAQACAAMAAAAQj8//xAAXEQADAQAAAAAAAAAAAAAAAAABEBFB/9oACAEDAQE/EBNX/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGxABAQACAwEAAAAAAAAAAAAAAREhMQAQQXH/2gAIAQEAAT8QKejbucziQEVEr51bQgMs5QKJWD0uev/Z&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/765e8b46b59803474e821dc2171934d7/01472/Airtable.webp 240w,
/static/765e8b46b59803474e821dc2171934d7/222bd/Airtable.webp 480w,
/static/765e8b46b59803474e821dc2171934d7/af5f2/Airtable.webp 740w&quot;
          sizes=&quot;(max-width: 740px) 100vw, 740px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/765e8b46b59803474e821dc2171934d7/3bc27/Airtable.jpg 240w,
/static/765e8b46b59803474e821dc2171934d7/98431/Airtable.jpg 480w,
/static/765e8b46b59803474e821dc2171934d7/2cac7/Airtable.jpg 740w&quot;
          sizes=&quot;(max-width: 740px) 100vw, 740px&quot;
          type=&quot;image/jpeg&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/765e8b46b59803474e821dc2171934d7/2cac7/Airtable.jpg&quot;
          alt=&quot;Airtable&quot;
          title=&quot;Airtable&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Ví dụ như khi thiết kế màn hình danh sách người dùng. Khi đó chắc chắn cần phải hiển thị ảnh avatar của người dùng ra. Vậy lúc đó sẽ tìm ảnh ở đâu?&lt;/p&gt;
&lt;p&gt;Chắc mọi người sẽ lên mạng search rồi tự chèn bằng tay vào. Cách này cũng được nhưng hơi mất công.&lt;/p&gt;
&lt;p&gt;Có 1 cách nhanh hơn là dùng plugin này. Nó sẽ giúp chúng ta chèn ảnh với text dummy 1 cách dễ dàng. Ảnh thì vô cùng phong phú luôn. Không phải lo về nguồn ảnh.&lt;/p&gt;
&lt;p&gt;Chi tiết xem &lt;a href=&quot;https://airtable.com/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;ở đây&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id=&quot;ui-faces-chèn-ảnh-avatar&quot;&gt;&lt;a href=&quot;#ui-faces-ch%C3%A8n-%E1%BA%A3nh-avatar&quot; aria-label=&quot;ui faces chèn ảnh avatar permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;UI Faces chèn ảnh avatar&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 740px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/5ee613fa159bb3897aea350cbb616ec6/2cac7/UI-Faces.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 64.86486486486486%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAIEBf/EABUBAQEAAAAAAAAAAAAAAAAAAAEA/9oADAMBAAIQAxAAAAHbSJh0SEj/xAAaEAACAgMAAAAAAAAAAAAAAAAAAhESAQMh/9oACAEBAAEFAr4LdkuMwmyT/8QAFREBAQAAAAAAAAAAAAAAAAAAEBH/2gAIAQMBAT8Bh//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EAB4QAAIBAwUAAAAAAAAAAAAAAAABQQIhURARMoGh/9oACAEBAAY/Anc5eaPuRvG8lVpyf//EABwQAAIBBQEAAAAAAAAAAAAAAAERACExQVFhgf/aAAgBAQABPyF4SzkCsSI1IEvkvNHO6V6z2pnHpqf/2gAMAwEAAgADAAAAEEA//8QAFhEBAQEAAAAAAAAAAAAAAAAAABEx/9oACAEDAQE/ENRH/8QAFREBAQAAAAAAAAAAAAAAAAAAARD/2gAIAQIBAT8QWf/EABwQAQEAAgMBAQAAAAAAAAAAAAERACExQVGBsf/aAAgBAQABPxDaAtFrSS/pgQBvJ0e5qy7Ro5TFQ1eRkRHEWTo6+5SkEn5M/9k=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/5ee613fa159bb3897aea350cbb616ec6/01472/UI-Faces.webp 240w,
/static/5ee613fa159bb3897aea350cbb616ec6/222bd/UI-Faces.webp 480w,
/static/5ee613fa159bb3897aea350cbb616ec6/af5f2/UI-Faces.webp 740w&quot;
          sizes=&quot;(max-width: 740px) 100vw, 740px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/5ee613fa159bb3897aea350cbb616ec6/3bc27/UI-Faces.jpg 240w,
/static/5ee613fa159bb3897aea350cbb616ec6/98431/UI-Faces.jpg 480w,
/static/5ee613fa159bb3897aea350cbb616ec6/2cac7/UI-Faces.jpg 740w&quot;
          sizes=&quot;(max-width: 740px) 100vw, 740px&quot;
          type=&quot;image/jpeg&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/5ee613fa159bb3897aea350cbb616ec6/2cac7/UI-Faces.jpg&quot;
          alt=&quot;UI Faces&quot;
          title=&quot;UI Faces&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Plugin này thì chuyên về ảnh avatar. &lt;/p&gt;
&lt;p&gt;Chi tiết xem &lt;a href=&quot;https://uifaces.co/adobe-xd-plugin&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;ở đây&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;==============&lt;/p&gt;
&lt;p&gt;Để nhận thông báo khi có bài viết mới nhất thì các bạn có thể like fanpage của mình ở bên dưới nhé:&lt;/p&gt;
&lt;p&gt;→→→ &lt;a href=&quot;https://www.facebook.com/669339543503374&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Nghệ thuật Coding Fanpage Facebook&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Chúc các bạn 1 tuần thật vui vẻ.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Tất tần tật về Apache Cassandra]]></title><link>https://nghethuatcoding.com2019/05/26/tat-tan-tat-ve-apache-cassandra/</link><guid isPermaLink="false">https://nghethuatcoding.com2019/05/26/tat-tan-tat-ve-apache-cassandra/</guid><pubDate>Sun, 26 May 2019 12:39:24 GMT</pubDate><content:encoded>&lt;p&gt;Nói về cơ sở dữ liệu thì chắc ai cũng nghĩ ngay đến hệ quản trị cơ sở dữ liệu quan hệ như Mysql, PostgreSQL, hay NoSQL như MongoDB, DynamoDB, Cassandra… &lt;/p&gt;
&lt;p&gt;Và theo mình nghĩ đa số anh em ở đây cũng đang sử dụng chủ yếu là MySQL. Mình cũng vậy, từ lúc đi làm đến giờ toàn phang MySQL, chưa có cơ hội làm việc với NoSQL (tự tìm hiểu thì có còn dùng trong dự án thật thì chưa)&lt;/p&gt;
&lt;p&gt;Kể cả các công ty to như Pinterest hay Instagram cũng vậy, họ vẫn đang dùng MySQL.&lt;/p&gt;
&lt;p&gt;Còn NoSQL thì hiện nay thấy rất nhiều công ty đã dùng vào hệ thống chính của họ. Ví dụ như Netflix,  Discord, Spotify …&lt;/p&gt;
&lt;p&gt;Nên hôm nay quyết định viết bài này để tìm hiểu xem thật sự thằng Cassandra này nó có ưu điểm, nhược điểm gì, dễ scale hay không …&lt;/p&gt;
&lt;h2 id=&quot;khái-quát-qua-về-cassandra&quot;&gt;&lt;a href=&quot;#kh%C3%A1i-qu%C3%A1t-qua-v%E1%BB%81-cassandra&quot; aria-label=&quot;khái quát qua về cassandra permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Khái quát qua về Cassandra&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;http://cassandra.apache.org/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Cassandra&lt;/a&gt; là NoSQL, được phát triển bởi Facebook vào năm 2007. Sau đó nó được tặng cho quỹ Apache vào 2/2010 và nâng cấp lên thành dự án hàng đầu của Apache.&lt;/p&gt;
&lt;p&gt;Cassandra là &lt;strong&gt;hệ cơ sở dữ liệu phân tán&lt;/strong&gt;, kết hợp những gì tinh tuý nhất của Google Bigtable và Amazon DynamoDB. Ngôn ngữ phát triển Cassandra là Java.&lt;/p&gt;
&lt;p&gt;Cassandra được thiết kế có thể chạy trong phần cứng giá rẻ, và cung cấp write throughput khá là cao (latency tầm 0.5ms), trong khi read throughput thì thấp hơn (latency tầm 2.5ms).  &lt;/p&gt;
&lt;p&gt;Nếu nói đến NoSQL thì chắc ai cũng đều có chút liên tưởng nó hoạt động thế nào rồi. Cassandra cũng vậy, dữ liệu được lưu vào table, sau đó dùng 1 ngôn ngữ query như SQL để thực hiện thao tác với dữ liệu. &lt;/p&gt;
&lt;p&gt;Cassandra là hệ cơ sở dữ liệu phân tán, dữ liệu được lưu trữ trên nhiều node của nhiều máy khác nhau, theo cơ chế &lt;strong&gt;P2P&lt;/strong&gt;. Hiệu năng xử lý của hệ thống cũng tăng theo số node (nếu càng nhiều node thì càng xử lý được nhiều request).&lt;/p&gt;
&lt;p&gt;Điều đó sẽ giúp cho Cassandra dễ dàng scale theo chiều ngang.&lt;/p&gt;
&lt;p&gt;Về hiệu năng thì Netflix cũng đã thực hiện đo benchmark, kết quả ngoài mong đợi. Với 288 nodes, Casandra đã đạt được &lt;a href=&quot;https://nghethuatcoding.com/2019/05/18/test-tai-he-thong-thuc-su-can-thiet/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;throughput&lt;/a&gt; lên đến 1 triệu write/s. Khá kinh khủng.&lt;/p&gt;
&lt;p&gt;Kết quả thực hiện đo benchmark ở đây: &lt;a href=&quot;https://medium.com/netflix-techblog/benchmarking-cassandra-scalability-on-aws-over-a-million-writes-per-second-39f45f066c9e&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;https://medium.com/netflix-techblog/benchmarking-cassandra-scalability-on-aws-over-a-million-writes-per-second-39f45f066c9e&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;use-cases-của-cassandra&quot;&gt;&lt;a href=&quot;#use-cases-c%E1%BB%A7a-cassandra&quot; aria-label=&quot;use cases của cassandra permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Use Cases của Cassandra&lt;/h2&gt;
&lt;p&gt;Cassandra là 1 hệ cơ sở dữ liệu không quan hệ, và thường được sử dụng trong nhiều loại ứng dụng khác nhau. Dưới đây là 1 số use cases mà Cassandra thường hay được sử dụng.&lt;/p&gt;
&lt;h3 id=&quot;messaging&quot;&gt;&lt;a href=&quot;#messaging&quot; aria-label=&quot;messaging permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Messaging&lt;/h3&gt;
&lt;p&gt;Cassandra rất thích hợp trong những ứng dụng hay service làm về chat. Hiện nay có 1 số công ty đang dùng như Facebook, Discord.&lt;/p&gt;
&lt;h3 id=&quot;internet-of-things&quot;&gt;&lt;a href=&quot;#internet-of-things&quot; aria-label=&quot;internet of things permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;strong&gt;Internet of things&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;Cassandra cũng rất thích hợp cho những dòng ứng dụng mà có tốc độ dữ liệu gửi đến cực khủng từ nhiều thiết bị khác. &lt;/p&gt;
&lt;h3 id=&quot;social-media-analytics-and-recommendation-engine&quot;&gt;&lt;a href=&quot;#social-media-analytics-and-recommendation-engine&quot; aria-label=&quot;social media analytics and recommendation engine permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Social Media Analytics and recommendation engine&lt;/h3&gt;
&lt;p&gt;Cassandra cũng rất thích hợp cho những chức năng về recommendation hay 1 vài chức năng liên quan đến analytics.&lt;/p&gt;
&lt;h2 id=&quot;điểm-mạnh-của-cassandra&quot;&gt;&lt;a href=&quot;#%C4%91i%E1%BB%83m-m%E1%BA%A1nh-c%E1%BB%A7a-cassandra&quot; aria-label=&quot;điểm mạnh của cassandra permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Điểm mạnh của Cassandra&lt;/h2&gt;
&lt;h3 id=&quot;hệ-thống-phân-tán&quot;&gt;&lt;a href=&quot;#h%E1%BB%87-th%E1%BB%91ng-ph%C3%A2n-t%C3%A1n&quot; aria-label=&quot;hệ thống phân tán permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Hệ thống phân tán&lt;/h3&gt;
&lt;p&gt;Do Cassandra được kế thừa từ Amazon DynamoDB nên tính mở rộng của nó là khá lớn. Khi tốc độ xử lý của hệ thống không đủ thì ta chỉ cần thêm node mới vào là được. &lt;/p&gt;
&lt;h4 id=&quot;partitioning&quot;&gt;&lt;a href=&quot;#partitioning&quot; aria-label=&quot;partitioning permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Partitioning&lt;/h4&gt;
&lt;p&gt;Là kiến trúc phân phối dữ liệu trên nhiều node bên trong cluster.&lt;/p&gt;
&lt;p&gt;Dựa theo thuật toán Consistent Hashing thì mỗi node sẽ được cấp phát 1 token, và dựa vào token này sẽ phân phối dữ liệu đến từng node. &lt;/p&gt;
&lt;p&gt;Dữ liệu được tạo ra nhờ replication sẽ tự động phân chia đến từng node.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 435px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/3dfbb43740bf6efcafe027e32d27d5d7/48ba6/cassandra-architecture.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 72.64367816091955%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsSAAALEgHS3X78AAABvUlEQVQoz51Sy07jMBTNj5VfADb8CWKHUIeKBYuRIvFaINRFX6K7ajathjcbigQsKiC0ShuSNG3JNM47jh/YBlqJqQYxV5YVH/vce+49kYIg8L4KFwDXdSdHx3EIIfl8XqLfD4QQ28vlMiezNDOeMFDgJIqCRiPVdf6NEFsoTb8iR4wUGpR2LpqDuYwmbwEGYvxX5Umpj8AIubn152xuFOM0jJxaDajddkp7R5f+3m4yHnNyqTS7ckqIuvbjZW11Comao+1tY3HRVxROLhYlCgD1PAwc7Hv8jcgD/Kg9AEwAflPEWsXiJvCfOoaTcNklJvu0UT/+fXR/d9tqG3U9qpvJyQBqmz/dlWXkedN23uQlsXZxBUyLk5ls8+G+22r1lUdbN7yUWiECiFr7B1pug8TxhEzEkMLzMzOT+VMscNmFgoTCkC3o+ziF0w5hovhobL3A5hUVOE4gGY00y9Yr1ajXnT0w8jHukJkk7wwW5vXrW6berv0aLi2Zx2fcKgj/6bNAoscH+7A6tN0eombzZpjNxk/KZzIzHc8KlvR92twEggTENijIRW7V//7blUpFUlW1881QFKXf78uy/Aqw+D1hpDlZIgAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/3dfbb43740bf6efcafe027e32d27d5d7/01472/cassandra-architecture.webp 240w,
/static/3dfbb43740bf6efcafe027e32d27d5d7/8e624/cassandra-architecture.webp 435w&quot;
          sizes=&quot;(max-width: 435px) 100vw, 435px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/3dfbb43740bf6efcafe027e32d27d5d7/0783d/cassandra-architecture.png 240w,
/static/3dfbb43740bf6efcafe027e32d27d5d7/48ba6/cassandra-architecture.png 435w&quot;
          sizes=&quot;(max-width: 435px) 100vw, 435px&quot;
          type=&quot;image/png&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/3dfbb43740bf6efcafe027e32d27d5d7/48ba6/cassandra-architecture.png&quot;
          alt=&quot;cassandra architecture&quot;
          title=&quot;cassandra architecture&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h4 id=&quot;gossip-protocol&quot;&gt;&lt;a href=&quot;#gossip-protocol&quot; aria-label=&quot;gossip protocol permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Gossip Protocol&lt;/h4&gt;
&lt;p&gt;Là giao thức truyền thông giữa các node trong cluster. Cơ bản là truyền thông P2P.&lt;/p&gt;
&lt;h3 id=&quot;cơ-chế-lưu-dữ-liệu&quot;&gt;&lt;a href=&quot;#c%C6%A1-ch%E1%BA%BF-l%C6%B0u-d%E1%BB%AF-li%E1%BB%87u&quot; aria-label=&quot;cơ chế lưu dữ liệu permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Cơ chế lưu dữ liệu&lt;/h3&gt;
&lt;p&gt;Cassandra thực hiện việc lưu dữ liệu thông qua 2 chỗ:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Không gian bộ nhớ (được gọi là memtable)&lt;/li&gt;
&lt;li&gt;Không gian đĩa (được gọi là SSTable)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Khi write dữ liệu thì đầu tiên sẽ lưu trên memtable. Sau khi dữ liệu trên memtable full thì khi đó sẽ thực hiện ghi toàn bộ dữ liệu trên memtable xuống SSTable.&lt;/p&gt;
&lt;p&gt;Khi read dữ liệu thì đầu tiên sẽ tìm trong memtable trước. Nếu không có thì lại tìm xuống SSTable để lấy. &lt;/p&gt;
&lt;p&gt;&lt;strong&gt;→ Chính vì dữ liệu được lưu trên memory nên việc việc lấy dữ liệu trên Cassandra trở lên khá là nhanh.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Khi xoá dữ liệu thì thực tế dữ liệu không được xoá, mà nó được gán 1 cái cờ gọi là tombstone. Sau 1 khoảng thời gian nào đó sẽ có 1 con batch chạy đi scan và thực hiện xoá.&lt;/p&gt;
&lt;h3 id=&quot;tính-nhất-quán-dữ-liệu-trong-cluster&quot;&gt;&lt;a href=&quot;#t%C3%ADnh-nh%E1%BA%A5t-qu%C3%A1n-d%E1%BB%AF-li%E1%BB%87u-trong-cluster&quot; aria-label=&quot;tính nhất quán dữ liệu trong cluster permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Tính nhất quán dữ liệu trong cluster&lt;/h3&gt;
&lt;p&gt;Khi nhận được request đọc ghi đến DB của Cassandra, khi đó cái node nhận được request này sẽ đảm nhiệm 1 chức vụ được gọi là coordinator, và tiến hành xử lí request đọc ghi đến những node liên quan.&lt;/p&gt;
&lt;p&gt;Dựa vào cấp độ của tính nhất quán (Consistency Level) mà việc kết nối đến từng node sẽ khác nhau. &lt;/p&gt;
&lt;p&gt;Cấp độ của tính nhất quán sẽ được set trên mỗi câu truy vấn đọc ghi. Do đó giúp nhà phát triển ứng dụng sẽ dễ dàng điều chỉnh Consistency Level cho phù hợp với yêu cầu của họ: &lt;strong&gt;muốn kết quả trả về nhanh hay muốn dữ liệu trả về chính xác&lt;/strong&gt;.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Nếu Consistency Level được set là 1 thì khi đó coordinator chỉ cần kết nối trực tiếp đến 1 node &lt;strong&gt;-&gt; kết quả trả về nhanh&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Nếu Consistency Level đươc set là ALL thì khi đó coordinator phải kết nối đến toàn bộ node và thực hiện xử lý dữ liệu. &lt;strong&gt;-&gt; dữ liệu trả về chính xác&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;tính-dư-thừa&quot;&gt;&lt;a href=&quot;#t%C3%ADnh-d%C6%B0-th%E1%BB%ABa&quot; aria-label=&quot;tính dư thừa permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Tính dư thừa&lt;/h3&gt;
&lt;p&gt;Các node trong cluster có vai trò như nhau, không có node nào làm node chính cả. Hơn nữa dữ liệu không chỉ được lưu trên 1 node mà nó được lưu trên toàn bộ các node, do đó độ chịu lỗi của nó là khá cao.&lt;/p&gt;
&lt;p&gt;Cho dù có 1 node bị lỗi đi chăng nữa thì khi truy vấn kết quả, nó sẽ được điều hướng sang các node khác để lấy.&lt;/p&gt;
&lt;p&gt;Trong trường hợp mà chúng ta phục hồi dữ liệu từ 1 node bị lỗi thì nó sẽ xử lý như thế nào? &lt;/p&gt;
&lt;p&gt;Giả sử như trong khi đang phục hồi thì có dữ liệu mới đến, khi đó dựa vào cơ chế Hinted Handoff thì cái node nhận được dữ liệu mới này sẽ thực hiện việc lưu tạm thời dữ liệu lại. Và cái node bị lỗi sau khi phục hồi dữ liệu xong thì sẽ tiến hành update dữ liệu dựa vào cái thông tin đã lưu lúc trước.&lt;/p&gt;
&lt;p&gt;Ngoài ra dựa vào cơ chế Read Repair, khi chúng ta query dữ liệu. Chẳng may cái dữ liệu nhận được nó cũ hơn dữ liệu đang có ở các node khác. Khi đó nó sẽ tự động tiến hành update dữ liệu. &lt;/p&gt;
&lt;h3 id=&quot;cấu-trúc-dữ-liệu&quot;&gt;&lt;a href=&quot;#c%E1%BA%A5u-tr%C3%BAc-d%E1%BB%AF-li%E1%BB%87u&quot; aria-label=&quot;cấu trúc dữ liệu permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Cấu trúc dữ liệu&lt;/h3&gt;
&lt;p&gt;Dữ liệu được lưu trữ trong DB của Cassandra thuộc dạng Key value store (KVS).&lt;/p&gt;
&lt;p&gt;Có thể tạo được nhiều table trong database nhưng mà giữa các table sẽ không có mỗi quan hệ nào. Nhiều table được tổng hợp lại thành keyspace. &lt;/p&gt;
&lt;p&gt;Thông thường database trong NoSQL thì không cần thiết phải tạo schema ngay lúc đầu. Thế nhưng Cassandra thì lại khác. Trước khi insert dữ liệu thì cần phải tạo keyspace và schema của table.&lt;/p&gt;
&lt;p&gt;Có thể thực hiện được 1 số câu query như select, update, insert, delete, drop.&lt;/p&gt;
&lt;h2 id=&quot;tổng-kết&quot;&gt;&lt;a href=&quot;#t%E1%BB%95ng-k%E1%BA%BFt&quot; aria-label=&quot;tổng kết permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Tổng kết&lt;/h2&gt;
&lt;p&gt;Mình tổng hợp lại 1 số đặc tính của Cassandra như sau:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Là NoSQL&lt;/li&gt;
&lt;li&gt;Dữ liệu được phân tán trên nhiều node khác nhau.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Node càng nhiều thì throughput của nó càng tăng.&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Write throughput luôn luôn cao hơn read throughput.&lt;/li&gt;
&lt;li&gt;Tính chịu lỗi khá cao, cho dù node bị chết đi chăng nữa thì khi truy vấn sẽ được chuyển hướng đến node khác.&lt;/li&gt;
&lt;li&gt;Backup, restore dữ liệu 1 cách đơn giản.&lt;/li&gt;
&lt;li&gt;Tốc độ truy vấn cao&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Đọc đến đây chắc hẳn các bạn cũng biết Cassandra nó làm việc thế nào rồi phải không.&lt;/p&gt;
&lt;p&gt;Bài sau mình sẽ đi đào sâu vào 1 số hệ thống lớn xem họ đang áp dụng nó thế nào.&lt;/p&gt;
&lt;p&gt;==============&lt;/p&gt;
&lt;p&gt;Để nhận thông báo khi có bài viết mới nhất thì các bạn có thể like fanpage của mình ở bên dưới nhé:&lt;/p&gt;
&lt;p&gt;→→→ &lt;a href=&quot;https://www.facebook.com/669339543503374&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Nghệ thuật Coding Fanpage Facebook&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Chúc các bạn 1 tuần thật vui vẻ.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.cs.cornell.edu/projects/ladis2009/papers/lakshman-ladis2009.pdf&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Nguồn&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Instagram đã sinh ra ID trong database của họ như thế nào]]></title><link>https://nghethuatcoding.com2019/05/19/instagram-da-sinh-ra-id-trong-database-cua-ho-nhu-the-nao/</link><guid isPermaLink="false">https://nghethuatcoding.com2019/05/19/instagram-da-sinh-ra-id-trong-database-cua-ho-nhu-the-nao/</guid><pubDate>Sun, 19 May 2019 09:26:45 GMT</pubDate><content:encoded>&lt;p&gt;Đối với những hệ thống nhỏ chỉ cần 1 Database thì chắc chẳng mấy ai quan tâm đến việc tạo ra ID cho bản ghi. Vì dùng auto increment trong MySQL là có thể làm được rồi, chẳng cần phải làm gì thêm.&lt;/p&gt;
&lt;p&gt;Thế nhưng với dữ liệu càng ngày càng to ra thì hệ thống chỉ có 1 database duy nhất có thể sẽ không thể đáp ứng được. Bởi vì traffic đang tập trung hết vào database đó.&lt;/p&gt;
&lt;p&gt;Để giải quyết bài toán đó thì người ta đã tách database ra thành nhiều database khác nhau, và mỗi database đó sẽ chứa 1 phần dữ liệu. Ví dụ db&lt;em&gt;01 chứa thông tin user từ 1 đến 1000, db&lt;/em&gt;02 chứa thông tin user từ 1001 đến 2000 chẳng hạn. Và khi query sẽ tìm xem user thuộc database nào và thực hiện truy vấn.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Và kĩ thuật này người ta gọi là sharding.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Thế nhưng có vấn đề xảy ra ở đây là làm thế nào sinh ra ID cho user mà không bị trùng lặp giữa các database đó? Dùng auto increment mặc định của database có giải quyết được không? Làm thế nào để từ 2 ID có thể phán đoán cái nào được sinh ra trước, cái nào được sinh ra sau?&lt;/p&gt;
&lt;p&gt;Vậy cùng đọc bài này xem các kĩ sư Instagram đã giải quyết bài toán này thế nào nhé.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Mục tiêu bài viết:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Hiểu thêm được 1 cơ chế sinh ID mới.&lt;/li&gt;
&lt;li&gt;Có thể áp dụng vào các bài toán sharding data trong database.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;bối-cảnh&quot;&gt;&lt;a href=&quot;#b%E1%BB%91i-c%E1%BA%A3nh&quot; aria-label=&quot;bối cảnh permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Bối cảnh&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://www.instagram.com/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Instagram&lt;/a&gt; là 1 trong những mạng xã hội chia sẻ ảnh nổi tiếng nhất cái hành tinh này.&lt;/p&gt;
&lt;p&gt;Theo thống kê năm 2016 thì cứ mỗi giây sẽ có 915 photos, 1k post được tạo ra. Quá khủng khiếp phải không nào.&lt;/p&gt;
&lt;p&gt;Khi dữ liệu tăng lên kinh khủng như thế thì 1 database sẽ không thể lưu trữ hết được dữ liệu, cùng với tốc độ truy vấn sẽ trở nên ì ạch và tốn nhiều dung lượng bộ nhớ.&lt;/p&gt;
&lt;p&gt;Để đảm bảo tất cả dữ liệu quan trọng luôn được lưu trữ trên memory, và sẵn sàng trả về kết quả nhanh nhất cho người dùng thì Instagram bắt đầu thực hiện &lt;strong&gt;Sharding&lt;/strong&gt; dữ liệu.&lt;/p&gt;
&lt;p&gt;Ảnh bên dưới là 1 ví dụ về sharding trong database. Database sẽ được tách ra thành nhiều database khác nhau, mỗi database sẽ chứa 1 phần dữ liệu. Như ví dụ bên dưới là tách bảng user ra thành nhiều database, mỗi database sẽ chứa 1 phần dữ liệu của bảng user.&lt;/p&gt;
&lt;p&gt;Người ta gọi mỗi database tách biệt này là ”&lt;strong&gt;Shard&lt;/strong&gt;“.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 700px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/b94c34be5e7c529d68e1df6ad0b1d0ef/67d4f/sharding-database.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 73.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAIBBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAe2qTAf/xAAYEAEAAwEAAAAAAAAAAAAAAAAAAQIhEf/aAAgBAQABBQKLbLXFmv/EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABYQAQEBAAAAAAAAAAAAAAAAABAhAP/aAAgBAQAGPwLRh//EABkQAQEBAAMAAAAAAAAAAAAAAAEAEVHw8f/aAAgBAQABPyHTE1h2QRtcIPF//9oADAMBAAIAAwAAABAzz//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABwQAQADAAIDAAAAAAAAAAAAAAEAESExcUFRkf/aAAgBAQABPxAdDnsqDWR7YkaJ2yWQNhvwZ5iDX6qf/9k=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/b94c34be5e7c529d68e1df6ad0b1d0ef/01472/sharding-database.webp 240w,
/static/b94c34be5e7c529d68e1df6ad0b1d0ef/222bd/sharding-database.webp 480w,
/static/b94c34be5e7c529d68e1df6ad0b1d0ef/a7632/sharding-database.webp 700w&quot;
          sizes=&quot;(max-width: 700px) 100vw, 700px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/b94c34be5e7c529d68e1df6ad0b1d0ef/3bc27/sharding-database.jpg 240w,
/static/b94c34be5e7c529d68e1df6ad0b1d0ef/98431/sharding-database.jpg 480w,
/static/b94c34be5e7c529d68e1df6ad0b1d0ef/67d4f/sharding-database.jpg 700w&quot;
          sizes=&quot;(max-width: 700px) 100vw, 700px&quot;
          type=&quot;image/jpeg&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/b94c34be5e7c529d68e1df6ad0b1d0ef/67d4f/sharding-database.jpg&quot;
          alt=&quot;sharding database&quot;
          title=&quot;sharding database&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Tuy nhiên tại thời điểm này có 1 bài toán được đặt ra. Làm thế nào có thể sinh ra ID duy nhất trên từng shard mà không sợ bị trùng lặp (Ví dụ như mỗi photo được upload vào trong hệ thống)? Cùng đi đọc tiếp phần tiếp theo nhé.&lt;/p&gt;
&lt;h2 id=&quot;yêu-cầu-về-mặt-chức-năng&quot;&gt;&lt;a href=&quot;#y%C3%AAu-c%E1%BA%A7u-v%E1%BB%81-m%E1%BA%B7t-ch%E1%BB%A9c-n%C4%83ng&quot; aria-label=&quot;yêu cầu về mặt chức năng permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Yêu cầu về mặt chức năng&lt;/h2&gt;
&lt;p&gt;Trước khi đi vào giải quyết bài toán bên trên, thì cùng xem hệ thống Instagram yêu cầu những gì về ID của từng shard nhé.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ID được tạo ra phải được sắp xếp theo thời gian. Ví dụ như với 2 ID thì có thể phán đoán được ID nào tạo ra trước, ID nào tạo ra sau.&lt;/li&gt;
&lt;li&gt;ID sẽ bao gồm 64 bits. (Vì sao lại cần 64 bits? Vì nó tương thích với các hệ thống như Redis …)&lt;/li&gt;
&lt;li&gt;Thuật toán sinh ra ID phải đơn giản, dễ hiểu và đặc biệt không được làm thay đổi architecture server của Instagram.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;1-số-giải-pháp-generate-id&quot;&gt;&lt;a href=&quot;#1-s%E1%BB%91-gi%E1%BA%A3i-ph%C3%A1p-generate-id&quot; aria-label=&quot;1 số giải pháp generate id permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;1 số giải pháp generate ID&lt;/h2&gt;
&lt;p&gt;Hiện tại có rất nhiều giải pháp cho việc sinh ra ID unique. Cụ thể như:&lt;/p&gt;
&lt;h3 id=&quot;sử-dụng-auto-increment-trong-database&quot;&gt;&lt;a href=&quot;#s%E1%BB%AD-d%E1%BB%A5ng-auto-increment-trong-database&quot; aria-label=&quot;sử dụng auto increment trong database permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Sử dụng auto increment trong database&lt;/h3&gt;
&lt;p&gt;Về chức năng này thì ai cũng biết rồi. Lúc tạo bảng chỉ cần khai báo auto increment là xong.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Ưu điểm:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Cách dùng đơn giản.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Nhược điểm:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Chỉ tập trung vào 1 database và không thể phân chia sang database khác được.&lt;/li&gt;
&lt;li&gt;Không thể đảm bảo rằng việc sinh ID ở nhiều database là không bị trùng nhau.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;sử-dụng-uuid&quot;&gt;&lt;a href=&quot;#s%E1%BB%AD-d%E1%BB%A5ng-uuid&quot; aria-label=&quot;sử dụng uuid permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Sử dụng UUID&lt;/h3&gt;
&lt;p&gt;Đây cũng là 1 cách khá hay để giải quyết bài toán. UUID là 1 chuẩn chung nhằm sinh ra chuỗi random không trùng nhau (xác suất gần như bằng 0). Ví dụ như: b875d561-20fd-498d-8452-5d5ffa879856.&lt;/p&gt;
&lt;p&gt;Thế nhưng cùng xem nó có ưu điểm nhược điểm gì nhé.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Ưu điểm:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Cho dù chạy trên nhiều máy tính cùng thời điểm đi chăng nữa thì xác suất các string đó trùng nhau dường như gần bằng 0.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Nhược điểm:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Nó bao gồm 128 bits nên hơi to, không phù hợp với yêu cầu của hệ thống (là 64 bits)&lt;/li&gt;
&lt;li&gt;Với 2 ID thì không thể phân biệt ID nào tạo trước, ID nào tạo sau.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;snowflake&quot;&gt;&lt;a href=&quot;#snowflake&quot; aria-label=&quot;snowflake permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;a href=&quot;https://github.com/twitter-archive/snowflake&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Snowflake&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;Đây chính là 1 công cụ sinh ra ID random được phát triển bởi Twitter. Cái này sử dụng Apache Zookepper để phối hợp với các node để tạo ID 64 bit duy nhất.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Ưu điểm:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Snowflake ID có 64 bit&lt;/li&gt;
&lt;li&gt;Có thể sử dụng time trong component đầu tiên của ID nên có thể sắp xếp được&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Nhược điểm:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Phải đưa ZooKeeper, Snowflake vào trong kiến trúc của Instagram.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;giải-pháp-của-instagram&quot;&gt;&lt;a href=&quot;#gi%E1%BA%A3i-ph%C3%A1p-c%E1%BB%A7a-instagram&quot; aria-label=&quot;giải pháp của instagram permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Giải pháp của Instagram&lt;/h2&gt;
&lt;p&gt;Những giải pháp trên đều không đáp ứng được yêu cầu của Instagram nên họ quyết định tự xây dựng cho mình 1 giải pháp riêng.&lt;/p&gt;
&lt;p&gt;Họ sẽ dùng thuật toán đơn giản để sinh ra 1 chuỗi ID random duy nhất từ 1 số input đầu vào. Và từ chuỗi ID đó có thể decode ngược lại để lấy ra được input.&lt;/p&gt;
&lt;p&gt;ID ở đây chính là ID của photo, ID của posts chẳng hạn.&lt;/p&gt;
&lt;p&gt;Database họ sử dụng là PostgreSQL.&lt;/p&gt;
&lt;p&gt;Cụ thể như sau.&lt;/p&gt;
&lt;p&gt;ID có độ dài 64 bits, sẽ bao gồm những bộ phận sau:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;41 bits để lưu thời gian (đơn vị milliseconds). Khoảng thời gian này sẽ được tính từ ngày 2011/01/01 00:00.&lt;/li&gt;
&lt;li&gt;13 bits để lưu shard ID. (tối đa có thể tạo ra được 2^13 = 8192 shard)&lt;/li&gt;
&lt;li&gt;10 bits để lưu auto-incrementing sequence, sau đó module 1024. (Vì sao lại là 1024 vì tối đa có 10 bit thôi, mà 2^10 = 1024). Điều đó có nghĩa là có thể tạo ra 1024 IDs trên 1 shard, trên millisecond.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Câu hỏi đặt ra là nếu tạo upload quá 1024 bức ảnh trong 1ms có được không?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Câu trả lời là không nhé. Vì lúc đó thằng thứ 1025 sinh ra ID sẽ bị trùng với thằng thứ 1. Với cả ID là khoá chính nên khi insert vào sẽ bị lỗi. Nên lúc đó chỉ cần try cach đoạn đó là ok.&lt;/p&gt;
&lt;p&gt;Công thức sinh ID như sau:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;ID = (time &amp;lt;&amp;lt; 23) | (shardID &amp;lt;&amp;lt; 10) | (seqId &amp;lt;&amp;lt;0)

Trong đó:
・time    = now - instagram_epoch_time (2011/01/01 00:00)
・shardId = userId % 2000
・seqId   = (currentSeqID + 1) % 1024&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Từ công thức trên ta có thể thấy ID được tạo ra bằng cách:&lt;/p&gt;
&lt;p&gt;**ID = (Dịch trái time sang trái 23 bit) bitwise OR (dịch trái shardID 10 bit) bitwise OR (dịch trái seqID 0 bit) **&lt;/p&gt;
&lt;p&gt;Để mình tổng hợp lại kiến thức về bitwise cho mọi người hiểu nhé:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Dịch trái, dịch phải nó cũng giống như chúng ta kéo cảnh cửa sang trái, sang phải thôi. Nếu dịch trái n bit tức là sẽ điền n số 0 vào sau số đó. Ví dụ như dịch trái số 7 (dạng nhị phân là 110) sang trái 5 bit, khi đó nó sẽ thành: 110&lt;strong&gt;00000&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;bitwise OR tức là thực hiện OR từng bit 1 của 2 số từ phải sang trái. Nếu 2 bit đều là 1 thì sẽ cho kết quả là 1, ngược lại sẽ cho kết quả là 0. Ví dụ như 7 (dạng nhị phân là 110) OR 8 (dạng nhị phân là 111) khi đó kết quả là: 110 OR 111 = 110.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Ví dụ:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Giả sử như người dùng có user_id là 5001, post bức ảnh lên instagram vào thời điểm 2019/05/19 00:00. Tại thời điểm đó sequence hiện tại của table đang là 9000.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Cách tính:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Do thời gian được tính từ ngày 2011/01/01 00:00 nên từ thời điểm đó đến ngày 2019/05/19 00:00 có time = 264384000000 ms.&lt;/p&gt;
&lt;p&gt;=&gt; ID = 264384000000 &amp;#x3C;&amp;#x3C; 23 (dịch sang trái 23 bit)&lt;/p&gt;
&lt;p&gt;Do user_id = 5001, và instagram chỉ có 2000 shard. Nên shardId = 5001 % 2000 = 1001&lt;/p&gt;
&lt;p&gt;=&gt; ID |= 1001 &amp;#x3C;&amp;#x3C; 10&lt;/p&gt;
&lt;p&gt;sequence hiện tại của table đang là 9000, khi đó next&lt;em&gt;sequence&lt;/em&gt;id là 9001. vậy seqId = 9001 % 1024 = 809&lt;/p&gt;
&lt;p&gt;=&gt; ID |= (809) &amp;#x3C;&amp;#x3C; 0&lt;/p&gt;
&lt;p&gt;Sau khi tính chúng ta ra kết quả ID = 2217813737473025832.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Vậy làm thế nào mà từ số 2217813737473025832 chúng ta có thể decode ngược lại ra time là 264384000000, shardId là 1001, seqId là 809?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Đây có lẽ là phần mình thấy hay nhất. Chúng ta cùng xem tiếp nhé:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;Time      = (2217813737473025832 &amp;gt;&amp;gt; 23) &amp;amp; 0x1FFFFFFFFFF = 264384000000
Shard ID  = (2217813737473025832 &amp;gt;&amp;gt; 10) &amp;amp; 0x1FFF = 1001
seqID     = (2217813737473025832 &amp;gt;&amp;gt;  0) &amp;amp; 0x3FF = 809&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Từ công thức trên ta có thể thấy được:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Time sẽ được tính bằng cách dịch sang phải ID 23 bit, sau đó thực hiện AND với 1 số 41 bit toàn số 1. Cái số 41 bit toàn số 1 này chuyển sang dạng hex sẽ là 0x1FFFFFFFFFF.&lt;/li&gt;
&lt;li&gt;ShardID và seqId cũng được decode tương tự.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Đây là 1 example về encode và decode mình đã chuẩn bị được. Dành cho ai muốn test:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;&amp;lt;?php

$uuid = 0;

$userId = 5001;
$currentSequenceId = 9000;
$time = 264384000000;

// ENCODE

$shardId = $userId % 2000;
$seqId = ($currentSequenceId + 1) % 1024;

$uuid = $time &amp;lt;&amp;lt; 23;
$uuid = $uuid | ($shardId &amp;lt;&amp;lt; 10);
$uuid = $uuid | ($seqId);

echo $uuid . PHP_EOL;

// DECODE

$time = ($uuid &amp;gt;&amp;gt; 23) &amp;amp; 0x1FFFFFFFFFF;
$shardId = ($uuid &amp;gt;&amp;gt; 10) &amp;amp; 0x1FFF;
$seqId = ($uuid &amp;gt;&amp;gt; 0) &amp;amp; 0x3FF;

echo $time . PHP_EOL;
echo $shardId . PHP_EOL;
echo $seqId . PHP_EOL;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Sau khi lấy được shardId là chúng ta có thể dễ dàng truy cập vào từng shard để lấy ra record dựa vào ID (photo&lt;em&gt;id, post&lt;/em&gt;id …) được rồi. Mà chẳng phải tốn công đi join, select làm gì cho mệt cả.&lt;/p&gt;
&lt;p&gt;Hơn nữa nó thao tác giữa các bit nên cứ gọi là nhanh đừng hỏi.&lt;/p&gt;
&lt;p&gt;Và đây là ví dụ về PL/PGSQL trong PostgreSQL:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;CREATE OR REPLACE FUNCTION insta5.next_id(OUT result bigint) AS $
DECLARE
    our_epoch bigint := 1293843600000;
    seq_id bigint;
    now_millis bigint;
    shard_id int := 5;
BEGIN
    SELECT nextval(&amp;#39;insta5.table_id_seq&amp;#39;) %% 1024 INTO seq_id;
    SELECT FLOOR(EXTRACT(EPOCH FROM clock_timestamp()) * 1000) INTO now_millis;
    result := (now_millis - our_epoch) &amp;lt;&amp;lt; 23;
    result := result | (shard_id &amp;lt;&amp;lt;10);
    result := result | (seq_id);
END;
    $ LANGUAGE PLPGSQL;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Khi tạo bảng sẽ làm như sau:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;CREATE TABLE insta5.our_table (
    &amp;quot;id&amp;quot; bigint NOT NULL DEFAULT insta5.next_id(),
    ...rest of table schema...
  )&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;kết-luận&quot;&gt;&lt;a href=&quot;#k%E1%BA%BFt-lu%E1%BA%ADn&quot; aria-label=&quot;kết luận permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Kết luận&lt;/h2&gt;
&lt;p&gt;Từ 1 con số mà có thể dễ dàng decode nó ra để lấy các thông tin bên trong nó. Đoạn này mình thấy thật vi diệu.&lt;/p&gt;
&lt;p&gt;Đúng là mấy anh kĩ sư có kinh nghiệm về design mấy bo mạch, chip các thứ áp dụng vào thấy nó khác bọt thật.&lt;/p&gt;
&lt;p&gt;Hi vọng qua bài này sẽ giúp các bạn có 1 kiến thức mới về việc sinh ra ID random, và decode ngược lại.&lt;/p&gt;
&lt;p&gt;==============&lt;/p&gt;
&lt;p&gt;Để nhận thông báo khi có bài viết mới nhất thì các bạn có thể like fanpage của mình ở bên dưới nhé:&lt;/p&gt;
&lt;p&gt;→ → → &lt;a href=&quot;https://www.facebook.com/669339543503374&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Nghệ thuật Coding Fanpage Facebook&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Chúc các bạn 1 tuần thật vui vẻ.&lt;/p&gt;
&lt;p&gt;Nguồn: &lt;a href=&quot;https://instagram-engineering.com/sharding-ids-at-instagram-1cf5a71e5a5c&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;https://instagram-engineering.com/sharding-ids-at-instagram-1cf5a71e5a5c&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Test tải hệ thống thực sự cần thiết?]]></title><link>https://nghethuatcoding.com2019/05/18/test-tai-he-thong-thuc-su-can-thiet/</link><guid isPermaLink="false">https://nghethuatcoding.com2019/05/18/test-tai-he-thong-thuc-su-can-thiet/</guid><pubDate>Sat, 18 May 2019 10:44:59 GMT</pubDate><content:encoded>&lt;p&gt;Hệ thống của các bạn bình thường xử lý được 10 request/s. Nếu bây giờ số lượng request đó tăng lên thành 100, 1000 request/s thì bạn có dám khẳng định hệ thống của bạn sẽ chạy ngon không?&lt;/p&gt;
&lt;p&gt;Để có thể phán đoán được nó chạy ngon hay không thì việc &lt;strong&gt;test tải hệ thống trở nên vô cùng quan trọng&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Nói là test tải hệ thống, nhưng nếu mà yêu cầu bạn lên plan để test chắc hẳn các bạn cũng chẳng biết nên bắt đầu từ đâu, làm thế nào để đánh giá quá trình test của mình là thành công. Hay đơn giản chỉ cần chạy mấy tool benchmark là xong?&lt;/p&gt;
&lt;p&gt;Vậy hãy cùng đọc bài này để giải đáp được thắc mắc đó nhé.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Mục tiêu bài viết:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Hiểu được việc test tải hệ thống là làm những gì.&lt;/li&gt;
&lt;li&gt;Biết cách làm thế nào để cải thiện hệ thống.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Bài này hơi dài 1 tí, các bạn cố gắng đọc hết nhé. Sau khi đọc xong sẽ hoàn toàn tự tin để có thể lên được plan test tải hệ thống.&lt;/p&gt;
&lt;h2 id=&quot;mục-đích-của-việc-test-tải-hệ-thống&quot;&gt;&lt;a href=&quot;#m%E1%BB%A5c-%C4%91%C3%ADch-c%E1%BB%A7a-vi%E1%BB%87c-test-t%E1%BA%A3i-h%E1%BB%87-th%E1%BB%91ng&quot; aria-label=&quot;mục đích của việc test tải hệ thống permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Mục đích của việc test tải hệ thống&lt;/h2&gt;
&lt;p&gt;Dưới đây là 3 mục đích chính của việc test tải hệ thống:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;**Tìm điểm bottleneck (nút cổ chai): **Đưa ra 1 số Use Case có thể xảy ra trong tương lai (ví dụ như sắp tới đưa ra campaign hot, số lượng người đăng kí lúc đó sẽ tăng đột biến …). Sau đó ứng với mỗi Use Case sẽ đo xem thời gian response của hệ thống là bao nhiêu. Tìm điểm bottleneck (nút cổ chai).&lt;/li&gt;
&lt;li&gt;**Cải thiện hệ thống: **Sau khi biết được điểm bottleneck sẽ tiến hành đi cải thiện hệ thống.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Xác nhận tính scale của hệ thống.&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Cụ thể cùng đi xem những Use Case nào hay gặp trong thực tế nhé.&lt;/p&gt;
&lt;h3 id=&quot;đưa-ra-use-case-và-đo-response-của-hệ-thống&quot;&gt;&lt;a href=&quot;#%C4%91%C6%B0a-ra-use-case-v%C3%A0-%C4%91o-response-c%E1%BB%A7a-h%E1%BB%87-th%E1%BB%91ng&quot; aria-label=&quot;đưa ra use case và đo response của hệ thống permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Đưa ra Use Case và đo response của hệ thống&lt;/h3&gt;
&lt;p&gt;Dưới đây là 1 vài Use Case mình thấy hay gặp nhất trong quá trình vận hành hệ thống.&lt;/p&gt;
&lt;p&gt;Đối với mỗi Use Case, chúng ta sẽ đi đo đạc xem thời gian response của hệ thống là bao nhiêu và tiến hành cải thiện hệ thống nếu có.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Use Case 1:&lt;/strong&gt; Sau khi hệ thống được đưa ra, số lượng người dùng đăng kí vào hệ thống tăng đột biến.&lt;/p&gt;
&lt;p&gt;Với những hệ thống mà nhiều người quan tâm thì khi release sẽ có rất nhiều người vào đăng kí hệ thống.&lt;/p&gt;
&lt;p&gt;Ví dụ như tuần sau sẽ release hệ thống ”&lt;strong&gt;dự đoán&lt;/strong&gt; &lt;strong&gt;giá đề chuẩn 80%&lt;/strong&gt;” chẳng hạn. Nếu có hệ thống đó ra đời, mình khẳng định sẽ có rất nhiều người vào đăng kí vào thời điểm đó.&lt;/p&gt;
&lt;p&gt;Vậy để đảm bảo hệ thống của bạn chạy không vấn đề gì với số lượng lớn người đăng kí vào thời điểm đó thì việc test tải hệ thống trước khi release là điều vô cùng quan trọng.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Use Case 2:&lt;/strong&gt; Sau khi hệ thống chạy được 1 thời gian thì dữ liệu càng ngày càng nhiều.&lt;/p&gt;
&lt;p&gt;Khác với Use Case 1 thì Use Case này chủ yếu tập trung vào vấn đề dữ liệu trong DB càng ngày càng to ra, dẫn đến tốc độ query trong DB cũng càng ngày càng chậm xuống. Kể cả có đánh index chuẩn đi chăng nữa, nhưng nếu dữ liệu trong DB mà tăng lên thì dẫn đến việc index không thể lưu hết trên Memory được. Kết quả hiệu năng của câu query sẽ giảm xuống.&lt;/p&gt;
&lt;p&gt;Với Use Case này thì việc test tải hệ thống cũng khá quan trọng để đảm bảo thời gian response hệ thống là nhanh nhất có thể.&lt;/p&gt;
&lt;p&gt;**Use Case 3: **Nhờ vào việc đưa ra campaign mà số lượng người dùng access vào hệ thống tăng đột biến.&lt;/p&gt;
&lt;p&gt;Với Use Case này mình thấy hay gặp nhất và việc đưa ra plan để test tải trước khi release là điều không thể thiếu.&lt;/p&gt;
&lt;p&gt;Ví dụ như nhà mạng Viettel chuẩn bị có đợt khuyến mãi nạp thẻ 100k sẽ được tặng 500k. Các bạn nghĩ sao về campaign này. Chắc hẳn số lượng người nạp thẻ lúc đó phải kinh khủng lắm.&lt;/p&gt;
&lt;h3 id=&quot;cải-thiện-hệ-thống&quot;&gt;&lt;a href=&quot;#c%E1%BA%A3i-thi%E1%BB%87n-h%E1%BB%87-th%E1%BB%91ng&quot; aria-label=&quot;cải thiện hệ thống permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Cải thiện hệ thống&lt;/h3&gt;
&lt;p&gt;Bình thường chúng ta hay làm việc với dữ liệu nhỏ thì mình khẳng định ít ai để ý đến vấn đề hiệu năng hay 1 số lỗi xảy ra như out of memory … Nhưng 1 khi chạy hệ thống đó với dữ liệu lớn thì chắc chắn sẽ ra nhiều vấn đề.&lt;/p&gt;
&lt;p&gt;Như ngày trước mình có làm 1 chức năng upload file csv về thông tin người dùng và gửi tin nhắn đến tất cả người đó. Bình thường mình chỉ test file csv tầm 100 record, cùng lắm 1000 record thấy chạy khá ok.&lt;/p&gt;
&lt;p&gt;Nhưng khi đưa cho khách hàng dùng, bên họ upload file csv toàn tầm 1 triệu, 10 triêu record. Lúc đó hệ thống lăn quay ra chết. Vì mình toàn load tất cả dữ liệu trong file csv vào 1 biến duy nhất. Kết quả tràn bộ nhớ.&lt;/p&gt;
&lt;p&gt;Do đó ở đây mình muốn nói rằng để đảm bảo hệ thống chạy có ngon hay không, có đáp ứng được dữ liệu lớn hay không thì việc test hệ thống với dữ liệu lớn là điều cực kì quan trọng.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Vừa test vừa đi cải thiện hệ thống là 1 trong những mục đích quan trọng nhất.&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&quot;xác-nhận-tính-scale-của-hệ-thống&quot;&gt;&lt;a href=&quot;#x%C3%A1c-nh%E1%BA%ADn-t%C3%ADnh-scale-c%E1%BB%A7a-h%E1%BB%87-th%E1%BB%91ng&quot; aria-label=&quot;xác nhận tính scale của hệ thống permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Xác nhận tính scale của hệ thống&lt;/h3&gt;
&lt;p&gt;Đặc thù của những hệ thống đang được xây dựng trên môi trường Cloud như AWS, GCP, Azure đó là nếu số lượng request tăng lên thì sẽ tăng thêm server, nếu số lượng request giảm xuống thì sẽ giảm server.&lt;/p&gt;
&lt;p&gt;Để đáp ứng được nhu cầu này thì cần phải nắm rõ tính scale của hệ thống. Cụ thể phải nắm bắt được những điểm sau:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Cấu trúc hệ thống có thể xử lý được 1 số lượng throughput nào đó (ví dụ như 100 request/s, 1000request/s, 2000 request/s, 5000 request/s)&lt;/li&gt;
&lt;li&gt;Hệ thống xử lý tối đa throughput là bao nhiêu?&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Cái ý thứ nhất là điểm quan trọng nhất cần phải nắm bắt được.&lt;/p&gt;
&lt;p&gt;Ví dụ như throughput tăng lên 2 lần thì chỉ cần tăng số lượng web server lên 2 lần là được ak? Hay phải tăng số lượng DB lên 2 lần? Ngược lại khi số lượng request giảm đi 2 lần thì cần giảm cái nào đi thì được? Những điểm như này cần phải nắm bắt.&lt;/p&gt;
&lt;p&gt;Cái ý thứ 2 thì không cần phải nắm bắt cũng được. Nhưng nếu tương lai muốn cung cấp hệ thống xử lý nhiều request hơn nữa thì việc phán đoán xem với cấu trúc hiện tại thì có scale được hay không? cần phải thiết kế lại hệ thống không? là điều không thể thiếu.&lt;/p&gt;
&lt;h2 id=&quot;2-chỉ-báo-quan-trọng-khi-đo-hiệu-năng&quot;&gt;&lt;a href=&quot;#2-ch%E1%BB%89-b%C3%A1o-quan-tr%E1%BB%8Dng-khi-%C4%91o-hi%E1%BB%87u-n%C4%83ng&quot; aria-label=&quot;2 chỉ báo quan trọng khi đo hiệu năng permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;2 chỉ báo quan trọng khi đo hiệu năng&lt;/h2&gt;
&lt;p&gt;Mình chắc hẳn khi tối ưu hệ thống, ai cũng gặp những case kiểu như: ví dụ như nếu đưa cái plugin này vào thì wordpress sẽ chạy nhanh gấp 10 lần …&lt;/p&gt;
&lt;p&gt;Tuy nhiên, cái việc “nhanh gấp 10 lần” ở đây tức là đang nói đến vấn đề gì? thì chúng ta cần nên để ý tới.&lt;/p&gt;
&lt;p&gt;Có thể đang nói về tốc độ của hệ thống?&lt;/p&gt;
&lt;p&gt;Thế nhưng để đánh giá về tốc độ thì hiện nay có 2 chỉ bảo chắc hẳn mọi người cũng thường hay nghe thấy đó là &lt;strong&gt;throughput (lưu lượng)&lt;/strong&gt; và &lt;strong&gt;latency (thời gian trễ).&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Cùng nhau tìm hiểu xem 2 chỉ báo này khác nhau thế nào nhé.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 922px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/ac4a9e37d3656678fef0d35dd2a75018/92284/throughput-latency-6.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 43.70932754880694%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAJABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAIDAQX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHsa7kCwf/EABcQAAMBAAAAAAAAAAAAAAAAAAAQIQH/2gAIAQEAAQUCpVj/AP/EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABQQAQAAAAAAAAAAAAAAAAAAACD/2gAIAQEABj8CX//EABkQAAMAAwAAAAAAAAAAAAAAAAABERAxQf/aAAgBAQABPyFOZCrwVNkPH//aAAwDAQACAAMAAAAQkw//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAaEAEAAgMBAAAAAAAAAAAAAAABABEQMXFR/9oACAEBAAE/EAUKuLKmwcZaKjd+uNpj/9k=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/ac4a9e37d3656678fef0d35dd2a75018/01472/throughput-latency-6.webp 240w,
/static/ac4a9e37d3656678fef0d35dd2a75018/222bd/throughput-latency-6.webp 480w,
/static/ac4a9e37d3656678fef0d35dd2a75018/3a1b5/throughput-latency-6.webp 922w&quot;
          sizes=&quot;(max-width: 922px) 100vw, 922px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/ac4a9e37d3656678fef0d35dd2a75018/3bc27/throughput-latency-6.jpg 240w,
/static/ac4a9e37d3656678fef0d35dd2a75018/98431/throughput-latency-6.jpg 480w,
/static/ac4a9e37d3656678fef0d35dd2a75018/92284/throughput-latency-6.jpg 922w&quot;
          sizes=&quot;(max-width: 922px) 100vw, 922px&quot;
          type=&quot;image/jpeg&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/ac4a9e37d3656678fef0d35dd2a75018/92284/throughput-latency-6.jpg&quot;
          alt=&quot;throughput latency&quot;
          title=&quot;throughput latency&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h3 id=&quot;throughput&quot;&gt;&lt;a href=&quot;#throughput&quot; aria-label=&quot;throughput permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Throughput&lt;/h3&gt;
&lt;p&gt;Chỉ báo Throughput muốn nói đến lượng công việc xử lý trong 1 đơn vị thời gian. Về Website thì muốn nói đến số lượng request xử lý trong 1 giây. Nó còn được gọi là &lt;strong&gt;rps (Request per second)&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Quay lại ví dụ trên, 「sau khi đưa plugin này vào hệ thống thì tốc độ wordpress sẽ tăng lên gấp 10 lần」nếu đang nói về throughput thì tức là số lượng page hiển thị trong 1 giây tăng lên 10 lần.&lt;/p&gt;
&lt;h3 id=&quot;latency&quot;&gt;&lt;a href=&quot;#latency&quot; aria-label=&quot;latency permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Latency&lt;/h3&gt;
&lt;p&gt;Chỉ báo Latency là tổng thời gian xử lý của 1 việc nào đó.&lt;/p&gt;
&lt;p&gt;Quay lại ví dụ trên, 「sau khi đưa plugin này vào hệ thống thì tốc độ wordpress sẽ tăng lên gấp 10 lần」nếu đang nói về latency thì tức là thời gian response của hệ thống đang từ 1s bây giờ giảm xuống còn 0.1 giây.&lt;/p&gt;
&lt;h3 id=&quot;throughput-và-latency-trong-hệ-thống&quot;&gt;&lt;a href=&quot;#throughput-v%C3%A0-latency-trong-h%E1%BB%87-th%E1%BB%91ng&quot; aria-label=&quot;throughput và latency trong hệ thống permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Throughput và Latency trong hệ thống&lt;/h3&gt;
&lt;p&gt;Đa số các hệ thống ngày nay sẽ không chỉ gồm 1 web server mà còn bao gồm rất nhiều thành phần khác nữa như database server, cache server …&lt;/p&gt;
&lt;p&gt;Hiệu năng của từng con server đó cũng có thể gây ảnh hưởng đến hiệu năng của toàn bộ hệ thống. Ví dụ như tốc độ query của DB chậm thì cho dù con web có xử lý nhanh đi chăng nữa thì thời gian xử lý của toàn bộ hệ thống vẫn chậm. Vì con DB nó gây ảnh hưởng đến con Web.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Throughput của toàn bộ hệ thống là giá trị throughput nhỏ nhất của từng hệ thống con.&lt;/li&gt;
&lt;li&gt;Latency của toàn bộ hệ thống là giá trị tổng cộng của lantecy của từng hệ thống con.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Đến đây có vẻ hơi trừu tượng đúng không. Vậy mình lấy 1 ví dụ để các bạn dễ hình dung nhé.&lt;/p&gt;
&lt;p&gt;Thay vì lấy ví dụ hệ thống gồm web server, database server … thì mình lấy ví dụ về đường cao tốc.&lt;/p&gt;
&lt;p&gt;Mình thấy khá dễ hiểu khi áp dụng vào throughput và latency.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 922px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/40d6e6688fd8155de1efa10fe408deeb/92284/throughput-latency-2.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 23.861171366594363%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAFABQDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAG6AD//xAAVEAEBAAAAAAAAAAAAAAAAAAAAEf/aAAgBAQABBQKIj//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABcQAAMBAAAAAAAAAAAAAAAAAAAQMUH/2gAIAQEABj8Cq0//xAAZEAACAwEAAAAAAAAAAAAAAAAAEQFxkTH/2gAIAQEAAT8h4TaWkto//9oADAMBAAIAAwAAABBzz//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABsQAAEEAwAAAAAAAAAAAAAAAAABITFhEVFx/9oACAEBAAE/EEaV1kbPJZjM1j//2Q==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/40d6e6688fd8155de1efa10fe408deeb/01472/throughput-latency-2.webp 240w,
/static/40d6e6688fd8155de1efa10fe408deeb/222bd/throughput-latency-2.webp 480w,
/static/40d6e6688fd8155de1efa10fe408deeb/3a1b5/throughput-latency-2.webp 922w&quot;
          sizes=&quot;(max-width: 922px) 100vw, 922px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/40d6e6688fd8155de1efa10fe408deeb/3bc27/throughput-latency-2.jpg 240w,
/static/40d6e6688fd8155de1efa10fe408deeb/98431/throughput-latency-2.jpg 480w,
/static/40d6e6688fd8155de1efa10fe408deeb/92284/throughput-latency-2.jpg 922w&quot;
          sizes=&quot;(max-width: 922px) 100vw, 922px&quot;
          type=&quot;image/jpeg&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/40d6e6688fd8155de1efa10fe408deeb/92284/throughput-latency-2.jpg&quot;
          alt=&quot;throughput latency&quot;
          title=&quot;throughput latency&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;Nhìn vào hình ảnh bên trên ta có thể thấy được:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;throughput của đoạn đường trên là 500 xe / 1 tiếng&lt;/li&gt;
&lt;li&gt;latency của đoạn đường trên là 15 tiếng (15 = 3 + 4 + 8)&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;cải-thiện-hệ-thống-1&quot;&gt;&lt;a href=&quot;#c%E1%BA%A3i-thi%E1%BB%87n-h%E1%BB%87-th%E1%BB%91ng-1&quot; aria-label=&quot;cải thiện hệ thống 1 permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Cải thiện hệ thống&lt;/h2&gt;
&lt;p&gt;Để cải thiện hệ thống thì chúng ta cần phải tăng số lượng throughput và giảm latency.&lt;/p&gt;
&lt;p&gt;Cùng đọc phần tiếp theo để hiểu xem cụ thể là làm thế nào nhé.&lt;/p&gt;
&lt;h3 id=&quot;cải-thiện-throughput&quot;&gt;&lt;a href=&quot;#c%E1%BA%A3i-thi%E1%BB%87n-throughput&quot; aria-label=&quot;cải thiện throughput permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Cải thiện throughput&lt;/h3&gt;
&lt;p&gt;Vậy làm thế nào có thể cải thiện được throughput của hệ thống.&lt;/p&gt;
&lt;p&gt;Như ví dụ về đoạn đường ở bên trên ta thấy, nếu ta cải thiện sai chỗ thì hiệu năng của hệ thống cũng không thể tăng được.&lt;/p&gt;
&lt;p&gt;Ví dụ như trong đoạn đường từ Hà Nội đến Thanh Hoá, cho dù có thêm mấy làn đường để tăng số lưu lượng xe từ 1000 đến 5000 xe đi chăng nữa thì tổng throughput của hệ thống cũng không thể tăng được, vẫn chỉ là 500 xe thôi. Lí do tại sao?&lt;/p&gt;
&lt;p&gt;Bởi vì throughput của đoạn từ Vinh đến Đà Nẵng đang gây cản trở đến toàn bộ hệ thống, bởi vì 5000 xe mà đi vào đoạn đường chỉ max 500 xe thì đương nhiên vẫn bị tắc rồi. Có cố cũng không thể đi được.&lt;/p&gt;
&lt;p&gt;Nên nếu cải thiện thì nên cải thiện đoạn đường này là tốt nhất.&lt;/p&gt;
&lt;p&gt;Và cái đoạn từ Vinh đến Đà Nẵng này người ta gọi là &lt;strong&gt;bottleneck (nút cổ chai).&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Nhờ vào việc xác định được bottleneck mà có thể khiến ta dễ dàng cải thiện throughout của toàn bộ hệ thống.&lt;/p&gt;
&lt;h4 id=&quot;ví-dụ-về-cải-thiện-throughput&quot;&gt;&lt;a href=&quot;#v%C3%AD-d%E1%BB%A5-v%E1%BB%81-c%E1%BA%A3i-thi%E1%BB%87n-throughput&quot; aria-label=&quot;ví dụ về cải thiện throughput permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Ví dụ về cải thiện throughput&lt;/h4&gt;
&lt;p&gt;Quay lại ví dụ về đoạn đường ở bên trên. Giả sử như đoạn đường từ Vinh đến Đà Nẵng đang thi công và xảy ra tắc đường. Hiện tại số lượng xe lưu thông trên 1 giờ chỉ còn có 100 xe.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 922px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/43a6d4050ba622c4537351848b133500/92284/throughput-latency-3.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 31.453362255965295%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAGABQDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAG6AD//xAAVEAEBAAAAAAAAAAAAAAAAAAAAIf/aAAgBAQABBQKqr//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABQQAQAAAAAAAAAAAAAAAAAAABD/2gAIAQEABj8Cf//EABkQAAIDAQAAAAAAAAAAAAAAAAABEVFxkf/aAAgBAQABPyHSNEWXD//aAAwDAQACAAMAAAAQcA//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAbEAEAAgIDAAAAAAAAAAAAAAABACERMUFx8f/aAAgBAQABPxAUYsWq1Oit1uDWEPHqf//Z&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/43a6d4050ba622c4537351848b133500/01472/throughput-latency-3.webp 240w,
/static/43a6d4050ba622c4537351848b133500/222bd/throughput-latency-3.webp 480w,
/static/43a6d4050ba622c4537351848b133500/3a1b5/throughput-latency-3.webp 922w&quot;
          sizes=&quot;(max-width: 922px) 100vw, 922px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/43a6d4050ba622c4537351848b133500/3bc27/throughput-latency-3.jpg 240w,
/static/43a6d4050ba622c4537351848b133500/98431/throughput-latency-3.jpg 480w,
/static/43a6d4050ba622c4537351848b133500/92284/throughput-latency-3.jpg 922w&quot;
          sizes=&quot;(max-width: 922px) 100vw, 922px&quot;
          type=&quot;image/jpeg&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/43a6d4050ba622c4537351848b133500/92284/throughput-latency-3.jpg&quot;
          alt=&quot;throughput latency&quot;
          title=&quot;throughput latency&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Khi này throughput của toàn bộ hệ thống giảm xuống còn 100 xe / 1 giờ.&lt;/p&gt;
&lt;p&gt;Nếu như chúng ta giải quyết được vấn đề tắc đường này thì chắc chắn throughput của hệ thống sẽ tăng lên. Giả sử như sau khi giải quyết xong tắc đường đoạn từ Vinh đến Đà Nẵng thì bây giờ lưu lượng xe đã tăng lên thành 2000 xe / 1 giờ.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 922px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/0e673677f80de137989ffcc11b14aba1/92284/throughput-latency-4.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 31.453362255965295%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAGABQDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAG6AD//xAAVEAEBAAAAAAAAAAAAAAAAAAAAIf/aAAgBAQABBQKqr//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABQQAQAAAAAAAAAAAAAAAAAAABD/2gAIAQEABj8Cf//EABkQAQACAwAAAAAAAAAAAAAAAAEAcTFBkf/aAAgBAQABPyGxLYgaJyf/2gAMAwEAAgADAAAAEHAP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGxABAAIDAQEAAAAAAAAAAAAAAQAhETFRQfH/2gAIAQEAAT8QFGLFqtTPDqtwRSHz6n//2Q==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/0e673677f80de137989ffcc11b14aba1/01472/throughput-latency-4.webp 240w,
/static/0e673677f80de137989ffcc11b14aba1/222bd/throughput-latency-4.webp 480w,
/static/0e673677f80de137989ffcc11b14aba1/3a1b5/throughput-latency-4.webp 922w&quot;
          sizes=&quot;(max-width: 922px) 100vw, 922px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/0e673677f80de137989ffcc11b14aba1/3bc27/throughput-latency-4.jpg 240w,
/static/0e673677f80de137989ffcc11b14aba1/98431/throughput-latency-4.jpg 480w,
/static/0e673677f80de137989ffcc11b14aba1/92284/throughput-latency-4.jpg 922w&quot;
          sizes=&quot;(max-width: 922px) 100vw, 922px&quot;
          type=&quot;image/jpeg&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/0e673677f80de137989ffcc11b14aba1/92284/throughput-latency-4.jpg&quot;
          alt=&quot;throughput latency&quot;
          title=&quot;throughput latency&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Lúc này throughput của hệ thống đã chuyển sang đoạn từ Thanh Hoá đến Vinh và là 800 xe / 1 giờ (trước khi cải thiện là 100 xe / 1 giờ).&lt;/p&gt;
&lt;p&gt;Nếu như chúng ta tăng thêm làn đường mới ở đoạn này thì chắc chắn throughput của toàn bộ hệ thống sẽ tăng lên.&lt;/p&gt;
&lt;p&gt;Nhưng chẳng may chúng ta lại đi thêm làn đường ở đoạn mà không phải bottleneck thì sẽ như thế nào?&lt;/p&gt;
&lt;p&gt;Chẳng hạn như chúng ta thêm làn đường ở đoạn Thanh Hoá - Vinh để số lương xe lưu thông tăng lên thành 1200 xe / 1 giờ.&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 922px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/d53a7e8550fe85e046c3da2075ba6e96/92284/throughput-latency-5.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 31.453362255965295%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAGABQDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAG6AD//xAAWEAEBAQAAAAAAAAAAAAAAAAAhABD/2gAIAQEAAQUCcb//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAQ/9oACAEBAAY/An//xAAaEAACAgMAAAAAAAAAAAAAAAAAAVGRESFx/9oACAEBAAE/IekblUYkqP/aAAwDAQACAAMAAAAQAA//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAbEAEAAgIDAAAAAAAAAAAAAAABACERMUFR8f/aAAgBAQABPxAUYsWq1N82G+0GsIePU//Z&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/d53a7e8550fe85e046c3da2075ba6e96/01472/throughput-latency-5.webp 240w,
/static/d53a7e8550fe85e046c3da2075ba6e96/222bd/throughput-latency-5.webp 480w,
/static/d53a7e8550fe85e046c3da2075ba6e96/3a1b5/throughput-latency-5.webp 922w&quot;
          sizes=&quot;(max-width: 922px) 100vw, 922px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/d53a7e8550fe85e046c3da2075ba6e96/3bc27/throughput-latency-5.jpg 240w,
/static/d53a7e8550fe85e046c3da2075ba6e96/98431/throughput-latency-5.jpg 480w,
/static/d53a7e8550fe85e046c3da2075ba6e96/92284/throughput-latency-5.jpg 922w&quot;
          sizes=&quot;(max-width: 922px) 100vw, 922px&quot;
          type=&quot;image/jpeg&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/d53a7e8550fe85e046c3da2075ba6e96/92284/throughput-latency-5.jpg&quot;
          alt=&quot;throughput latency&quot;
          title=&quot;throughput latency&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Vậy throughput của toàn bộ hệ thống theo các bạn có tăng lên không? Câu trả lời là không nhé.&lt;/p&gt;
&lt;p&gt;Vì đoạn ở Vinh - Đà Nẵng vẫn còn đang tắc mà. Số lượng xem lưu thông ở đoạn này có 100 xe. Nên cho dù ở Thanh Hoá - Vinh mà nhiều xe lưu thông đi chăng nữa thì đến đoạn Vinh - Đà Nẵng thì vẫn phải chịu cảnh tắc đường thôi. Nên đoạn này mà không cải thiện thì throughput của hệ thống sẽ không thể tăng được.&lt;/p&gt;
&lt;p&gt;Ở ví dụ trên là mình đang nói về vấn đề lưu thông xe trên đường. Nhưng với hệ thống website hiện nay thì hoàn toàn có thể áp dụng được.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Chính vì vậy, để có thể cải thiện được throughput của hệ thống thì điều đầu tiên mình nên làm là tìm ra chính xác đâu là điểm bottleneck.&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&quot;cải-thiện-latency&quot;&gt;&lt;a href=&quot;#c%E1%BA%A3i-thi%E1%BB%87n-latency&quot; aria-label=&quot;cải thiện latency permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Cải thiện Latency&lt;/h3&gt;
&lt;p&gt;Latency là tổng thời gian xử lý của từng bộ phận trong hệ thống, bao gồm cả thời gian đợi.&lt;/p&gt;
&lt;p&gt;Để cải thiện được Latency thì chúng ta sẽ đi xem xét xem bộ phận nào xử lý đang chiếm nhiều thời gian nhất thì sẽ đi cải thiện bộ phận đó trước. Sau đó sẽ đi cải thiện các bộ phận tiếp theo.&lt;/p&gt;
&lt;p&gt;Nhưng nếu mà thời gian xử lý của từng bộ phận đã nằm trong khoảng thích hợp rồi thì cho dù muốn cải thiện thêm nữa thì cũng không thể được. Tức là nó đã đạt đến ngưỡng rồi ấy.&lt;/p&gt;
&lt;p&gt;Ví dụ như với web application, những bộ phận nào đang xử lý chiếm thời gian nhất thì tìm hiểu xem xem thuật toán của nó đã tối ưu chưa, có dùng lãng phí memory không, nếu là DB thì kiểm tra xem đã gắn index chưa …&lt;/p&gt;
&lt;p&gt;Để đo xem thời gian chạy của từng chức năng là bao nhiêu, có bao nhiêu lời gọi hàm thì có 1 tool sẽ giúp các bạn làm được điều đó là &lt;strong&gt;Profiler&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Ví dụ các bạn đang dùng php thì search google là: Profiling Tools For PHP&lt;/p&gt;
&lt;p&gt;Nếu là java thì các bạn cũng search tương tự.&lt;/p&gt;
&lt;h4 id=&quot;ví-dụ-về-cải-thiện-latency&quot;&gt;&lt;a href=&quot;#v%C3%AD-d%E1%BB%A5-v%E1%BB%81-c%E1%BA%A3i-thi%E1%BB%87n-latency&quot; aria-label=&quot;ví dụ về cải thiện latency permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Ví dụ về cải thiện Latency&lt;/h4&gt;
&lt;p&gt;Quay lại ví dụ ở bên trên, đoạn đường Vinh - Đà Nẵng đang tắc đường. Nên lúc này latency của toàn bộ hệ thống là 18 giờ.&lt;/p&gt;
&lt;p&gt;Sau khi giải quyết được vấn đề tắc đường thì latency đã được cải thiện thành 13 giờ.&lt;/p&gt;
&lt;p&gt;Thế nhưng nếu chúng ta đi cải thiện nhầm ở đoạn đường mà không xảy ra bottleneck thì mặc dù throughput không được cải thiện nhưng mà latency ít nhiều cũng được cải thiện, vì nó chỉ còn 16 giờ.&lt;/p&gt;
&lt;p&gt;Từ đó chúng ta có thể thấy được, so với việc cải thiện throughput thì cải thiện latency sẽ hơi khác 1 chút. Đó là chúng ta chỉ cần cải thiện latency của 1 bộ phận nào đó trong hệ thống cũng kéo theo latency của toàn bộ hệ thống giảm xuống.&lt;/p&gt;
&lt;h2 id=&quot;tổng-kết&quot;&gt;&lt;a href=&quot;#t%E1%BB%95ng-k%E1%BA%BFt&quot; aria-label=&quot;tổng kết permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Tổng kết&lt;/h2&gt;
&lt;p&gt;Đọc qua bài này các bạn thấy thế nào ak? Đã nắm rõ được test tải hệ thống là sẽ làm thế nào chưa? Hơi lắm chữ 1 chút nhưng nó khá cần thiết đấy.&lt;/p&gt;
&lt;p&gt;Mình hi vọng qua bài này sẽ giúp các bạn có chút hình dung xem việc test tải hệ thống sẽ làm những gì, và để cải thiện hệ thống thì chúng ta nên làm gì.&lt;/p&gt;
&lt;p&gt;Bài này mình sẽ chỉ tập trung vào phần lý thuyết thôi nên đọc sẽ hơi mệt nhưng cũng khá dễ hiểu. Có thể bài tới mình sẽ viết 1 bài dạy các bạn cách test tải sẽ như thế nào, dùng tool nào hợp lí, cách tìm bottleneck ra sao.&lt;/p&gt;
&lt;p&gt;Viết 1 bài mất nhiều năng lượng quá, cũng giống như các bạn làm việc trên giường ấy. Mà thôi nói đến đây các bạn tự hiểu. :D&lt;/p&gt;
&lt;p&gt;==============&lt;/p&gt;
&lt;p&gt;Để nhận thông báo khi có bài viết mới nhất thì các bạn có thể like fanpage của mình ở bên dưới nhé:&lt;/p&gt;
&lt;p&gt;👉 &lt;a href=&quot;https://www.facebook.com/669339543503374&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Nghệ thuật Coding Fanpage Facebook&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Chúc các bạn 1 tuần thật vui vẻ.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Call API trong VueJS theo cách thông minh nhất]]></title><link>https://nghethuatcoding.com2019/05/16/call-api-trong-vuejs-theo-cach-thong-minh-nhat/</link><guid isPermaLink="false">https://nghethuatcoding.com2019/05/16/call-api-trong-vuejs-theo-cach-thong-minh-nhat/</guid><pubDate>Thu, 16 May 2019 14:03:50 GMT</pubDate><content:encoded>&lt;p&gt;Gần đây thấy VueJs có vẻ đang hot nên thử tìm hiểu xem thực sự nó như thế nào.&lt;/p&gt;
&lt;p&gt;Mình cũng thử đọc code của 1 vài sample, tutorial thì thấy chỗ call API đa số đều dùng axios ở Component hay là ở bên trong Vuex.&lt;/p&gt;
&lt;p&gt;Nếu mà áp dụng những cái đó vào trong dự án thực tế thì sẽ xảy ra những vấn đề sau:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Việc viết API trực tiếp trong component sẽ rất khó cho việc viết unit test.&lt;/li&gt;
&lt;li&gt;Tính mở rộng của Vuex(actions) (đối với những xử lý không dùng lại thì không nên viết ở trong Store)&lt;/li&gt;
&lt;li&gt;Việc module hoá phần giao tiếp API với PureJS không làm giảm đi độ phụ thuộc. Vì API được định nghĩa trong component nên muốn thay đổi API hay logic sẽ phải sửa trong nhiều file khác.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Và còn rất nhiều vấn đề nữa…&lt;/p&gt;
&lt;p&gt;Sau khi tìm hiểu thì mình thấy có rất nhiều design pattern có thể áp dụng cho việc gọi API. Nhưng có 1 design pattern mà mình thấy tốt nhất đó là **RepositoryFactory. **&lt;/p&gt;
&lt;p&gt;Quả thực mình rất thích cái pattern này vì nó scale khá là dễ.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Mục đích bài viết:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Biết cách áp dụng design pattern vào việc call API. Đặc biệt là **RepositoryFactory **pattern.&lt;/li&gt;
&lt;li&gt;Mặc dù bài viết lấy ví dụ là VueJS nhưng mà Angular, ReactJS mình thấy đều có thể áp dụng được.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;tại-sao-lại-dùng-nó&quot;&gt;&lt;a href=&quot;#t%E1%BA%A1i-sao-l%E1%BA%A1i-d%C3%B9ng-n%C3%B3&quot; aria-label=&quot;tại sao lại dùng nó permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Tại sao lại dùng nó?&lt;/h2&gt;
&lt;p&gt;Đầu tiên mình sẽ dùng &lt;a href=&quot;https://docs.microsoft.com/en-gb/dotnet/standard/microservices-architecture/microservice-ddd-cqrs-patterns/infrastructure-persistence-layer-design?view=aspnetcore-2.1#the-repository-pattern&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;repository pattern&lt;/a&gt; để truy cập vào tài nguyên theo cách độc lập, không có bất kì logic nào ngoài việc trả về dữ liệu.&lt;/p&gt;
&lt;p&gt;Cái thứ 2 là sẽ sử dụng &lt;a href=&quot;https://en.wikipedia.org/wiki/Factory_method_pattern&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;factory pattern&lt;/a&gt; để khởi tạo logic của môi trường hay repository cần thiết cho từng case. Factory có 1 lợi thế là có thể khởi tạo 1 mock repository hoặc là production repository nếu cần thiết.&lt;/p&gt;
&lt;p&gt;Chắc hẳn mọi người đọc example hay tutorial cũng đều thấy axios luôn được sử dụng trong component. Vậy có vấn đề gì xảy ra chỗ này:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Điều gì sẽ xảy ra nếu chúng ta muốn tái sử dụng việc call api?&lt;/li&gt;
&lt;li&gt;Điều gì xảy ra nếu endpoint thay đổi?&lt;/li&gt;
&lt;li&gt;Điều gì xảy ra nếu muốn tái sử dụng việc call api cho dự án khác?&lt;/li&gt;
&lt;li&gt;Điều gì xảy ra nếu muốn refactor 1 vài lời gọi hàm hoặc muốn di chuyển nó đến Vuex actions?&lt;/li&gt;
&lt;li&gt;Mình có nhiều hơn 1 cái resource, thế bây giờ phải định nghĩa tận 4 cái endpoint?&lt;/li&gt;
&lt;li&gt;Làm thế nào có thể dùng 1 cái mock api cho việc test?&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Đương nhiên là thay đổi 1 file sẽ dễ dàng hơn là thay đổi 30 file rồi đúng không?&lt;/p&gt;
&lt;h2 id=&quot;phương-pháp-đúng&quot;&gt;&lt;a href=&quot;#ph%C6%B0%C6%A1ng-ph%C3%A1p-%C4%91%C3%BAng&quot; aria-label=&quot;phương pháp đúng permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Phương pháp đúng&lt;/h2&gt;
&lt;p&gt;Trong case này, để đơn giản hoá code và có thể định nghĩa được 1 vài loại resource khác nhau thì mình sẽ sử dụng &lt;strong&gt;POJO (Plain Old JavaScript Objects)&lt;/strong&gt;. Đương nhiên có thể sử dụng Class nếu bạn muốn.&lt;/p&gt;
&lt;p&gt;Bây giờ cùng bắt đầu đi định nghĩa asxios nhé.&lt;/p&gt;
&lt;p&gt;Mình sẽ đặt tên file là &lt;strong&gt;Repository.js&lt;/strong&gt; vì nó đảm nhiệm việc kết nối đến các resources.&lt;/p&gt;
&lt;p&gt;Cũng có 1 vài người thích cái tên Service hay là API, nhưng trong hoàn cảnh này mình thấy cái tên Repository có vẻ hợp lí hơn.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 710px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/28271fcef05d13b82a8e0fcb568c6353/ad34c/repository-vuejs.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 48.87323943661972%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAABnklEQVQoz5WSX2+bMBTF+SZbwx9jGxtjMAQIgSYpbaR2W5VpmpaHStv3/wxnFzqqduke9nB0bCHf+7uH6ykdg4sASjMkKkKSRJBJCCEDsHj1RjH3X/xf8nTKIWUImwkYw5FOSmNoxSCET838ufjk7xVgfzXxNBEOIsGaMZTO4DAOsIqjiuhuBbouwabVRM8QRFcISRFbka/Iry7IZ8I0NzB5iqZ12O87DLsW63WOhKKoqhiuYEQdwLkYdS1h7dScoyjEO4RGori7hdsP+Pb9EU+/zri/H9FUFjeHLU6nI84/HvCV/POna5y+OPRbg6qU1IRd5OqlRFhIouQRNA/h6KxZQHlKtF0JWxB9maOoHTKr6NHz42nsaeT41ciTPJs953fsWpzuRjwOA0oqWjcFhuuWotBQFRWbCmZyfjQVW/yCMLMJfPYRN8cdnn6esRt7mEKhbQT9DI6m5ti2Av1GECHdG4nxYOYMu02CbaewGzT63tK6MSLMFVxpCN2f93HuRB2nVVn2cdHyfVmjF/+zXjOhoTGC8MObHF6f/1e/ASqTM1IkH+vrAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/28271fcef05d13b82a8e0fcb568c6353/01472/repository-vuejs.webp 240w,
/static/28271fcef05d13b82a8e0fcb568c6353/222bd/repository-vuejs.webp 480w,
/static/28271fcef05d13b82a8e0fcb568c6353/d3307/repository-vuejs.webp 710w&quot;
          sizes=&quot;(max-width: 710px) 100vw, 710px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/28271fcef05d13b82a8e0fcb568c6353/0783d/repository-vuejs.png 240w,
/static/28271fcef05d13b82a8e0fcb568c6353/782f4/repository-vuejs.png 480w,
/static/28271fcef05d13b82a8e0fcb568c6353/ad34c/repository-vuejs.png 710w&quot;
          sizes=&quot;(max-width: 710px) 100vw, 710px&quot;
          type=&quot;image/png&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/28271fcef05d13b82a8e0fcb568c6353/ad34c/repository-vuejs.png&quot;
          alt=&quot;repository vuejs.png&quot;
          title=&quot;repository vuejs.png&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Tiếp theo chúng ta sẽ đi định nghĩa cho từng Entity của project.&lt;/p&gt;
&lt;p&gt;Ví dụ như bạn có 1 blog. Khi đó chúng ta sẽ có 1 Entity là posts. Và bây giờ chúng ta sẽ đi định nghĩa tất cả các thao tác &lt;strong&gt;CRUD (Create Update Delete)&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Và khi đó &lt;strong&gt;postsRepository.js&lt;/strong&gt; sẽ trở thành như sau:&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 759px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/58006ae6033a8b15c482d045da93d721/b5cf5/postRepository-Vuejs-design-pattern-javascript_1.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 86.69301712779973%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsSAAALEgHS3X78AAACkElEQVQ4y5VU2XLbMBDTj7SNZIkSSfHSfVpJmvSh0///HXSXsT1OJplOH3a4lC0QWIBKalOiVgWCEmi8Rt87NK2B9wqmKqB1jqYp4byAcwKK9mWVoZKnTysxrkKwCrP3WJcev/+84jgWjAS8BY2ulZhnjWGQdJiErsU/AImhdvTHxiEEi3lq0AaDWp/QjxKhkShEhlyktKYR7FoM8BE8qW0Fr0qsdYWt1zicR2skFDEpihSi/JrNPdi1T9rO0lwEtM2JkcbZOXSOZrgt8POAMHUIy4B1G/Dz5YzjccG+jzRT9Sl4EkJNgAWkyqFNAaFS6jNoSavMIMRDrLz4gVP+Pa73VdBv9/KJoYkMa3vCtBd4WQx+zQ7Pr2TMeYFpHdzQYKTZ7ucJy9oT2w7nY4r7aW7fGXWRXMTSuoIWJyiKUGUUpKG9lbEsGefJdZbKkWraOu4tecDqboD8kMEqktlNOZatwLIoHHONfdJoe/sGSmngl2NuqRiED+ED3gH2g4+UGZRfGFVFpmg06xgNsSTXjj1C56LE8zFHmTyqx6c17hn4TrK5SD6hHXKaVwbfFuhMhlCn8FS9TdGEirL4gOz0LRohyodoEvdXY6IpfM0UXT1d5ySvxDkobIPD+rxh3MmEvcd2jHh6mik2R4zN8cj9HmPEbNko7llB0tEVY5cVAbrAblNkTB5viqFnkg7jWyLKFNWFBffXNT4nqTxHroTdkjInwAz9VOCYJI7V0nwGms+Abu5h+wBHNc1NZMOs5uUtRhz4YfQ3Y2Js2Ck2RmtyUFDAJTH2dBC5q6hq+gqx0/y/lkYUGo4M9fQu92zKDZAlX12KMuTl8tPQS5Z2VyzvasLH/uYyn8q5+uoD8D/FoH8BZP0EguvcB3gAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/58006ae6033a8b15c482d045da93d721/01472/postRepository-Vuejs-design-pattern-javascript_1.webp 240w,
/static/58006ae6033a8b15c482d045da93d721/222bd/postRepository-Vuejs-design-pattern-javascript_1.webp 480w,
/static/58006ae6033a8b15c482d045da93d721/42453/postRepository-Vuejs-design-pattern-javascript_1.webp 759w&quot;
          sizes=&quot;(max-width: 759px) 100vw, 759px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/58006ae6033a8b15c482d045da93d721/0783d/postRepository-Vuejs-design-pattern-javascript_1.png 240w,
/static/58006ae6033a8b15c482d045da93d721/782f4/postRepository-Vuejs-design-pattern-javascript_1.png 480w,
/static/58006ae6033a8b15c482d045da93d721/b5cf5/postRepository-Vuejs-design-pattern-javascript_1.png 759w&quot;
          sizes=&quot;(max-width: 759px) 100vw, 759px&quot;
          type=&quot;image/png&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/58006ae6033a8b15c482d045da93d721/b5cf5/postRepository-Vuejs-design-pattern-javascript_1.png&quot;
          alt=&quot;postRepository Vuejs design pattern javascript&quot;
          title=&quot;postRepository Vuejs design pattern javascript&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Tiếp theo chúng ta sẽ đi tạo &lt;strong&gt;Factory&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 584px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/c91ff8ed7f82485b604e415bb80ae4d0/3064a/design-pattern-repository-factory.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 52.226027397260275%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAABqElEQVQoz4VS7XLaMBD0m6T4Q7Is2fIHjjEGh6hOgIbJhKZTJu//INs7AZ3Cn/7YsU53t97bU5DpBIVVSLMIxkqUpYLJBXKCNgkMQeuYkCBJZ5AqhJAhEjGDSEPE/OWYICkOroSDUnhSGdoqh5tGbLcO+x8Tnt3Kx11dYNQ5SiMwDBpPY47JWUzfS6wGg3Ft0DQZAk0FtsxgichWhT+v1h0WfYPlco55a1EYibxIkZKaNI2QsWJzhskvE9BZZfFZIZPoxqJ3Iz6Obzj+PHicTkd8fX3ixa3xun1GTz/gJh7tCiHDm9gT1k2OqjHeu6YtoCjBHrIqzvFdWWlUtTmT/EOQqugGATdx4dwo1GkKKUg6ja6swWJRo6Yc1zTzwpOXFGtFNReCe+KAybipkRKu1ViuDIZNj5dNjd3hFYf3PX6fPvD5692DLXnbT9jtnF+mkLM7hXTpScn8zIawdUybjNBaeiJkB+d5QazOj09Ku75GR+qvft4Qdl2JRwJ7KWUEIc4exTK6mD5DFD/Qu/v2F3Hy4HEluxl5cgu4zSMFoX+09yb/D/cK/wBHEDQD/BY6NgAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/c91ff8ed7f82485b604e415bb80ae4d0/01472/design-pattern-repository-factory.webp 240w,
/static/c91ff8ed7f82485b604e415bb80ae4d0/222bd/design-pattern-repository-factory.webp 480w,
/static/c91ff8ed7f82485b604e415bb80ae4d0/d0231/design-pattern-repository-factory.webp 584w&quot;
          sizes=&quot;(max-width: 584px) 100vw, 584px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/c91ff8ed7f82485b604e415bb80ae4d0/0783d/design-pattern-repository-factory.png 240w,
/static/c91ff8ed7f82485b604e415bb80ae4d0/782f4/design-pattern-repository-factory.png 480w,
/static/c91ff8ed7f82485b604e415bb80ae4d0/3064a/design-pattern-repository-factory.png 584w&quot;
          sizes=&quot;(max-width: 584px) 100vw, 584px&quot;
          type=&quot;image/png&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/c91ff8ed7f82485b604e415bb80ae4d0/3064a/design-pattern-repository-factory.png&quot;
          alt=&quot;design pattern repository factory&quot;
          title=&quot;design pattern repository factory&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Nhìn vào trên ta thấy việc tạo Repository từ Factory trở nên thật &lt;strong&gt;simple&lt;/strong&gt; phải không?&lt;/p&gt;
&lt;p&gt;Hơn nữa ở đây ta cũng dễ dàng tạo &lt;strong&gt;mock repository (phù hợp với từng môi trường ví dụ develop, staging, production)&lt;/strong&gt; hay thêm 1 vài logic vào trong hàm &lt;strong&gt;get&lt;/strong&gt; ở trên cũng đều được hết.&lt;/p&gt;
&lt;p&gt;Còn đây là cách áp dụng vào trong component:&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 787px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/480d6f4899b31afce3d7cab93d8ac7be/44457/parentComponent-VueJs-4.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 86.27700127064803%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAIAAABSJhvpAAAACXBIWXMAAAsSAAALEgHS3X78AAACEklEQVQ4y4VT2W7bMBD0l7Q+xFu8SdGSKB+yY8VxDhTIQ4H+/390ZTtNCzguMOCDuKPZnVlOlGZMIKFwKbEcQYTEokSIzPEZhM4pW9zEpFRUC5I4SdHUbQiViUqYkgRHoifekbJEdOSPvyB05HBRML7gvJgISSotdzYMh+3PX+/Pr8Pb8/DQd5tuua59s3KbPjbZNJ3re9tvVM5queSpYt6LiVTEWBmrkLzed826q+scpaSl1aW3KjpdWVM5QIwiJa4NA1nA2LZxQnO09vZtODw2fr92OZtd77ZrYzTB6DshUwzAgBnCc/yXBRPnS8qR9vTlx+Z42vuofJC5i3XrrSvBy7GOF5QVjF0FP8lQIQTmYq70Iiu5qqsmV0pxpYwo2cWnL932QUFI5zyQtfL5ZTg+7VvgayuVuJPTpW3JBdKGhsR9JeDToviGyQzTKaGzO8xr21xgIZEN03XGVZtCHUWJYcgPfE2OlQFlH/R2mzOEZIRQBJQRnhIGGza9Rw5Rgw7sY2pCu9vkzHYP9jD0TR2kYNZaBlb/AXjOi39mPje5ACnGZrkL3ap5f38dHreRy2G5hfWwbbJN0pXTyccGVohcjLySR294oRTeJHw69U/H/WG/WnVtcFGA5byAwBlH1/NDfGxbwtswHJ4XZMYZBE5h6cEIqennzLcyG3MGw4F/fjRzcj4vd/dDvpJB5L91N/EbhDuyoxnh3Y4AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/480d6f4899b31afce3d7cab93d8ac7be/01472/parentComponent-VueJs-4.webp 240w,
/static/480d6f4899b31afce3d7cab93d8ac7be/222bd/parentComponent-VueJs-4.webp 480w,
/static/480d6f4899b31afce3d7cab93d8ac7be/30b68/parentComponent-VueJs-4.webp 787w&quot;
          sizes=&quot;(max-width: 787px) 100vw, 787px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/480d6f4899b31afce3d7cab93d8ac7be/0783d/parentComponent-VueJs-4.png 240w,
/static/480d6f4899b31afce3d7cab93d8ac7be/782f4/parentComponent-VueJs-4.png 480w,
/static/480d6f4899b31afce3d7cab93d8ac7be/44457/parentComponent-VueJs-4.png 787w&quot;
          sizes=&quot;(max-width: 787px) 100vw, 787px&quot;
          type=&quot;image/png&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/480d6f4899b31afce3d7cab93d8ac7be/44457/parentComponent-VueJs-4.png&quot;
          alt=&quot;parentComponent VueJs&quot;
          title=&quot;parentComponent VueJs&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Nhìn vào chúng ta thấy nó simple phải không nào? Vì phần logic đã được tách ra ở 1 chỗ khác nên việc dùng 1 endpoint khác như GraphSQL cũng hoàn toàn có thể.&lt;/p&gt;
&lt;h2 id=&quot;kết-luận&quot;&gt;&lt;a href=&quot;#k%E1%BA%BFt-lu%E1%BA%ADn&quot; aria-label=&quot;kết luận permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Kết luận&lt;/h2&gt;
&lt;p&gt;Hiện tại pattern này mình đang áp dụng vào dự án thấy khá ngon. Nhưng điều đó cũng không có nghĩa là nó phù hợp với dự án của các bạn.&lt;/p&gt;
&lt;p&gt;Tuy nhiên, theo mình thấy thì pattern này có 1 số ưu điểm sau:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Có thể dễ dàng test 1 đoạn code nào đó 1 cách đơn giản&lt;/li&gt;
&lt;li&gt;Code của component trông đẹp hơn&lt;/li&gt;
&lt;li&gt;Có thể dễ dàng mở rộng (Đúng không ta?)&lt;/li&gt;
&lt;li&gt;Có thể đảm bảo tính DRY (Donot repeat your self)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Nếu bạn nào có ý kiến gì thì hãy để lại ở phần comment bên dưới nhé.&lt;/p&gt;
&lt;p&gt;==============&lt;/p&gt;
&lt;p&gt;Để nhận thông báo khi có bài viết mới nhất thì các bạn có thể like fanpage của mình ở bên dưới nhé:&lt;/p&gt;
&lt;p&gt;👉 &lt;a href=&quot;https://www.facebook.com/669339543503374&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Nghệ thuật Coding Fanpage Facebook&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Chúc các bạn 1 tuần thật vui vẻ.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Thiết kế hệ thống URL Shortening giống Bit.ly chịu tải 6 tỷ click 1 tháng]]></title><link>https://nghethuatcoding.com2019/05/13/thiet-ke-he-thong-url-shortening/</link><guid isPermaLink="false">https://nghethuatcoding.com2019/05/13/thiet-ke-he-thong-url-shortening/</guid><pubDate>Mon, 13 May 2019 13:24:16 GMT</pubDate><content:encoded>&lt;p&gt;Chắc hẳn ai trong số chúng ta cũng đã từng dùng 1 số dịch vụ URL Shortening (rút gọn link) như Bitly hay TinyURL.&lt;/p&gt;
&lt;p&gt;Đối với 1 engineer thì việc dùng là 1 chuyện, nhưng làm thế nào để thiết kế được 1 hệ thống chịu tải hàng tỉ click mỗi tháng chắc hẳn cũng nhiều người quan tâm.&lt;/p&gt;
&lt;p&gt;Hôm nay mình viết bài này để đào sâu vào những hệ thống đó xem họ đã thiết kế như thế nào nhé.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Mục tiêu của bài viết:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Sẽ giúp các bạn có cái nhìn tổng quan về cách thiết kế hệ thống hàng triệu người dùng, hàng tỉ click mỗi tháng nó như thế nào. Từ cách tư duy đến cách tiếp cận bài toán.&lt;/li&gt;
&lt;li&gt;Có thể tự mình xây dựng được 1 hệ thống URL Shortening giống Bitly, TinyURL.&lt;/li&gt;
&lt;li&gt;Giúp các bạn có kinh nghiệm đi phỏng vấn vào vị trí system design.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;hệ-thống-url-shortening-là-gì&quot;&gt;&lt;a href=&quot;#h%E1%BB%87-th%E1%BB%91ng-url-shortening-l%C3%A0-g%C3%AC&quot; aria-label=&quot;hệ thống url shortening là gì permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Hệ thống URL Shortening là gì?&lt;/h2&gt;
&lt;p&gt;Chắc hẳn cũng có 1 số bạn chưa từng dùng dịch vụ rút gọn link bao giờ. Vậy để mình giải thích ngắn gọn xem URL Shortening là gì đã nhé.&lt;/p&gt;
&lt;p&gt;URL Shortening (rút gọn link) là 1 dịch vụ giúp chúng ta có thể làm ngắn link gốc lại được.&lt;/p&gt;
&lt;p&gt;Ví dụ như link gốc của chúng ta là: &lt;a href=&quot;https://nghethuatcoding.com/2019/05/06/cac-ki-su-grab-da-thiet-ke-he-thong-dan-hoi-su-dung-circuit-breaker-nhu-the-nao/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;https://nghethuatcoding.com/2019/05/06/cac-ki-su-grab-da-thiet-ke-he-thong-dan-hoi-su-dung-circuit-breaker-nhu-the-nao/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Sau khi dùng qua rút gọn link thì nó sẽ trở thành thế này: &lt;a href=&quot;http://bit.ly/2VXBAw4&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;http://bit.ly/2VXBAw4&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Bây giờ nếu chúng ta mở link &lt;a href=&quot;http://bit.ly/2VXBAw4&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;http://bit.ly/2VXBAw4&lt;/a&gt; ở trình duyệt thì nó sẽ chuyển hướng đến link gốc.&lt;/p&gt;
&lt;h2 id=&quot;tại-sao-cần-dùng-rút-gọn-link&quot;&gt;&lt;a href=&quot;#t%E1%BA%A1i-sao-c%E1%BA%A7n-d%C3%B9ng-r%C3%BAt-g%E1%BB%8Dn-link&quot; aria-label=&quot;tại sao cần dùng rút gọn link permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Tại sao cần dùng rút gọn link?&lt;/h2&gt;
&lt;p&gt;Đây chắc hẳn là câu hỏi mà nhiều người quan tâm. Ví dụ như: cứ gửi link gốc cho người xem chứ cần gì phải rút gọn link làm gì cho nó mất thời gian? Rồi bây giờ có ai phải tự nhập link bằng tay nữa đâu mà phải làm mất công? …&lt;/p&gt;
&lt;p&gt;Công nhận những thắc mắc đó của mọi người không sai.&lt;/p&gt;
&lt;p&gt;Mục đích chính của việc dùng rút gọn link là:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Nhìn link ngắn gọn trông đẹp mắt hơn.&lt;/li&gt;
&lt;li&gt;Có thể thống kê lượng người click vào link để phân tích, đánh giá kết quả. Phục vụ cho marketing.&lt;/li&gt;
&lt;li&gt;Có thể ẩn 1 số link tiếp thị liên kết với mục đích là kiếm tiền (Đây là 1 ví dụ &lt;a href=&quot;https://kiemtiencaptoc.com/link-rut-gon-kiem-tien-tot-nhat-2019/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Kiếm tiền với link rút gọn&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;yêu-cầu-về-mặt-chức-năng-hệ-thống&quot;&gt;&lt;a href=&quot;#y%C3%AAu-c%E1%BA%A7u-v%E1%BB%81-m%E1%BA%B7t-ch%E1%BB%A9c-n%C4%83ng-h%E1%BB%87-th%E1%BB%91ng&quot; aria-label=&quot;yêu cầu về mặt chức năng hệ thống permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Yêu cầu về mặt chức năng hệ thống&lt;/h2&gt;
&lt;p&gt;Hầu hết các hệ thống rút gọn link phải đáp ứng được những yêu cầu sau:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Yêu cầu về mặt chức năng:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Đầu vào là 1 link gốc, hệ thống sẽ rút gọn link gốc đó thành 1 dạng link ngắn hơn và duy nhất&lt;/li&gt;
&lt;li&gt;Khi người dùng access vào link rút gọn, hệ thống sẽ chuyển nó đến link gốc&lt;/li&gt;
&lt;li&gt;Người dùng có thể lựa chọn customize link rút gọn của mình theo ý muốn.&lt;/li&gt;
&lt;li&gt;Link rút gọn sẽ hết hạn sau 1 khoảng thời gian mặc định nào đó. Tuy nhiên người dùng có thể điều chỉnh cái khoảng thời gian này.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Yêu cầu phi chức năng:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Hệ thống có tính available (sẵn sàng) cao. Vì sao phải cần cái này? Vì nếu hệ thống die thì toàn bộ link rút gọn lúc đó cũng die theo.&lt;/li&gt;
&lt;li&gt;Khi click vào link rút gọn để chuyển sang link gốc, thì thời gian redirection đó phải tối thiểu (minimal latency).&lt;/li&gt;
&lt;li&gt;Link rút gọn không thể đoán được.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Yêu cầu mở rộng:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Có thể phân tích được bao nhiêu lần click vào link rút gọn?&lt;/li&gt;
&lt;li&gt;Cung cấp API cho bên thứ 3 có thể dùng được.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;phân-tích-hệ-thống&quot;&gt;&lt;a href=&quot;#ph%C3%A2n-t%C3%ADch-h%E1%BB%87-th%E1%BB%91ng&quot; aria-label=&quot;phân tích hệ thống permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Phân tích hệ thống&lt;/h2&gt;
&lt;p&gt;Ở phần này mình sẽ trình bày cho các bạn cách ước lượng số lượng request hàng tháng, dung lượng disk, dung lượng memory cần dùng, băng thông mạng tiêu tốn là bao nhiêu …&lt;/p&gt;
&lt;p&gt;Đa số những hệ thống rút gọn link này sẽ có lượng access khá là cao.&lt;/p&gt;
&lt;p&gt;Giả sử như hệ thống chúng ta thiết kế sẽ có tỉ lệ &lt;strong&gt;read:write là 100:1.&lt;/strong&gt; (Các bạn nhớ tỉ lệ này nhé vì nó dùng trong suốt bài viết)&lt;/p&gt;
&lt;p&gt;Trong đó:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;tỉ lệ read ở đây tức là số lượng người click vào link rút gọn&lt;/li&gt;
&lt;li&gt;tỉ lệ write là số người tạo ra link rút gọn.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;ước-lượng-traffic&quot;&gt;&lt;a href=&quot;#%C6%B0%E1%BB%9Bc-l%C6%B0%E1%BB%A3ng-traffic&quot; aria-label=&quot;ước lượng traffic permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Ước lượng traffic&lt;/h3&gt;
&lt;p&gt;Giả sử như hệ thống của chúng ta có 500 triệu link rút gọn trong 1 tháng.&lt;/p&gt;
&lt;p&gt;Với tỉ lệ read:write là 100:1 thì khi đó số lượng read sẽ là: 500M * 100 = 50B (M là milion, B là bilion)&lt;/p&gt;
&lt;p&gt;Số lượng write trong 1 giây là bao nhiêu?&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;500M / (30 days * 24 hours * 3600 seconds) = 200 URL/s&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Số lượng read trong 1 giây là bao nhiêu?&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;200 * 100 = 20K URL/s (vì tỉ lệ read:write là 100:1)&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&quot;ước-lượng-storage&quot;&gt;&lt;a href=&quot;#%C6%B0%E1%BB%9Bc-l%C6%B0%E1%BB%A3ng-storage&quot; aria-label=&quot;ước lượng storage permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Ước lượng storage&lt;/h3&gt;
&lt;p&gt;Giả sử như chúng ta sẽ lưu tất cả link rút gọn trong 5 năm.&lt;/p&gt;
&lt;p&gt;Do chúng ta có 500M link rút gọn trong 1 tháng, khi đó 5 năm chúng ta sẽ có:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;500M * 12 months * 5 years = 30B URLs&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Giả sử mỗi 1 link rút gọn chúng ta sẽ dùng mất 500 bytes để lưu nó trong storage. Dung lượng ổ đĩa lưu 500M URL trong 5 năm sẽ là:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;30B * 500 bytes = 15TB&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&quot;ước-lượng-bandwith-băng-thông-mạng&quot;&gt;&lt;a href=&quot;#%C6%B0%E1%BB%9Bc-l%C6%B0%E1%BB%A3ng-bandwith-b%C4%83ng-th%C3%B4ng-m%E1%BA%A1ng&quot; aria-label=&quot;ước lượng bandwith băng thông mạng permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Ước lượng bandwith (băng thông mạng)&lt;/h3&gt;
&lt;p&gt;Trước tiên mình giải thích qua về bandwith (băng thông mạng) là gì.&lt;/p&gt;
&lt;p&gt;Băng thông mạng là thuật ngữ chỉ lượng truyền dữ liệu (data size) trong khoảng thời gian 1 giây.&lt;/p&gt;
&lt;p&gt;Trong đó lượng truyền dữ liệu sẽ bao gồm 2 loại là incoming data với outgoing data:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;incoming data là lượng dữ liệu truyền đến server (giống như kiểu upload ấy)&lt;/li&gt;
&lt;li&gt;outgoing data là lượng dữ liệu từ server trả về cho người dùng (giống như download)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Vì hệ thống của chúng ta có 200 URL mới trong 1 giây thì khi đó:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;total incoming data = 200 * 500 bytes = 100 KB/s&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Với read request thì hệ thống của chúng ta có 20K URL/s thì khi đó:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;total outgoing data = 20K * 500 bytes = 10MB/s&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&quot;ước-lượng-memory&quot;&gt;&lt;a href=&quot;#%C6%B0%E1%BB%9Bc-l%C6%B0%E1%BB%A3ng-memory&quot; aria-label=&quot;ước lượng memory permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Ước lượng memory&lt;/h3&gt;
&lt;p&gt;Để hệ thống có thể chạy nhanh hơn thì giải pháp tốt nhất đó là cache lại những cái link rút gọn nào mà có nhiều người dùng click.&lt;/p&gt;
&lt;p&gt;Vậy chúng ta sẽ cần bao nhiêu memory?&lt;/p&gt;
&lt;p&gt;Nếu chúng ta đi theo quy tắc 80:20 nghĩa là 20% số lượng link rút gọn tạo ra 80% traffic hệ thống. (Hiểu đơn giản là chỉ có 20% số lượng link rút gọn là nhiều người dùng access, còn lại 80% ko có ai access cả. Nên 20% link rút gọn sẽ tạo ra 80% traffic là vì lí do đó).&lt;/p&gt;
&lt;p&gt;Vì chúng ta có tổng cộng 20K URL/s (hay 20K requests/s) thì khi đó 1 ngày sẽ có:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;20K * 3600 seconds * 24 hours = 1.7B request/day&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Để cache được 20% số request này thì chúng ta sẽ cần:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;0.2 * 1.7B * 500 bytes = 170GB memory&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&quot;tóm-tắt-lại-kích-thước-hệ-thống&quot;&gt;&lt;a href=&quot;#t%C3%B3m-t%E1%BA%AFt-l%E1%BA%A1i-k%C3%ADch-th%C6%B0%E1%BB%9Bc-h%E1%BB%87-th%E1%BB%91ng&quot; aria-label=&quot;tóm tắt lại kích thước hệ thống permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Tóm tắt lại kích thước hệ thống&lt;/h3&gt;
&lt;p&gt;Hệ thống của chúng ta có 500M URL trong 1 tháng, và có tỉ lệ read:write là 100:1. Khi đó đặc tả về hệ thống của chúng ta sẽ như sau:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;200 URL được tạo ra mỗi giây&lt;/li&gt;
&lt;li&gt;Số lượng access: 20K request/s&lt;/li&gt;
&lt;li&gt;Incoming data (giống như upload): 100KB/s&lt;/li&gt;
&lt;li&gt;Outgoing data (giống như download): 10MB/s&lt;/li&gt;
&lt;li&gt;Dung lượng ổ đĩa trong 5 năm: 15TB&lt;/li&gt;
&lt;li&gt;Dung lượng memory dùng cho cache: 170GB&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;thiết-kế-api&quot;&gt;&lt;a href=&quot;#thi%E1%BA%BFt-k%E1%BA%BF-api&quot; aria-label=&quot;thiết kế api permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Thiết kế API&lt;/h2&gt;
&lt;p&gt;Chúng ta có thể dùng SOAP hoặc là REST APIs để thiết kế API của hệ thống.&lt;/p&gt;
&lt;p&gt;Qua những yêu cầu ở bên trên, thì ta thấy hệ thống của chúng ta ít nhất cần 2 api sau:&lt;/p&gt;
&lt;h3 id=&quot;createurl&quot;&gt;&lt;a href=&quot;#createurl&quot; aria-label=&quot;createurl permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;createURL&lt;/h3&gt;
&lt;p&gt;Đầu tiên là cần API để tạo ra link rút gọn.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;createURL(api_dev_key,
          original_url,
          custom_alias=None,
          expire_date=None)&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Trong đó:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;api&lt;em&gt;dev&lt;/em&gt;key (string): là API developer key của người dùng đã đăng kí tài khoản. Key này được sử dụng để định danh người dùng, giới hạn số lượng request của người dùng (hay còn gọi là &lt;a href=&quot;https://nghethuatcoding.com/2019/05/06/cac-ki-su-grab-da-thiet-ke-he-thong-dan-hoi-su-dung-circuit-breaker-nhu-the-nao/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;rate-limiting&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;original_url (string): link gốc&lt;/li&gt;
&lt;li&gt;custom_alias (string - optional): customize key cho URL&lt;/li&gt;
&lt;li&gt;expire_date (string - optional): ngày hết hạn của link rút gọn&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Giá trị trả về (string):&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Nếu thành công sẽ insert vào trong cơ sở dữ liệu và trả về link rút gọn&lt;/li&gt;
&lt;li&gt;Nếu thất bại sẽ trả về error code.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;deleteurl&quot;&gt;&lt;a href=&quot;#deleteurl&quot; aria-label=&quot;deleteurl permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;deleteURL&lt;/h3&gt;
&lt;p&gt;API thứ 2 cũng khá cần thiết đó là xoá đi link rút gọn đã đăng kí.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;deleteURL(api_dev_key, url_key)&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Trong đó:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;api&lt;em&gt;dev&lt;/em&gt;key (string) là API developer key của người dùng đã đăng kí tài khoản&lt;/li&gt;
&lt;li&gt;url_key (string): là link rút gọn.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Giá trị trả về (string):&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Nếu thành công sẽ trả về link rút gọn đã bị xoá.&lt;/li&gt;
&lt;li&gt;Nếu thất bại sẽ trả về error code.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;làm-thế-nào-ngăn-chặn-hacker&quot;&gt;&lt;a href=&quot;#l%C3%A0m-th%E1%BA%BF-n%C3%A0o-ng%C4%83n-ch%E1%BA%B7n-hacker&quot; aria-label=&quot;làm thế nào ngăn chặn hacker permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Làm thế nào ngăn chặn hacker?&lt;/h3&gt;
&lt;p&gt;Hacker có thể dùng api để tạo ra thât nhiều link rút gọn vượt quá thiết kế hệ thống hiện tại. Với mục đích cho hệ thống của chúng ta “đắp chiếu luôn”.&lt;/p&gt;
&lt;p&gt;Ví dụ như hệ thống hiện tại của chúng ta đang thiết kế đáp ứng 1 tháng 500 triệu URL được tạo ra.&lt;/p&gt;
&lt;p&gt;Và hacker tấn công sẽ tạo gấp 100 lần hiện tại là khoảng 50 nghìn tỉ URL để hệ thống sẽ tiêu thụ nhiều tài nguyên hơn, dùng nhiều memory hơn, tốn nhiều ổ đĩa hơn. Khi đó chắc chắn hệ thống sẽ bị down. Và toàn bộ link rút gọn sẽ bị tan biến.&lt;/p&gt;
&lt;p&gt;Vậy làm thế nào để giải quyết đc bài toán này? Cách đơn giản nhất là sẽ hạn chế số lần call api thông qua api&lt;em&gt;dev&lt;/em&gt;key (kĩ thuật này được gọi là &lt;a href=&quot;https://nghethuatcoding.com/2019/05/06/cac-ki-su-grab-da-thiet-ke-he-thong-dan-hoi-su-dung-circuit-breaker-nhu-the-nao/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;rate-limiting&lt;/a&gt; mà Grab đang xử dụng). Ví dụ như mỗi api&lt;em&gt;dev&lt;/em&gt;key sẽ chỉ cho tạo tầm 100 link rút gọn trong 1 ngày chẳng hạn.&lt;/p&gt;
&lt;p&gt;Tuy không phải là cách hoàn hảo 100% nhưng ít nhiều cũng hạn chế được 1 số vấn đề.&lt;/p&gt;
&lt;h2 id=&quot;thiết-kế-database&quot;&gt;&lt;a href=&quot;#thi%E1%BA%BFt-k%E1%BA%BF-database&quot; aria-label=&quot;thiết kế database permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Thiết kế database&lt;/h2&gt;
&lt;p&gt;Yêu cầu về database của chúng ta sẽ như sau:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Cần lưu hàng tỉ record&lt;/li&gt;
&lt;li&gt;Mỗi 1 object sẽ lưu càng nhỏ càng tốt (tầm dưới 1KB)&lt;/li&gt;
&lt;li&gt;Không cần mối quan hệ dữ liệu giữa các record.&lt;/li&gt;
&lt;li&gt;Hệ thống có tỉ lệ read khá cao&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Database schema:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Chúng ta sẽ cần 2 bảng chính: 1 bảng lưu thông tin người dùng, và 1 bảng lưu thông tin về URL.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 723px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/1a72ed8ad38f2e8a7e44f20a58eaa5c5/2979c/url-shortening-database-schema.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 37.75933609958506%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsSAAALEgHS3X78AAABLElEQVQY0z2Q2W7CUAxE7/9/FRI8kEVKBCF7CmRfBGSDBCKgp6StH6x77ZmxPcJ13SAI9vu9pmmyLB+PRyq2bXue936/kyRxHAfA4XDQdX29XtOlYlkWSAHIMAza9CRJ2m63YRieTqc4jl+vF2RwaIFRVZU3raIoyrKMokgAXSwW0FZ/AW0YhvP5/Hw+q6ryfZ/icrlUFAXO9Xq93W73+/1yuYiu6xj79QkkYbqfyPMc8qwCn1aaptQ3m03TNCzVtq1ABjLLk9mCDLTve2iPx2McR6BUYNLlwQzq2AFGsAaXmKa52+3IaHMbZlCfpglyXddIU+dsHvCBoYj6D5kGVQxgCwhz/idzF1YDIDOWGZzwOxlLuDPLMszgP/tBzIZx2GwE0ukneGAVMIZ/A9QHrDI6EaxDAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/1a72ed8ad38f2e8a7e44f20a58eaa5c5/01472/url-shortening-database-schema.webp 240w,
/static/1a72ed8ad38f2e8a7e44f20a58eaa5c5/222bd/url-shortening-database-schema.webp 480w,
/static/1a72ed8ad38f2e8a7e44f20a58eaa5c5/0fa27/url-shortening-database-schema.webp 723w&quot;
          sizes=&quot;(max-width: 723px) 100vw, 723px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/1a72ed8ad38f2e8a7e44f20a58eaa5c5/0783d/url-shortening-database-schema.png 240w,
/static/1a72ed8ad38f2e8a7e44f20a58eaa5c5/782f4/url-shortening-database-schema.png 480w,
/static/1a72ed8ad38f2e8a7e44f20a58eaa5c5/2979c/url-shortening-database-schema.png 723w&quot;
          sizes=&quot;(max-width: 723px) 100vw, 723px&quot;
          type=&quot;image/png&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/1a72ed8ad38f2e8a7e44f20a58eaa5c5/2979c/url-shortening-database-schema.png&quot;
          alt=&quot;url shortening database schema&quot;
          title=&quot;url shortening database schema&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Loại Database nào nên sử dụng?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Vì chúng ta đã dự đoán trước là sẽ lưu đến hàng tỉ record, hơn nữa các bảng không có mối quan hệ nào với nhau cả nên việc dùng loại NoSQL key-value có lẽ sẽ là lựa chọn tốt nhất. Ví dụ như DynamoDB, Cassandra mình thấy đều ok cả.&lt;/p&gt;
&lt;h2 id=&quot;thuật-toán-và-thiết-kế-hệ-thống-cơ-bản&quot;&gt;&lt;a href=&quot;#thu%E1%BA%ADt-to%C3%A1n-v%C3%A0-thi%E1%BA%BFt-k%E1%BA%BF-h%E1%BB%87-th%E1%BB%91ng-c%C6%A1-b%E1%BA%A3n&quot; aria-label=&quot;thuật toán và thiết kế hệ thống cơ bản permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Thuật toán và thiết kế hệ thống cơ bản&lt;/h2&gt;
&lt;p&gt;Vấn đề cần giải quyết ở đây là làm thế nào có thể tạo ra được 1 link rút gọn và nó duy nhất từ 1 link gốc.&lt;/p&gt;
&lt;p&gt;Trong phần đầu tiên mình đã lấy ra 1 ví dụ về link rút gọn: &lt;a href=&quot;http://bit.ly/2VXBAw4&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;http://bit.ly/2VXBAw4&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Thì phần này chúng ta sẽ đi thiết kể để tạo ra được phần rút gọn, chính là &lt;strong&gt;2VXBAw4.&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&quot;encoding-url&quot;&gt;&lt;a href=&quot;#encoding-url&quot; aria-label=&quot;encoding url permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Encoding URL&lt;/h3&gt;
&lt;p&gt;Chúng ta có thể sử dụng 1 số hàm băm (như MD5 hay SHA256) để băm giá trị đầu vào URL. Sau đó sẽ dùng 1 số hàm mã hoá để hiển thị. Ví dụ như base36 ([a-z, 0-9]), hoặc base62 ([a-z, A-Z, 0-9]) và base64 ([a-z, A-A, 0-9, -, .]).&lt;/p&gt;
&lt;p&gt;1 câu hỏi được đặt ra ở đây là chúng ta sẽ dùng độ dài key là bao nhiêu? 6,8 hay là 10?&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Nếu dùng base64 cho 6 kí tự thì tổng chúng ta có 64^6 = 68.7B URL&lt;/li&gt;
&lt;li&gt;Nếu dùng base64 cho 8 kí tự thì tổng chúng ta có 64^8 = 281 nghìn tỉ URL&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Do hệ thống của chúng ta có 500M URL được tạo ra mỗi tháng, hệ thống dùng trong 5 năm sẽ có tổng:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;500M * 12 months * 5 = 30B URLs / 5 years.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Do đó với 68.7B URL (với 6 kí tự) là có thể dùng được trong 5 năm rồi.&lt;/p&gt;
&lt;p&gt;Nếu chúng ta dùng thuật toán MD5 như hàm băm, thì khi đó nó sẽ tạo ra giá trị hash có chứa 128 bit. Sau đó base64 để encode giá trị băm, nó sẽ tạo ra ít nhất 21 kí tự (vì mỗi kí tự base64 sẽ encode 6 bits giá trị hash).&lt;/p&gt;
&lt;p&gt;Trong khi đó không gian khoá của chúng ta chỉ cần 6 kí tự thôi. Vậy làm thế nào có thể chọn ra khoá? Chúng ta có thể chọn ra 6 kí tự đầu tiên cũng được. Mặc dù có trường hợp nó trùng nhau. nhưng mà xác suất chỉ tầm 1/(64^6). Nó rất là nhỏ. Nên có thể chấp nhận được.&lt;/p&gt;
&lt;p&gt;Nếu an toàn thì mỗi lần generate ra thì sẽ check trong DB xem có hay chưa? Nếu chưa có thì ok, còn nếu có rồi thì sẽ thêm xâu random nào vào trước URL và lại lặp lại cho đến khi sinh ra unique thì thôi.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;※ Cách lấy 6 kí tự đầu tiên này chỉ là 1 giải pháp thôi nhé. Các bạn có thể tự cài đặt cho mình thuật toán khác, miễn nó sinh ra được 6 kí tự unique là được.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Đây là 1 ví dụ về trường hợp lấy 6 kí tự đầu tiên:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;const crypto = require(&amp;#39;crypto&amp;#39;);

module.exports = {
  generateShortURL: (longURL, startIndex, endIndex) =&amp;gt; {
    const hash = crypto.createHash(&amp;#39;md5&amp;#39;).update(longURL).digest(&amp;#39;base64&amp;#39;);
    return hash.substring(startIndex, endIndex + 1);
  },
};&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Giải pháp của chúng ta đang gặp vấn đề gì?&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Nhiều người dùng có thể cùng dùng chung 1 link gốc, do đó link rút gọn sẽ bị trùng lặp. Và điều này không thể chấp nhận được.&lt;/li&gt;
&lt;li&gt;Điều gì sẽ xảy ra nếu như 1 phần nào đó trong URL bị mã hoá. Ví dụ như &lt;a href=&quot;http://example.com/index.php?id=design&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;http://example.com/index.php?id=design&lt;/a&gt; và &lt;a href=&quot;http://example.com/index.php%3Fid%3Ddesign&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;http://example.com/index.php%3Fid%3Ddesign&lt;/a&gt; là 2 URL hoàn toàn giống nhau nhưng mà 1 phần URL đã bị mã hoá.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Giải quyết vấn đề trên như thế nào?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Có 2 cách tiếp cận có thể giải quyết được vấn đề này.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Chúng ta có thể sử dụng 1 số nguyên tăng dần và gắn vào đầu mỗi link gốc. Khi đó nó sẽ luôn đảm bảo link gốc của chúng ta là duy nhất, kể cả có nhiều người cùng điền vào 1 link duy nhất đi chăng nữa thì link rút gọn sẽ luôn khác nhau. Và sau khi tạo xong link rút gọn thì số nguyên này sẽ tăng thêm 1. Nhưng mà có 1 vấn đề là nếu tăng mãi thì có thể số nguyên này sẽ bị tràn số. Hơn nữa việc xử lý tăng dần này cũng ảnh hưởng đến hiệu suất của hệ thống.&lt;/li&gt;
&lt;li&gt;Cách khác là chúng ta có thể thêm user_id vào đầu mỗi URL. Tuy nhiên nếu người dùng chưa đăng nhập mà muốn tạo link rút gọn, khi đó chúng ta phải yêu cầu nhập vào 1 khoá nữa. Và khoá này phải duy nhất (Nếu khoá nhập vào không duy nhất sẽ yêu cầu nhập lại, đến khi nào duy nhất thì thôi).&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Và dưới đây sẽ là flow của hệ thống:&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 727px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/0c34729c79660a4db52e7255e49a91ff/9eebb/URL-shortening-service-flow.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 54.19532324621733%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAECBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAd1XAyg//8QAFxAAAwEAAAAAAAAAAAAAAAAAABARAf/aAAgBAQABBQKEIsX/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAXEAEAAwAAAAAAAAAAAAAAAAAAIDFR/9oACAEBAAY/Amrh/8QAGxAAAQQDAAAAAAAAAAAAAAAAAQAQEVEhMZH/2gAIAQEAAT8h6QK9kCs2czbf/9oADAMBAAIAAwAAABAwz//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABsQAQEAAgMBAAAAAAAAAAAAAAERACEQMVFh/9oACAEBAAE/EFvaKu3zIYn0WQwgli61wAyHfswAIAHzP//Z&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/0c34729c79660a4db52e7255e49a91ff/01472/URL-shortening-service-flow.webp 240w,
/static/0c34729c79660a4db52e7255e49a91ff/222bd/URL-shortening-service-flow.webp 480w,
/static/0c34729c79660a4db52e7255e49a91ff/5c4e9/URL-shortening-service-flow.webp 727w&quot;
          sizes=&quot;(max-width: 727px) 100vw, 727px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/0c34729c79660a4db52e7255e49a91ff/3bc27/URL-shortening-service-flow.jpg 240w,
/static/0c34729c79660a4db52e7255e49a91ff/98431/URL-shortening-service-flow.jpg 480w,
/static/0c34729c79660a4db52e7255e49a91ff/9eebb/URL-shortening-service-flow.jpg 727w&quot;
          sizes=&quot;(max-width: 727px) 100vw, 727px&quot;
          type=&quot;image/jpeg&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/0c34729c79660a4db52e7255e49a91ff/9eebb/URL-shortening-service-flow.jpg&quot;
          alt=&quot;URL shortening service flow&quot;
          title=&quot;URL shortening service flow&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Đầu tiên người dùng nhập link muốn rút gọn, và ấn Enter. Khi đó request sẽ được gửi đến Server.&lt;/p&gt;
&lt;p&gt;Ở Server sẽ nhận request và chuyển nó đến bộ phận chuyên xử lý việc rút gọn link. Mình gọi đó là Encoding Service đi.&lt;/p&gt;
&lt;p&gt;Encoding Service sẽ thực hiện xử lý rút gọn URL.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Nếu như URL đó chưa tồn tại trong hệ thống thì sẽ xử lý, lưu link đã rút gọn vào trong database đồng thời trả về cho server kết quả.&lt;/li&gt;
&lt;li&gt;Nếu như URL đó đã tồn tại trong hệ thống (tức là có ai đó đã sử dụng URL này rồi). Thì khi đó nó sẽ thêm 1 sequence (số nguyên tăng dần) vào đầu URL và thực hiện rút gọn link. Sau đó lưu link đã rút gọn vào trong database đồng thời trả kết qủa về cho server.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Phía Server nhận kết quả và sẽ trả về cho người dùng.&lt;/p&gt;
&lt;h2 id=&quot;data-partitioning-and-replication&quot;&gt;&lt;a href=&quot;#data-partitioning-and-replication&quot; aria-label=&quot;data partitioning and replication permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Data Partitioning and Replication&lt;/h2&gt;
&lt;p&gt;Nếu chúng ta lưu tất cả 30 tỉ URL vào trong DB, và có tới 20K request/s call vào DB. Thì khi đó có thể DB sẽ chịu tải khá lớn và dẫn đến down. Để giải quyết vấn đề này thì có 2 giải pháp:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Phân vùng dữ liệu trong database (Data Partitioning). Tức là chúng ta sẽ tách DB ra thành nhiều con DB khác nhau. Mỗi con sẽ chứa 1 phần dữ liệu.&lt;/li&gt;
&lt;li&gt;Cache lại URL nào mà hay gọi để giảm thiểu query đến DB (mình sẽ giải thích cái này trong phần tiếp theo)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Đối với Data Partitioning thì sẽ có 2 loại:&lt;/p&gt;
&lt;h3 id=&quot;range-based-partitioning&quot;&gt;&lt;a href=&quot;#range-based-partitioning&quot; aria-label=&quot;range based partitioning permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Range Based Partitioning&lt;/h3&gt;
&lt;p&gt;Loại phân vùng này sẽ dựa vào chữ cái đầu tiên trong URL hoặc hash key để phân chia dữ liệu.&lt;/p&gt;
&lt;p&gt;Ví dụ như những URL (bỏ qua phần https:// hay http://) mà bắt đầu bằng từ “a” thì sẽ cho vào DB loại “a”. Những URL nào bắt đầu bằng chữ “b” sẽ cho vào trong database loại “b”.&lt;/p&gt;
&lt;p&gt;Nếu như phân vùng dựa vào chữ cái đầu tiên này thì chúng ta sẽ cần 26 con database khác nhau (từ a -&gt; z)&lt;/p&gt;
&lt;p&gt;Nhưng mà giải pháp này có thể gặp vấn đề là giả sử chúng ta cho tất cả URL bắt đầu bằng chữ “f” vào trong database loại “f”. Nhưng chẳng may tất cả URL bắt đầu bằng chữ “f” này lại là những URL có access lớn nhất. Khi đó con DB loại “f” này lại chịu tải khá lớn.&lt;/p&gt;
&lt;p&gt;Chú ý: Kiểu phân vùng dựa vào chữ cái đầu tiên này chỉ là 1 ví dụ thôi nhé, các bạn có thể tự nghĩ ra thuật toán riêng cho mình để phân vùng dữ liệu cho hợp lí và hiệu quả. Chứ không nhất thiết cứ phải chọn chữ cái đầu tiên để phân vùng.&lt;/p&gt;
&lt;h3 id=&quot;hash-based-partitioning&quot;&gt;&lt;a href=&quot;#hash-based-partitioning&quot; aria-label=&quot;hash based partitioning permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Hash-Based Partitioning&lt;/h3&gt;
&lt;p&gt;Loại này chúng ta sẽ lấy giá trị hash của object đang được lưu trữ. Sau đó sẽ tính toán xem phân vùng nào sẽ được xử dụng dựa vào hàm băm. Chúng ta có thể lấy giá trị hash của primary key, hoặc là link gốc để xác định xem phân vùng nào sẽ được lưu trữ dữ liệu.&lt;/p&gt;
&lt;h2 id=&quot;cache&quot;&gt;&lt;a href=&quot;#cache&quot; aria-label=&quot;cache permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Cache&lt;/h2&gt;
&lt;p&gt;Đối với hệ thống hàng tỉ click mỗi tháng thì cache server là thứ không thể thiếu được.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Lí do tại sao chúng ta cần 1 cache server?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Flow chuẩn sẽ là:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Bước 1: người dùng accees đến link rút gọn&lt;/li&gt;
&lt;li&gt;Bước 2: chúng ta phải vào DB để lấy ra link gốc từ link rút gọn&lt;/li&gt;
&lt;li&gt;Bước 3: chuyển hướng người dùng đến link gốc.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Nếu không có cache server thì cứ mỗi lần như vậy sẽ phải vào trong DB để lấy kết quả. Và dẫn đến DB sẽ phải chịu tải khá lớn. Để giảm thiểu query đến DB, chúng ta sẽ cache lại kết quả truy vấn trước đó. Để từ lần sau nếu người dùng có truy cập vào link rút gọn thì lúc này chúng ta chỉ cần vào cache lấy ra là xong, mà không phải query vào DB để lấy kết quả nữa.&lt;/p&gt;
&lt;p&gt;Vì Cache Server sẽ luôn lưu dữ liệu trên memory. Nên so với việc lấy kết quả từ DB thì việc lấy kết quả từ memory sẽ nhanh hơn rất nhiều lần.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Chúng ta cần dùng Cache Server nào?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Hiện nay thì có rất nhiều cache server như Redis, Memcache. Mình thấy nó khá nổi tiếng và cũng đang được dùng khá rộng rãi trên các hệ thống lớn trên thế giới.&lt;/p&gt;
&lt;p&gt;Trước mình làm công ty về Game và hệ thống bên mình lúc đó dùng Redis và mình thấy nó khá ổn và support rất nhiều chức năng. Ví dụ như tự động xếp hạng ranking kết quả, có thể sync dữ liệu giữa memory và storage để phòng tránh mất dữ liệu…&lt;/p&gt;
&lt;p&gt;Nên nếu bạn nào chưa biết nên dùng cái nào thì mình khuyên nên tìm hiểu và implement thằng Redis này.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Chúng ta cần bao nhiêu GB memory?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Như phần trước mình đã tính toán là hệ thống này sẽ dùng đến 170GB memory để cache 20% URL. Mà hiện nay server có 256GB memory cũng khá nhiều nên thừa sức giải quyết vấn đề này.&lt;/p&gt;
&lt;p&gt;Ngoài ra chúng ta có thể tổ hợp nhiều server nhỏ (mỗi server có 8GB memory chẳng hạn) để cache các URL đó lại cũng được cả.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Nếu cache full thì làm thế nào?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Đa số hệ thống cache đều thực hiện theo 1 số cơ chế như LRU (Least Recently Used) hay LFU (Least Frequently Used).&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;LRU (Least Recently Used): bỏ đi các item trong cache ít được dùng gần đây nhất.&lt;/li&gt;
&lt;li&gt;LFU (Least Frequently Used): bỏ đi các item trong cache ít được sử dụng nhất.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Do có các cơ chế này nên cache sẽ luôn được làm mới để tránh việc dùng full.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Cơ chế hoạt động của Cache Server:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Mình sẽ giải thích qua về cơ chế của Cache Server nhé:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Đầu tiên người dùng access đến link rút gọn.&lt;/li&gt;
&lt;li&gt;Khi đó, application server sẽ check xem có kết quả ở trong cache không?&lt;/li&gt;
&lt;li&gt;Nếu kết quả không có trong cache, thì nó sẽ thực hiện truy vấn đến DB để lấy kết quả và trả về cho người dùng. Đồng thời update kết quả vào trong cache để phục vụ cho lần sau.&lt;/li&gt;
&lt;li&gt;Nếu kết quả có trong cache thì sẽ lấy luôn kết quả và trả về cho người dùng.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Các bạn thấy cơ chế khá đơn giản phải không nào.&lt;/p&gt;
&lt;h2 id=&quot;load-balancer&quot;&gt;&lt;a href=&quot;#load-balancer&quot; aria-label=&quot;load balancer permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Load Balancer&lt;/h2&gt;
&lt;p&gt;Với hệ thống nhiều access như hệ thống này thì 1 web server chưa chắc đã chịu tải được. Để giải quyết bài toán này thì mình sẽ dùng nhiều web server. Mỗi web server sẽ chịu 1 phần request từ người dùng.&lt;/p&gt;
&lt;p&gt;Câu hỏi đặt ra là làm thế nào có thể tự động phân request đến từng con web server khác nhau?&lt;/p&gt;
&lt;p&gt;Và Load Balancer đã ra đời để giải quyết vấn đề này.&lt;/p&gt;
&lt;p&gt;Ví dụ như dưới Load Balancer có 1 số con web server. Lần 1 request từ Client gửi đến Load Balancer sẽ được forward đến con web server 1. Lần 2 sẽ được gửi đến con web server 2 …&lt;/p&gt;
&lt;p&gt;Hiện nay 1 số nhà cung cấp server như AWS, Google hay Azure đều support Load Balancer cả. Nên các bạn không cần phải lo lắng về việc phải build 1 con load balancer. Chỉ việc cài đặt và dùng là xong.&lt;/p&gt;
&lt;h2 id=&quot;kiến-trúc-toàn-bộ-hệ-thống&quot;&gt;&lt;a href=&quot;#ki%E1%BA%BFn-tr%C3%BAc-to%C3%A0n-b%E1%BB%99-h%E1%BB%87-th%E1%BB%91ng&quot; aria-label=&quot;kiến trúc toàn bộ hệ thống permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Kiến trúc toàn bộ hệ thống&lt;/h2&gt;
&lt;p&gt;Sau khi đã hiểu qua hết các thành phần thì mình tổng hợp lại kiến trúc tổng thể của hệ thống như sau:&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 387px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/65cb9687acf2496b73949a2c7764fbfa/9bd11/URL-shortening-service-architecture.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 102.32558139534885%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGAABAQEBAQAAAAAAAAAAAAAAAAIEAwX/xAAWAQEBAQAAAAAAAAAAAAAAAAABAAL/2gAMAwEAAhADEAAAAfdi+CaQMZyxIs//xAAbEAACAgMBAAAAAAAAAAAAAAABAgADEBESQv/aAAgBAQABBQLkQBcNsLUxbHq+Vsef/8QAGhEAAgIDAAAAAAAAAAAAAAAAAAIQETEyQf/aAAgBAwEBPwG+Q+ouD//EABYRAAMAAAAAAAAAAAAAAAAAABEgQf/aAAgBAgEBPwEVP//EABsQAAICAwEAAAAAAAAAAAAAAAABEBEDEiIx/9oACAEBAAY/ApdK2dY9ZTtnp//EAB0QAQACAgIDAAAAAAAAAAAAAAEAESExQXEQUWH/2gAIAQEAAT8h+EQbvPuABRGhUaI8icrrw69S4AHTN0nPM//aAAwDAQACAAMAAAAQQMi//8QAFxEBAQEBAAAAAAAAAAAAAAAAAREAEP/aAAgBAwEBPxBA1xxZM7//xAAXEQEBAQEAAAAAAAAAAAAAAAABEBEx/9oACAECAQE/EBJjkJ//xAAeEAEAAwACAgMAAAAAAAAAAAABABEhMUEQUWFx0f/aAAgBAQABPxBe/ZvljwBofjmVoo+4JQFq1cV5mFQd+e/GztrpLa3SqCPeIt09T//Z&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/65cb9687acf2496b73949a2c7764fbfa/01472/URL-shortening-service-architecture.webp 240w,
/static/65cb9687acf2496b73949a2c7764fbfa/ef7d4/URL-shortening-service-architecture.webp 387w&quot;
          sizes=&quot;(max-width: 387px) 100vw, 387px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/65cb9687acf2496b73949a2c7764fbfa/3bc27/URL-shortening-service-architecture.jpg 240w,
/static/65cb9687acf2496b73949a2c7764fbfa/9bd11/URL-shortening-service-architecture.jpg 387w&quot;
          sizes=&quot;(max-width: 387px) 100vw, 387px&quot;
          type=&quot;image/jpeg&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/65cb9687acf2496b73949a2c7764fbfa/9bd11/URL-shortening-service-architecture.jpg&quot;
          alt=&quot;URL shortening service architecture.jpg&quot;
          title=&quot;URL shortening service architecture.jpg&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2 id=&quot;kết-luận&quot;&gt;&lt;a href=&quot;#k%E1%BA%BFt-lu%E1%BA%ADn&quot; aria-label=&quot;kết luận permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Kết luận&lt;/h2&gt;
&lt;p&gt;Đọc qua bài này chắc hẳn các bạn cũng có 1 chút tư duy trong việc thiết kế hệ thống lớn phục vụ hàng triệu người dùng nó như thế nào rồi phải không?&lt;/p&gt;
&lt;p&gt;Sau khi đã có tư duy rồi thì mình nghĩ nếu gặp phải 1 hệ thống tương tự như thế thì các bạn cũng thừa sức để giải quyết. Nếu gặp khách hàng thì có thể chém ra bão ra gió được. :D&lt;/p&gt;
&lt;p&gt;Vì nhiều bạn mới ra trường hay những bạn chưa từng làm trong các hệ thống lớn chắc chưa hình dung được nên bắt đầu từ đâu, nên sử dụng công nghệ nào. Thì qua bài này hi vọng sẽ giúp các bạn giải đáp những thắc mắc đó.&lt;/p&gt;
&lt;p&gt;==============&lt;/p&gt;
&lt;p&gt;Để nhận thông báo khi có bài viết mới nhất thì các bạn có thể like fanpage của mình ở bên dưới nhé:&lt;/p&gt;
&lt;p&gt;→→→ &lt;a href=&quot;https://www.facebook.com/669339543503374&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Nghệ thuật Coding Fanpage Facebook&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Chúc các bạn 1 tuần thật vui vẻ.&lt;/p&gt;
&lt;p&gt;Tham khảo:&lt;br&gt;
&lt;a href=&quot;https://www.youtube.com/watch?v=JQDHz72OA3c&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;https://www.youtube.com/watch?v=JQDHz72OA3c&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;https://medium.com/@adhasmana/system-design-create-a-url-shortening-service-part-1-overview-26aae5597914&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;https://medium.com/@adhasmana/system-design-create-a-url-shortening-service-part-1-overview-26aae5597914&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://blog.gainlo.co/index.php/2016/03/08/system-design-interview-question-create-tinyurl-system/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;http://blog.gainlo.co/index.php/2016/03/08/system-design-interview-question-create-tinyurl-system/&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;https://www.hiredintech.com/classrooms/system-design/lesson/55&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;https://www.hiredintech.com/classrooms/system-design/lesson/55&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;https://www.geeksforgeeks.org/how-to-design-a-tiny-url-or-url-shortener/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;https://www.geeksforgeeks.org/how-to-design-a-tiny-url-or-url-shortener/&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;https://www.educative.io/collection/page/5668639101419520/5649050225344512/566860091647590&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;https://www.educative.io/collection/page/5668639101419520/5649050225344512/566860091647590&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;https://www.quora.com/What-is-the-architecture-of-a-scalable-URL-shortener&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;https://www.quora.com/What-is-the-architecture-of-a-scalable-URL-shortener&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Tại sao Google lại tìm kiếm rất nhanh?]]></title><link>https://nghethuatcoding.com2019/05/12/tai-sao-google-lai-tim-kiem-rat-nhanh/</link><guid isPermaLink="false">https://nghethuatcoding.com2019/05/12/tai-sao-google-lai-tim-kiem-rat-nhanh/</guid><pubDate>Sun, 12 May 2019 08:31:36 GMT</pubDate><content:encoded>&lt;p&gt;Vào thời đại công nghệ như ngày nay thì việc tìm kiếm thông tin cũng trở nên rất quan trọng. Thử hỏi nếu 1 ngày Google không hoạt động thì thế giới sẽ như thế nào nhỉ? Chắc mình sẽ bị rơi vào thời kì đồ đá mất.&lt;/p&gt;
&lt;p&gt;Dùng nhiều Google nhưng nhiều lúc băn khoăn không biết vì sao Google lại tìm kiếm cho ra kết qủa nhanh như vậy.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 912px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/9f0ac56a7fc9b26622c6e28300018bcc/c07e5/27acba5da952124231e3c88693347db9.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 64.03508771929825%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAABuklEQVQoz21SiXLaMBDl/78rM6WZNpCm2MngA7CFMPjQLVmH3QUHSNK88chPu3p+a+3OnPWM1LytvfOMMSEErFLKEMIwDOEDYOdc0H3w18jMu9AcEa2PQxhAxiglhMA7+NuZMF4AxPa9NjYMU2CcjVdQPbTKa2OMdbq3ypj+CigBDkzcWjtcP3cWTzkrpNhtNSovT2EOeLzEz+kzxgCiIYwQ+99ZS7nLsiLPt1m6SRLghwNGCMEtXPJD8Do4NfGvzpTSX7+fls9/VlH8/PISxXGSJIvFAmNMKFksnx7nDz/nD/PHH1V1mFR3cdd1q9XfdbKO4ziKouVyEUUrINkmA/PdFkrJAWmaUkbv4gmCi/rUCCE5E5xLKRSjQASl/HbhX3AXS9XvULevaLHvtmVb1axABCIIc6X8xeq9xmn9JHbeScO5YlxRoZk0ArbCcGM1tMcYrc9tNEqp8LFV72I3EGI5d5RaIEJ4WLvONo0h1MAgOufB03v/jbNU6i1N37I0StavaZJs8nWev6Zpviswpvs9qSoGtmD+zT/D7KCyLsu6qlqE6rI4Ydycji3GbdPItpXn6XLWOXeT/AOpiecLvCIXaAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/9f0ac56a7fc9b26622c6e28300018bcc/01472/27acba5da952124231e3c88693347db9.webp 240w,
/static/9f0ac56a7fc9b26622c6e28300018bcc/222bd/27acba5da952124231e3c88693347db9.webp 480w,
/static/9f0ac56a7fc9b26622c6e28300018bcc/52483/27acba5da952124231e3c88693347db9.webp 912w&quot;
          sizes=&quot;(max-width: 912px) 100vw, 912px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/9f0ac56a7fc9b26622c6e28300018bcc/0783d/27acba5da952124231e3c88693347db9.png 240w,
/static/9f0ac56a7fc9b26622c6e28300018bcc/782f4/27acba5da952124231e3c88693347db9.png 480w,
/static/9f0ac56a7fc9b26622c6e28300018bcc/c07e5/27acba5da952124231e3c88693347db9.png 912w&quot;
          sizes=&quot;(max-width: 912px) 100vw, 912px&quot;
          type=&quot;image/png&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/9f0ac56a7fc9b26622c6e28300018bcc/c07e5/27acba5da952124231e3c88693347db9.png&quot;
          alt=&quot;kết qủa tìm kiếm Google&quot;
          title=&quot;kết qủa tìm kiếm Google&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Chỉ với từ khoá ”&lt;strong&gt;lập trình hướng đối tượng&lt;/strong&gt;” mà Google trả về trong 0.42 giây trong tổng 60 triệu kết quả. Quá nhanh.&lt;/p&gt;
&lt;p&gt;Không chỉ tốc độ trả về nhanh mà kết quả trả về cũng khá gần với mục đích tìm kiếm của người dùng nên Google đã trở thành 1 trong những công cụ có lẽ mạnh nhất trên thế giới.&lt;/p&gt;
&lt;p&gt;Vậy cùng nhau tìm hiểu xem vì sao Google lại trả về kết quả nhanh đến như vậy nhé.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Mục đích của bài viết:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Giúp các bạn có cái nhìn chung về 1 công cụ tìm kiếm nó gồm những bộ phận nào, vì sao nó hoạt động lại nhanh đến như vậy.&lt;/li&gt;
&lt;li&gt;Bài viết sẽ không giải thích sâu về từng bộ phận, mà chỉ nói qua về từng bộ phận để ai cũng có thể hiểu được.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;kiến-trúc-search-engine&quot;&gt;&lt;a href=&quot;#ki%E1%BA%BFn-tr%C3%BAc-search-engine&quot; aria-label=&quot;kiến trúc search engine permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Kiến trúc Search Engine&lt;/h2&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 750px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/e3e7afbc9f8ab9b7cd119cc4672b2817/a66cd/85cf746fbcea6352cec0f8cd90d5b46c.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 42%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAIABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAMF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAd2Qlwv/xAAYEAACAwAAAAAAAAAAAAAAAAAAAQIQEf/aAAgBAQABBQJkdr//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAWEAADAAAAAAAAAAAAAAAAAAAAECH/2gAIAQEABj8CKv/EABgQAAMBAQAAAAAAAAAAAAAAAAABESGB/9oACAEBAAE/IQ9uEumn/9oADAMBAAIAAwAAABCED//EABURAQEAAAAAAAAAAAAAAAAAABAR/9oACAEDAQE/EIf/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAbEAEBAAIDAQAAAAAAAAAAAAABEQBBIVGRof/aAAgBAQABPxBskIu2Yhojw7HmD0+5/9k=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/e3e7afbc9f8ab9b7cd119cc4672b2817/01472/85cf746fbcea6352cec0f8cd90d5b46c.webp 240w,
/static/e3e7afbc9f8ab9b7cd119cc4672b2817/222bd/85cf746fbcea6352cec0f8cd90d5b46c.webp 480w,
/static/e3e7afbc9f8ab9b7cd119cc4672b2817/41df4/85cf746fbcea6352cec0f8cd90d5b46c.webp 750w&quot;
          sizes=&quot;(max-width: 750px) 100vw, 750px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/e3e7afbc9f8ab9b7cd119cc4672b2817/3bc27/85cf746fbcea6352cec0f8cd90d5b46c.jpg 240w,
/static/e3e7afbc9f8ab9b7cd119cc4672b2817/98431/85cf746fbcea6352cec0f8cd90d5b46c.jpg 480w,
/static/e3e7afbc9f8ab9b7cd119cc4672b2817/a66cd/85cf746fbcea6352cec0f8cd90d5b46c.jpg 750w&quot;
          sizes=&quot;(max-width: 750px) 100vw, 750px&quot;
          type=&quot;image/jpeg&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/e3e7afbc9f8ab9b7cd119cc4672b2817/a66cd/85cf746fbcea6352cec0f8cd90d5b46c.jpg&quot;
          alt=&quot;kiến trúc Search Engine&quot;
          title=&quot;kiến trúc Search Engine&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Search Engine&lt;/strong&gt; gồm 3 bộ phận chính. Đó là &lt;strong&gt;Search Server&lt;/strong&gt;, &lt;strong&gt;Index&lt;/strong&gt;, &lt;strong&gt;Search Backend&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Trong đó:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Search Server&lt;/strong&gt; đảm nhiệm việc trả về kết quả tìm kiếm cho người dùng.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Seach Backend&lt;/strong&gt; đảm nhiệm việc thu thập thông tin toàn bộ website trên toàn thế giới.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Index&lt;/strong&gt; giống như 1 cơ sở dữ liệu được sử dụng bởi &lt;strong&gt;Search Server&lt;/strong&gt; và &lt;strong&gt;Search Backend&lt;/strong&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Nhiệm vụ chính của &lt;strong&gt;Search Server&lt;/strong&gt; là trả về kết quả tìm kiếm của người dùng &lt;strong&gt;nhanh nhất có thể&lt;/strong&gt;. Bởi vì nếu không trả về ngay lập tức mà mất 10s, 1 phút, 2 phút mới trả về kết quả thì quả thực sẽ không thể trở thành 1 công cụ tìm kiếm được. Do đó Search Server sẽ được thiết kế để trả về kết quả nhanh nhất có thể.&lt;/p&gt;
&lt;p&gt;Mặt khác, nhiệm vụ của &lt;strong&gt;Search Backend&lt;/strong&gt; thì khác hoàn toàn với Search Server. Cho dù xử lí mất 5p, 10p hay 1 tiếng đi chăng nữa thì cũng không thành vấn đề. Miễn là nó thu thập dữ liệu từ toàn bộ website trên toàn thế giới và tạo ra Index mà Search Server dễ dùng là được.&lt;/p&gt;
&lt;p&gt;Nhiệm vụ chính của thằng &lt;strong&gt;Index&lt;/strong&gt; là lưu thông tin toàn bộ dữ liệu đã được thu thập từ Search Backend. Khi người dùng tìm kiếm, Search Server chỉ cần tìm trong Index và trả về kết quả là xong. Chứ không phải lúc đó mới bắt đầu đi thu thập dữ liệu và trả về đâu nhé.&lt;/p&gt;
&lt;p&gt;Ví dụ như khi tìm kiếm với từ khoá “lập trình” thì khi đó từ khoá “lập trình” đã có sẵn trong Database (hay là Index) của Google rồi. Và nó chỉ trả về kết quả là xong.&lt;/p&gt;
&lt;p&gt;Chính vì điều đó mà khiến cho Search Server luôn trả về kết quả ngay tức khắc là vì thế.&lt;/p&gt;
&lt;p&gt;Đến đây ít nhiều chúng ta cũng đã hiểu được vì sao Google lại hoạt động nhanh đến thế. Vậy chúng ta thử đi tìm hiểu xem cụ thể bên trong nó hoạt động như nào nhé.&lt;/p&gt;
&lt;h2 id=&quot;search-server-thì-tốc-độ-là-số-1&quot;&gt;&lt;a href=&quot;#search-server-th%C3%AC-t%E1%BB%91c-%C4%91%E1%BB%99-l%C3%A0-s%E1%BB%91-1&quot; aria-label=&quot;search server thì tốc độ là số 1 permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Search Server thì tốc độ là số 1&lt;/h2&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 750px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/7835460ffe73b2463a919e371951fd1b/a66cd/c73522c82d3d238921116e7afce8afc9.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 42%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAIABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAIDBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHciJYF/8QAFhAAAwAAAAAAAAAAAAAAAAAAABAh/9oACAEBAAEFAir/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAXEAADAQAAAAAAAAAAAAAAAAAAARAh/9oACAEBAAY/AjVP/8QAGhAAAwADAQAAAAAAAAAAAAAAAAERITFBYf/aAAgBAQABPyG8jEocN4gl6z//2gAMAwEAAgADAAAAEHwP/8QAFhEAAwAAAAAAAAAAAAAAAAAAEBEh/9oACAEDAQE/EFR//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAHBABAAIBBQAAAAAAAAAAAAAAAQARITFBUWGx/9oACAEBAAE/EM2ypuhUUwXk6dxaPef/2Q==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/7835460ffe73b2463a919e371951fd1b/01472/c73522c82d3d238921116e7afce8afc9.webp 240w,
/static/7835460ffe73b2463a919e371951fd1b/222bd/c73522c82d3d238921116e7afce8afc9.webp 480w,
/static/7835460ffe73b2463a919e371951fd1b/41df4/c73522c82d3d238921116e7afce8afc9.webp 750w&quot;
          sizes=&quot;(max-width: 750px) 100vw, 750px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/7835460ffe73b2463a919e371951fd1b/3bc27/c73522c82d3d238921116e7afce8afc9.jpg 240w,
/static/7835460ffe73b2463a919e371951fd1b/98431/c73522c82d3d238921116e7afce8afc9.jpg 480w,
/static/7835460ffe73b2463a919e371951fd1b/a66cd/c73522c82d3d238921116e7afce8afc9.jpg 750w&quot;
          sizes=&quot;(max-width: 750px) 100vw, 750px&quot;
          type=&quot;image/jpeg&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/7835460ffe73b2463a919e371951fd1b/a66cd/c73522c82d3d238921116e7afce8afc9.jpg&quot;
          alt=&quot;kết quả tìm kiếm&quot;
          title=&quot;kết quả tìm kiếm&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Bây giờ chúng ta thử tìm hiểu xem Search Server hoạt động thế nào nhé.&lt;/p&gt;
&lt;p&gt;Về cơ bản thì Search Server nó cũng không khác gì Web Server cả. Nó chủ yếu đảm nhiệm những nhiệm vụ chính sau:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Quản lí truyền thông với người dùng&lt;/li&gt;
&lt;li&gt;Phân tích request từ người dùng&lt;/li&gt;
&lt;li&gt;Tìm kiếm thông tin cần thiết từ Index&lt;/li&gt;
&lt;li&gt;Trả kết quả về cho người dùng&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Quay lại với ví dụ bên trên, giả sử như người dùng tìm kiếm với từ khoá “lập trình”. Khi đó lúc này ở Index đã thực sự có kết quả về “lập trình” rồi. Và Search Server chỉ cần lấy kết quả từ Index trả về cho người dùng là xong nhiệm vụ.&lt;/p&gt;
&lt;p&gt;Trong trường hợp mà Index không có kết quả nào, thì khi đó Search Search trả về kết quả là “Hiện tại không tìm thấy kết quả nào” đến cho người dùng.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Do đó việc tổ chức dữ liệu trong Index để làm sao mà Search Server có thể lấy nhanh nhất là 1 điều vô cùng quan trọng.&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&quot;search-backend-luôn-chuẩn-bị-trước-dữ-liệu&quot;&gt;&lt;a href=&quot;#search-backend-lu%C3%B4n-chu%E1%BA%A9n-b%E1%BB%8B-tr%C6%B0%E1%BB%9Bc-d%E1%BB%AF-li%E1%BB%87u&quot; aria-label=&quot;search backend luôn chuẩn bị trước dữ liệu permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Search Backend luôn chuẩn bị trước dữ liệu&lt;/h2&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 750px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/0cc054e7050b15a3a81a06719bffecd5/a66cd/40bcf91e3699e02ce22e7f9308f12bad.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 46.800000000000004%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAJABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAIBAwX/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAAB1mdUtJF//8QAGhAAAQUBAAAAAAAAAAAAAAAAAQACEBESIf/aAAgBAQABBQLRJ7SdP//EABURAQEAAAAAAAAAAAAAAAAAAAEQ/9oACAEDAQE/ASf/xAAVEQEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAgEBPwFn/8QAFxAAAwEAAAAAAAAAAAAAAAAAAAFhIP/aAAgBAQAGPwJqlz//xAAaEAEAAwADAAAAAAAAAAAAAAABABEhEDFR/9oACAEBAAE/IR4wERwpgutnYnnH/9oADAMBAAIAAwAAABAbz//EABYRAQEBAAAAAAAAAAAAAAAAAAEREP/aAAgBAwEBPxAIRbn/xAAXEQEAAwAAAAAAAAAAAAAAAAABEBEh/9oACAECAQE/EFbkf//EABwQAAIBBQEAAAAAAAAAAAAAAAERABAxQXGxIf/aAAgBAQABPxBgoAQwIjw2KJN9wFZZndyG256Kf//Z&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/0cc054e7050b15a3a81a06719bffecd5/01472/40bcf91e3699e02ce22e7f9308f12bad.webp 240w,
/static/0cc054e7050b15a3a81a06719bffecd5/222bd/40bcf91e3699e02ce22e7f9308f12bad.webp 480w,
/static/0cc054e7050b15a3a81a06719bffecd5/41df4/40bcf91e3699e02ce22e7f9308f12bad.webp 750w&quot;
          sizes=&quot;(max-width: 750px) 100vw, 750px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/0cc054e7050b15a3a81a06719bffecd5/3bc27/40bcf91e3699e02ce22e7f9308f12bad.jpg 240w,
/static/0cc054e7050b15a3a81a06719bffecd5/98431/40bcf91e3699e02ce22e7f9308f12bad.jpg 480w,
/static/0cc054e7050b15a3a81a06719bffecd5/a66cd/40bcf91e3699e02ce22e7f9308f12bad.jpg 750w&quot;
          sizes=&quot;(max-width: 750px) 100vw, 750px&quot;
          type=&quot;image/jpeg&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/0cc054e7050b15a3a81a06719bffecd5/a66cd/40bcf91e3699e02ce22e7f9308f12bad.jpg&quot;
          alt=&quot;nhiệm vụ Search Backend&quot;
          title=&quot;nhiệm vụ Search Backend&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;So với Search Server thì Search Backend quả thực nó phức tạp hơn rất nhiều. Về cơ bản Search Backend sẽ bao gồm 2 thành phần chính đó là ”&lt;strong&gt;Crawling&lt;/strong&gt;” và ”&lt;strong&gt;Tạo Index&lt;/strong&gt;“.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Crawling&lt;/strong&gt; là có nhiệm vụ đi thu thập toàn bộ trang web trên toàn thế giới về để xử lý. Vì công việc này vô cùng mất thời gian nên nó đã phân tách ra thành nhiều bộ phận con hơn để xử lý, đó là &lt;strong&gt;Crawler&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Hiện nay trên toàn thế giới chắc phải có đến tỉ tỉ website mất. Vậy mà Google đi thu thập từng đó website về để phục vụ cho người dùng thì quả thực quá kinh khủng.&lt;/p&gt;
&lt;p&gt;Nhưng vì quá trình crawl, thu thập đến việc tạo Index là vô cùng mất thời gian. Nên bạn nào có blog riêng mà sau khi viết bài xong, search trên Google nó không ra là vì thế. Phải đợi Google crawl đến trang web của mình thì lúc đó các bạn search trên Google mới ra được.&lt;/p&gt;
&lt;p&gt;Những trang web mà Crawler thu thập sẽ lưu tạm thời vào 1 nơi giống như cơ sở dữ liệu, cái này được gọi là Repository (kho).&lt;/p&gt;
&lt;p&gt;Bộ phận tạo Index (Index Creation) sẽ lấy trang web từ Repository ra để phân tích, xử lý và cuối cùng là tạo ra Index để cho Search Server dùng.&lt;/p&gt;
&lt;p&gt;Đối với Search Engine thì đây là 1 công việc &lt;strong&gt;vô cùng vô cùng mất thời gian&lt;/strong&gt;. Chính vì luôn có thằng tạo trước dữ liệu như vậy mà đã làm cho Google luôn trả về kết quả ngay như tức thì.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Vậy khi nào thì Google sẽ crawl trang web của mình?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Với trang web nào nhiều người yêu thích, nội dung chất lượng thì luôn luôn được ưu tiên crawl trước. Những trang web nào nội dung kém chất lượng thì sẽ mất tầm 3 đến 1 tuần mới được crawl.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Làm thế nào để thúc Google crawl trang của mình?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Google cung cấp &lt;a href=&quot;https://search.google.com/search-console/welcome&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;1 trang&lt;/a&gt; để gửi yêu cầu thực hiện crawl. Chỉ cần vào đó đăng kí tên website, gửi nội dung trang muốn crawl là được. Còn nếu không thực hiện thì mình khẳng định sẽ mất tầm từ 3 đến 7 ngày mới được crawl.&lt;/p&gt;
&lt;h2 id=&quot;index-là-linh-hồn-của-việc-tìm-kiếm&quot;&gt;&lt;a href=&quot;#index-l%C3%A0-linh-h%E1%BB%93n-c%E1%BB%A7a-vi%E1%BB%87c-t%C3%ACm-ki%E1%BA%BFm&quot; aria-label=&quot;index là linh hồn của việc tìm kiếm permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Index là linh hồn của việc tìm kiếm&lt;/h2&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 584px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/4acac60164f94c73dba46b15454186bd/45bb0/f1ea99f1e54846ce5fb7f83b19a3651b.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 60.1027397260274%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAIDBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAdtKKUAP/8QAGBABAQADAAAAAAAAAAAAAAAAAQACERL/2gAIAQEAAQUCW6QnEgtF/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFxAAAwEAAAAAAAAAAAAAAAAAABAxEf/aAAgBAQAGPwIi1Q//xAAcEAEBAAEFAQAAAAAAAAAAAAABACERMWFxgZH/2gAIAQEAAT8hcUxGoI8hxdhG73E+X//aAAwDAQACAAMAAAAQ0A//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAcEAEAAgMAAwAAAAAAAAAAAAABABEhUWGR8PH/2gAIAQEAAT8QoOivSIe4pa7GcvLi+xi0Ta5bZJrc+Kn/2Q==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/4acac60164f94c73dba46b15454186bd/01472/f1ea99f1e54846ce5fb7f83b19a3651b.webp 240w,
/static/4acac60164f94c73dba46b15454186bd/222bd/f1ea99f1e54846ce5fb7f83b19a3651b.webp 480w,
/static/4acac60164f94c73dba46b15454186bd/d0231/f1ea99f1e54846ce5fb7f83b19a3651b.webp 584w&quot;
          sizes=&quot;(max-width: 584px) 100vw, 584px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/4acac60164f94c73dba46b15454186bd/3bc27/f1ea99f1e54846ce5fb7f83b19a3651b.jpg 240w,
/static/4acac60164f94c73dba46b15454186bd/98431/f1ea99f1e54846ce5fb7f83b19a3651b.jpg 480w,
/static/4acac60164f94c73dba46b15454186bd/45bb0/f1ea99f1e54846ce5fb7f83b19a3651b.jpg 584w&quot;
          sizes=&quot;(max-width: 584px) 100vw, 584px&quot;
          type=&quot;image/jpeg&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/4acac60164f94c73dba46b15454186bd/45bb0/f1ea99f1e54846ce5fb7f83b19a3651b.jpg&quot;
          alt=&quot;nhiệm vụ Index&quot;
          title=&quot;nhiệm vụ Index&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Nhiệm vụ chính của Index là lưu dữ liệu 1 cách an toàn và giúp Search Server trả về kết quả nhanh nhất có thể. Để dễ hình dùng thì chúng ta có thể xem Index như là 1 Database.&lt;/p&gt;
&lt;p&gt;Trong Index có rất nhiều thông tin, phù hợp với nhiều mục đích tìm kiếm khác nhau.&lt;/p&gt;
&lt;p&gt;Ở trong 1 Search Engine thì Index chính là 1 “cấu trúc dữ liệu” mà chỉ có Search Engine mới có thể hiểu được.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Nên việc thiết kế Index như nào, tổ chức dữ liệu ra sao để cho Search Server có thể query và trả về kết quả nhanh nhất có thể là điều vô cùng quan trọng. Và bài hôm nay mình sẽ không đi sâu vào giải thích cách tổ chức dữ liệu của Index nữa. Vì như thế có thể sẽ rất dài và càng làm cho bài viết trở nên phức tạp.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Nên tạm thời mình sẽ dừng ở đây.&lt;/p&gt;
&lt;h2 id=&quot;tổng-kết&quot;&gt;&lt;a href=&quot;#t%E1%BB%95ng-k%E1%BA%BFt&quot; aria-label=&quot;tổng kết permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Tổng kết&lt;/h2&gt;
&lt;p&gt;1 Search Engine sẽ bao gồm 3 bộ phận sau:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;**Search Server: **nhận yêu cầu từ người dùng, truy vấn trong Index để lấy kết quả và trả kết quả về cho người dùng.&lt;/li&gt;
&lt;li&gt;**Search Backend: **Có nhiệm vụ đi thu thập thông tin của toàn bộ trang web trên toàn thế giới, phân tích, xử lý và tạo ra Index để dùng cho Search Server. Search Backend này hoạt động 24/24 không ngừng nghỉ.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Index&lt;/strong&gt; giống như 1 database được tổ chức dữ liệu hợp lý giúp cho Search Server có thể truy vấn 1 cách nhanh nhất có thể.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Các bạn thấy thế nào? Đã hình dung được tại sao mà Google luôn trả về kết quả nhanh như vậy chưa ak?&lt;/p&gt;
&lt;p&gt;Mặc dù bài viết này không giúp các bạn tạo ra được 1 Search Engine nhưng ít nhiều cũng giúp các bạn có 1 chút hình dung Search Engine nó làm việc như thế nào.&lt;/p&gt;
&lt;p&gt;Và đây là quyển mình đã tham khảo. Mình tìm mãi không thấy quyển tiếng anh đâu. Nên nếu ai biết tiếng nhật thì mình khuyên nên đọc quyển này. Theo mình cảm nhận khá là hay. Từ việc Search Engine làm việc thế nào cho đến việc tổ chức lưu dữ liệu ra sao, tối ưu server thế nào để cho chi phí vận hành là thấp nhất…&lt;/p&gt;
&lt;p&gt;Nói chung là khá hay. Đọc để biết thêm thông tin. Sau khi có thông tin rồi thì đi chém mới ra gió ra bão được. :D&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 960px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/ea93fdf42e44c9015e8b44b1688dbf2f/c2b56/IMG_3615.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 133.33333333333331%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAbABQDASIAAhEBAxEB/8QAGQAAAwEBAQAAAAAAAAAAAAAAAAIEAQMF/8QAFgEBAQEAAAAAAAAAAAAAAAAAAgAB/9oADAMBAAIQAxAAAAGxKVyjKArw8sxniOZf/8QAGhAAAgIDAAAAAAAAAAAAAAAAAQIAAxESE//aAAgBAQABBQI1qZyQmypQxyZoTLBg9Xy1jiVsSvNZopmgE//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8BH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8BH//EABwQAAIBBQEAAAAAAAAAAAAAAAABIRARMTKRIv/aAAgBAQAGPwKWy3oggm1Nn02fSWYMU//EAB0QAAMAAgIDAAAAAAAAAAAAAAABESExQYFRcaH/2gAIAQEAAT8hw3RFdKPZI1J5FlSSOc+haUtQky5wwE/Nrd5Y8uI946SU7P/aAAwDAQACAAMAAAAQb8Ez/8QAGBEAAgMAAAAAAAAAAAAAAAAAAAEQETH/2gAIAQMBAT8QFkWf/8QAFxEBAQEBAAAAAAAAAAAAAAAAEQABEP/aAAgBAgEBPxAtXhl//8QAHhABAAMAAgIDAAAAAAAAAAAAAQARITFRQXFhkaH/2gAIAQEAAT8QAUB2gd+oMY4W12eHMdT+xgVTbu+PiC7pLolq8+YD6A19sVRDHKAQ994ULUteiaW99TcJTLthaWOhT//Z&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/ea93fdf42e44c9015e8b44b1688dbf2f/01472/IMG_3615.webp 240w,
/static/ea93fdf42e44c9015e8b44b1688dbf2f/222bd/IMG_3615.webp 480w,
/static/ea93fdf42e44c9015e8b44b1688dbf2f/620b9/IMG_3615.webp 960w,
/static/ea93fdf42e44c9015e8b44b1688dbf2f/28063/IMG_3615.webp 1440w,
/static/ea93fdf42e44c9015e8b44b1688dbf2f/34ef4/IMG_3615.webp 1920w,
/static/ea93fdf42e44c9015e8b44b1688dbf2f/b107b/IMG_3615.webp 3024w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/ea93fdf42e44c9015e8b44b1688dbf2f/3bc27/IMG_3615.jpg 240w,
/static/ea93fdf42e44c9015e8b44b1688dbf2f/98431/IMG_3615.jpg 480w,
/static/ea93fdf42e44c9015e8b44b1688dbf2f/b3ee8/IMG_3615.jpg 960w,
/static/ea93fdf42e44c9015e8b44b1688dbf2f/b97fe/IMG_3615.jpg 1440w,
/static/ea93fdf42e44c9015e8b44b1688dbf2f/fb329/IMG_3615.jpg 1920w,
/static/ea93fdf42e44c9015e8b44b1688dbf2f/c2b56/IMG_3615.jpg 3024w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/jpeg&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/ea93fdf42e44c9015e8b44b1688dbf2f/b3ee8/IMG_3615.jpg&quot;
          alt=&quot;Sách về Search Engine Google&quot;
          title=&quot;Sách về Search Engine Google&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;==============&lt;/p&gt;
&lt;p&gt;Để nhận thông báo khi có bài viết mới nhất thì các bạn có thể like fanpage của mình ở bên dưới nhé:&lt;/p&gt;
&lt;p&gt;👉&lt;a href=&quot;https://www.facebook.com/669339543503374&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Nghệ thuật Coding Fanpage Facebook&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Chúc các bạn 1 tuần thật vui vẻ.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[8 tips giúp tăng hiệu suất làm việc trên Github]]></title><link>https://nghethuatcoding.com2019/05/10/8-tips-giup-tang-hieu-nang-lam-viec-tren-github/</link><guid isPermaLink="false">https://nghethuatcoding.com2019/05/10/8-tips-giup-tang-hieu-nang-lam-viec-tren-github/</guid><pubDate>Thu, 09 May 2019 22:00:51 GMT</pubDate><content:encoded>&lt;p&gt;Chắc hẳn ai trong số chúng ta cũng đã từng làm việc với Github. Nhưng ít ai biết đến các phím tắt cũng như 1 số tính năng giúp làm việc hiệu quả hơn.&lt;/p&gt;
&lt;p&gt;Nào cùng xem đó là những phím tắt nào nhé.&lt;/p&gt;
&lt;h2 id=&quot;tìm-kiếm-file-nhanh-trong-repository&quot;&gt;&lt;a href=&quot;#t%C3%ACm-ki%E1%BA%BFm-file-nhanh-trong-repository&quot; aria-label=&quot;tìm kiếm file nhanh trong repository permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Tìm kiếm file nhanh trong Repository&lt;/h2&gt;
&lt;p&gt;Đây là 1 trong những phím tắt mà mình thấy hay và tiện lợi nhất trên Github. Nó có thể giúp ta tìm kiếm bất kì file nào trong Repository 1 cách nhanh chóng.&lt;/p&gt;
&lt;p&gt;Đầu tiên bạn mở 1 Repository nào đó. Sau đó ấn phím “t” nó sẽ đi đến màn hình tìm kiếm. Ở màn hình này bạn chỉ cần nhập tên file muốn tìm kiếm vào là được.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/271b99166c1e82f609bd6235ae3dd011/Quick-fuzzy-file.gif&quot; alt=&quot;Quick fuzzy file&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;suggest-thay-đổi-code-trong-pull-request&quot;&gt;&lt;a href=&quot;#suggest-thay-%C4%91%E1%BB%95i-code-trong-pull-request&quot; aria-label=&quot;suggest thay đổi code trong pull request permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Suggest thay đổi code trong Pull Request&lt;/h2&gt;
&lt;p&gt;Khi chúng ta comment vào 1 phần code nào đó trong Pull Request. Chúng ta có thể đề xuất thay thế code bằng việc sử dụng tính năng ”&lt;strong&gt;Suggested Changes&lt;/strong&gt;”. Người tạo Pull Request có thể apply trực tiếp phần đề xuất thay đổi code của bạn mà không cần phải dời Github.&lt;/p&gt;
&lt;p&gt;Để tạo ra 1 lời đề xuất thì chỉ cần bao quanh đoạn code của bạn bằng thẻ Markdown, với thẻ tag là &lt;strong&gt;suggestion&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/6cb205c10d9b61bed7283fc0d6d4b4dc/suggestions-in-pull-request-1.gif&quot; alt=&quot;suggestions in pull request 1&quot;&gt;&lt;/p&gt;
&lt;p&gt;Bây giờ người tạo Pull Request có thể thay đổi file trực tiếp trên Github mà không nhất thiết phải thay đổi bằng tay.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/246c7cd8fa4c0b68f99304a08ceef70c/suggestions-in-pull-request-2.gif&quot; alt=&quot;suggestions in pull request 2&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;hiển-thị-github-như-trong-ide&quot;&gt;&lt;a href=&quot;#hi%E1%BB%83n-th%E1%BB%8B-github-nh%C6%B0-trong-ide&quot; aria-label=&quot;hiển thị github như trong ide permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Hiển thị Github như trong IDE&lt;/h2&gt;
&lt;p&gt;Với những người nào quen dùng IDE đều thấy nó tổ chức thư mục theo dạng hình cây (sidebar tree).&lt;/p&gt;
&lt;p&gt;Trên Github cũng có thể làm như thế được, nhưng các bạn cần phải cài 1 extension trên Chrome là &lt;a href=&quot;https://chrome.google.com/webstore/detail/octotree/bkhaagjahfmjljalopjnoealnfndnagc&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Octotree extension&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/e862906628b48c68d51167f224c98447/sidebar-tree-github.gif&quot; alt=&quot;sidebar tree github&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;nhẩy-đến-function-khi-đang-review-code&quot;&gt;&lt;a href=&quot;#nh%E1%BA%A9y-%C4%91%E1%BA%BFn-function-khi-%C4%91ang-review-code&quot; aria-label=&quot;nhẩy đến function khi đang review code permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Nhẩy đến function khi đang review code&lt;/h2&gt;
&lt;p&gt;Ai đã từng review code rồi cũng đều biết, khi review 1 đoạn code nào đó. Thì việc xem các function liên quan đến đoạn code đó là điều hoàn toàn không thể tránh khỏi.&lt;/p&gt;
&lt;p&gt;Bình thường chắc mọi người sẽ mở ra 1 tab mới trên trình duyệt rồi xem function muốn xem. Cách này cũng được nhưng khá mất thời gian. Có 1 cách nhanh hơn giúp các bạn có thể xem được function liên quan bằng cách ấn phím “t”. Khi đó sẽ hiển thị ra 1 cái dropdown và bạn chọn function muốn xem là được.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/952a6d31a4782a10385d4de08af52f6c/jump-to-function-github.gif&quot; alt=&quot;jump to function github&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;tạo-permalink-cho-1-file&quot;&gt;&lt;a href=&quot;#t%E1%BA%A1o-permalink-cho-1-file&quot; aria-label=&quot;tạo permalink cho 1 file permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Tạo permalink cho 1 file&lt;/h2&gt;
&lt;p&gt;Nội dung hoặc đường dẫn đến 1 file trong Github có thể bị thay đổi. Ví du như hôm nay dùng file này. Nhưng đến ngày mai file đó có thể không dùng và bị xoá đi. Vậy làm thế nào có thể share đường dẫn của 1 file đến cho người khác mà không sợ đường dẫn đó bị thay đổi.&lt;/p&gt;
&lt;p&gt;Trong Github có thể giúp bạn làm điều này 1 cách rất đơn giản. Đầu tiên bạn mở file đó trên Github.&lt;/p&gt;
&lt;p&gt;Ví dụ file của mình có đường dẫn như sau:&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/nooptr/docker-rails-mysql/blob/master/Dockerfile&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;https://github.com/nooptr/docker-rails-mysql/blob/master/Dockerfile&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Sau đó các bạn ấn phím “y” nó sẽ tự động biến cái đường dẫn trên thành đường dẫn kiểu như này:&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/nooptr/docker-rails-mysql/blob/34bd44a48b0b66519fcbdfa2165d115a379db84a/Dockerfile&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;https://github.com/nooptr/docker-rails-mysql/blob/34bd44a48b0b66519fcbdfa2165d115a379db84a/Dockerfile&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Và đây chính là đường dẫn static và không bị thay đổi. Kể cả file kia của bạn có bị xoá đi chăng nữa.&lt;/p&gt;
&lt;p&gt;Thực chất làm được điều này là do cái 34bd44a48b0b66519fcbdfa2165d115a379db84a chính là mã commit của file lúc đó mà thôi. Nên bạn có xoá file đi thì commit cũ vẫn còn lại nên đương nhiên là vẫn xem được rồi.&lt;/p&gt;
&lt;h2 id=&quot;xem-lịch-sử-thay-đổi-của-1-file&quot;&gt;&lt;a href=&quot;#xem-l%E1%BB%8Bch-s%E1%BB%AD-thay-%C4%91%E1%BB%95i-c%E1%BB%A7a-1-file&quot; aria-label=&quot;xem lịch sử thay đổi của 1 file permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Xem lịch sử thay đổi của 1 file&lt;/h2&gt;
&lt;p&gt;Nếu bạn muốn xem lịch sử thay đổi của 1 file trên Github bạn có thể làm bằng cách ấn phím “b”. Khi đó nó sẽ hiển thị xem ai đã thay đổi dòng nào trong file vào thời gian nào. Cái này không khác gì &lt;strong&gt;git blame&lt;/strong&gt; cả. Nhưng xem trên giao diện mình thấy nó dễ nhìn hơn nhiều.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/37c11c7d4ffce5fa96cdb2d7e96f81c2/shortcut-git-blame.gif&quot; alt=&quot;shortcut git blame&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;powerful-code-search&quot;&gt;&lt;a href=&quot;#powerful-code-search&quot; aria-label=&quot;powerful code search permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Powerful code search&lt;/h2&gt;
&lt;p&gt;Github đánh chỉ mục hầu hết các đoạn code và cung cấp chức năng tìm kiếm mạnh mẽ trên nó. Nếu bạn muốn tìm kiếm 1 đoạn text nào đó trên Github, bạn chỉ cần ấn nút ”/” và nhập từ muốn tìm kiếm là được.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/d0e2f10d05aa3b0038fc96f8e232e10d/Powerful-code-search.gif&quot; alt=&quot;Powerful code search&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;dùng-lại-reply-đã-lưu&quot;&gt;&lt;a href=&quot;#d%C3%B9ng-l%E1%BA%A1i-reply-%C4%91%C3%A3-l%C6%B0u&quot; aria-label=&quot;dùng lại reply đã lưu permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Dùng lại reply đã lưu&lt;/h2&gt;
&lt;p&gt;Nếu bạn muốn comment bằng comment mấy ngày trước đó để tiết kiệm thời gian, đỡ phải gõ. Thì Github cũng cung cấp cho bạn tính năng lưu lại comment trước đó bằng cách tạo 1 &lt;a href=&quot;https://github.com/settings/replies&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;saved replies&lt;/a&gt;. Lần tới khi muốn dùng lại comment trước đó thì bạn chỉ cần chọn từ dropdown là được.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/f2e0cdbfa8e372c656e8377282aca8b9/saved-replies-github.gif&quot; alt=&quot;saved replies github&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;kết-luận&quot;&gt;&lt;a href=&quot;#k%E1%BA%BFt-lu%E1%BA%ADn&quot; aria-label=&quot;kết luận permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Kết luận&lt;/h2&gt;
&lt;p&gt;Cảm ơn các bạn đã đọc bài. Hi vọng qua bài viết này sẽ giúp các bạn làm việc trên Github 1 cách hiệu quả hơn.&lt;/p&gt;
&lt;p&gt;==============&lt;/p&gt;
&lt;p&gt;Để nhận thông báo khi có bài viết mới nhất thì các bạn có thể like fanpage của mình ở bên dưới nhé:&lt;/p&gt;
&lt;p&gt;👉&lt;a href=&quot;https://www.facebook.com/669339543503374&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Nghệ thuật Coding Fanpage Facebook&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Chúc các bạn 1 tuần thật vui vẻ.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Console Javascript quá kinh khủng]]></title><link>https://nghethuatcoding.com2019/05/08/console-javascript-qua-kinh-khung/</link><guid isPermaLink="false">https://nghethuatcoding.com2019/05/08/console-javascript-qua-kinh-khung/</guid><pubDate>Wed, 08 May 2019 02:11:44 GMT</pubDate><content:encoded>&lt;p&gt;Đi dạo 1 vòng thấy có bài viết về console javascript hay quá. Toàn hàm mình không biết. Nên đã pickup ra 1 số hàm hay mà ít người biết đến để mọi người tham khảo. Có cả ảnh đính kèm luôn.&lt;/p&gt;
&lt;h2 id=&quot;consolelog&quot;&gt;&lt;a href=&quot;#consolelog&quot; aria-label=&quot;consolelog permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;console.log()&lt;/h2&gt;
&lt;p&gt;Đây là hàm mà chắc ai cũng biết đến nó rồi. Thế nhưng tham số bên trong nó thì lại ít người để ý đến.&lt;/p&gt;
&lt;p&gt;Đoạn text ở trong hàm &lt;strong&gt;console.log()&lt;/strong&gt; có thể được thay thế với form như bên dưới:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;%o / %O - for objects;&lt;/li&gt;
&lt;li&gt;%d / %i - for integers;&lt;/li&gt;
&lt;li&gt;%s - for strings;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;%f - for floating-point numbers;&lt;/p&gt;
&lt;p&gt;console.log(“Object value: %o with string substitution”,
{string: “str”, number: 10});&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;đằng sau %o có thể thay thế bằng object. Khi đó trên console hiển thị như sau:&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 561px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/60ff87a6dfacdb7854767a9d145afe55/d2b4f/console-log-javascript.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 19.429590017825312%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAAsSAAALEgHS3X78AAAAmElEQVQI14WOyQ7DIAxE8/9f2TQbSxII2KjBGOqg3vtkj3zwjGa4QlRGsOk1Zm1QKdQ2zpqcy9bSvpM2ZHdC5PqDmUspRDQ4d21Kz+sWtfGbWt6TON16uPNIHsL5wQjgLxAFDDHK5JxbZyiFexJza6AwzDGdqUrwk81ElZjlzkR3zneHn99ulpUmoqUyaoQR8PDLNGFK7R9f0KfmxNFAo4UAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/60ff87a6dfacdb7854767a9d145afe55/01472/console-log-javascript.webp 240w,
/static/60ff87a6dfacdb7854767a9d145afe55/222bd/console-log-javascript.webp 480w,
/static/60ff87a6dfacdb7854767a9d145afe55/72cfd/console-log-javascript.webp 561w&quot;
          sizes=&quot;(max-width: 561px) 100vw, 561px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/60ff87a6dfacdb7854767a9d145afe55/0783d/console-log-javascript.png 240w,
/static/60ff87a6dfacdb7854767a9d145afe55/782f4/console-log-javascript.png 480w,
/static/60ff87a6dfacdb7854767a9d145afe55/d2b4f/console-log-javascript.png 561w&quot;
          sizes=&quot;(max-width: 561px) 100vw, 561px&quot;
          type=&quot;image/png&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/60ff87a6dfacdb7854767a9d145afe55/d2b4f/console-log-javascript.png&quot;
          alt=&quot;console log javascript&quot;
          title=&quot;console log javascript&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Điểm đặc biệt hơn nữa là có thể dùng CSS trong &lt;strong&gt;console.log()&lt;/strong&gt; được.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;console.log(&amp;quot;Example %cCSS-styled%c %clog!&amp;quot;,
  &amp;quot;color: red; font-family: monoscope;&amp;quot;,
  &amp;quot;&amp;quot;,
  &amp;quot;color: green; font-size: large; font-weight: bold&amp;quot;);&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Hơi khó nhìn 1 chút, nhưng ở ví dụ trên mình để 3 cái tham số %c, và sau đó gắn thêm 3 giá trị vào thì nó hiển thị ra như sau:&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 449px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/5285ad46b5e8786aa78da1a99acaddd3/a5369/console-log-javascript-css.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 19.821826280623608%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAAsSAAALEgHS3X78AAAAtklEQVQI13WOyZbCIBRE8/+f5dJlO/RxikcCAUJAJDxDeAzGZS/6bmpVt6phlHiAjtBBDqPWOCjkAkeNQiRtUA4oZHrapFRJqf6l6RlZ422e7/buHiS0bTxd6vWBP8d4viy/53A4ht1+ud3QTRkgv1ye5+QcxtjwvlvLALAAVC4Kl7Po72SvRprtKxmTvV/3s4ds7feIGvM0odYxYiM4m0PoWO+trZRVQrMxG7k9mNMqLaXU//kAOaLiTMHaYQkAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/5285ad46b5e8786aa78da1a99acaddd3/01472/console-log-javascript-css.webp 240w,
/static/5285ad46b5e8786aa78da1a99acaddd3/3f0bd/console-log-javascript-css.webp 449w&quot;
          sizes=&quot;(max-width: 449px) 100vw, 449px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/5285ad46b5e8786aa78da1a99acaddd3/0783d/console-log-javascript-css.png 240w,
/static/5285ad46b5e8786aa78da1a99acaddd3/a5369/console-log-javascript-css.png 449w&quot;
          sizes=&quot;(max-width: 449px) 100vw, 449px&quot;
          type=&quot;image/png&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/5285ad46b5e8786aa78da1a99acaddd3/a5369/console-log-javascript-css.png&quot;
          alt=&quot;console log javascript css&quot;
          title=&quot;console log javascript css&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Đúng là vãi thật. Hiển thị được cả css trong console javascript.&lt;/p&gt;
&lt;h2 id=&quot;consolegroup&quot;&gt;&lt;a href=&quot;#consolegroup&quot; aria-label=&quot;consolegroup permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;console.group()&lt;/h2&gt;
&lt;p&gt;Hàm này chắc ít ai dùng. Mình cũng vậy. Lần đầu tiên nghe tên.&lt;/p&gt;
&lt;p&gt;Hàm này mục đích là để tạo group, nhóm các kết quả lại với nhau. Giúp cho việc hiển thị cũng dễ nhìn hơn.&lt;/p&gt;
&lt;p&gt;Cách dùng như sau:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;console.group();
console.log(&amp;quot;Inside 1st group&amp;quot;);
console.group();
console.log(&amp;quot;Inside 2nd group&amp;quot;);
console.groupEnd();
console.groupEnd();
console.log(&amp;quot;Outer scope&amp;quot;);&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Và đây là kết quả:&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 282px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/259043a872cf877f90f7c5c89f70fbe9/2a195/console-group-javascript.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 73.40425531914893%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsSAAALEgHS3X78AAAB4klEQVQoz31T65qbIBTM+z9a791uY0REvCHeMEYwCoI9ummb3W468n0ef8w5w5zxgJGntVGjakVXN+353J/7fquFEFK6dYWzwblb8fsLcMDoaK0FGsLkeEIhoTRO/JCw5+Plp6dpspTlwgpTloZzEyeasX6QLy0OATrCq20FiWIUhDROGSt8HLIkawk1bWuHwUppB2lFt9QN1NM8r7uOP+QOEwrkOM1okgZhVKJABtjkzNa1yfOl4JuENNO8HJR6NblpBRBOCAMzywsoEkLx56/MO01N6/redt3SiqWql0Fe30xuhMAk8hGOaBJGNIriL99+fHx6DtNMTfP6ADey6M4wE66d5kVR8DBOuhMaPnxSJDJNo1Ggvz+JnG23vTP+gANvmiYwLMsZoXHOirKqCU2aulmnadXGGWOVAsOWHe4OG3kcRyE6EAzK071FEBJwzjq3WPt3we4tXiZvYoZBMs7BrnN/EXtgwDs/wGoc3yPeQuLNs1ZSllXlByEsjBUcztHzodE/0Xpt2E6e4dpKqYKXecHBMiCDebyspFL9ZTBmeThZaw1kCGl/uYBboBbMzxmHhIN/cZJer9O7ym+rquoGVgVRAf4WE8bvBbsH2H4MWICUknPe7KjqWsN6rNue/+IXuctN9wmNvqoAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/259043a872cf877f90f7c5c89f70fbe9/01472/console-group-javascript.webp 240w,
/static/259043a872cf877f90f7c5c89f70fbe9/590e3/console-group-javascript.webp 282w&quot;
          sizes=&quot;(max-width: 282px) 100vw, 282px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/259043a872cf877f90f7c5c89f70fbe9/0783d/console-group-javascript.png 240w,
/static/259043a872cf877f90f7c5c89f70fbe9/2a195/console-group-javascript.png 282w&quot;
          sizes=&quot;(max-width: 282px) 100vw, 282px&quot;
          type=&quot;image/png&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/259043a872cf877f90f7c5c89f70fbe9/2a195/console-group-javascript.png&quot;
          alt=&quot;console group javascript&quot;
          title=&quot;console group javascript&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Khi hiển thị ra console, chúng ta có thể đóng, mở đều được cả (ấn vào cái nút tam giác).&lt;/p&gt;
&lt;p&gt;Hơn nữa, nó có cả phương thức &lt;strong&gt;console.groupCollapsed()&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Vì hàm &lt;strong&gt;console.group()&lt;/strong&gt; này có thể đóng, mở block lại khi hiển thị trên console nên sẽ giúp ta tổng hợp lại và xuất ra console trông rất dễ nhìn.&lt;/p&gt;
&lt;p&gt;Tuy nhiên số lượng &lt;strong&gt;group&lt;/strong&gt; với &lt;strong&gt;groupCollapsed **mà không bằng với số lượng **GroupEnd&lt;/strong&gt; thì lúc hiển thị nó hơi kì kì. Giống như thẻ tag trong html vậy. Đã mở tag thì phải có chỗ để đóng tag.&lt;/p&gt;
&lt;p&gt;Do đó để không quên thì khi viết hàm &lt;strong&gt;group()&lt;/strong&gt; thì cố gắng viết luôn hàm &lt;strong&gt;GroupEnd()&lt;/strong&gt; ở bên dưới là tốt nhất.&lt;/p&gt;
&lt;h2 id=&quot;consoletrace&quot;&gt;&lt;a href=&quot;#consoletrace&quot; aria-label=&quot;consoletrace permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;console.trace()&lt;/h2&gt;
&lt;p&gt;Nếu ai lập trình nhiều PHP hay các ngôn ngữ khác cũng đều gặp cái hàm &lt;strong&gt;trace()&lt;/strong&gt; này rồi. Hàm này để mục đích là duyệt vết thôi.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;console.trace(&amp;quot;Logging the way down here!&amp;quot;);&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Khi đó sẽ hiển thị ra màn hình như sau:&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 348px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/b347942ceb9d6ee708cf34be2a1fa040/8f6cc/console-trace-javascript.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 29.022988505747126%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsSAAALEgHS3X78AAAAzUlEQVQY042P227DIAyGef9X2+0mbVq7jpAQDgkakGazwTBnVS8r7dMvbOGzCCFIKefZaK0BABErACEegkOt1lZKQzzEIYDKP3+IlLPzy1eMMWXrF4aMKa9v5SLJWBaqsYwTnM7FujKoH+dzzr33RiTYk4N6P3/4ZbXO+3WdjZmnybBx3liHAJ2nEN2mtd7vXhO8g1Tj56Aucpi0NtY/vcTn0zVm5AqO9scIPnLbtn3f+SVOJrp+17xXrO2W0R4juGYNIaXEVxPRvWn7D7/uGlnJL7woXwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/b347942ceb9d6ee708cf34be2a1fa040/01472/console-trace-javascript.webp 240w,
/static/b347942ceb9d6ee708cf34be2a1fa040/dde6e/console-trace-javascript.webp 348w&quot;
          sizes=&quot;(max-width: 348px) 100vw, 348px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/b347942ceb9d6ee708cf34be2a1fa040/0783d/console-trace-javascript.png 240w,
/static/b347942ceb9d6ee708cf34be2a1fa040/8f6cc/console-trace-javascript.png 348w&quot;
          sizes=&quot;(max-width: 348px) 100vw, 348px&quot;
          type=&quot;image/png&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/b347942ceb9d6ee708cf34be2a1fa040/8f6cc/console-trace-javascript.png&quot;
          alt=&quot;console trace javascript&quot;
          title=&quot;console trace javascript&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2 id=&quot;consolewarn-consoleerror&quot;&gt;&lt;a href=&quot;#consolewarn-consoleerror&quot; aria-label=&quot;consolewarn consoleerror permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;console.warn(), console.error()&lt;/h2&gt;
&lt;p&gt;Dựa vào level của log mà chúng ta muốn hiển thị hay không muốn hiển thị log ra màn hình. Trong javascript cũng có những hàm kiểu như vậy.&lt;/p&gt;
&lt;p&gt;Mặc định thì level đang là debug nên nó không hiển thị ra console. Nếu chúng ta thay đổi sang level khác thì nó sẽ hiển thị.&lt;/p&gt;
&lt;p&gt;Dưới đây là ví dụ:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;console.warn(&amp;quot;This is a warning!&amp;quot;);
console.error(&amp;quot;This is an error!&amp;quot;);
console.info(&amp;quot;This is very informative!&amp;quot;);
console.debug(&amp;quot;Debugging a bug!&amp;quot;);
console.assert(true, &amp;quot;This won&amp;#39;t be logged!&amp;quot;);
console.assert(false, &amp;quot;This will be logged!&amp;quot;);&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Kết quả sau khi thực hiện:&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 378px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/d6fe95c0a20e23dd1d399b16cfc021d9/6405c/console-warn-error-javascript.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 81.74603174603176%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAIAAACZeshMAAAACXBIWXMAAAsSAAALEgHS3X78AAACVklEQVQoz12TV2/bMBCA9f9/TdHx3of0obEjBXDipTSWYk1ObYs8jp6Txo1z+HAiBN4+BsvlQmuT5XlVo5CKsqmuISsUpYrzOUlPSTpnWSuEBg3XBNHtF3ta1/l9Q1cNexBkJY4Ldvg1N3uvcjckfjj4/mBU5m31iSBc/PS2oSRtZd7KwrvBmF5Da+3g/fyBybnxE0EUhcb7rKhLwqloZD+OvLE1M90AlAOTQJhhYuwG67y7Joi+fnPbp2m90fsY4ie13Znd3q0eXFW6qnJ1jXhCgFIvpW+Q5kIQ3dz4YWzyYihKxPeDH0c/Ts6AN8Zbe9aXg9ZeqQtBGC7Buawssc+8aUTfayG9FA5dtJ2VDXChi0oXpaFslo0C8N67V4L78E5rHE0hhKSUlVXNKSPpC8lykh5PQrpxMl1v0FHfg1JgjHuXIAqX6KmsKs45Ywznd9J6NGZADYAX/buco11LcLdc4B1ckppQDFsROglhkxSS1OSFkRLSo8LNOc3O2jMfje+jUGmI/zynL1lRVnlZJc+JEhLNTNPaebZtZ0ZMAv4Zf7A/NwxTyvMC1xNrxsxmpexrtm9d8RftnHv/+b9m9IUxCVbMOOOia/q5HKFXBpccu1BWhgsjBBCinxOo6mkc3+yD8G6Bn6IoCKEoCvuptJnAKOOUcpj26eS0xrOdpnMheAHMWwvPaRtr87KscUKUCylb2c35oMVsug6jmbYFyrBywIf1cryKHH3/4eLDuNupx8283sxxDI9ru9rB9o+Ln9w+dpud2279Zut+31rUggNuUdchfwFVWYkAWpzxrAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/d6fe95c0a20e23dd1d399b16cfc021d9/01472/console-warn-error-javascript.webp 240w,
/static/d6fe95c0a20e23dd1d399b16cfc021d9/dbf7a/console-warn-error-javascript.webp 378w&quot;
          sizes=&quot;(max-width: 378px) 100vw, 378px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/d6fe95c0a20e23dd1d399b16cfc021d9/0783d/console-warn-error-javascript.png 240w,
/static/d6fe95c0a20e23dd1d399b16cfc021d9/6405c/console-warn-error-javascript.png 378w&quot;
          sizes=&quot;(max-width: 378px) 100vw, 378px&quot;
          type=&quot;image/png&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/d6fe95c0a20e23dd1d399b16cfc021d9/6405c/console-warn-error-javascript.png&quot;
          alt=&quot;console warn error javascript&quot;
          title=&quot;console warn error javascript&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2 id=&quot;consoletime&quot;&gt;&lt;a href=&quot;#consoletime&quot; aria-label=&quot;consoletime permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;console.time()&lt;/h2&gt;
&lt;p&gt;Hàm này cũng gặp nhiều trong PHP rồi mà bây giờ mình mới biết nó trong console javascript.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;console.time();
console.timeLog();
console.timeEnd();&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Và hiển thị ra console như sau:&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 231px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/0402564ed88327df82b6a6d1a1beb502/de152/console-time-javascript.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 66.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAABf0lEQVQoz3WSh3KDMBBE/f8/ljpJPIRgumnBSAIJUYwpdhaI2yTcoIJgb3VPWuma2rZtURRlWRZTYCKlvLxWy7FybKMfBiFy3bRt17Oc7dYPKEvXimraTrxL8PW0ECvHMjA0TZOmKSEEnowx9MMUXdcdx1gQ26aOoa4qaCilkFFCOeeXPybxcbiJ4znGbWOQRekFYRjFPtqO8KkK7N92tliXRTFm+cfZGp2BJyGwZGnG0XIpg/B7lxDU7AdRktCMcykLjqy5bNtu9v8VU8oc18MDCVIAsm5anh9CD3Jr5evl7cMPQkXVDMvWdBMsrs51XaPmOI6zLAM21DzXObO69LeTqzPE6RTzBJu7/WkZmGX0fY8iQQa0XC8AMcqyjWGp2ga95bhciNM9sTtnAAMbQljGBYDV+z0SBWEEPLg/M0XAytCJvCyrs3g6Z0DCoeCGQYAk9b55fn1/eHqN4hjr4PQIYsonGkDiFAH8CuxwaIQQuCa4JGAm5n2eUf2N2fkHRIbeDY8MqjgAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/0402564ed88327df82b6a6d1a1beb502/0e9ca/console-time-javascript.webp 231w&quot;
          sizes=&quot;(max-width: 231px) 100vw, 231px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/0402564ed88327df82b6a6d1a1beb502/de152/console-time-javascript.png 231w&quot;
          sizes=&quot;(max-width: 231px) 100vw, 231px&quot;
          type=&quot;image/png&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/0402564ed88327df82b6a6d1a1beb502/de152/console-time-javascript.png&quot;
          alt=&quot;console time javascript&quot;
          title=&quot;console time javascript&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2 id=&quot;consolecount&quot;&gt;&lt;a href=&quot;#consolecount&quot; aria-label=&quot;consolecount permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;console.count()&lt;/h2&gt;
&lt;p&gt;Có cả hàm **count() **nữa mới bá. Cách dùng như sau:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;console.count(); // default: 1
console.count(); // default: 2
console.count(); // default: 3
console.countReset();
console.count();&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Và hiển thị ra console như sau:&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 198px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/a1fe3ebdeee736ccf446668a5f883594/f5d88/console-count-javascript.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 143.9393939393939%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAdCAIAAAAl5NuSAAAACXBIWXMAAAsSAAALEgHS3X78AAACsklEQVQ4y5WUiXLaQBBE+f9PSyXlcmxjArql1Qm6tTq48qSlcMUI7ExRYiVta7Z7emZh6Ju+7+u6bseQrZRVVU3rtuvGJ9yWZcGiuYmF59pd13ddt1pra814Xa42uin8wBX+crVe64a6LavqfBML17H4G4ahKMssz6u65sfWpm7ynIRtPwVfP97EmBmwlPLn07PKbNpuGCeNlHGy5dXpdDrfiUvm/X5f1w158qIgczcx7vpeZThMMZ+ZM3Mw27YNw+AaBIFpmpZlATg/jI/Mo7jdmK5ummGK6barG3SWdzOrsii1X5bvumE5nrAd73X5vtpoG91Abejc8v/IPIpcVrJtId+PRAaeqE1gyHO6iQuYg/349bTW9OeXN8txRRCCDMKIV7OwC1iVCkrtmLPOKTVFlrIsSx6qTYrhPJgzo7bnuY7jBL6fJAkL4XkAvlAbMN9A2+1ut0uz7S5Nki0syqpOtuMTrJJlOV+fzzxVpDNtB7YIjs5CBJ4I/mw03bRsxw2iqCirSbm5OiOv8MMwindpusuy0WRdh7evgEeCUei31doPQgrLlcNTszjeXtW+yxnzHA54u8qyLE1TBC+KAgUQ8tZVn+sMGD18X/i+H8cxeCFEFIazan8+tgJDOIhinAh5+hmFPQhEMSPBMG1P+EjILXa4fkKBD5SKV4BROopiagRt9Gc3drNs17SckENlGdL+w5njQS8MQ8/z8AYm8YXg962WREvA+LGuSsYAk401JlUicz3cE0wNQFqSTtRNm8bUDCuKkyCM1ZqWhPtsqSfOxyOcseLkx5RCwQ3BFEkGI33yyCRY4un3Ky25Wm8wKZmlbNHsWwNwGPYkYYYCgC4sUJX2uPbjbFwGIIODNtQ0jQGIQxiADENU/O4AnEYt+Ybr+vhVLIRnR8V5OJzO/x9/AXG5ffwg1d4oAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/a1fe3ebdeee736ccf446668a5f883594/60a56/console-count-javascript.webp 198w&quot;
          sizes=&quot;(max-width: 198px) 100vw, 198px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/a1fe3ebdeee736ccf446668a5f883594/f5d88/console-count-javascript.png 198w&quot;
          sizes=&quot;(max-width: 198px) 100vw, 198px&quot;
          type=&quot;image/png&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/a1fe3ebdeee736ccf446668a5f883594/f5d88/console-count-javascript.png&quot;
          alt=&quot;console count javascript&quot;
          title=&quot;console count javascript&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Ngoài ra hàm &lt;strong&gt;count()&lt;/strong&gt; còn có thể truyền tham số được nữa. Ví dụ:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;console.count();
console.count(&amp;quot;for&amp;quot;);
console.count(&amp;quot;if&amp;quot;);
console.count(&amp;quot;if&amp;quot;);
console.countReset(&amp;quot;if&amp;quot;);
console.count(&amp;quot;for&amp;quot;);
console.count(&amp;quot;if&amp;quot;);
console.count(&amp;quot;if&amp;quot;);
console.countReset(&amp;quot;if&amp;quot;);
console.count(&amp;quot;for&amp;quot;);
console.countReset(&amp;quot;for&amp;quot;);
console.count();&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Kêt quả như sau:&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 262px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/83be4896582f5f7c0dc7e5af434c81d8/e551d/console-count-parameter-javascript.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 243.5114503816794%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAxCAIAAABVih7fAAAACXBIWXMAAAsSAAALEgHS3X78AAADnUlEQVRIx5WWC3OqQAyF/f+/8M5obxW18hQXfLAP4H67UYsWqTfTYdSSzcnJSbKzP8vdOlpVVfXx8XEItok2dV0fj0ee/K4GJi/wZp7nqqpnaW2cNXwpiiKJY578++vrK0kSPlhr+77vHq0Pxoe7c5FlWZqm+2C4nYI55/pHG54yy0+ub91qFRFtt9vhBtq7Tzdps6TSXevIjYBkVZYl2fbvmXdurcGHbDmCJ2jbtiXb1hj/Z+1UZNNcsiwH83q9JvM4jpfLJVlcslRH0SFNq7omDic+O5MzsOM4ISCAtdZtsCut4aWfblfn7Gj7zlGoczBjzDdP+Lxwu8FWTecsJFMnCKO8PMX/d8LSSjujoRqqeMIctPH0CqkqnWWevwnCrG4gjJhwhj8Q4iA1o5QNgqHs487FuW2d3cUx2RJkFN6kSJxV1dWQ1+VyuTI8ydbVmcjkSIVxBnMdqvoWYV4kjznTYZvNZrFYIJW/y+WejDabo+/B6rkx0hAZmqWr4Amqm4E55IlU21Yk8ByZnKXpEQmRn2kb4H/OOVaNbi7E3G63om3Af35+8myytFktVZYdw3Ej2kaeRCZPgqNtggtaL3LKq7U1hs+jBZsVDIOujZOECuH8M7EptoFNPx+Ukhk0qu3JOuMcTOYj8YENfnc+e3lrPeUMYUmSboIRnzFAhZG3Kfcake/3MtJe5Nw6SGbuEPChRr/mDNtBJHtUCWbhmVBXbU8PA0+Y8zlLtSCsusnwd8JwRtuMIbJFGMiTU0ibr3pfNNstHL6cYX5jGB22TSHTFxRkQXO6y8WdTrIDXgyDMD1Bizymxv1Yh97rrEArk8z38/1wAN9ofzkMlKpkS+GPPHjVyqLoe2dMF7bHWM5hGAAbkugqIsvGmM/n7OH5YlGmCcPgXJYi2+fRS878QxbdsJ87gXrDDOdjOfuhr0Qnsuh41esEtIAPVI8PA9G2LDq0/bDoKHW0OqTJ9KKzLDrqRJH90BJtDhbdyzpfF12eQzKAh4vuV3n7RedzVoyq7L8Xnd9VYdGJSGTRUXNOgbwsz0+HgykKpsI53G+e6+y1HRoDknAGgpR9F6xm3eWZC8voacJdLzSUSrpCls5/wi5LYOMpl7Ay2OmO81VLyn7GMwmGM0eAmV845eGW8WpuR9Ga9ORmMbzEvXEPY4aVpcQUkX5fiKb3c6w0d88i3CZUGP1C2FvOu6o9VM2x/mb4HZ7voxc+W/t4R3zT+R8h5x82bjbhygAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/83be4896582f5f7c0dc7e5af434c81d8/01472/console-count-parameter-javascript.webp 240w,
/static/83be4896582f5f7c0dc7e5af434c81d8/d573b/console-count-parameter-javascript.webp 262w&quot;
          sizes=&quot;(max-width: 262px) 100vw, 262px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/83be4896582f5f7c0dc7e5af434c81d8/0783d/console-count-parameter-javascript.png 240w,
/static/83be4896582f5f7c0dc7e5af434c81d8/e551d/console-count-parameter-javascript.png 262w&quot;
          sizes=&quot;(max-width: 262px) 100vw, 262px&quot;
          type=&quot;image/png&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/83be4896582f5f7c0dc7e5af434c81d8/e551d/console-count-parameter-javascript.png&quot;
          alt=&quot;console count parameter javascript&quot;
          title=&quot;console count parameter javascript&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2 id=&quot;consoletable&quot;&gt;&lt;a href=&quot;#consoletable&quot; aria-label=&quot;consoletable permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;console.table()&lt;/h2&gt;
&lt;p&gt;Hiển thị table trong html thì ai cũng gặp rồi, nhưng hiển thị **table **trong console thì chắc ít người dùng chăng.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;console.table([[0,1,2,3,4], [5,6,7,8,9]]);&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Và kết quả khi hiển thị ra console:&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 960px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/8096ec853a772cb5d04f1cde35e533ed/23749/console-table-javascript.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 9.670164917541229%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAIAAADXZGvcAAAACXBIWXMAAAsSAAALEgHS3X78AAAASklEQVQI1zWKCw6AMAxCd//Lup+F2pqImxJCXinlqL13a/VsdZIEZHDJ7AMsbVDp7mMMnWUar7zBgAcjlYZQJQvgP/AtlfurWWQ+j/p0GznfG2EAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/8096ec853a772cb5d04f1cde35e533ed/01472/console-table-javascript.webp 240w,
/static/8096ec853a772cb5d04f1cde35e533ed/222bd/console-table-javascript.webp 480w,
/static/8096ec853a772cb5d04f1cde35e533ed/620b9/console-table-javascript.webp 960w,
/static/8096ec853a772cb5d04f1cde35e533ed/2f9db/console-table-javascript.webp 1334w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/8096ec853a772cb5d04f1cde35e533ed/0783d/console-table-javascript.png 240w,
/static/8096ec853a772cb5d04f1cde35e533ed/782f4/console-table-javascript.png 480w,
/static/8096ec853a772cb5d04f1cde35e533ed/f570d/console-table-javascript.png 960w,
/static/8096ec853a772cb5d04f1cde35e533ed/23749/console-table-javascript.png 1334w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/png&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/8096ec853a772cb5d04f1cde35e533ed/f570d/console-table-javascript.png&quot;
          alt=&quot;console table javascript&quot;
          title=&quot;console table javascript&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2 id=&quot;ascii-art&quot;&gt;&lt;a href=&quot;#ascii-art&quot; aria-label=&quot;ascii art permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;ASCII art&lt;/h2&gt;
&lt;p&gt;Hàm này có nhiệm vụ đọc đầu vào là 1 file ảnh và convert nó ra ASCII dạng “nghệ thuật”. Cụ thể cách dùng như sau:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;import imageToAscii from &amp;quot;image-to-ascii&amp;quot;;

imageToAscii(
&amp;quot;https://d2vqpl3tx84ay5.cloudfront.net/500x/tumblr_lsus01g1ik1qies3uo1_400.png&amp;quot;,
{
    colored: false,
}, (err, converted) =&amp;gt; {
    console.log(err || converted);
});&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Và kết quả khi hiển thị ra màn hình:&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 412px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/65967912576edaa68b0282b7d2c88c56/be49d/ASCII-art-javascript.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 91.50485436893204%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAIAAADUsmlHAAAACXBIWXMAAAsSAAALEgHS3X78AAAB/0lEQVQ4y11T2ZKcMAyc///EHfB9G+ZMMPOWlgS7SSiVqpFttaWWL7/e7/vjWUqtrdfW2BMotZ1e4t/WsbW1vm3jso+x3u7WhxCTD9GH5GNyITrGzkf5lTg2hMA+pn3f6TCSXSc1azspMysNMCtDWMNr9oibA2jGymzbdhljAzOSxVRCyrAYMxKHmGPKYIMP7E9QZGnfP8Tc+6q0Nc4by0bAaeuMc9rAe8JH/FgFGGMw8/pdMxd2FCnVBilV4lIt+3zU3JcVDNZTVnsasPPhwFZ+o6VIsJaCB/Oy3rBGveUmk/mArdrYadYAYiBAt7Akovwwc83hr5qpsJQLGoMUqBkZc20pVystcOFgPhsWzpZQFmUcbtSXBUuQoAFBlcejlKaMxeUHmKlhd5KKdIpsDBDB7vX+AMCp5/PlSM6M65CQIhUOt77Oyookogr8bCzYMD+oE7nW9YZjqAU3Ev3G2H+GhAnTf8y4qGN5kOjxxPfqfaGJEqmYecG4ESFnRZFipXU8DCwBy42QRdIhIjXTw5D0/pxKeGiDfagVwVwqTAbp9XpDHe/j/qHx3JD+6zpP9Bj0dVaeLrniCBoM/zUpzDNuF3OOuaDpUAvBTaTCe8ZyLg3pEyyXXCtmFr+BaTlY0QIYdsrmDzP/xtsGIaqm56a10vwwFQP9r+eg4l88yT/LHcxiCIbH+gAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/65967912576edaa68b0282b7d2c88c56/01472/ASCII-art-javascript.webp 240w,
/static/65967912576edaa68b0282b7d2c88c56/e8c46/ASCII-art-javascript.webp 412w&quot;
          sizes=&quot;(max-width: 412px) 100vw, 412px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/65967912576edaa68b0282b7d2c88c56/0783d/ASCII-art-javascript.png 240w,
/static/65967912576edaa68b0282b7d2c88c56/be49d/ASCII-art-javascript.png 412w&quot;
          sizes=&quot;(max-width: 412px) 100vw, 412px&quot;
          type=&quot;image/png&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/65967912576edaa68b0282b7d2c88c56/be49d/ASCII-art-javascript.png&quot;
          alt=&quot;ASCII art javascript&quot;
          title=&quot;ASCII art javascript&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Cái ảnh ví dụ trên mình dùng là cái ảnh này: &lt;a href=&quot;https://d2vqpl3tx84ay5.cloudfront.net/500x/tumblr_lsus01g1ik1qies3uo1_400.png&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;https://d2vqpl3tx84ay5.cloudfront.net/500x/tumblr&lt;em&gt;lsus01g1ik1qies3uo1&lt;/em&gt;400.png&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 400px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/a639e8c58066c0e975a91e2ab19adc8d/c7805/ASCII-art-javascript-image-example.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsSAAALEgHS3X78AAAB5klEQVQ4y2P4fl+ObMQwqnmQaP7xAIQg7K/3QOyfD+W+3QMhwpq/3JX7ehfK/v9cFsh9f0P+92PZP09kIfqxaAZK/HoIUhcbrlWUqfHljtzvx3JLpqr4emg52OoUZmncPKrw+xFIGQ7Nj+TeXJXX0dJzc9T+90x29yplOXk9ZwfthEhNCSn9lio1oEOAjsKt+Zq8iZGut7v2/9eyvY1qYhL6Gxcp//8ke2Ct0svL8kDP43Y22GZjQ7DmF7Jr5qpISesH+WptXaL887Hcv5f4/Qy2GajZ11P7KzjYynM1FBT1ZOX0/by0D21Q+vcUFP4MWEML6KrXV0CagUo/35b781Tu13O5PauUMhI1VVT0zEx0bh5R+PsEQ/PfZ7LPLsr/A0eMsRHIZqDgqyvyl/cr/v8k8/+LbEeNmrik/rLpKsCwQGgGOuP/M9nVc1TMTXUWTFJdOEUV6M7kGC2gF6JDtQz0dRdOVgE6OCFKU0pab9sy5f8vkTXfBWnev1bZwkwHqA2IgM7eu1rp/yvZVXNULM11FBT0lJRAqDBT4/MdUIJjQPPwvxeyD8/KA+1fPkPlBtBjT0EBC4zVR2cVNixQASaVQxuVgCp/PcSWSIBCwPQEtA2I/jyBJmOgo0CCL2WB/gQaBFcMAKOowGK/hyBfAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/a639e8c58066c0e975a91e2ab19adc8d/01472/ASCII-art-javascript-image-example.webp 240w,
/static/a639e8c58066c0e975a91e2ab19adc8d/e227a/ASCII-art-javascript-image-example.webp 400w&quot;
          sizes=&quot;(max-width: 400px) 100vw, 400px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/a639e8c58066c0e975a91e2ab19adc8d/0783d/ASCII-art-javascript-image-example.png 240w,
/static/a639e8c58066c0e975a91e2ab19adc8d/c7805/ASCII-art-javascript-image-example.png 400w&quot;
          sizes=&quot;(max-width: 400px) 100vw, 400px&quot;
          type=&quot;image/png&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/a639e8c58066c0e975a91e2ab19adc8d/c7805/ASCII-art-javascript-image-example.png&quot;
          alt=&quot;ASCII art javascript image example&quot;
          title=&quot;ASCII art javascript image example&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Nhưng khi hiển thị ra thì nó lại ra dạng khác. Lần đầu tiên mới biết cách này. Cũng khá thú vị.&lt;/p&gt;
&lt;h2 id=&quot;kết-luận&quot;&gt;&lt;a href=&quot;#k%E1%BA%BFt-lu%E1%BA%ADn&quot; aria-label=&quot;kết luận permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Kết luận&lt;/h2&gt;
&lt;p&gt;Các bạn thấy thế nào? Thấy console javascript khá kinh khủng phải không nào.&lt;/p&gt;
&lt;p&gt;Mục đích của bài này chủ yếu chia sẻ đến bạn nào chưa biết sự tồn tại của 1 số hàm console javascript. Biết đâu đến 1 ngày nào đó mình lại cần.&lt;/p&gt;
&lt;p&gt;==============&lt;/p&gt;
&lt;p&gt;Để nhận thông báo khi có bài viết mới nhất thì các bạn có thể like fanpage của mình ở bên dưới nhé:&lt;/p&gt;
&lt;p&gt;👉👉👉 &lt;a href=&quot;https://www.facebook.com/669339543503374&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Nghệ thuật Coding Fanpage Facebook&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Chúc các bạn 1 tuần thật vui vẻ.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Designer nên làm gì trong việc tối ưu hiệu năng Website]]></title><link>https://nghethuatcoding.com2019/05/07/designer-co-the-lam-gi-trong-toi-uu-hieu-nang-website/</link><guid isPermaLink="false">https://nghethuatcoding.com2019/05/07/designer-co-the-lam-gi-trong-toi-uu-hieu-nang-website/</guid><pubDate>Mon, 06 May 2019 22:00:47 GMT</pubDate><content:encoded>&lt;p&gt;Mấy ngày nay toàn viết bài về &lt;a href=&quot;https://nghethuatcoding.com/category/case-study/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;tối ưu hệ thống&lt;/a&gt;. Hôm nay mình cũng viết bài về tối ưu hệ thống nhưng sẽ hướng đến &lt;strong&gt;designer&lt;/strong&gt;. 1 trong những đối tượng mà mình cũng rất thích.&lt;/p&gt;
&lt;p&gt;Như chúng ta đã biết, hiện nay tỉ lệ image đang chiếm đến 50% trên toàn bộ các trang web trên thế giới.&lt;/p&gt;
&lt;p&gt;Việc hiệu năng trang web giảm cũng kéo theo rất nhiều thứ theo nó. Ví dụ như trải nghiệm người dùng thấp, doanh thu giảm. Đây là &lt;a href=&quot;https://nghethuatcoding.com/2019/05/02/cac-ki-su-pinterest-da-xay-dung-progressive-web-app-nhu-the-nao/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;1 ví dụ của Pinterest&lt;/a&gt; sau khi tối ưu thành công hiệu năng web mobile.&lt;/p&gt;
&lt;p&gt;Qua đó chúng ta thấy được, 1 khi trải nghiệm người dùng tốt thì mọi thứ cũng đều trở nên tốt đẹp hơn. Trong đó có cả &lt;strong&gt;doanh thu&lt;/strong&gt; đấy.&lt;/p&gt;
&lt;p&gt;[caption id=“attachment_47” align=“alignnone” width=“1024”]&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 960px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/50afdf42e8cd6cc8e7eecc9c5bdabf9a/6ff5e/ket-qua-sau-khi-dung-Progressive-Web-App.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAABqklEQVQoz32QbWvVQBCF8+v11xSKCEKttVQpRgVFrrVqyc1mk9ykN8lmd/Oy7/EkVukXHZZwJucMzDxRCIFz3jHWtm3XddCMMQjW9xD9VvgJt2ka6GVZJprvnjw1UkZKqTQjtCgO9zUhBImM0j0he5JixjqXZllKsyRNtVJcCCSTfZJ8u7HWRs7aoedDWU+H46wUEmPL5OFeljXs4AOESHOeV2FZrDayOrI0H6rjEkLkh3l887k/eSWeXbmmD8qMV5/E6eVw9s613M9Kvoz56aV4ce06ESYlnr/tTy7keQw3wg16mrUc8TXTjD0NFpCDHic8EAnOeWW8scFahD0SSm+ti+AKIdgG7DcfIeXGq2/a1mi9/LtWYEVZlnXVdC2lFJzzrc1yKjhHAoSysiA5NcaM00TLAizzqsQGkfd+aDr+k4zVcdZKaw1g/I5wutoYhsu+J2IDhmme5qKs+9u9m9V6s7pJ5Pn78fpLMOtVGu3FhzHe4arV/ZoA0hTvVmtfDK8/mh+ZPIvVHY0e1vd+nQxh1RskvD8t3LD8bZ0PeN5DRA/24/p/+6h+ATewbIWymWWWAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/50afdf42e8cd6cc8e7eecc9c5bdabf9a/01472/ket-qua-sau-khi-dung-Progressive-Web-App.webp 240w,
/static/50afdf42e8cd6cc8e7eecc9c5bdabf9a/222bd/ket-qua-sau-khi-dung-Progressive-Web-App.webp 480w,
/static/50afdf42e8cd6cc8e7eecc9c5bdabf9a/620b9/ket-qua-sau-khi-dung-Progressive-Web-App.webp 960w,
/static/50afdf42e8cd6cc8e7eecc9c5bdabf9a/6bc95/ket-qua-sau-khi-dung-Progressive-Web-App.webp 1200w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/50afdf42e8cd6cc8e7eecc9c5bdabf9a/0783d/ket-qua-sau-khi-dung-Progressive-Web-App.png 240w,
/static/50afdf42e8cd6cc8e7eecc9c5bdabf9a/782f4/ket-qua-sau-khi-dung-Progressive-Web-App.png 480w,
/static/50afdf42e8cd6cc8e7eecc9c5bdabf9a/f570d/ket-qua-sau-khi-dung-Progressive-Web-App.png 960w,
/static/50afdf42e8cd6cc8e7eecc9c5bdabf9a/6ff5e/ket-qua-sau-khi-dung-Progressive-Web-App.png 1200w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/png&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/50afdf42e8cd6cc8e7eecc9c5bdabf9a/f570d/ket-qua-sau-khi-dung-Progressive-Web-App.png&quot;
          alt=&quot;Kết quả sau khi dùng Progressive Web App&quot;
          title=&quot;Kết quả sau khi dùng Progressive Web App&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt; Kết quả sau khi dùng Progressive Web App[/caption]&lt;/p&gt;
&lt;p&gt;Do đó, không chỉ developer mà ngay cả chính &lt;strong&gt;designer cũng cần phải có trách nhiệm&lt;/strong&gt; trong vấn đề sử dụng image website cho hiệu quả.&lt;/p&gt;
&lt;p&gt;Hiện nay website trên toàn thế giới đang có xu hướng càng ngày càng nặng hơn. Theo như thống kê của &lt;a href=&quot;http://httparchive.org/interesting.php&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;httparchive.org&lt;/a&gt; cho chúng ta thấy, cách đây 7 năm (2012/02/15) kích thước trung bình của website là &lt;strong&gt;986 KB. **Thời điểm thống kê (2018/02/15) thì nó đã đạt đến **3686 KB.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Chỉ trong vòng gần 6 năm mà website đã nặng lên gần **373.8%. **Điều đó chứng tỏ website trên toàn thế giới đang có xu hướng xấu đi.&lt;/p&gt;
&lt;p&gt;So với những năm trước đó thì video cũng chiếm 1 phần không nhỏ trong website, thế nhưng thằng đang chiếm nhiều nhất lại là image.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 530px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/916da4ae0e317a18507179b8fbd375e5/a6854/website-weight-stats-february-2018.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAMEBQL/xAAXAQADAQAAAAAAAAAAAAAAAAABAgME/9oADAMBAAIQAxAAAAHRdyqY1Il9GiTGmNMP/8QAHBAAAwABBQAAAAAAAAAAAAAAAQIDABITITEy/9oACAEBAAEFAmJqdoYluB5Xt1NXoM1NSgAUf//EABwRAAIABwAAAAAAAAAAAAAAAAABAgMQEyIxUf/aAAgBAwEBPwFYstwdJeqf/8QAGREBAAIDAAAAAAAAAAAAAAAAAQASAhAz/9oACAECAQE/ARsSzMumv//EAB0QAAICAwADAAAAAAAAAAAAAAECABESIUEQIjH/2gAIAQEABj8CO6Qa12ehYGU+mEK9B8My/Jl2YFjUoT//xAAaEAEBAQADAQAAAAAAAAAAAAABEQAhQVFh/9oACAEBAAE/IQsTK7LFL6u4K5RHcfsO+mGm1LhkUHZgCp8xkYG//9oADAMBAAIAAwAAABDr30H/xAAYEQEBAQEBAAAAAAAAAAAAAAABEQAhUf/aAAgBAwEBPxCmjqdYfMRS5a13/8QAGREBAQEAAwAAAAAAAAAAAAAAAREAECEx/9oACAECAQE/EAJmj0FySDx4/8QAHBABAQADAQADAAAAAAAAAAAAAREAIUExUXGh/9oACAEBAAE/ELh7CnRHhmzbLVjrplMDB8U6YdJoIJ5TeGCgZzvzil9MPGBvKqD6SX7wIYCkl/MMIaAZ/9k=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/916da4ae0e317a18507179b8fbd375e5/01472/website-weight-stats-february-2018.webp 240w,
/static/916da4ae0e317a18507179b8fbd375e5/222bd/website-weight-stats-february-2018.webp 480w,
/static/916da4ae0e317a18507179b8fbd375e5/0d028/website-weight-stats-february-2018.webp 530w&quot;
          sizes=&quot;(max-width: 530px) 100vw, 530px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/916da4ae0e317a18507179b8fbd375e5/3bc27/website-weight-stats-february-2018.jpg 240w,
/static/916da4ae0e317a18507179b8fbd375e5/98431/website-weight-stats-february-2018.jpg 480w,
/static/916da4ae0e317a18507179b8fbd375e5/a6854/website-weight-stats-february-2018.jpg 530w&quot;
          sizes=&quot;(max-width: 530px) 100vw, 530px&quot;
          type=&quot;image/jpeg&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/916da4ae0e317a18507179b8fbd375e5/a6854/website-weight-stats-february-2018.jpg&quot;
          alt=&quot;tình trạng website cách đây 7 năm&quot;
          title=&quot;tình trạng website cách đây 7 năm&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2 id=&quot;tại-sao-hiệu-năng-website-lại-quan-trọng&quot;&gt;&lt;a href=&quot;#t%E1%BA%A1i-sao-hi%E1%BB%87u-n%C4%83ng-website-l%E1%BA%A1i-quan-tr%E1%BB%8Dng&quot; aria-label=&quot;tại sao hiệu năng website lại quan trọng permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Tại sao hiệu năng website lại quan trọng?&lt;/h2&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 960px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/c966257e943d96e3a0c604001be07206/54280/DTCIIwlVAAAzay9.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 65.40880503144655%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAECBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHcpUjAX//EABQQAQAAAAAAAAAAAAAAAAAAACD/2gAIAQEAAQUCX//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABQQAQAAAAAAAAAAAAAAAAAAACD/2gAIAQEABj8CX//EABoQAAICAwAAAAAAAAAAAAAAAAERABBBkdH/2gAIAQEAAT8haJ7BSZzuKv/aAAwDAQACAAMAAAAQJA//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAdEAEAAQQDAQAAAAAAAAAAAAABIQAQETFRgaHw/9oACAEBAAE/EEmyy/N0p3myJPSgHPbb/9k=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/c966257e943d96e3a0c604001be07206/01472/DTCIIwlVAAAzay9.webp 240w,
/static/c966257e943d96e3a0c604001be07206/222bd/DTCIIwlVAAAzay9.webp 480w,
/static/c966257e943d96e3a0c604001be07206/620b9/DTCIIwlVAAAzay9.webp 960w,
/static/c966257e943d96e3a0c604001be07206/28063/DTCIIwlVAAAzay9.webp 1440w,
/static/c966257e943d96e3a0c604001be07206/23587/DTCIIwlVAAAzay9.webp 1590w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/c966257e943d96e3a0c604001be07206/3bc27/DTCIIwlVAAAzay9.jpg 240w,
/static/c966257e943d96e3a0c604001be07206/98431/DTCIIwlVAAAzay9.jpg 480w,
/static/c966257e943d96e3a0c604001be07206/b3ee8/DTCIIwlVAAAzay9.jpg 960w,
/static/c966257e943d96e3a0c604001be07206/b97fe/DTCIIwlVAAAzay9.jpg 1440w,
/static/c966257e943d96e3a0c604001be07206/54280/DTCIIwlVAAAzay9.jpg 1590w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/jpeg&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/c966257e943d96e3a0c604001be07206/b3ee8/DTCIIwlVAAAzay9.jpg&quot;
          alt=&quot;mức độ ảnh hưởng khi hiệu năng web giảm&quot;
          title=&quot;mức độ ảnh hưởng khi hiệu năng web giảm&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;Theo như thống kê Google/SOASTA năm 2017 cho thấy:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;cứ khi tốc độ tải trang tăng từ 1s -&gt; 3s thì tỉ lệ người dùng rời khỏi trang web tăng 32%&lt;/li&gt;
&lt;li&gt;cứ khi tốc độ tải trang tăng từ 1s -&gt; 5s thì tỉ lệ người dùng rời khỏi trang web tăng 90%&lt;/li&gt;
&lt;li&gt;cứ khi tốc độ tải trang tăng từ 1s -&gt; 6s thì tỉ lệ người dùng rời khỏi trang web tăng 106%&lt;/li&gt;
&lt;li&gt;cứ khi tốc độ tải trang tăng từ 1s -&gt; 10s thì tỉ lệ người dùng rời khỏi trang web tăng 123%&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Từ đó ta thấy được hiệu năng của trang web có mức độ ảnh hưởng to lớn như thế nào. Nó không chỉ ảnh hưởng đến trải nghiệm người dùng mà còn ảnh hưởng đến doanh thu của công ty (người dùng rời khỏi trang web tăng -&gt; doanh thu đương nhiên sẽ giảm).&lt;/p&gt;
&lt;h2 id=&quot;lí-do-tại-sao-website-lại-càng-nặng&quot;&gt;&lt;a href=&quot;#l%C3%AD-do-t%E1%BA%A1i-sao-website-l%E1%BA%A1i-c%C3%A0ng-n%E1%BA%B7ng&quot; aria-label=&quot;lí do tại sao website lại càng nặng permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Lí do tại sao website lại càng nặng?&lt;/h2&gt;
&lt;p&gt;Nguyên nhân chủ yếu khiến website nặng là do hình ảnh trên trang web chưa được tối ưu. Vậy nguyên nhân nào khiến nó chưa được tối ưu?&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Đầu tiên&lt;/strong&gt;, khi design và phát triển 1 website thì rất khó có thể biết được trách nhiệm của desinger kết thúc ở đâu? và trách nhiệm developer kết thúc ở đâu?&lt;/p&gt;
&lt;p&gt;Ví dụ như việc nén hình ảnh để tối ưu tốc độ thì ai sẽ là người làm? Designer hay là Developer sẽ làm?&lt;/p&gt;
&lt;p&gt;Thông thường thì designer sẽ chọn ảnh và sau đó nhờ developer upload lên server? Hay là khi upload ảnh lên server thì hệ thống sẽ tự đống nén ảnh?&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Thứ 2&lt;/strong&gt;, hầu hết các desinger đều không biết hiệu năng của website đang tồi tệ đến mức độ như thế nào? Bao nhiêu image đang có kích thước quá to và nó đang ảnh hưởng đến trải nghiệm của người dùng như thế nào?&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Thứ 3&lt;/strong&gt;, &lt;strong&gt;những tool, những kĩ thuật về việc nén ảnh như pro thì designer hầu như không biết. Có lẽ đây là 1 trong những lí do chính.&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&quot;làm-thế-nào-có-thể-tối-ưu-image-website-như-pro&quot;&gt;&lt;a href=&quot;#l%C3%A0m-th%E1%BA%BF-n%C3%A0o-c%C3%B3-th%E1%BB%83-t%E1%BB%91i-%C6%B0u-image-website-nh%C6%B0-pro&quot; aria-label=&quot;làm thế nào có thể tối ưu image website như pro permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Làm thế nào có thể tối ưu image website như pro?&lt;/h2&gt;
&lt;p&gt;Để làm được điều này thì trước khi quyết định sử dụng image trong website, thì các bạn hãy trả lời những câu hỏi dưới đây nhé.&lt;/p&gt;
&lt;h3 id=&quot;có-cần-xử-lý-toàn-bộ-hình-ảnh-không&quot;&gt;&lt;a href=&quot;#c%C3%B3-c%E1%BA%A7n-x%E1%BB%AD-l%C3%BD-to%C3%A0n-b%E1%BB%99-h%C3%ACnh-%E1%BA%A3nh-kh%C3%B4ng&quot; aria-label=&quot;có cần xử lý toàn bộ hình ảnh không permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Có cần xử lý toàn bộ hình ảnh không?&lt;/h3&gt;
&lt;p&gt;Hình ảnh là 1 trong những bộ phận khá quan trọng trong website. 1 website mà toàn chữ chắc chẳng ai muốn đọc cả.&lt;/p&gt;
&lt;p&gt;Thế nhưng 1 website mà có quá nhiều ảnh thì lại làm hiệu năng của website bị giảm xuống. Do đó mà trước khi thêm 1 ảnh nào đó vào trong website thì hãy thử nghĩ xem thật sự hình ảnh đó có cần hay không?&lt;/p&gt;
&lt;p&gt;Nếu cho vào thì nó có làm content hay hơn không? Hay chỉ làm cho website trông đẹp hơn?&lt;/p&gt;
&lt;h2 id=&quot;ảnh-có-phải-loại-vector-hay-không&quot;&gt;&lt;a href=&quot;#%E1%BA%A3nh-c%C3%B3-ph%E1%BA%A3i-lo%E1%BA%A1i-vector-hay-kh%C3%B4ng&quot; aria-label=&quot;ảnh có phải loại vector hay không permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Ảnh có phải loại vector hay không?&lt;/h2&gt;
&lt;p&gt;Hình ảnh mà bạn đang xử dụng có phải loại vector hay không? Nếu hình ảnh bạn đang dùng là loại vector thì đừng nên export nó ra dạng PNG hay JPG. Hãy nên export nó ra dạng SVG cho nhẹ nhé.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 660px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/692db5ae154da30b5c0080700043917b/9fa68/caniuse-svg-support.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 46.06060606060606%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAJABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAMBBf/EABYBAQEBAAAAAAAAAAAAAAAAAAECA//aAAwDAQACEAMQAAAB6erZkljX/8QAGRAAAwADAAAAAAAAAAAAAAAAAAECAxIx/9oACAEBAAEFAnaQrNjILh//xAAWEQADAAAAAAAAAAAAAAAAAAAQESH/2gAIAQMBAT8BrH//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAYEAACAwAAAAAAAAAAAAAAAAABEAAxkf/aAAgBAQAGPwJUcgf/xAAbEAACAwADAAAAAAAAAAAAAAABEQAQUTFx8P/aAAgBAQABPyHRJxQBafaM9Cq4K//aAAwDAQACAAMAAAAQby//xAAXEQEBAQEAAAAAAAAAAAAAAAABABFR/9oACAEDAQE/EBSNse3/xAAWEQADAAAAAAAAAAAAAAAAAAAQESH/2gAIAQIBAT8QrH//xAAdEAEAAQMFAAAAAAAAAAAAAAABABARUSExYYGh/9oACAEBAAE/EC10OQXyLgMMq8syckNneo//2Q==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/692db5ae154da30b5c0080700043917b/01472/caniuse-svg-support.webp 240w,
/static/692db5ae154da30b5c0080700043917b/222bd/caniuse-svg-support.webp 480w,
/static/692db5ae154da30b5c0080700043917b/89c9e/caniuse-svg-support.webp 660w&quot;
          sizes=&quot;(max-width: 660px) 100vw, 660px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/692db5ae154da30b5c0080700043917b/3bc27/caniuse-svg-support.jpg 240w,
/static/692db5ae154da30b5c0080700043917b/98431/caniuse-svg-support.jpg 480w,
/static/692db5ae154da30b5c0080700043917b/9fa68/caniuse-svg-support.jpg 660w&quot;
          sizes=&quot;(max-width: 660px) 100vw, 660px&quot;
          type=&quot;image/jpeg&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/692db5ae154da30b5c0080700043917b/9fa68/caniuse-svg-support.jpg&quot;
          alt=&quot;svg support browser&quot;
          title=&quot;svg support browser&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Hiện tại hầu như browser nào cũng support SVG. Nên các bạn cũng không cần phải lo lắng cho điều này.&lt;/p&gt;
&lt;h3 id=&quot;hình-ảnh-có-nền-trong-suốt-không&quot;&gt;&lt;a href=&quot;#h%C3%ACnh-%E1%BA%A3nh-c%C3%B3-n%E1%BB%81n-trong-su%E1%BB%91t-kh%C3%B4ng&quot; aria-label=&quot;hình ảnh có nền trong suốt không permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Hình ảnh có nền trong suốt không?&lt;/h3&gt;
&lt;p&gt;Hình ảnh mà được lưu dưới dạng PNG sẽ luôn nặng hơn hình ảnh được lưu dưới dạng JPG. Nếu hình ảnh của bạn không cần nền trong suốt thì khi đó hãy export ra dạng JPG nhé.&lt;/p&gt;
&lt;h2 id=&quot;hình-ảnh-đã-được-nén-tối-đa-chưa&quot;&gt;&lt;a href=&quot;#h%C3%ACnh-%E1%BA%A3nh-%C4%91%C3%A3-%C4%91%C6%B0%E1%BB%A3c-n%C3%A9n-t%E1%BB%91i-%C4%91a-ch%C6%B0a&quot; aria-label=&quot;hình ảnh đã được nén tối đa chưa permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Hình ảnh đã được nén tối đa chưa?&lt;/h2&gt;
&lt;p&gt;Đa số designer đều nói trong Photoshop hay Pixelmator có cái option là “Save for Web”. Nếu export ảnh mà chọn option này thì cũng nén ảnh OK rồi.&lt;/p&gt;
&lt;p&gt;Thế nhưng so với các tool TinyPNG hay JPEGmini thì option “Save for Web” không phải là lựa chọn hợp lí.&lt;/p&gt;
&lt;h3 id=&quot;svgomg&quot;&gt;&lt;a href=&quot;#svgomg&quot; aria-label=&quot;svgomg permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;SVGOMG&lt;/h3&gt;
&lt;p&gt;Đây là 1 trong những ứng dụng web, có thể dùng trực tiếp &lt;a href=&quot;https://jakearchibald.github.io/svgomg/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;ở đây&lt;/a&gt;. Ứng dụng này có thể giúp ta xoá 1 vài thông tin không cần thiết từ file SVG.&lt;/p&gt;
&lt;p&gt;Ở trong những editor về graphics như photoshop thì luôn luôn có 1 vài thông tin về metadata, comment, 1 số hidden element. Những thông tin này có thể là nguyên nhân gây file SVG bị phình to.&lt;/p&gt;
&lt;p&gt;Nếu xoá những thông tin này đi sẽ giúp giảm kích thước SVG khá tốt. Đặc biệt là không làm mất đi chất lượng hình ảnh.&lt;/p&gt;
&lt;h3 id=&quot;tinypng&quot;&gt;&lt;a href=&quot;#tinypng&quot; aria-label=&quot;tinypng permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;TinyPNG&lt;/h3&gt;
&lt;p&gt;Đây cũng là 1 trong những ứng dụng web, có thể sử dụng trực tiếp &lt;a href=&quot;https://tinypng.com/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;tại đây&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Nếu như bạn có hình ảnh nào cần làm trong suốt background thì tool này là 1 tool khá hữu ích.&lt;/p&gt;
&lt;h3 id=&quot;jpegmini&quot;&gt;&lt;a href=&quot;#jpegmini&quot; aria-label=&quot;jpegmini permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;JPEGmini&lt;/h3&gt;
&lt;p&gt;Đây là 1 trong những tool nén ảnh JPG tốt nhất từ trước đến nay mà mình đã dùng. Nó có thể nén hình ảnh đến 50% mà mắt thường nhìn vào cũng không thể phân biệt được đâu là ảnh gốc và đâu là ảnh đã nén.&lt;/p&gt;
&lt;p&gt;Bạn có thể tải ứng dụng này &lt;a href=&quot;https://www.jpegmini.com/creators&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;tại đây&lt;/a&gt;. Tuy nhiên ứng dụng này là bản mất phí, dùng được cho cả Window lẫn Mac.&lt;/p&gt;
&lt;h2 id=&quot;hình-ảnh-có-cần-phải-responsive-hay-không&quot;&gt;&lt;a href=&quot;#h%C3%ACnh-%E1%BA%A3nh-c%C3%B3-c%E1%BA%A7n-ph%E1%BA%A3i-responsive-hay-kh%C3%B4ng&quot; aria-label=&quot;hình ảnh có cần phải responsive hay không permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Hình ảnh có cần phải responsive hay không?&lt;/h2&gt;
&lt;p&gt;Nếu bạn nghĩ, trang web của bạn không cần thiết phải hiển thị hình ảnh responsive đến cho người dùng thì cái này là hoàn toàn sai nhé.&lt;/p&gt;
&lt;p&gt;Hiện tại tỉ lệ user dùng mobile càng ngày càng tăng lên. Nếu họ dùng wifi để kết nối đến thì không vấn đề gì. Nhưng đa số thời gian họ ở bên ngoài và dùng 3G, 4G để lướt web.&lt;/p&gt;
&lt;p&gt;Khi đó tốc độ mạng cũng như băng thông sẽ bị hạn chế. Nếu phải load hình ảnh nặng thì UX sẽ không tốt. Do vậy việc cung cấp 1 hình ảnh nhẹ hơn trên mobile là 1 điều cần thiết.&lt;/p&gt;
&lt;p&gt;Hiện tại đa số các hệ thống CMS như wordpress đều support responsive cho image.&lt;/p&gt;
&lt;p&gt;Để hiểu sâu hơn về tính responsive trong image, các bạn có thể tham khảo &lt;a href=&quot;http://woutervanderzee.nl/artikelen/responsive-images-srcset-sizes/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;bài viết này&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id=&quot;kết-luận&quot;&gt;&lt;a href=&quot;#k%E1%BA%BFt-lu%E1%BA%ADn&quot; aria-label=&quot;kết luận permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Kết luận&lt;/h2&gt;
&lt;p&gt;Nếu xử lý hình ảnh trong website 1 cách cẩu thả sẽ là nguyên nhân chính gây phá hoại trải nghiệm người dùng, và có thể làm cho công ty của bạn mất tiền do nó ảnh hưởng tiêu cực đến hiệu suất.&lt;/p&gt;
&lt;p&gt;Thật may mắn có rất nhiều công cụ, kĩ thuật giúp desinger làm được điều này.&lt;/p&gt;
&lt;p&gt;Nếu các bạn có lời khuyên nào cho việc xử lý hình ảnh trên webiste thì hãy để lại lời nhắn ở phần comment bên dưới nhé.&lt;/p&gt;
&lt;p&gt;==============&lt;/p&gt;
&lt;p&gt;Để nhận thông báo khi có bài viết mới nhất thì các bạn có thể like fanpage của mình ở bên dưới nhé:&lt;/p&gt;
&lt;p&gt;👉👉👉 &lt;a href=&quot;https://www.facebook.com/669339543503374&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Nghệ thuật Coding Fanpage Facebook&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Chúc các bạn 1 tuần thật vui vẻ.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Các kĩ sư Grab thiết kế hệ thống "đàn hồi" sử dụng kĩ thuật Circuit Breaker như thế nào]]></title><link>https://nghethuatcoding.com2019/05/06/cac-ki-su-grab-da-thiet-ke-he-thong-dan-hoi-su-dung-circuit-breaker-nhu-the-nao/</link><guid isPermaLink="false">https://nghethuatcoding.com2019/05/06/cac-ki-su-grab-da-thiet-ke-he-thong-dan-hoi-su-dung-circuit-breaker-nhu-the-nao/</guid><pubDate>Sun, 05 May 2019 22:00:56 GMT</pubDate><content:encoded>&lt;p&gt;1 hệ thống cũng giống như thời tiết xấu vậy. Nó không thể đoán trước và cũng không thể tránh khỏi. Và điều quan trọng nhất đối với 1 software engineer là lập kế hoạch và giải quyết các vấn đề lỗi đó.&lt;/p&gt;
&lt;p&gt;Trong bài viết này, mình sẽ giới thiệu cho các bạn 1 kĩ thuật có độ tin tưởng khá cao, hạn chế gây ra lỗi hệ thống mà các kĩ sư Grab đang dùng. Đó là &lt;strong&gt;Circuit Breaker&lt;/strong&gt; (Dịch sang tiếng việt nghĩa là bộ ngắt mạch, mình thì hay gọi nó là cái cầu giao).&lt;/p&gt;
&lt;p&gt;Hiện tại, Grab đang sử dụng cơ chế &lt;strong&gt;Circuit Breaker&lt;/strong&gt; trong toàn bộ hệ thống của họ. Để đảm bảo rằng khi có sự cố xảy ra đi chăng nữa thì &lt;strong&gt;service vẫn không bị chết&lt;/strong&gt;, và &lt;strong&gt;vẫn tiếp tục phục vụ request của người dùng&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Đây có lẽ là điều mà nhiều engineer đang muốn biết phải không nào?&lt;/p&gt;
&lt;p&gt;Vậy hãy cùng đi xem cơ chế **Circuit Breaker **là gì? Và nó được áp dụng trong hệ thống của Grab như thế nào nhé.&lt;/p&gt;
&lt;h2 id=&quot;nguyên-nhân-gây-ra-lỗi-hệ-thống&quot;&gt;&lt;a href=&quot;#nguy%C3%AAn-nh%C3%A2n-g%C3%A2y-ra-l%E1%BB%97i-h%E1%BB%87-th%E1%BB%91ng&quot; aria-label=&quot;nguyên nhân gây ra lỗi hệ thống permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Nguyên nhân gây ra lỗi hệ thống&lt;/h2&gt;
&lt;p&gt;Trước tiên chúng ta hãy thử xem xét đâu là nguyên nhân thường xuyên gây ra lỗi nhé.&lt;/p&gt;
&lt;p&gt;Do service hay phải truyền thông với các tài nguyên bên ngoài, nên về cơ bản, thì lỗi có thể là do:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Vấn đề về mạng&lt;/li&gt;
&lt;li&gt;Quá tải hệ thống&lt;/li&gt;
&lt;li&gt;Cạn kiệt tài nguyên (ví dụ như out of memory …)&lt;/li&gt;
&lt;li&gt;Cấu hình, deploy lỗi&lt;/li&gt;
&lt;li&gt;Bad request (ví dụ như missing request data …)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Vậy khi có lỗi xảy ra, làm thế nào để tiếp tục xử lý được request thì chúng ta xem tiếp phần tiếp theo nhé.&lt;/p&gt;
&lt;h2 id=&quot;circuit-breaker-là-gì&quot;&gt;&lt;a href=&quot;#circuit-breaker-l%C3%A0-g%C3%AC&quot; aria-label=&quot;circuit breaker là gì permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Circuit Breaker là gì?&lt;/h2&gt;
&lt;p&gt;Điện nhà bạn đã bao giờ tự nhiên đang dùng thì bị ngắt cầu giao chưa? Ví dụ như vừa bật nồi lẩu, vừa cắm nồi cơm, vừa bật máy giặt thì quá tải, &lt;strong&gt;cầu giao bị ngắt&lt;/strong&gt;. Và cả nhà tối om như mực.&lt;/p&gt;
&lt;p&gt;Thế nhưng điều đó ít nhiều vẫn còn an toàn hơn việc nhà không có cầu giao. Nếu không có cầu giao thì điều gì sẽ xảy ra?&lt;/p&gt;
&lt;p&gt;Dùng quá tải, không có bộ phận ngắt điện kịp thời sẽ đẫn đến cháy nổ ở bộ phận nào đó trong nhà, gây chập điện… Khá là nguy hiểm.&lt;/p&gt;
&lt;p&gt;Cơ chế **Circuit Breaker **mà Grab áp dụng trong hệ thống cũng hoạt động theo cách tương tự.&lt;/p&gt;
&lt;p&gt;**Circuit Breaker **sẽ nằm giữa 2 đoạn code, và theo dõi luồng dữ liệu chảy qua nó. Tuy nhiên thay vì ngắt điện khi có sự cố, thì nó sẽ block request lại.&lt;/p&gt;
&lt;p&gt;Để dễ hiểu hơn, các bạn có thể xem hình bên dưới:&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 854px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/90ab0b927ce989cb86c886cd1da94637/4b160/circuit-breaker.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 65.22248243559719%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAAByUlEQVQoz31SbY/TMAzu//8/9wUJEBJIcLvT2AFbd13Xt/Rta9qmadI0bWPc7dhu6MB6IllOHvuxY8ul8DWCRWzuiVnEsCCADuIhgY82c3MBAMbAm2bl0jzXxmUzdug0sD+DwbYcjmK8PDWnHNM0mT/JrEqDV8iHn/77b89PYe2k1efH7d2n1XfvmPbAtLnQPHK8+3D/7suay/4sx6IKfDZsYrbcF26pA6Y3CVt6hVuoSELdm4tqxqVPMpJXeniRY9HOkA48Kt1j6xXcp8I5cL9SiYRIYOWbJjmX4zhde6bKEAlO3iJIO5HWrKNymzC/GfZVn9airqq+1/3peFHeiu4V+VR5m3E75UkHcQd22jgHkSgIuKmUAXMt5cVFw4Uxk9aDUsoqOoOETdKs4wYdVPuLMDtrUzXLLrtx0D1KRcPmd8GBNaKktCzLKxmZyEFC2sHSo4+7HCfn1drPaBj4+G4YBjONK5uUdatUhzbLnskKnqJ64Ry2PnHCBMk/IoZZQj6x/mY/aN32+vrzMxl73mTtKqxiATiwoBn3tcYpBu35q/5pFl6nAjJpMjllHSBSiZEpk4DxRt+Q/9pTC+YtmKOXpTtHXvBf+w0I6OURd5AqigAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/90ab0b927ce989cb86c886cd1da94637/01472/circuit-breaker.webp 240w,
/static/90ab0b927ce989cb86c886cd1da94637/222bd/circuit-breaker.webp 480w,
/static/90ab0b927ce989cb86c886cd1da94637/956e0/circuit-breaker.webp 854w&quot;
          sizes=&quot;(max-width: 854px) 100vw, 854px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/90ab0b927ce989cb86c886cd1da94637/0783d/circuit-breaker.png 240w,
/static/90ab0b927ce989cb86c886cd1da94637/782f4/circuit-breaker.png 480w,
/static/90ab0b927ce989cb86c886cd1da94637/4b160/circuit-breaker.png 854w&quot;
          sizes=&quot;(max-width: 854px) 100vw, 854px&quot;
          type=&quot;image/png&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/90ab0b927ce989cb86c886cd1da94637/4b160/circuit-breaker.png&quot;
          alt=&quot;circuit breaker&quot;
          title=&quot;circuit breaker&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Đầu tiên, ”&lt;strong&gt;Main&lt;/strong&gt;” (để dễ hiểu có thể coi nó như người dùng) sẽ call đến &lt;strong&gt;Circuit Breaker&lt;/strong&gt; (cái này cũng nằm trong code của service). Sau đó từ &lt;strong&gt;Circuit Breaker&lt;/strong&gt; sẽ gửi 1 request đến &lt;strong&gt;Upstream Service&lt;/strong&gt; (Có thể hiểu nó như là 1 api server).&lt;/p&gt;
&lt;p&gt;Khi đó &lt;strong&gt;Upstream Service&lt;/strong&gt; sẽ xử lí request và trả về response đến &lt;strong&gt;Circuit Breaker&lt;/strong&gt;. Nếu response đó không có lỗi gì thì sẽ được trả lại ngay “Main”.&lt;/p&gt;
&lt;p&gt;Điều gì xảy ra nếu như &lt;strong&gt;Upstream Service&lt;/strong&gt; bị lỗi?&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 854px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/e53ca209be52d8ed1225858206103ea2/4b160/circuit-breaker-error.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 65.22248243559719%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAAByUlEQVQoz31SbW+bMBDm//+fftiHbZq0SlvTKn3ZEtLwGgyGAAFjbMCAb+ekTdpp6+ksPTr7OT/3Yrkl/IhgEesbohcxLAggQL9N4KvN3EwAgNbwT7MyqZ9r7TLjDoIGvJMz2BzGXEznp/qYY55n/ZrMqhT4hbz9FXz++fy4qx1afb+zr7493vs5HYApfab5JL/6cvPpesXlcJJjlT0EbFzHbOkV7kGFTK0TtvQLt+gjCfWgz6oZlwFJSVap8UWOVXaadOCX0s1bv+BBKbZ7HlR9IiES+PO7IjmX0zRfai57TSRssxadtDNp9So6bBIWNKNXDbQWdVUNgxqOx4+yVnRvyMefNym3KU86iDuwabPdC8Qh11U3a+zQ62s/LhoupmnEVH3fW0WnDSFpVnGDIJbwmzA7bWlvZGPNep6wv9Nk6nR2+7oRnRRoFzIykZMOgJylX945WchQtooKlqZUKTWOI0p4sElZcTOwYxMNOenhKaoXTu7RPMzK++DwFDHawY7Pda/fLklZt4O6TN6QseZ12j7sqlgANixsJq9W2MWwPY3qv2bhNRWQSp3KOe0QAJUYmQ0Q0Kh35L/21AKzBSZ6XrpT5MU/tD+36+W6n6UH+wAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/e53ca209be52d8ed1225858206103ea2/01472/circuit-breaker-error.webp 240w,
/static/e53ca209be52d8ed1225858206103ea2/222bd/circuit-breaker-error.webp 480w,
/static/e53ca209be52d8ed1225858206103ea2/956e0/circuit-breaker-error.webp 854w&quot;
          sizes=&quot;(max-width: 854px) 100vw, 854px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/e53ca209be52d8ed1225858206103ea2/0783d/circuit-breaker-error.png 240w,
/static/e53ca209be52d8ed1225858206103ea2/782f4/circuit-breaker-error.png 480w,
/static/e53ca209be52d8ed1225858206103ea2/4b160/circuit-breaker-error.png 854w&quot;
          sizes=&quot;(max-width: 854px) 100vw, 854px&quot;
          type=&quot;image/png&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/e53ca209be52d8ed1225858206103ea2/4b160/circuit-breaker-error.png&quot;
          alt=&quot;circuit breaker error&quot;
          title=&quot;circuit breaker error&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Nếu có lỗi xảy ra phía &lt;strong&gt;Upstream Service **thì nó sẽ trả về lỗi cho **Circuit Breaker, **và **Circuit Breaker **sẽ trả lại lỗi cho **Main.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Nhìn vào đây chắc hẳn các bạn cũng đang nghĩ: cho thằng &lt;strong&gt;Circuit Breaker&lt;/strong&gt; vào giữa này chưa thấy có ưu điểm gì?&lt;/p&gt;
&lt;p&gt;Vậy để mình giải thích nhé.&lt;/p&gt;
&lt;p&gt;Giả sử như có 1000 request gửi đến &lt;strong&gt;Circuit Breaker **và nó đang nhận được cả 1000 response lỗi từ **Upstream Service&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;**Circuit Breaker **sẽ ở giữa monitor những request đó và tracking xem có bao nhiêu request thành công và bao nhiêu request thất bại.&lt;/p&gt;
&lt;p&gt;Nếu như số lượng request thất bại vượt qúa số lượng cho phép, khi đó nó sẽ phán đoán &lt;strong&gt;Upstream Service&lt;/strong&gt; đang có vấn đề. Và nó sẽ ngắt mạch lại. Không cho request chảy sang bên &lt;strong&gt;Upstream Service&lt;/strong&gt; nữa.&lt;/p&gt;
&lt;p&gt;Ở trong trạng thái đó mà có gửi request sang đi chăng nữa thì response bạn nhận được cũng bị timeout hoặc lại càng làm cho &lt;strong&gt;Upstream Service&lt;/strong&gt; “gánh tạ” nhiều hơn mà thôi.&lt;/p&gt;
&lt;p&gt;Và flow bây giờ sẽ thành thế này:&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 745px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/af5595aca26a497461511400cda55f7c/6b5c3/cb-circuit-open.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 74.76510067114094%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsSAAALEgHS3X78AAAB0UlEQVQoz5WSfa+aMBTG/f7fZ9n+usvclqnRbXp9AwV5R0AspVQplp57qmQmmt1lJ09OTtvzo31aevYRvrlqGMAggB8oXw3udaeBrz5Ok21SAYBSoLNO0NtzWB5hTZRJwSiUQbDGAnCoZ0inWSKS6nKFb6Aue7QBjzZWTH9v4omZOETYaflq7YdL/5edJTVEXMUniE5QNhooytNstRtNN6ab9YgAi4jFLnsZGZ9/uptDvfQO/bHx4cusP/PiGvxKBRy8Cgqh4fTIvo5Xn/rTySrskVrhAnZss8qlTcBkdMahDKoLkojdhD1UdAdu21ZKqT0fa+Vz8JlcuumOiG2U2wf+6qRmXLglfkI9w0g2TXOHPdbOnSzgWOvuzZ6tQ+LQi3WsbSLC0+POD7CcWunNHrYaMVtHNKrBK2rTT9yce/wduJQTc6/hSoVnWIblIqBoHo1YGQur9t2dSzlcx/6VjAXMAzoyIqcQu6JBR88X9gh/n4eYg7yMmRhvs5GZ3G4bXfwLZu3LZGfsqRWmXl6tE24kHI/9t6fq4LxWDtNri7j0KuXjI5/AZdIpJU7+EfaQZxh/2MMZ8hqlMB/OmFV2blHXyU7Ywy8drK6hYbiHgv+MN+rwUJitrJXRAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/af5595aca26a497461511400cda55f7c/01472/cb-circuit-open.webp 240w,
/static/af5595aca26a497461511400cda55f7c/222bd/cb-circuit-open.webp 480w,
/static/af5595aca26a497461511400cda55f7c/13774/cb-circuit-open.webp 745w&quot;
          sizes=&quot;(max-width: 745px) 100vw, 745px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/af5595aca26a497461511400cda55f7c/0783d/cb-circuit-open.png 240w,
/static/af5595aca26a497461511400cda55f7c/782f4/cb-circuit-open.png 480w,
/static/af5595aca26a497461511400cda55f7c/6b5c3/cb-circuit-open.png 745w&quot;
          sizes=&quot;(max-width: 745px) 100vw, 745px&quot;
          type=&quot;image/png&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/af5595aca26a497461511400cda55f7c/6b5c3/cb-circuit-open.png&quot;
          alt=&quot;circuit breaker open&quot;
          title=&quot;circuit breaker open&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Đến đây chắc các bạn cũng hình dung được phần nào ý nghĩa của thằng **Circuit Breaker **đúng không ak?&lt;/p&gt;
&lt;p&gt;Nhưng mà cũng có người đang thắc mắc, nếu cứ trả về lỗi như thế thì nó không có ý nghĩa gì cho người dùng lắm.&lt;/p&gt;
&lt;p&gt;Ví dụ như mình muốn tìm kiếm xem từ điểm A đến điểm B sẽ đi mất bao lâu. Nhưng mà server của Grab lại toàn trả về lỗi. Khi đó bạn có suy nghĩ gì về trải nghiệm người dùng? Chắc chắn là không tốt rồi.&lt;/p&gt;
&lt;p&gt;Chúng ta cùng đi xem tiếp xem Grab đã xử lý trường hợp này như thế nào nhé?&lt;/p&gt;
&lt;h2 id=&quot;fallback-processing-xử-lý-dự-phòng&quot;&gt;&lt;a href=&quot;#fallback-processing-x%E1%BB%AD-l%C3%BD-d%E1%BB%B1-ph%C3%B2ng&quot; aria-label=&quot;fallback processing xử lý dự phòng permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Fallback processing (xử lý dự phòng)&lt;/h2&gt;
&lt;p&gt;Để giải quyết bài toán này, &lt;strong&gt;Circuit Breaker **đã định nghĩa ra 1 tính năng gọi là **Fallback processing&lt;/strong&gt;. Chúng ta cùng đi xem flow bên dưới xem nó hoạt động thế nào nhé.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 745px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/3b6ba56ed40d2dd5b1b28e30b2e348e8/6b5c3/circuit-breaker-open-fallback.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 97.18120805369128%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAIAAAAf7rriAAAACXBIWXMAAAsSAAALEgHS3X78AAACKklEQVQ4y4WT23KiQBCGff/32Yvdi9RWYiqJZtV4QBTlNBxEdMBxgEFgehvIZo052NUFzUx93X/PNB2DQteSTw48OvCATurgPO7q4tc4oLwAACmhtfbd2SSgUFAjuTzAIpaLGGMMAD/rlQhUWk23Oc+rV+YtAcjO4QT24bT245Hm/1kGZnTSAzbRN08zMjJ2gQAvlX4Gedkykh6SF0Xvvaw0O+xEOehRPjPDm/7y99DWdkKxwtvnxY/bSXdKfAGES5KA+AcHe3bXm/28mwxUr0NxOwEnkaswIbxyUvAEOGnpJGVD4hacwbVVVVWWZd0zFXVi+1jO7VCn2dLdmjRV3WgdckzkJJ/ASBZFcQYzhPdY300kJlLIbuHGeiTW+wybQl4U7ypfwlMzdBqRbgbrLV8FR9RPYqGRwKSJKOE7eGxsX+EUFj6bu7HFCoOKWj+XFz1fwqP1Fg+2hVWPDVcbcqwsVraLV+CBFrzCGSgum9jUOpbGoWiP7UrP/aXfwl4GM+eAjutmJBTDIex0peee2sBcIjwh8diKUIJF05mmm3suqreJ/gBjbw+KhzCesJ/D2I4f564Zn9Z7geJR+bls2dg7+H7q2axQLc/cs/4qHBp0k0Nz85dD8mb/Zd8MzMWGacS3aTKyIvR2sJ1v4Eg026y6n7kOr1Az9ow3jCq8FLCs20zoV5XBPNY/AN6KxaVdO5isQsegdYtD9imcl3A8AUcvmucXXlYfWfgL0FU1tH/dynkAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/3b6ba56ed40d2dd5b1b28e30b2e348e8/01472/circuit-breaker-open-fallback.webp 240w,
/static/3b6ba56ed40d2dd5b1b28e30b2e348e8/222bd/circuit-breaker-open-fallback.webp 480w,
/static/3b6ba56ed40d2dd5b1b28e30b2e348e8/13774/circuit-breaker-open-fallback.webp 745w&quot;
          sizes=&quot;(max-width: 745px) 100vw, 745px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/3b6ba56ed40d2dd5b1b28e30b2e348e8/0783d/circuit-breaker-open-fallback.png 240w,
/static/3b6ba56ed40d2dd5b1b28e30b2e348e8/782f4/circuit-breaker-open-fallback.png 480w,
/static/3b6ba56ed40d2dd5b1b28e30b2e348e8/6b5c3/circuit-breaker-open-fallback.png 745w&quot;
          sizes=&quot;(max-width: 745px) 100vw, 745px&quot;
          type=&quot;image/png&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/3b6ba56ed40d2dd5b1b28e30b2e348e8/6b5c3/circuit-breaker-open-fallback.png&quot;
          alt=&quot;circuit breaker open fallback&quot;
          title=&quot;circuit breaker open fallback&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Giả sử như các bạn đang xây dựng 1 chương trình tính khoảng cách giữa 2 điểm. Chúng ta gọi service đó là “distance calculator service”.&lt;/p&gt;
&lt;p&gt;Nếu như service hoạt động bình thường, khi đó nó sẽ trả về cho chúng ta khoảng cách giữa 2 điểm.&lt;/p&gt;
&lt;p&gt;Tuy nhiên, nếu “distance calculator service” đang quá tải, không thể xử lý thêm request.&lt;/p&gt;
&lt;p&gt;Khi đó, &lt;strong&gt;Circuit Breaker **sẽ thực hiện **fallback processing&lt;/strong&gt; request của người dùng và thực hiện tính toán thay cho “distance calculator service” bằng việc sử dụng hàm lượng giác tính toán đơn giản.&lt;/p&gt;
&lt;p&gt;Đương nhiên là tính toán khoảng cách sử dụng cách này sẽ &lt;strong&gt;không cho kết quả chính xác&lt;/strong&gt;. Nhưng bằng cách này đã giúp Grab xử lý yêu cẩu của khách hàng tốt hơn rất nhiều so với việc không trả về kết quả gì.&lt;/p&gt;
&lt;p&gt;Trong hình thức &lt;strong&gt;fallback processing&lt;/strong&gt;, thì ví dụ mình đưa ra bên trên chỉ là 1 cách thôi. Ngoài ra còn 1 số cách khác nữa. Ví dụ như:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Retries request đến 1 con upstream service khác&lt;/li&gt;
&lt;li&gt;Lưu request đó vào queue và sẽ xử lý lại vào thời gian khác.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Tuy nhiên, có 1 số trường hợp thì sử dụng **fallback processing **vẫn không hợp lý. Nhưng ít nhiều trong những hoàn cảnh như này, thì việc sử dụng 1 **Circuit Breaker **vẫn là có lợi.&lt;/p&gt;
&lt;h2 id=&quot;circuit-breaker-có-nên-tracking-mọi-error&quot;&gt;&lt;a href=&quot;#circuit-breaker-c%C3%B3-n%C3%AAn-tracking-m%E1%BB%8Di-error&quot; aria-label=&quot;circuit breaker có nên tracking mọi error permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Circuit Breaker có nên tracking mọi error?&lt;/h2&gt;
&lt;p&gt;Câu trả lời ngắn gọn là không.&lt;/p&gt;
&lt;p&gt;Grab chỉ tracking những lỗi không phải do người dùng, mà do phía infrastructure hoặc network (Ví dụ với HTTP error code là 503 hoặc 500).&lt;/p&gt;
&lt;p&gt;(Lỗi người dùng là lỗi thế nào? Chủ yếu là lỗi có HTTP error code là 400 hoặc 401.)&lt;/p&gt;
&lt;p&gt;Lí do mà Grab không tracking lỗi do người dùng là do nếu như có phần tử hacker nào đó. Họ cố tình gửi thật nhiều request lỗi (ví dụ request thiếu parameter) đến **Circuit Breaker. **Khi đó **Circuit Breaker **sẽ tự động ngắt mạch kết nối đến Upstream Service, và dẫn đến service bị down và không xử lý request của người khác được nữa.&lt;/p&gt;
&lt;h2 id=&quot;phục-hồi-circuit-breaker-như-thế-nào&quot;&gt;&lt;a href=&quot;#ph%E1%BB%A5c-h%E1%BB%93i-circuit-breaker-nh%C6%B0-th%E1%BA%BF-n%C3%A0o&quot; aria-label=&quot;phục hồi circuit breaker như thế nào permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Phục hồi Circuit Breaker như thế nào?&lt;/h2&gt;
&lt;p&gt;Sau khi **Circuit Breaker **đã ngắt mạch kết nối để không gửi request đến Upstream Service nữa. Vậy khi nào **Circuit Breaker **sẽ thực hiện đóng mạch lại và tiếp tục gửi request đến Upstream Service?&lt;/p&gt;
&lt;p&gt;Câu trả lời rất đơn giản. Nó sẽ đợi sau 1 thời gian nào đó (ví dụ như 1 phút), Grab gọi nó là **Sleep Window. **&lt;/p&gt;
&lt;p&gt;Rồi sẽ test lại mạch bằng cách gửi 1 vài request nào đó đến Upstream Service. Nếu như nhận được response OK, khi đó nó sẽ tiến hành đóng mạch và cho hệ thống hoạt động như bình thường.&lt;/p&gt;
&lt;p&gt;Nếu như vẫn bị lỗi, thì nó lại tiếp tục lặp lại quá trình trên cho đến khi ok thì thôi.&lt;/p&gt;
&lt;h2 id=&quot;bulwark-tường-thành&quot;&gt;&lt;a href=&quot;#bulwark-t%C6%B0%E1%BB%9Dng-th%C3%A0nh&quot; aria-label=&quot;bulwark tường thành permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Bulwark (tường thành)&lt;/h2&gt;
&lt;p&gt;Grab đang sử dụng 1 thư viện có tên là &lt;a href=&quot;https://godoc.org/github.com/afex/hystrix-go/hystrix&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt; Hystrix-Go&lt;/a&gt; để implement thằng &lt;strong&gt;Circuit Breaker. **Và trong thư viện này có bao gồm 1 chức năng khá quan trọng đó là **Bulwark&lt;/strong&gt; (bức tường thành).&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Bulwark **có nhiệm vụ sẽ monitor toàn bộ các **request đến đồng thời&lt;/strong&gt; được gửi đến **Circuit Breaker **và nó sẽ block nếu như số lượng request đồng thời vượt quá số lượng cho phép.&lt;/p&gt;
&lt;p&gt;Hình thức này người ta hay gọi là &lt;strong&gt;rate-limiting&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Tại sao nó quan trọng? Như mình đã nói ở trên, 1 trong những lý do khiến service của bạn bị down đó là do nhận quá nhiều request cùng 1 lúc.&lt;/p&gt;
&lt;p&gt;Chẳng hạn như service của bạn chỉ xử lý được 1000 request đồng thời. Nếu như có hacker nào đó thực hiện DDos service của bạn bằng cách gửi 1 triệu request cùng 1 lúc đến server của bạn. Mình khẳng định service của bạn sẽ bị down và ko thể làm việc tiếp được.&lt;/p&gt;
&lt;p&gt;Đó là lí do tại sao mà &lt;strong&gt;Bulwark&lt;/strong&gt; đã được tích hợp vào &lt;a href=&quot;https://godoc.org/github.com/afex/hystrix-go/hystrix&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt; Hystrix-Go.&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;implement-circuit-breaker&quot;&gt;&lt;a href=&quot;#implement-circuit-breaker&quot; aria-label=&quot;implement circuit breaker permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Implement Circuit Breaker&lt;/h2&gt;
&lt;p&gt;Hiện tại Grab đang sử dụng &lt;a href=&quot;https://godoc.org/github.com/afex/hystrix-go/hystrix&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt; Hystrix-Go&lt;/a&gt; để implement thằng **Circuit Breaker. **Và thằng Hystrix-Go này có 1 vài setting chính mà mọi người nên để ý:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1. Timeout&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Là khoảng thời gian tối đa thực hiện request.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2. Max Concurrent Requests (số request đồng thời lớn nhất)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Đây chính là phần &lt;strong&gt;Bulwark&lt;/strong&gt; mà mình đã đề cập ở bên trên.&lt;/p&gt;
&lt;p&gt;Giá trị mặc định của nó là 10. Nhưng chú ý là hằng số này không phải biểu thị “per second” đâu nhé. Vì có thể số request đồng thời nó gửi quá nhanh, chỉ tính bằng mili second chẳng hạn.&lt;/p&gt;
&lt;p&gt;Nếu giá trị này quá lớn sẽ khiến service của bạn ko đủ tài nguyên để xử lý.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;3. Sleep Window&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Đây là khoảng thời gian mà &lt;strong&gt;Circuit Breaker&lt;/strong&gt; sẽ đợi trước khi nó gửi request đến Upstream Service để check xem đã hoạt động bình thường hay chưa.&lt;/p&gt;
&lt;p&gt;Nếu cái này đặt quá thấp sẽ không có hiệu quả vì **Circuit Breaker **sẽ phải open/check thường xuyên. Còn nếu nó đặt quá cao thì sẽ hạn chế thời gian phục hồi.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;4. Error Percent Threshold&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Đây là giá trị biểu thị tỉ lệ phần trăm số request thất bại trước khi bị ngắt mạch.&lt;/p&gt;
&lt;p&gt;Và còn rất nhiều các setting nữa, các bạn tự tìm hiểu ở trên trang chủ Hystricx-Go nhé.&lt;/p&gt;
&lt;h2 id=&quot;kết-luận&quot;&gt;&lt;a href=&quot;#k%E1%BA%BFt-lu%E1%BA%ADn&quot; aria-label=&quot;kết luận permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Kết luận&lt;/h2&gt;
&lt;p&gt;Đến đây chắc các bạn cũng biết được cách xây dựng 1 **Circuit Breaker **là như nào, và nó có tác dụng gì cho hệ thống.&lt;/p&gt;
&lt;p&gt;Xây dựng xong hệ thống là 1 chuyện, nhưng để hệ thống ”&lt;strong&gt;không chết&lt;/strong&gt;” là 1 chuyện hoàn toàn khác.&lt;/p&gt;
&lt;p&gt;Hi vọng qua bài này sẽ cung cấp cho các bạn chút solution trong việc thiết kế hệ thống có tính availability cao.&lt;/p&gt;
&lt;p&gt;==============&lt;/p&gt;
&lt;p&gt;Để nhận thông báo khi có bài viết mới nhất thì các bạn có thể like fanpage của mình ở bên dưới nhé:&lt;/p&gt;
&lt;p&gt;👉👉👉 &lt;a href=&quot;https://www.facebook.com/669339543503374&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Nghệ thuật Coding Fanpage Facebook&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Chúc các bạn 1 tuần thật vui vẻ.&lt;/p&gt;
&lt;p&gt;Nguồn: &lt;a href=&quot;https://engineering.grab.com/designing-resilient-systems-part-1&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;https://engineering.grab.com/designing-resilient-systems-part-1&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Các kĩ sư Eureka đã tối ưu ứng dụng chat sử dụng gRPC như thế nào]]></title><link>https://nghethuatcoding.com2019/05/05/cac-ki-su-eureka-da-toi-uu-ung-dung-chat-su-dung-grpc-nhu-the-nao/</link><guid isPermaLink="false">https://nghethuatcoding.com2019/05/05/cac-ki-su-eureka-da-toi-uu-ung-dung-chat-su-dung-grpc-nhu-the-nao/</guid><pubDate>Sun, 05 May 2019 00:00:53 GMT</pubDate><content:encoded>&lt;p&gt;Nói đến ứng dụng chat realtime, chắc ai cũng nghĩ ngay đến việc dùng thư viện hay service bên thứ 3 như websocket, Firebase RealTimeDatabase … phải không nào?&lt;/p&gt;
&lt;p&gt;Mỗi công nghệ sẽ có ưu điểm, nhược điểm riêng, mà quan trọng nhất phải phù hợp với hệ thống hiện tại.&lt;/p&gt;
&lt;p&gt;Vậy hãy cùng xem các kĩ sư Eureka tại sao chọn gRPC cho giải pháp của mình, và đã tối ưu nó như thế nào nhé.&lt;/p&gt;
&lt;p&gt;Trước khi đi vào phần chính cùng tìm hiểu xem Eureka là công ty như thế nào đã nhé.&lt;/p&gt;
&lt;h2 id=&quot;eureka-là-công-ty-như-thế-nào&quot;&gt;&lt;a href=&quot;#eureka-l%C3%A0-c%C3%B4ng-ty-nh%C6%B0-th%E1%BA%BF-n%C3%A0o&quot; aria-label=&quot;eureka là công ty như thế nào permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Eureka là công ty như thế nào&lt;/h2&gt;
&lt;p&gt;Công ty &lt;a href=&quot;https://eure.jp/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Eureka&lt;/a&gt; là công ty Nhật bản, được thành lập vào năm 2008, đến thời điểm hiện tại Eureka đã có 130 nhân viên.&lt;/p&gt;
&lt;p&gt;Eureka đang vận hành 1 service về tình yêu và dịch vụ kết hôn lớn nhất Nhật Bản có tên là &lt;a href=&quot;https://www.pairs.lv/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Pairs&lt;/a&gt; (Hay nói cách khác đây là 1 dịch vụ về hẹn hò thì đúng hơn).&lt;/p&gt;
&lt;p&gt;Chức năng chính trong Pairs thì có rất nhiều nhưng mình chỉ điểm qua 1 số điểm chính thôi nhé:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Người dùng sẽ vào website đó để đăng kí tài khoản (có thể đăng kí thông qua Facebook). Sau đó sẽ chọn ảnh bạn gái mà mình yêu thích và like.&lt;/li&gt;
&lt;li&gt;Nếu có cảm tình thì tiến hành nhắn tin hẹn hò.&lt;/li&gt;
&lt;li&gt;Ban đầu Pairs sẽ cho mỗi tài khoản 1 số lượng point nhất định. Nếu dùng hết sẽ phải nạp thêm point.&lt;/li&gt;
&lt;li&gt;Khi like hay nhắn tin thì bạn sẽ mất 1 phần point nào đó. Cứ 1 tin nhắn là 1 point chẳng hạn.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Điểm mà mình thích nhất ở Pairs đó là mặc dù mình đăng kí tài khoản thông qua Facebook. Nhưng Pairs sẽ luôn lựa chọn ảnh “bạn gái” mà không cùng Friend trên Facebook với mình (kể cả Friend của friend cũng không hiển thị ra luôn).&lt;/p&gt;
&lt;p&gt;Vào đó hẹn hò lén lút mà gặp phải bạn thân của vợ thì … Mà thôi nói đến đây các bạn tự hiểu. =))&lt;/p&gt;
&lt;p&gt;Vậy đến đây các bạn cũng hiểu đôi chút về Pairs của Eureka rồi phải không.&lt;/p&gt;
&lt;p&gt;Tiếp theo chúng ta đi vào vấn đề chính nhé.&lt;/p&gt;
&lt;h2 id=&quot;vấn-đề-đang-gặp-phải&quot;&gt;&lt;a href=&quot;#v%E1%BA%A5n-%C4%91%E1%BB%81-%C4%91ang-g%E1%BA%B7p-ph%E1%BA%A3i&quot; aria-label=&quot;vấn đề đang gặp phải permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Vấn đề đang gặp phải&lt;/h2&gt;
&lt;p&gt;Như mình giới thiệu ở trên, Pairs có 1 chức năng gọi là “chat hẹn hò”. Thế nhưng, hiện tại chức năng này đang thực hiện theo hình thức &lt;strong&gt;polling&lt;/strong&gt; (tức là cứ mấy giây sẽ request lên api server lấy dữ liệu 1 lần).&lt;/p&gt;
&lt;p&gt;Chính vì điều đó mà tin nhắn được gửi đến đối phương sẽ bị delay mất khoảng mấy giây. (Tức là sau khi A gửi tin nhắn cho B thì sau khoảng mấy giây tin nhắn mới hiển thị trên màn hình của B).&lt;/p&gt;
&lt;p&gt;Vì đây là app hẹn hò. Nếu tin nhắn mà bị delay nhiều như thế thì về UX không được thân thiện cho lắm. Nên Eureka quyết định cải thiện chức năng chat này.&lt;/p&gt;
&lt;h2 id=&quot;tại-sao-lại-chọn-grpc&quot;&gt;&lt;a href=&quot;#t%E1%BA%A1i-sao-l%E1%BA%A1i-ch%E1%BB%8Dn-grpc&quot; aria-label=&quot;tại sao lại chọn grpc permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Tại sao lại chọn gRPC?&lt;/h2&gt;
&lt;p&gt;Bài toán đã có, bước tiếp theo là tìm hướng giải quyết. Nói là tìm hướng giải quyết nhưng việc lựa chọn công nghê phù hợp quả thật là 1 vấn đề đau đầu.&lt;/p&gt;
&lt;p&gt;Ngoài gRPC ra thì còn có 1 số công nghệ khác nữa có thể giải quyết được bài toán này. Nói không xa đó chính là WebSocket đã có từ rất lâu đời.&lt;/p&gt;
&lt;p&gt;Hay 1 công nghệ mà message Facebook đang sử dụng đó là MQTT.&lt;/p&gt;
&lt;p&gt;1 số dịch vụ bên thứ 3 cung cấp cũng đang rất nổi tiếng như AWS AppSync, Firebase RealTimeDatabase cũng chuyên cung cấp giải pháp gửi nhận real time.&lt;/p&gt;
&lt;p&gt;Có rất nhiều thứ khác nữa, nhưng do mỗi thứ có ưu điểm nhược điểm riêng, cộng với việc công nghệ đó phải phù hợp với project hiện tại. Nên các kĩ sư Eureka quyết định chọn gRPC cho giải pháp lần này.&lt;/p&gt;
&lt;p&gt;Dưới đây là 1 số lí do:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Ngôn ngữ chính của các kĩ sư Eureka là Golang. Mà gRPC thì cũng đang support Golang.&lt;/li&gt;
&lt;li&gt;Trong 1 số ngôn ngữ mà Eureka đang sử dụng như go/java/swift thì gRPC có phương thức tự động sinh ra Document, Code dựa vào định nghĩa IDL.&lt;/li&gt;
&lt;li&gt;Trong vấn đề giao tiếp dạng stream (là chức năng mới của HTTP/2) đều có sample hay interface khá đầy đủ. Nên không cần để ý đến tầng communication cũng được.&lt;/li&gt;
&lt;li&gt;Pattern xung quanh interceptor cũng được trang bị rất đầy đủ nên việc implement cũng khá đơn giản.&lt;/li&gt;
&lt;li&gt;Chỉ cần xem ví dụ hay code của phần  &lt;a href=&quot;https://github.com/grpc-ecosystem/go-grpc-middleware&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;grpc-middleware&lt;/a&gt; là thể sử dụng được ngay nên khá tiện.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;implement-two-way-communication-bằng-grpc&quot;&gt;&lt;a href=&quot;#implement-two-way-communication-b%E1%BA%B1ng-grpc&quot; aria-label=&quot;implement two way communication bằng grpc permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Implement Two-way communication bằng gRPC&lt;/h2&gt;
&lt;p&gt;Trên proto, chỉ cần gắn stream vào trong request lẫn response là có thể sinh ra được interface dùng cho việc truyền thông Two-way ở phía client.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;rpc Chat(stream ChatRequest) returns (stream MessageResponse);&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Vì cách thực thi nó sẽ khác nhau với từng ngôn ngữ, nên để hiểu rõ hơn các bạn có thể xem qua tutorial ở đây nhé:  &lt;a href=&quot;https://grpc.io/docs/tutorials/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;gRPC tutorial&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;hướng-cải-thiện-tốc-độ&quot;&gt;&lt;a href=&quot;#h%C6%B0%E1%BB%9Bng-c%E1%BA%A3i-thi%E1%BB%87n-t%E1%BB%91c-%C4%91%E1%BB%99&quot; aria-label=&quot;hướng cải thiện tốc độ permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Hướng cải thiện tốc độ&lt;/h2&gt;
&lt;p&gt;Cấu trúc hệ thống hiện tại đang như sau:&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 620px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/40ac6bc66ea96986ea61039aa11b61e9/a5ed1/1c1b083e9604f2c95721cdae1726f3ae.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 77.90322580645162%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAIAAACZeshMAAAACXBIWXMAAAsSAAALEgHS3X78AAACLklEQVQoz21S227TQBD1r/OCCA8NIGhFIVLLRarEAw+0CJBaEAGp4qUqF1HjxLZ8i+31Jb6u12s7HGfbKE07to5XszNnzoxHWtywrut0VVen6j+lf7SJqk7UkITiaj1SEp+2bfXQuPAUkodGbJ1p517sM1q5kX+m/TzXf/22/uqR2XZtH9y1WmhokXGZzFu+f3pw//2jk8m31z/eDI4eXPgK/DKZDD/tPD55Pvy4M/r+quQUTtpUT7/u7X7Zk+q6DnuLNFu3Ajst0nk+j8uk6RrEAVOWzWmCN2PFSnBaZQlNJQimS2OUobEiz2vGFt0CpBWrgLzmXdstbpnNVc/CmqYBF6aSZZnjOKZpCrRsC05cMcaqqsJBDE9aH/JqmIICKOigCzlxHNu2rWlatDSIuiUZ0a7ripowJECI4FpRQwLwmmy4UMSyLEVRgIZhTKdTZAZBAAkbu3BN9qpn6AELXxrO8EAz8iEBQiAKvBCPYGlFs97zhoECybPZDDmyLAPR/6ZsaOYNxwUaBj2KeJ7HmwaVRZOoBiLgpew8zwkhCCIecSwnIEESz2lRFnmR5VlRlJzxhvGbP7n/z+BDbyD2MyLbSpAEWO+gilhb94JbHlZxQCNShhGdi76AIY3DMpa6ngRB9bPxy7vvto6V8YvTgztvB39cGX7gvcPh1ocng8OHu+P91W5vfx5tH4+kKxWdlxIjtNIq9bMAByriODWxGrFjRrab+qIS0E28WeL9B9WNg9sRRMM8AAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/40ac6bc66ea96986ea61039aa11b61e9/01472/1c1b083e9604f2c95721cdae1726f3ae.webp 240w,
/static/40ac6bc66ea96986ea61039aa11b61e9/222bd/1c1b083e9604f2c95721cdae1726f3ae.webp 480w,
/static/40ac6bc66ea96986ea61039aa11b61e9/5077d/1c1b083e9604f2c95721cdae1726f3ae.webp 620w&quot;
          sizes=&quot;(max-width: 620px) 100vw, 620px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/40ac6bc66ea96986ea61039aa11b61e9/0783d/1c1b083e9604f2c95721cdae1726f3ae.png 240w,
/static/40ac6bc66ea96986ea61039aa11b61e9/782f4/1c1b083e9604f2c95721cdae1726f3ae.png 480w,
/static/40ac6bc66ea96986ea61039aa11b61e9/a5ed1/1c1b083e9604f2c95721cdae1726f3ae.png 620w&quot;
          sizes=&quot;(max-width: 620px) 100vw, 620px&quot;
          type=&quot;image/png&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/40ac6bc66ea96986ea61039aa11b61e9/a5ed1/1c1b083e9604f2c95721cdae1726f3ae.png&quot;
          alt=&quot;Cấu trúc hệ thống hiện tại&quot;
          title=&quot;Cấu trúc hệ thống hiện tại&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Cấu trúc sau khi đưa gRPC vào sẽ được thay đổi như sau:&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 821px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/fca235c87474d973c93f662f4007e20d/4d248/99a9aa0ff64fce0bd2ce7a7296335a65.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 48.721071863580995%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsSAAALEgHS3X78AAABlUlEQVQoz3WRfU+jQBDG+f6f4zTqWU3UpJ45vcQ3WltCa1tRKALyVl62lLK7sNAuN4J/eEnvl81mZ2ee2SezQv0veZ57nrfwF3YDnGGPoqjehbDfP3ZWXhtI9nhf/Hmt3F5N/5wMzquqMkJr7+HoQOzcvN2N3dnF86+eMTjsdc7lboRjQbJGduCs03WapjPzpTcfWonzjiw10qFdxvBrNJ96ih6bXrpQfPUjccfOTFmomFGh5jUlNGugmBY0b12wnAVBgGKULtOSlbttc86/x7xZQLWpGGNlWRZFgTFGcey6boaztp43VV9i3vCpqapNA8i2220bgjgMQ03TYHhJkhBCILXjZUIJDBx2wzQAba7puu77Pgwc9DAXsEMpbVWfYmi/Wq0QQpD4Ms95TnJ4kGCyqTb1fxB+3B++BwYrGJgRtacD8eRRf7rTxKvZDaT9NDgbdU+li1v1ceK9XE6vh5bcGZ51J79jgoS+KS1p0nYykNU3hm/hXAnUkT2BmyVJBqY8sGS4sRNn5Ezhz/qGJNuTdZH9BR0EKTkCw5HsAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/fca235c87474d973c93f662f4007e20d/01472/99a9aa0ff64fce0bd2ce7a7296335a65.webp 240w,
/static/fca235c87474d973c93f662f4007e20d/222bd/99a9aa0ff64fce0bd2ce7a7296335a65.webp 480w,
/static/fca235c87474d973c93f662f4007e20d/55f62/99a9aa0ff64fce0bd2ce7a7296335a65.webp 821w&quot;
          sizes=&quot;(max-width: 821px) 100vw, 821px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/fca235c87474d973c93f662f4007e20d/0783d/99a9aa0ff64fce0bd2ce7a7296335a65.png 240w,
/static/fca235c87474d973c93f662f4007e20d/782f4/99a9aa0ff64fce0bd2ce7a7296335a65.png 480w,
/static/fca235c87474d973c93f662f4007e20d/4d248/99a9aa0ff64fce0bd2ce7a7296335a65.png 821w&quot;
          sizes=&quot;(max-width: 821px) 100vw, 821px&quot;
          type=&quot;image/png&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/fca235c87474d973c93f662f4007e20d/4d248/99a9aa0ff64fce0bd2ce7a7296335a65.png&quot;
          alt=&quot;Cấu trúc hệ thống sau khi đưa gRPC&quot;
          title=&quot;Cấu trúc hệ thống sau khi đưa gRPC&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Qua 2 cấu trúc bên trên, ta thấy sự khác nhau chủ yếu là ở phía receiver. Cụ thể như sau:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Vì đã thực hiện kết nối ngay từ đầu nên sẽ không mất cost kết nối HTTP nữa&lt;/li&gt;
&lt;li&gt;Việc kết nối đến mysql để lấy message thì bây giờ không cần nữa.&lt;/li&gt;
&lt;li&gt;Không tồn tại Polling.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Dựa vào cấu trúc như này sẽ thấy không còn sự delay của việc Polling nữa. Thay vào đó phía receiver có thể nhận được message ngay tức thì.&lt;/p&gt;
&lt;h2 id=&quot;cấu-trúc-toàn-thể-của-hệ-thống&quot;&gt;&lt;a href=&quot;#c%E1%BA%A5u-tr%C3%BAc-to%C3%A0n-th%E1%BB%83-c%E1%BB%A7a-h%E1%BB%87-th%E1%BB%91ng&quot; aria-label=&quot;cấu trúc toàn thể của hệ thống permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Cấu trúc toàn thể của hệ thống&lt;/h2&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 960px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/a6f6dcda674859a8b096c2c38cbee087/f4f98/184baa3e947151b5b9eee7a5c0b95b70.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 57.01754385964912%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAAB70lEQVQoz01SPW/TUBT1r2DjbzCyMPIbKiRmFiRGJBbGdkcsFaISElAxBISo2orKIJQoCcjKkLgNtnFiO07smNjvPb8vm2OHBq7edN8995xz7zU4L/EQWuv6OoSQZJORVcBKzhiljFVVtfvVulJtsRHHS9u+dByHECKlbFpUWtT15Zt958ntmiQAkSKfTqeu604mNt2k+8eDwwuvAaM6z4skTYGfTCarJN0sAzo6ibof+vdvim8vUcRLxlpyqdQmSz9+tc4HtihpA46iqCgKFFVtxItw3DcZJdbjO6uDu8jDVJIkeZ5DHee80lIKJoQw8JemKVSNx+M4jpECvqCMCuV+fp1evGiZy9FoZJrmcPidFJvzfmj+iBvZW8LlchkEARorpZChlMyC0HZnbrBA6/V6rduAfyn520/W8cmorpQBM8CAEDAMrNGtNa/q4Mu7+OhRzXNVQXYj8noRwvf9me+zkhlZlg0GA9D+W4YSSjDn/bPhvRt6fIaEFByOFosFnEMFRgCiv9MGM2YGfBSGq3S9mnuJeVT+ToYPb2XP91AEdVhEt9vt9XqWZQG/FWJAbRhGnvfr7PS00+mgoiiIbdtU1levnkaHD5qBtVe0O5KdRmO7CbjFIWEN25asLLH2n6535XjzeUAo3Q7yfyTiD+hiXNmJEWOFAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/a6f6dcda674859a8b096c2c38cbee087/01472/184baa3e947151b5b9eee7a5c0b95b70.webp 240w,
/static/a6f6dcda674859a8b096c2c38cbee087/222bd/184baa3e947151b5b9eee7a5c0b95b70.webp 480w,
/static/a6f6dcda674859a8b096c2c38cbee087/620b9/184baa3e947151b5b9eee7a5c0b95b70.webp 960w,
/static/a6f6dcda674859a8b096c2c38cbee087/0afbb/184baa3e947151b5b9eee7a5c0b95b70.webp 1140w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/a6f6dcda674859a8b096c2c38cbee087/0783d/184baa3e947151b5b9eee7a5c0b95b70.png 240w,
/static/a6f6dcda674859a8b096c2c38cbee087/782f4/184baa3e947151b5b9eee7a5c0b95b70.png 480w,
/static/a6f6dcda674859a8b096c2c38cbee087/f570d/184baa3e947151b5b9eee7a5c0b95b70.png 960w,
/static/a6f6dcda674859a8b096c2c38cbee087/f4f98/184baa3e947151b5b9eee7a5c0b95b70.png 1140w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/png&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/a6f6dcda674859a8b096c2c38cbee087/f570d/184baa3e947151b5b9eee7a5c0b95b70.png&quot;
          alt=&quot;Cấu trúc toàn thể của hệ thống&quot;
          title=&quot;Cấu trúc toàn thể của hệ thống&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Nhờ việc sử dụng RedisPubSub như là nơi giao tiếp giữa các server (mới và cũ) đã giúp cho người dùng có thể gửi và nhận message 1 cách tức thời.&lt;/p&gt;
&lt;h2 id=&quot;làm-thế-nào-để-release-an-toàn&quot;&gt;&lt;a href=&quot;#l%C3%A0m-th%E1%BA%BF-n%C3%A0o-%C4%91%E1%BB%83-release-an-to%C3%A0n&quot; aria-label=&quot;làm thế nào để release an toàn permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Làm thế nào để release an toàn?&lt;/h2&gt;
&lt;p&gt;Chức năng chat có thể nói là 1 trong những chức năng chính của hệ thống Pairs, nên việc có bug xảy ra có thể gây ảnh hưởng vô cùng lớn.&lt;/p&gt;
&lt;p&gt;Vì phạm vi ảnh hưởng vô cùng lớn nên khi có bất kì bug nào thì việc rollback, detect lỗi là điều vô cùng quan trọng.&lt;/p&gt;
&lt;p&gt;Trước khi release thì test code là điều đương nhiên phải làm. Thế nhưng để co hẹp phạm vi ảnh hưởng, Eureka đã nghĩ đến việc sẽ release chức năng chat mới này trên thiết bị Android trước. Sau khi chạy ổn định sẽ release tiếp trên iOS.&lt;/p&gt;
&lt;p&gt;Chính vì điều đó mà sơ đồ cấu trúc hệ thống ở bên trên mới có phần API cũ và API mới là như thế.&lt;/p&gt;
&lt;h2 id=&quot;cách-quản-lý-proto&quot;&gt;&lt;a href=&quot;#c%C3%A1ch-qu%E1%BA%A3n-l%C3%BD-proto&quot; aria-label=&quot;cách quản lý proto permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Cách quản lý proto&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;・Tách repository ra riêng&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;File proto sẽ không nằm trong repository của các platform (ios/android/serverside) mà sẽ nằm ra 1 repository riêng biệt. Và dùng git submodule để chèn nó vào trong các repository của platform.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;・Cách generate document và code&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;1 trong số những điểm mạnh của gRPC là có thể generate document và code 1 cách tự động nhờ sử dụng protoc.&lt;/p&gt;
&lt;p&gt;Hơn nữa chúng ta có thể dễ dàng viết command line Make để generate ra document và code như bên dưới:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;gen-doc:
 docker run --rm -v $(CURRENT_DIR):$(CURRENT_DIR) -w $(CURRENT_DIR) xxxx/protoc --doc_out=markdown,README.md:./ -I. *.proto&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Đây là ví dụ về sample Document và proto đã được sinh ra nhờ command line phía trên:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;message ChatRequest {
 string message_body = 1;
 string sticker_id = 2;
 string user_message_partner_id = 3;
}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Đúng quả là tiện thật.&lt;/p&gt;
&lt;h2 id=&quot;kết-quả-tối-ưu-tốc-độ-và-đo-hiệu-năng&quot;&gt;&lt;a href=&quot;#k%E1%BA%BFt-qu%E1%BA%A3-t%E1%BB%91i-%C6%B0u-t%E1%BB%91c-%C4%91%E1%BB%99-v%C3%A0-%C4%91o-hi%E1%BB%87u-n%C4%83ng&quot; aria-label=&quot;kết quả tối ưu tốc độ và đo hiệu năng permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Kết quả tối ưu tốc độ và đo hiệu năng&lt;/h2&gt;
&lt;p&gt;Với gRPC đang gặp phải 1 vấn đề là rất khó khăn trong việc đo hiệu năng.&lt;/p&gt;
&lt;p&gt;Thông thường, 1 request 1 response thì chỉ cần xem log nginx hay apache là có thể biết được request đó xử lý mất bao lâu, thời gian trung bình của latency là bao nhiêu.&lt;/p&gt;
&lt;p&gt;Thế nhưng với dòng stream của gRPC thì lại khác, tương ứng với 1 request thì có bao nhiêu response, và khi nào sẽ trả về. Dữ liệu khi nào xảy ra, khi nào đến … đều không thể biết được.&lt;/p&gt;
&lt;p&gt;Do đó nếu không cải thiện chỗ này thì khó có thể tính toán, đo đạc hiệu năng được.&lt;/p&gt;
&lt;p&gt;Chính vì vậy, Eureka đã lưu 3 giá trị metrics ở bên dưới vào StackDriver &amp;#x26; BigQuery và tiến hành đo đạc:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Thời gian (μs) lưu data đến database ở phía sender.&lt;/li&gt;
&lt;li&gt;Thời gian (μs) broadcast message đến gRPC server.&lt;/li&gt;
&lt;li&gt;Thời gian (μs) send message đến sender từ gRPC server.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Kết quả là tổng thời gian từ 1 -&gt; 3 chỉ mất dưới 0.2s nên việc tối ưu tốc độ lần này có thể coi là thành công.&lt;/p&gt;
&lt;p&gt;Ngoài ra nhờ có thể lấy được giá trị cụ thể này mà dễ dàng detect khi tổng thời gian vượt quá giá trị cho phép.&lt;/p&gt;
&lt;h2 id=&quot;sự-hạn-chế-về-mặt-infrastructure-monitoring-accesslog&quot;&gt;&lt;a href=&quot;#s%E1%BB%B1-h%E1%BA%A1n-ch%E1%BA%BF-v%E1%BB%81-m%E1%BA%B7t-infrastructure-monitoring-accesslog&quot; aria-label=&quot;sự hạn chế về mặt infrastructure monitoring accesslog permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Sự hạn chế về mặt infrastructure, monitoring, AccessLog&lt;/h2&gt;
&lt;p&gt;Về phương diện implement code thì không gặp nhiều khó khăn, thế nhưng về phương diện vận hành, monitoring server thì đang gặp rất nhiều vấn đề. Cần phải mapping lại các error code, các metrics thì mới có thể đo đạc đươc. Cụ thể như sau:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Việc monitoring RateBase trên ELB (4xx, 5xx) thì bây giờ phải chuyển sang monitoring Rate của từng con gRPC server với mã &lt;a href=&quot;https://github.com/grpc/grpc-go/blob/master/codes/codes.go&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;error codes&lt;/a&gt; khác&lt;/li&gt;
&lt;li&gt;Để đo đạc được latency trong giao tiếp stream thì cần phải lấy được giá trị về thời gian phát sinh dữ liệu (event), thời gian nhận dữ liệu, thời gian update dữ liệu.&lt;/li&gt;
&lt;li&gt;Về Logging của Send với Receive trong Stream thì hiện tại chưa support, do đó cần phải viết lại Wrapper cho thằng ServerStream.&lt;/li&gt;
&lt;li&gt;Phần giao tiếp với BackendTarget thì hiện tại AWS ALB chưa support HTTP2. TCPMode của AWS ELB cũng chưa support ALPN. Do đó hiện tại Eureka đang sử dụng NetworkLoadBalancer.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;kết-luận&quot;&gt;&lt;a href=&quot;#k%E1%BA%BFt-lu%E1%BA%ADn&quot; aria-label=&quot;kết luận permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Kết luận&lt;/h2&gt;
&lt;p&gt;Mặc dù việc vận hành gRPC còn có chút try hard, nhưng với case tạo API mà sử dụng micro framework, hay với những dòng stream sử dụng HTTP/2 thì gRPC rất thích hợp và dễ dùng, dễ implement.&lt;/p&gt;
&lt;p&gt;Nên nếu bạn nào đang có nhu cầu đưa gRPC vào hệ thống thì hi vọng bài viết này sẽ giúp các bạn 1 phần nào đó.&lt;/p&gt;
&lt;p&gt;==============&lt;/p&gt;
&lt;p&gt;Để nhận thông báo khi có bài viết mới nhất thì các bạn có thể like fanpage của mình ở bên dưới nhé:&lt;/p&gt;
&lt;p&gt;👉👉👉 &lt;a href=&quot;https://www.facebook.com/669339543503374&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Nghệ thuật Coding Fanpage Facebook&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Chúc các bạn 1 tuần thật vui vẻ.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Các kĩ sư ZOZO đã tạo ứng dụng Survey realtime xử lý 1000 người đồng thời như thế nào]]></title><link>https://nghethuatcoding.com2019/05/04/zozo-da-tao-ung-dung-survey-realtime-xu-ly-1000-nguoi-dong-thoi-nhu-the-nao</link><guid isPermaLink="false">https://nghethuatcoding.com2019/05/04/zozo-da-tao-ung-dung-survey-realtime-xu-ly-1000-nguoi-dong-thoi-nhu-the-nao</guid><pubDate>Sat, 04 May 2019 03:27:26 GMT</pubDate><content:encoded>&lt;p&gt;Chắc hẳn nhiều người cũng đã từng làm 1 ứng dụng trả lời &lt;strong&gt;Survey&lt;/strong&gt; bằng việc sử dụng thư viện hay service bên thứ 3 như Google Form.&lt;/p&gt;
&lt;p&gt;Nếu không có yêu cầu gì đặc biệt thì Google Form quả thực quá đủ. Nhưng mà để hiển thị kết quả &lt;strong&gt;Survey&lt;/strong&gt; bằng realtime thì có lẽ Google Form không phải là sự lựa chọn hợp lý.&lt;/p&gt;
&lt;p&gt;Vậy cùng xem các kĩ sư ZOZO đã tạo ra ứng dụng &lt;strong&gt;Survey&lt;/strong&gt; realtime như thế nào nhé.&lt;/p&gt;
&lt;h2 id=&quot;bối-cảnh&quot;&gt;&lt;a href=&quot;#b%E1%BB%91i-c%E1%BA%A3nh&quot; aria-label=&quot;bối cảnh permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Bối cảnh&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://zozo.jp/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;ZOZO&lt;/a&gt; là 1 trang web bán hàng online gần như lớn nhất Nhật Bản. Công ty được thành lập vào năm 1998, đến nay đã đạt hơn 1000 nhân viên.&lt;/p&gt;
&lt;p&gt;Đa số các công ty Nhật bản, họ thường tổ chức bữa tiệc tổng kết cuối năm để báo cáo tình hình tài chính, giới thiệu dịch vụ công ty đang vận hành đến toàn thể nhân viên.&lt;/p&gt;
&lt;p&gt;Và ZOZO cũng vậy. Vào buổi tổng kết cuối năm, họ quay video giới thiệu về dịch vụ trong công ty. Và mỗi khi kết thúc 1 phần nào đó trong video, họ tổ chức 1 cái &lt;strong&gt;Survey&lt;/strong&gt; thăm dò ý kiến của toàn bộ nhân viên, và sẽ hiển thị kết quả ra màn hình 1 cách &lt;strong&gt;realtime&lt;/strong&gt;. Và cái &lt;strong&gt;Survey&lt;/strong&gt; này sẽ được chèn vào giữa các đoạn trong video.&lt;/p&gt;
&lt;p&gt;Đây là toàn bộ khung cảnh hội trường lúc đó. Công ty to có khác, hội trường trông hoành tráng quá.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 960px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/5c1babc0b5b669fee3344b6fcd882347/971c4/f33457d95132887df78803ef92bbebd4.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 66.8%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAEEBf/EABQBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAc2RIayQH//EABoQAAICAwAAAAAAAAAAAAAAAAECAxAREyP/2gAIAQEAAQUCkVtSgsTzOb//xAAXEQEAAwAAAAAAAAAAAAAAAAAAARES/9oACAEDAQE/Abal/8QAFhEBAQEAAAAAAAAAAAAAAAAAAAES/9oACAECAQE/AWY//8QAHBAAAQQDAQAAAAAAAAAAAAAAAQACERIgMVFh/9oACAEBAAY/ArlkDqgbVSyD7h//xAAZEAEBAQEBAQAAAAAAAAAAAAABEQAxIdH/2gAIAQEAAT8hUCrw/MJOrhp8EdFqSVm4+Za13//aAAwDAQACAAMAAAAQ28//xAAWEQEBAQAAAAAAAAAAAAAAAAABECH/2gAIAQMBAT8QU6w//8QAFhEBAQEAAAAAAAAAAAAAAAAAARAh/9oACAECAQE/EADCH//EABkQAQADAQEAAAAAAAAAAAAAAAEAEUEhMf/aAAgBAQABPxBMEikDuQrlNBsT+U+j0vI2mpi8lpKR9sjWCrq3P//Z&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/5c1babc0b5b669fee3344b6fcd882347/01472/f33457d95132887df78803ef92bbebd4.webp 240w,
/static/5c1babc0b5b669fee3344b6fcd882347/222bd/f33457d95132887df78803ef92bbebd4.webp 480w,
/static/5c1babc0b5b669fee3344b6fcd882347/620b9/f33457d95132887df78803ef92bbebd4.webp 960w,
/static/5c1babc0b5b669fee3344b6fcd882347/3cea3/f33457d95132887df78803ef92bbebd4.webp 1000w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/5c1babc0b5b669fee3344b6fcd882347/3bc27/f33457d95132887df78803ef92bbebd4.jpg 240w,
/static/5c1babc0b5b669fee3344b6fcd882347/98431/f33457d95132887df78803ef92bbebd4.jpg 480w,
/static/5c1babc0b5b669fee3344b6fcd882347/b3ee8/f33457d95132887df78803ef92bbebd4.jpg 960w,
/static/5c1babc0b5b669fee3344b6fcd882347/971c4/f33457d95132887df78803ef92bbebd4.jpg 1000w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/jpeg&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/5c1babc0b5b669fee3344b6fcd882347/b3ee8/f33457d95132887df78803ef92bbebd4.jpg&quot;
          alt=&quot;f33457d95132887df78803ef92bbebd4&quot;
          title=&quot;f33457d95132887df78803ef92bbebd4&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 960px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/0b21c275e121c8629c9cf535a146006c/971c4/5f4ad28ef59e9fadb92d7a1205df46e6.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 66.8%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAABQACBP/EABQBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAS+g3Ypx8n//xAAbEAACAgMBAAAAAAAAAAAAAAABAgADBBETMv/aAAgBAQABBQLxOdjs2K4OzoFp1sE//8QAFREBAQAAAAAAAAAAAAAAAAAAEBH/2gAIAQMBAT8Bp//EABURAQEAAAAAAAAAAAAAAAAAABAR/9oACAECAQE/AYf/xAAdEAACAgEFAAAAAAAAAAAAAAAAAQIRECEiMkHh/9oACAEBAAY/ArVkYvvVHuFuZyZ//8QAGhAAAgMBAQAAAAAAAAAAAAAAAREAITFRcf/aAAgBAQABPyFaE6pytStEtwZjIyvYUSQRQvJld7c//9oADAMBAAIAAwAAABA0z//EABcRAQADAAAAAAAAAAAAAAAAAAEQESH/2gAIAQMBAT8Qs4R//8QAFhEBAQEAAAAAAAAAAAAAAAAAABEh/9oACAECAQE/EIY//8QAHRABAQADAAIDAAAAAAAAAAAAAREAITFRgZGhwf/aAAgBAQABPxBcTrHWHvmbk1dAdFOGHA2LUfhm42TZU+MMgml0eDesLNS9dfef/9k=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/0b21c275e121c8629c9cf535a146006c/01472/5f4ad28ef59e9fadb92d7a1205df46e6.webp 240w,
/static/0b21c275e121c8629c9cf535a146006c/222bd/5f4ad28ef59e9fadb92d7a1205df46e6.webp 480w,
/static/0b21c275e121c8629c9cf535a146006c/620b9/5f4ad28ef59e9fadb92d7a1205df46e6.webp 960w,
/static/0b21c275e121c8629c9cf535a146006c/3cea3/5f4ad28ef59e9fadb92d7a1205df46e6.webp 1000w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/0b21c275e121c8629c9cf535a146006c/3bc27/5f4ad28ef59e9fadb92d7a1205df46e6.jpg 240w,
/static/0b21c275e121c8629c9cf535a146006c/98431/5f4ad28ef59e9fadb92d7a1205df46e6.jpg 480w,
/static/0b21c275e121c8629c9cf535a146006c/b3ee8/5f4ad28ef59e9fadb92d7a1205df46e6.jpg 960w,
/static/0b21c275e121c8629c9cf535a146006c/971c4/5f4ad28ef59e9fadb92d7a1205df46e6.jpg 1000w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/jpeg&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/0b21c275e121c8629c9cf535a146006c/b3ee8/5f4ad28ef59e9fadb92d7a1205df46e6.jpg&quot;
          alt=&quot;5f4ad28ef59e9fadb92d7a1205df46e6&quot;
          title=&quot;5f4ad28ef59e9fadb92d7a1205df46e6&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt; &lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 960px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/c01c3d1417e846302639571324a18f35/971c4/ce1e3c4bfbafee31ab046d5a2a898f7d.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 66.8%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAEDBAX/xAAWAQEBAQAAAAAAAAAAAAAAAAABAAL/2gAMAwEAAhADEAAAAeS3fLmIjf/EABsQAAIDAAMAAAAAAAAAAAAAAAABAgMREhMy/9oACAEBAAEFAs0daOsg+TsskiXr/8QAFREBAQAAAAAAAAAAAAAAAAAAABH/2gAIAQMBAT8BV//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABoQAAIDAQEAAAAAAAAAAAAAAAABAhExEHH/2gAIAQEABj8CjEtN14aNvRc//8QAGhAAAgMBAQAAAAAAAAAAAAAAAREAITFRYf/aAAgBAQABPyEtYOYokS3bbHTI3cOFgtyDB0OXLyp//9oADAMBAAIAAwAAABBcD//EABgRAAIDAAAAAAAAAAAAAAAAAAARAUFR/9oACAEDAQE/EKciYf/EABgRAAMBAQAAAAAAAAAAAAAAAAABETFR/9oACAECAQE/EMcRH0//xAAdEAACAgIDAQAAAAAAAAAAAAABEQAhMUFRcYFh/9oACAEBAAE/EF61ITkbvnYic0MFPge3AYBaoAVXUSgi1+6jFMZHSwuEzCQ6PKn/2Q==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/c01c3d1417e846302639571324a18f35/01472/ce1e3c4bfbafee31ab046d5a2a898f7d.webp 240w,
/static/c01c3d1417e846302639571324a18f35/222bd/ce1e3c4bfbafee31ab046d5a2a898f7d.webp 480w,
/static/c01c3d1417e846302639571324a18f35/620b9/ce1e3c4bfbafee31ab046d5a2a898f7d.webp 960w,
/static/c01c3d1417e846302639571324a18f35/3cea3/ce1e3c4bfbafee31ab046d5a2a898f7d.webp 1000w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/c01c3d1417e846302639571324a18f35/3bc27/ce1e3c4bfbafee31ab046d5a2a898f7d.jpg 240w,
/static/c01c3d1417e846302639571324a18f35/98431/ce1e3c4bfbafee31ab046d5a2a898f7d.jpg 480w,
/static/c01c3d1417e846302639571324a18f35/b3ee8/ce1e3c4bfbafee31ab046d5a2a898f7d.jpg 960w,
/static/c01c3d1417e846302639571324a18f35/971c4/ce1e3c4bfbafee31ab046d5a2a898f7d.jpg 1000w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/jpeg&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/c01c3d1417e846302639571324a18f35/b3ee8/ce1e3c4bfbafee31ab046d5a2a898f7d.jpg&quot;
          alt=&quot;ce1e3c4bfbafee31ab046d5a2a898f7d&quot;
          title=&quot;ce1e3c4bfbafee31ab046d5a2a898f7d&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt; &lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 960px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/9fa10fb2bf7e0c5797b2712c5c749dd0/971c4/63dd434e4918b940ffa8e1de7bb63853.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 66.8%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAwACBf/EABUBAQEAAAAAAAAAAAAAAAAAAAEA/9oADAMBAAIQAxAAAAHhqbFmaH//xAAZEAEBAQADAAAAAAAAAAAAAAABAAIRISL/2gAIAQEAAQUCJONdxGxvLf/EABURAQEAAAAAAAAAAAAAAAAAAAAR/9oACAEDAQE/AUf/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAbEAEAAgIDAAAAAAAAAAAAAAAAATEREiEykf/aAAgBAQAGPwJrwpl0hU+v/8QAGxAAAwADAQEAAAAAAAAAAAAAAAERITFBUYH/2gAIAQEAAT8hp4gzeP1aG12c62ekq0bOj+A//9oADAMBAAIAAwAAABCPP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QH//EABYRAQEBAAAAAAAAAAAAAAAAAAABEf/aAAgBAgEBPxCtr//EAB0QAQACAQUBAAAAAAAAAAAAAAEAEVEhMUFxsfD/2gAIAQEAAT8QSANrWuYCHyGsowB6JlIujssqG/DbzicCvWeM/9k=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/9fa10fb2bf7e0c5797b2712c5c749dd0/01472/63dd434e4918b940ffa8e1de7bb63853.webp 240w,
/static/9fa10fb2bf7e0c5797b2712c5c749dd0/222bd/63dd434e4918b940ffa8e1de7bb63853.webp 480w,
/static/9fa10fb2bf7e0c5797b2712c5c749dd0/620b9/63dd434e4918b940ffa8e1de7bb63853.webp 960w,
/static/9fa10fb2bf7e0c5797b2712c5c749dd0/3cea3/63dd434e4918b940ffa8e1de7bb63853.webp 1000w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/9fa10fb2bf7e0c5797b2712c5c749dd0/3bc27/63dd434e4918b940ffa8e1de7bb63853.jpg 240w,
/static/9fa10fb2bf7e0c5797b2712c5c749dd0/98431/63dd434e4918b940ffa8e1de7bb63853.jpg 480w,
/static/9fa10fb2bf7e0c5797b2712c5c749dd0/b3ee8/63dd434e4918b940ffa8e1de7bb63853.jpg 960w,
/static/9fa10fb2bf7e0c5797b2712c5c749dd0/971c4/63dd434e4918b940ffa8e1de7bb63853.jpg 1000w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/jpeg&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/9fa10fb2bf7e0c5797b2712c5c749dd0/b3ee8/63dd434e4918b940ffa8e1de7bb63853.jpg&quot;
          alt=&quot;63dd434e4918b940ffa8e1de7bb63853&quot;
          title=&quot;63dd434e4918b940ffa8e1de7bb63853&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt; &lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 960px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/6e37f10b022b9df862428a6388afda37/971c4/409c41bdd3f24b4f84cb754db058d8c6.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 76.2%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAQFAv/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAGO8hUI5oj/xAAZEAACAwEAAAAAAAAAAAAAAAADBAABAjL/2gAIAQEAAQUCFVaI4vkNQfTbOCjn/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGhAAAgIDAAAAAAAAAAAAAAAAAQIQEgARMf/aAAgBAQAGPwJQ3CcSs1AO4//EABcQAQEBAQAAAAAAAAAAAAAAAAERAEH/2gAIAQEAAT8hvVIMyBcaNe5N2waZRrrv/9oADAMBAAIAAwAAABBHP//EABYRAAMAAAAAAAAAAAAAAAAAABARQf/aAAgBAwEBPxBUf//EABURAQEAAAAAAAAAAAAAAAAAABAR/9oACAECAQE/EKf/xAAaEAEBAQEBAQEAAAAAAAAAAAABEQAhoTFB/9oACAEBAAE/EFfCkog8wc9psoieZSUlKaALifE/HcDFoAM6e6ob/9k=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/6e37f10b022b9df862428a6388afda37/01472/409c41bdd3f24b4f84cb754db058d8c6.webp 240w,
/static/6e37f10b022b9df862428a6388afda37/222bd/409c41bdd3f24b4f84cb754db058d8c6.webp 480w,
/static/6e37f10b022b9df862428a6388afda37/620b9/409c41bdd3f24b4f84cb754db058d8c6.webp 960w,
/static/6e37f10b022b9df862428a6388afda37/3cea3/409c41bdd3f24b4f84cb754db058d8c6.webp 1000w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/6e37f10b022b9df862428a6388afda37/3bc27/409c41bdd3f24b4f84cb754db058d8c6.jpg 240w,
/static/6e37f10b022b9df862428a6388afda37/98431/409c41bdd3f24b4f84cb754db058d8c6.jpg 480w,
/static/6e37f10b022b9df862428a6388afda37/b3ee8/409c41bdd3f24b4f84cb754db058d8c6.jpg 960w,
/static/6e37f10b022b9df862428a6388afda37/971c4/409c41bdd3f24b4f84cb754db058d8c6.jpg 1000w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/jpeg&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/6e37f10b022b9df862428a6388afda37/b3ee8/409c41bdd3f24b4f84cb754db058d8c6.jpg&quot;
          alt=&quot;409c41bdd3f24b4f84cb754db058d8c6&quot;
          title=&quot;409c41bdd3f24b4f84cb754db058d8c6&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2 id=&quot;điều-kiện-khi-thực-hiện-survey&quot;&gt;&lt;a href=&quot;#%C4%91i%E1%BB%81u-ki%E1%BB%87n-khi-th%E1%BB%B1c-hi%E1%BB%87n-survey&quot; aria-label=&quot;điều kiện khi thực hiện survey permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Điều kiện khi thực hiện Survey&lt;/h2&gt;
&lt;p&gt;Trước buổi tổng kết 2 tuần thì đã nhận được 1 số request từ bên admin như sau:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Ở hội trường sẽ thực hiện &lt;strong&gt;làm survey ở trên web 1 cách realtime&lt;/strong&gt;, &lt;strong&gt;kết quả thống kê&lt;/strong&gt; sẽ &lt;strong&gt;hiển thị ngay lập tức&lt;/strong&gt; trên màn hình hội trường.&lt;/li&gt;
&lt;li&gt;Câu trả lời chỉ có YES hoặc NO&lt;/li&gt;
&lt;li&gt;Có khoảng từ 7 đến 8 câu hỏi&lt;/li&gt;
&lt;li&gt;Có thể trả lời thông qua smartphone bằng cách quét mã QR Code&lt;/li&gt;
&lt;li&gt;Muốn hiển thị kết quả trên màn hình hội trường với UI dễ nhìn, bắt mắt.&lt;/li&gt;
&lt;li&gt;Câu hỏi và câu trả lời sẽ thực hiện giữa các đoạn video.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;hướng-giải-quyết&quot;&gt;&lt;a href=&quot;#h%C6%B0%E1%BB%9Bng-gi%E1%BA%A3i-quy%E1%BA%BFt&quot; aria-label=&quot;hướng giải quyết permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Hướng giải quyết&lt;/h2&gt;
&lt;p&gt;Sau khi nhận được 1 số request từ bên quản lý, các kĩ sư ZOZO đã đưa ra 1 số giải pháp như sau:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Dùng tool  &lt;a href=&quot;https://www.polly.ai/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Polly&lt;/a&gt; trên Slack, mọi người vào đó trả lời Survey. Rồi thông qua Slack API sẽ thống kê và hiển thị kết quả lên màn hình.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;=&gt; Ở công ty cũng có người không có account slack nên việc thực hiện là không thể. =&gt; Loại&lt;/p&gt;
&lt;ol start=&quot;2&quot;&gt;
&lt;li&gt;Dùng 1 dịch vụ của bên thứ 3 chuyên về Survey đó là  &lt;a href=&quot;https://respon.jp/biz/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;respon&lt;/a&gt;. Nhưng mà tool này lại không biết là có thể dễ dàng customize được hay không, với cả thời gian lần này chỉ có 2 tuần nên có thể sẽ không thể làm xong hoàn toàn được =&gt; Loại&lt;/li&gt;
&lt;li&gt;Team Frontend đang vận hành  &lt;a href=&quot;https://zozo.com/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;https://zozo.com/&lt;/a&gt; sẽ đảm nhiệm&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;=&gt; Vì team này đã từng có kinh nghiệm với Firebase, hơn nữa Firebase có thể thống kê kết quả realtime. Nên team đã quyết định chọn Firebase để giải quyết vấn đề này.&lt;/p&gt;
&lt;h2 id=&quot;tổng-kết-lại-điều-kiện-khi-làm-survey&quot;&gt;&lt;a href=&quot;#t%E1%BB%95ng-k%E1%BA%BFt-l%E1%BA%A1i-%C4%91i%E1%BB%81u-ki%E1%BB%87n-khi-l%C3%A0m-survey&quot; aria-label=&quot;tổng kết lại điều kiện khi làm survey permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Tổng kết lại điều kiện khi làm Survey&lt;/h2&gt;
&lt;p&gt;Sau khi chọn Firebase làm giải pháp chính, thì mình sẽ tổng hợp lại yêu cầu khi làm Survey như sau:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Có tổng từ 7 đến 8 câu hỏi&lt;/li&gt;
&lt;li&gt;Chèn câu hỏi vào giữa các đoạn trong video&lt;/li&gt;
&lt;li&gt;Đáp án trả lời sẽ có 2 lựa chọn là YES và NO&lt;/li&gt;
&lt;li&gt;Có thể quyét mã QR code để hiển thị trang web Survey.&lt;/li&gt;
&lt;li&gt;Kết quả trả lời Survey sẽ được thống kê và hiển thị ra màn hình hội trường &lt;strong&gt;ngay lập tức&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Khi chuyển sang câu hỏi tiếp theo sẽ không reload lại page&lt;/li&gt;
&lt;li&gt;Việc thay đổi câu hỏi sẽ được thực hiện thông qua màn hình quản lý&lt;/li&gt;
&lt;li&gt;Trên smartphone chỉ được trả lời 1 lần duy nhất, và không thể xoá&lt;/li&gt;
&lt;li&gt;Thời gian trả lời câu hỏi là 15s (Thời gian hiển thị câu hỏi là 10s, còn 5s sẽ hiển thị count down)&lt;/li&gt;
&lt;li&gt;Kết quả sẽ hiển thị tỉ lệ phần trăm của YES/NO&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;những-việc-cần-chuẩn-bị&quot;&gt;&lt;a href=&quot;#nh%E1%BB%AFng-vi%E1%BB%87c-c%E1%BA%A7n-chu%E1%BA%A9n-b%E1%BB%8B&quot; aria-label=&quot;những việc cần chuẩn bị permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Những việc cần chuẩn bị&lt;/h2&gt;
&lt;p&gt;Để buổi tổng kết không có vấn đề gì xảy ra, các kĩ sư ZOZO đã tổng kết lại quy mô hệ thống và những việc cần thiết nên chuẩn bị như sau:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Số lượng người tham gia: 1000 người&lt;/li&gt;
&lt;li&gt;Chuẩn bị mạng Internet có thể chịu được 1000 người&lt;/li&gt;
&lt;li&gt;Spec về độ phân giải màn hình: 1920×1080&lt;/li&gt;
&lt;li&gt;Số lượng màn hình: 4 màn hình&lt;/li&gt;
&lt;li&gt;Buổi hôm đó có thể demo được không? =&gt; Từ 15:00 có thể demo được từ 30~40p&lt;/li&gt;
&lt;li&gt;Thực hiện việc test tải hệ thống (với quy mô là 1000 người)&lt;/li&gt;
&lt;li&gt;Nếu có bug xảy ra thì làm thế nào? =&gt; Chuẩn bị 1 slide về toàn các câu hỏi, và nhờ mọi người làm trên đó.&lt;/li&gt;
&lt;li&gt;Thực hiện test việc hiển thị trên 1 số loại smartphone&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;công-nghệ-sử-dụng&quot;&gt;&lt;a href=&quot;#c%C3%B4ng-ngh%E1%BB%87-s%E1%BB%AD-d%E1%BB%A5ng&quot; aria-label=&quot;công nghệ sử dụng permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Công nghệ sử dụng&lt;/h2&gt;
&lt;p&gt;Vì team Frontend ZOZO quyết định tự build lấy nên họ đã quyết định chọn 1 số công nghệ dưới đây:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Data Management:  &lt;a href=&quot;https://firebase.google.com/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Firebase&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Frontend:  &lt;a href=&quot;https://vuejs.org/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Vuejs&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Animation khi hiển thị kết quả:  &lt;a href=&quot;https://greensock.com/tweenmax&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Tweenmax&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;design-màn-hình&quot;&gt;&lt;a href=&quot;#design-m%C3%A0n-h%C3%ACnh&quot; aria-label=&quot;design màn hình permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Design màn hình&lt;/h2&gt;
&lt;p&gt;ZOZO đã chuẩn bị ra 3 màn hình:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Màn hình trả lời câu hỏi&lt;/li&gt;
&lt;li&gt;Mỗi người dùng sẽ trả lời câu hỏi trên smartphone&lt;/li&gt;
&lt;li&gt;Sẽ enable/disable màn hình khi câu hỏi bắt đầu và kết thúc&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 375px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/88637aa1adff265d34c1a30ba029640b/d266f/005a97a8db3ff2a335f4079415a69b42.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 161.06666666666666%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAgCAIAAACdAM/hAAAACXBIWXMAAAsSAAALEgHS3X78AAACn0lEQVQ4y61VbW/aQAzm//+EfdqHfqmQhip1mtqtVSsEBdoKBB2DIihQCBASyCtpQu5uz9UJEBhbKs16ODmOH9vnM5fM2dlZp9N5enr6mVoajUav18tms5lmsymEYIyJ1ELOj4+PGYSBFoYhTwp5QKF1V+AM48PDQwYF72Umgm3b4/HYsizTNI9mPiQT//b2Np/Pn5+fX15efphcKpVyudzJyUm1Wt2Uk4oM8TxvMBhommYYxscy76X6B3m1WgVBQE1er9fktH4XckWHyY4VnhGZzvni4uLm5qbf7xeLRVigo2bMw/Pz8/X1dblcrtfrhUIBDmjB1dUVKFCizI7jtFqtdruNRygYIISgFRlgwVqr1RALFl3XE2WjGERFKvghpKqqlUoFlm63CwdFUcBBaBAwy7SpvzUs1XhuyIzxGFh40rKDeDz/U2ZkclfctLnlxLDlo4HVkvrGDqMfJDOHIesO2Uzj80UEfcl1gy9NCbKoOl8YvPfKpnP6V8XkN59NNb4zXsJ747bLDUuSaU80csis6kmy77OJKicSINdqM/z8JfhRDE+/BgOFv1cn7Qinagfk6Zxv0kIWJm+/sF9dVmtGr9jRzAF7nfB1KMNvgBIALtsrH2nktSXf3zMcxlM+VPh4FmE0TYCMioqGoRFJcnzOPA3+MGE8JRWd2yfjZzliPBMTdQslRtLIvLcD8kARzgqtw6FLQCGgUWQBBy1VdYyEJG+vXvyQlo6SBLSVJxwXJyt2z9C0maofJ1PzukPx6VRkv4nvBVlRWjI5uZ54GYlWT24nOZ9bcvS5wRsMYbDmex8X6nD8BZL60gwnc3nO9/cZXD1RZt0QI/RT22JKynzHoovXGbPdqNt3d3eu6+JOWxrGMo0Yhr5Y+L6PG/Y3y7cP0RsXi5wAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/88637aa1adff265d34c1a30ba029640b/01472/005a97a8db3ff2a335f4079415a69b42.webp 240w,
/static/88637aa1adff265d34c1a30ba029640b/f477c/005a97a8db3ff2a335f4079415a69b42.webp 375w&quot;
          sizes=&quot;(max-width: 375px) 100vw, 375px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/88637aa1adff265d34c1a30ba029640b/0783d/005a97a8db3ff2a335f4079415a69b42.png 240w,
/static/88637aa1adff265d34c1a30ba029640b/d266f/005a97a8db3ff2a335f4079415a69b42.png 375w&quot;
          sizes=&quot;(max-width: 375px) 100vw, 375px&quot;
          type=&quot;image/png&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/88637aa1adff265d34c1a30ba029640b/d266f/005a97a8db3ff2a335f4079415a69b42.png&quot;
          alt=&quot;màn hình kết quả&quot;
          title=&quot;màn hình kết quả&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;ol start=&quot;2&quot;&gt;
&lt;li&gt;Màn hình kết quả&lt;/li&gt;
&lt;li&gt;Hiển thị câu hỏi và kết quả ra màn hình&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 960px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/8ed03afdcd108fea7e695495cd37c64c/8b984/1dca8f55415351bed0d6a5f0a79d2868.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAABxElEQVQoz42S30sUURTH72qa+xAFCYbpFoLIuj6EBvoW1J/g/9CDDz0IPdgPFCuiIkhFfFboD+g10V4K7Km3sGF+7Oy6s6sGdc/83p17T2dm3MGHjfXLncv3nLmfezhzhvm+77blJHIvIKJ0XWee53HOaU9TQRAQn4WpoZ3y6e3kAYDCer3O6FEUVddNTSsbhnl0ZCmKpiiKYRjVatU0TTKappmJ0qSqqpQhwxBRSomxXEQbL6D0fKPRYK6Pmx+DtZ3w6bvK0pvyxk64th1ULEFnhJAdJYQ4g61jHBjn7CbPjbm0WIGzEb77rUWvo6hb5fopXp2GS0W4XOLJgr4i7B8ksOgGWyd45Q70TED/JPQXY7J3ogPsN5tNEXWofG0G+iYhPwX5EgxMxbd8+d6Gqb2wKYNQP/x1WrOwFUkKM7hGPY9xNvQ3N2rnCm5umLMb/PNXgpNCn/bw+iyO3MPbD/DWfRycw7vzkttnMDjyxaa/sh4svjxZeFZZXveef/BUk+AovuDHT7H4Wi69//3wif1oFR+/Fa+2IoeGiscEZz343h8Hav+bbc2xIQziw+d7TkYiaSrpn0Im8+nHaaeS/hOfwf8AgqSe2+adKQ8AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/8ed03afdcd108fea7e695495cd37c64c/01472/1dca8f55415351bed0d6a5f0a79d2868.webp 240w,
/static/8ed03afdcd108fea7e695495cd37c64c/222bd/1dca8f55415351bed0d6a5f0a79d2868.webp 480w,
/static/8ed03afdcd108fea7e695495cd37c64c/620b9/1dca8f55415351bed0d6a5f0a79d2868.webp 960w,
/static/8ed03afdcd108fea7e695495cd37c64c/28063/1dca8f55415351bed0d6a5f0a79d2868.webp 1440w,
/static/8ed03afdcd108fea7e695495cd37c64c/34ef4/1dca8f55415351bed0d6a5f0a79d2868.webp 1920w,
/static/8ed03afdcd108fea7e695495cd37c64c/2bd10/1dca8f55415351bed0d6a5f0a79d2868.webp 2560w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/8ed03afdcd108fea7e695495cd37c64c/0783d/1dca8f55415351bed0d6a5f0a79d2868.png 240w,
/static/8ed03afdcd108fea7e695495cd37c64c/782f4/1dca8f55415351bed0d6a5f0a79d2868.png 480w,
/static/8ed03afdcd108fea7e695495cd37c64c/f570d/1dca8f55415351bed0d6a5f0a79d2868.png 960w,
/static/8ed03afdcd108fea7e695495cd37c64c/8d0ff/1dca8f55415351bed0d6a5f0a79d2868.png 1440w,
/static/8ed03afdcd108fea7e695495cd37c64c/a987b/1dca8f55415351bed0d6a5f0a79d2868.png 1920w,
/static/8ed03afdcd108fea7e695495cd37c64c/8b984/1dca8f55415351bed0d6a5f0a79d2868.png 2560w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/png&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/8ed03afdcd108fea7e695495cd37c64c/f570d/1dca8f55415351bed0d6a5f0a79d2868.png&quot;
          alt=&quot;màn hình trả lời câu hỏi@2x&quot;
          title=&quot;màn hình trả lời câu hỏi@2x&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;ol start=&quot;3&quot;&gt;
&lt;li&gt;Màn hình quản lý&lt;/li&gt;
&lt;li&gt;Màn hình dùng cho Admin thể thay đổi được câu hỏi&lt;/li&gt;
&lt;li&gt;Khi thay đổi câu hỏi thì cũng setting luôn thời gian kết thúc câu hỏi&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&quot;/b1aeebe0877b2b6208796b8f01b5126f/20190108164417.gif&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;setting-firebase&quot;&gt;&lt;a href=&quot;#setting-firebase&quot; aria-label=&quot;setting firebase permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Setting Firebase&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;Điều kiện:&lt;/strong&gt; Cần phải có tài khoản Google.&lt;/p&gt;
&lt;p&gt;Đầu tiên cần login vào trong tài khoản Google, sau đó từ  &lt;a href=&quot;https://console.firebase.google.com/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Firebase Console&lt;/a&gt; sẽ tạo ra 1 project.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Nhập tên project&lt;/li&gt;
&lt;li&gt;Check vào những mục điều khoản sau đó ấn vào nút Create Project&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 532px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/ab170d98a5d1eee5d867c54ef3bd2442/72ec8/create-project-firebase.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 127.4436090225564%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAZCAYAAAAxFw7TAAAACXBIWXMAAAsSAAALEgHS3X78AAADOUlEQVQ4y4VV227TQBD1p/LCOzwjEBX8A+IrEE/wBRWoT5X60DZNYseXxPe740viYc7Ya0yaFEtHs/buzp6ZOTvWXM+j29tburu7o8ViQTc3N6TrOnVdR03TUNu2E9R7N0K+YcxrkyShLM9Jy7KcyrKkoigEh8NhcnYKOKjZFvWe0VC131NbVsMhvKfrWtLSLBPvQRBQGIaycZh8Dmws9hXp3pbsOCXPDymzXXGsDtXSNKM4jiVMy7Joz5N93wvT4/H4D7AB845lk22Z5Dg2mbZFIZNRUcHhkR10vKGDZRYdTxzGE/sRU8jNmMu6rgXzPIvDsqro3MMn9vOCzIty7rua0zjcR87dR8anKIo+88QHDutrmqbCkBf1pywuFUwYxkn6wITec86uOOwrZvaOq/4FDkdn/SVm56ChQucePuAss5dCF4fMpI/jqAvDqOOQO040k+wO44IpZCWb/7HlkJP+6elJcH9/3zuO07uuC0t5nvejU5EWhH9J9FNRkCtDX4kON5sNLZdLMk1ThO77Pnl8NSF4iB8aVEwvVVuLkozCAifUvKGWTUpjcyjtzefn44mh4aX0S09px6rHTQFT27YnC4A5WBuGMa3ZbrfyHWN8z/gKg73mRSmXtJX8SMcY7zZSAagxrBq/JG7NZYctD5B0sNntdmJRFLAAMFbAO3KrmgmAsTpocNg2cjoWowiwcMzVFjjOVuz8AIQOx6eVFocH7mNJkooTONwph3gfHak55RTMUIxnOtyFKTfNViqGPKLZomEA1Win8awRY30zVbj+K5uVm9D1OiNrY9B6vSbd2tLCK+nRzWnpF/TAduEVtPbzof9xtbFutVqRyWEbG64+f8MBwjCIMy5yQzqXHottm/Njb0nnhabliDVMloqxkbwhf5DLFnmMK1oGFRlhyUxHHboc8iqsKU1iTnJAUZxIPhOuOt/xQSqjnKAEJZ1Y5hP5xzRNO6IZHD54ewpQDE78moXupSXtq1JyVo35Uzmco8ZVPPkLajiZetzPjlvWYIe/WPvs3uId/xoA72XdUl41gmI/MEW3ofaFDjIHKhrgz1gk9Nso6NU3l97+9OnND59ef/foWi/oD6lMd5bq9ePHAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/ab170d98a5d1eee5d867c54ef3bd2442/01472/create-project-firebase.webp 240w,
/static/ab170d98a5d1eee5d867c54ef3bd2442/222bd/create-project-firebase.webp 480w,
/static/ab170d98a5d1eee5d867c54ef3bd2442/65bb3/create-project-firebase.webp 532w&quot;
          sizes=&quot;(max-width: 532px) 100vw, 532px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/ab170d98a5d1eee5d867c54ef3bd2442/0783d/create-project-firebase.png 240w,
/static/ab170d98a5d1eee5d867c54ef3bd2442/782f4/create-project-firebase.png 480w,
/static/ab170d98a5d1eee5d867c54ef3bd2442/72ec8/create-project-firebase.png 532w&quot;
          sizes=&quot;(max-width: 532px) 100vw, 532px&quot;
          type=&quot;image/png&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/ab170d98a5d1eee5d867c54ef3bd2442/72ec8/create-project-firebase.png&quot;
          alt=&quot;create project firebase&quot;
          title=&quot;create project firebase&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Sau khi tạo xong sẽ đi đến màn hình Project Dashboard.&lt;/p&gt;
&lt;p&gt;Mặc định thì đang dùng Plan là Spark. Với ứng dụng nào ít request thì mình thấy plan này cũng đủ dùng.&lt;/p&gt;
&lt;p&gt;Nhưng mà do quy mô lần này là 1000 người, nên để an toàn ZOZO đã quyết định dùng plan Blaze (Pay as you go - dùng đến đâu trả tiền đến đó)&lt;/p&gt;
&lt;h2 id=&quot;setting-firestore&quot;&gt;&lt;a href=&quot;#setting-firestore&quot; aria-label=&quot;setting firestore permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Setting FireStore&lt;/h2&gt;
&lt;p&gt;Tiếp theo mình sẽ đi cài đặt thằng FireStore.&lt;/p&gt;
&lt;p&gt;Ở menu bên trái màn hình, chọn &lt;strong&gt;Develop -&gt; Database&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 659px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/06318c22cab27e8750139608911da8c6/f4d47/create-firestore.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 63.58118361153263%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAABs0lEQVQoz22STY/TMBCG/ce5cubGP+ECK8SChIQ4IC0Csd2mSdM08fdH7E0apyqvnU2lSvtoNBpHfmfGkyFCiEPTUMqOx2Pbtl3XIThkKKXTNMVbppW+74lWEtcFo1BSloAYMngker4lhDCO4yLGkXAbdsxWzGjbe9+7FWutMUbfIqX03s/zvHRBlO2Z8dIF533wHinnzOl0Qp2l2tWj7DAM10bI4F3bHKpy95jBU/EVWVG5LEsc9yvLEc9pmgYeDyQiRCY1ZwyTQ1fQoCbEmAemsMtsNpvtdlsURV3XGESb4ZyTr5X/V1PaNsiNxEt7EOPZnLOlIKiqClmWGgnOpRAkdWgMWysjMeIs7o8d50IL9CWzV5pxycSLcSEJJoQ+r38PsqXt4I1uN5btV6sNrZYg+a50uiPT68R51HPxIT7dT38/x8cvyf58Sv73x/j0bap/RrdLbc+vcI5jfx7EbJsoy6j2s95HVSXjxdnVl4u6zJJgE7BPeQQvIFZKmYTVxhnXa+tgYRgDtus0/mrHN3fy3XdDsDGYU76a9kllMOrxhgHLgdngcnD6oX1+e6/e/9D/AcSR1UJT6CMKAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/06318c22cab27e8750139608911da8c6/01472/create-firestore.webp 240w,
/static/06318c22cab27e8750139608911da8c6/222bd/create-firestore.webp 480w,
/static/06318c22cab27e8750139608911da8c6/81bdf/create-firestore.webp 659w&quot;
          sizes=&quot;(max-width: 659px) 100vw, 659px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/06318c22cab27e8750139608911da8c6/0783d/create-firestore.png 240w,
/static/06318c22cab27e8750139608911da8c6/782f4/create-firestore.png 480w,
/static/06318c22cab27e8750139608911da8c6/f4d47/create-firestore.png 659w&quot;
          sizes=&quot;(max-width: 659px) 100vw, 659px&quot;
          type=&quot;image/png&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/06318c22cab27e8750139608911da8c6/f4d47/create-firestore.png&quot;
          alt=&quot;create firestore&quot;
          title=&quot;create firestore&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Về chỗ &lt;strong&gt;Security rules&lt;/strong&gt;: Do lần này thực hiện ở trong công ty nên không cần để ý đến security cũng được. Do đó sẽ chọn &lt;strong&gt;Start in test mode&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Sau khi tạo xong thì 1 database (Giống như RDS) đã được tạo ra. FireStore là NoSQL nên không cần thiết phải tạo schema.&lt;/p&gt;
&lt;p&gt;Bước tiếp theo mình sẽ liên kết với phần Web Application. Trong màn hình chính, chúng ta click vào cái nút &amp;#x3C;/&gt; ở trong hình ảnh bên dưới.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 700px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/9026f12fc0bdf203a8f594a94ded13cb/a8200/e97885ffc2fa3bc5c4c28bd34544290d.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 59.14285714285714%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsSAAALEgHS3X78AAACT0lEQVQoz22R3UtTYRzH9z90U3feGUSmbjs7O+dsUuBMUTPYdGYsl2V3XSR4U7JEIkjoxexs521ubtO1F017oTRcSAgaRFIXmaPNnZfnnG2eVn9A9ZwzSangw4/nhc/39+N5DFZWxFgRoYX2GLi8WOpJAE8anE8B77wMF87H8pVFxZvkL8zJ+JSMBTXwKWAPAyIEDH/kzll5YKHkfaL0z8nOuOROSL1J4E4prhm+P5FvZrNmf0435aq5J0NQRjwZktqick9KcSbk1ojUGZPOzAJIVxz0pYCdypontxHyK8bBtootfEC2MGJLFJxLF50JxZWUYUN3WulOKi0R4IiAU2HQGgU2poD480hgx0IV8KBITBf3ZAjCiKheYZC+FuChmRHgFtUOBZSVME5CyW0zLWDUThOV1WScE+sDwrWX5djmj9urKrleITe+T6xXYFZXXMa1aAHTquToG3S325v9HzFWujq5pD8YJzZSwqWF0vjbb0Ovyjczu76MOrKiWljxdBTAWyvDW4NF4uFmU92RO2cbxqglO5cb5dL7Y1dTiKA2CKYhVd9Cu2J4PKKah2cGOuozkSF3eCP63Bd6NqbLjFD9sH04ETsQCmVzUL1F37jefaj4xvjzfUN2tcM1/c6AkHnkUQ6Fvt7qX3CWP0Ht+ubj6sqxXtvhNX9NdHncRAOEkQ2miWzj3c8ImUNpHtVH+AuC4+voyvKLwV+fjo5erAmO1HrSH44HVIItGIz3vxjvbUFMD7LQ/29nI1P2hF5X1jDhae1a2tEW2UIYgLHCbxs8pMyjSqHBAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/9026f12fc0bdf203a8f594a94ded13cb/01472/e97885ffc2fa3bc5c4c28bd34544290d.webp 240w,
/static/9026f12fc0bdf203a8f594a94ded13cb/222bd/e97885ffc2fa3bc5c4c28bd34544290d.webp 480w,
/static/9026f12fc0bdf203a8f594a94ded13cb/a7632/e97885ffc2fa3bc5c4c28bd34544290d.webp 700w&quot;
          sizes=&quot;(max-width: 700px) 100vw, 700px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/9026f12fc0bdf203a8f594a94ded13cb/0783d/e97885ffc2fa3bc5c4c28bd34544290d.png 240w,
/static/9026f12fc0bdf203a8f594a94ded13cb/782f4/e97885ffc2fa3bc5c4c28bd34544290d.png 480w,
/static/9026f12fc0bdf203a8f594a94ded13cb/a8200/e97885ffc2fa3bc5c4c28bd34544290d.png 700w&quot;
          sizes=&quot;(max-width: 700px) 100vw, 700px&quot;
          type=&quot;image/png&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/9026f12fc0bdf203a8f594a94ded13cb/a8200/e97885ffc2fa3bc5c4c28bd34544290d.png&quot;
          alt=&quot;liên kết với web application&quot;
          title=&quot;liên kết với web application&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Và thực hiện theo các bước trong hình, cuối cùng chúng ta sẽ add cái đoạn javascript vào trong file src/main.js.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 782px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/60048beb0dc7adf2ec892cc52fdfbe76/4dacb/Add-firebase-to-your-web-app.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 89.76982097186702%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAIAAADUsmlHAAAACXBIWXMAAAsSAAALEgHS3X78AAAB80lEQVQ4y4VT25aiMBDkl/fv9nFf9iNGAnIPlwQSIJALo1uJMzrHc3TrtG1rqKRS3UT7vkspCSF5nqdpWhQFpbRpmrqusywry1JrbV8gwtqm1pZSzjlofd8zxrquQ27bFlsYY16SnbVKu80cxvgTjoDPb1wuF/sa0eWw5aRP7TIOOK+HEOec+YH/kYUm/dr7m1Lo3LYNh7s7vh+9l/ciOpydlBnmXa2LkFIIATJc3AL2AO9L+EcHoLgpipDB3zcFYxkbpmkaOUfmAWKa5DxjR87ZGIClYRiUWqEuuglQSkE0Lj3A6r5vYfrg0Xa+6PouZF/fgnGOBn+RoSQvyvR8zrI8y/OPOCZJWlYVvk6EnEiS5QVJknOW+xFovDvY6kFGV9NzhuVTTJDjJAXnIybg+0h8gF3VNa7ABjaN44NMAzlJzwjQIKIsKx9VVcCPUOBMSv2dcEEc9iBnkA3FRVFWdex15g1tadtVDcWNhZDjJGCXj3FkjKOpX2Q0wsyjnFjwpIfPA3YXayVMK3WDEBqzRCVix0+l0SPnyc6aWem/uaqEvqBv1oXPLdvnfFu2Fq32fb5+ukaaX7/Zn1Rdr4d+N5FPL4ZzCzDLw2q9+5l6P89P5CMM0LiqbV6WdV3fvMDPZEwZ3IP7GDJQvYgZmyw/HzIv8A/XP/qYTtbZiQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/60048beb0dc7adf2ec892cc52fdfbe76/01472/Add-firebase-to-your-web-app.webp 240w,
/static/60048beb0dc7adf2ec892cc52fdfbe76/222bd/Add-firebase-to-your-web-app.webp 480w,
/static/60048beb0dc7adf2ec892cc52fdfbe76/22cca/Add-firebase-to-your-web-app.webp 782w&quot;
          sizes=&quot;(max-width: 782px) 100vw, 782px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/60048beb0dc7adf2ec892cc52fdfbe76/0783d/Add-firebase-to-your-web-app.png 240w,
/static/60048beb0dc7adf2ec892cc52fdfbe76/782f4/Add-firebase-to-your-web-app.png 480w,
/static/60048beb0dc7adf2ec892cc52fdfbe76/4dacb/Add-firebase-to-your-web-app.png 782w&quot;
          sizes=&quot;(max-width: 782px) 100vw, 782px&quot;
          type=&quot;image/png&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/60048beb0dc7adf2ec892cc52fdfbe76/4dacb/Add-firebase-to-your-web-app.png&quot;
          alt=&quot;Add firebase to your web app&quot;
          title=&quot;Add firebase to your web app&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Do ở phía Application mình vẫn chưa tạo, ở đây mình sẽ tạo bằng VueJs. Về cách tạo ứng dụng VueJS ở trên mạng khá nhiều nên ở đây mình sẽ không nói lại nữa. Các bạn có thể Google để tìm hiểu nhé.&lt;/p&gt;
&lt;p&gt;Sau khi có ứng dụng VueJS rồi thì bước tiếp theo là nhúng đoạn Javascript phía trên vào file src/main.js.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 518px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/6496451fde692305e0baa97eea6a47b6/34151/add-firebase-javascript-to-html.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 97.87644787644787%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGQABAAIDAAAAAAAAAAAAAAAAAAEDAgQF/8QAFgEBAQEAAAAAAAAAAAAAAAAAAQAC/9oADAMBAAIQAxAAAAHk1bFLkkM4lBP/xAAaEAEAAgMBAAAAAAAAAAAAAAABEBEAAhIh/9oACAEBAAEFAtvMshpOSGf/xAAVEQEBAAAAAAAAAAAAAAAAAAABIP/aAAgBAwEBPwEY/8QAFREBAQAAAAAAAAAAAAAAAAAAASD/2gAIAQIBAT8BY//EABkQAAEFAAAAAAAAAAAAAAAAACEAARAgMf/aAAgBAQAGPwIyXW1//8QAGxAAAQQDAAAAAAAAAAAAAAAAAQAQESExUWH/2gAIAQEAAT8hpGz0EAK2kjoWD//aAAwDAQACAAMAAAAQ7DjA/8QAGREBAAIDAAAAAAAAAAAAAAAAAQAQESEx/9oACAEDAQE/EETczDlf/8QAGBEAAwEBAAAAAAAAAAAAAAAAAAEhEBH/2gAIAQIBAT8QSw4PP//EAB0QAQACAgIDAAAAAAAAAAAAAAEAESExEKFRgfH/2gAIAQEAAT8QWJK0o3LHD1BsuFxQ15OohcvYyn2lKY0c/wD/2Q==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/6496451fde692305e0baa97eea6a47b6/01472/add-firebase-javascript-to-html.webp 240w,
/static/6496451fde692305e0baa97eea6a47b6/222bd/add-firebase-javascript-to-html.webp 480w,
/static/6496451fde692305e0baa97eea6a47b6/ebfc9/add-firebase-javascript-to-html.webp 518w&quot;
          sizes=&quot;(max-width: 518px) 100vw, 518px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/6496451fde692305e0baa97eea6a47b6/3bc27/add-firebase-javascript-to-html.jpg 240w,
/static/6496451fde692305e0baa97eea6a47b6/98431/add-firebase-javascript-to-html.jpg 480w,
/static/6496451fde692305e0baa97eea6a47b6/34151/add-firebase-javascript-to-html.jpg 518w&quot;
          sizes=&quot;(max-width: 518px) 100vw, 518px&quot;
          type=&quot;image/jpeg&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/6496451fde692305e0baa97eea6a47b6/34151/add-firebase-javascript-to-html.jpg&quot;
          alt=&quot;add firebase javascript to html&quot;
          title=&quot;add firebase javascript to html&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2 id=&quot;setting-firebase-hosting&quot;&gt;&lt;a href=&quot;#setting-firebase-hosting&quot; aria-label=&quot;setting firebase hosting permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Setting Firebase Hosting&lt;/h2&gt;
&lt;p&gt;Về hosting của web application, ZOZO cũng quyết định dùng luôn hosting của firebase.&lt;/p&gt;
&lt;p&gt;So với Firestore thì Firebase Hosting cài đặt khá đơn giản.&lt;/p&gt;
&lt;p&gt;Ở menu, chọn **Develop -&gt; Hosting. **Sau đó ấn vào nút **Get Started **và thực hiện 1 số câu lệnh ở bên dưới màn hình.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 711px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/4aa479316634f93f5a5250d2050dcbe9/05c6f/Setup-firebase-hosting.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 59.91561181434599%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsSAAALEgHS3X78AAABbUlEQVQoz5WRvU7DMBSF/VTQAoIiwcaA2BhYeRWegX9aJBADLMwsFRQhGBiR+FVb22kCsd3YtR0nLTdGUGCBHn2xjuJzdK8SNLtHFg4osHQUzFbJ2AYubeHy/0CLh0VtrkrmaqSy06rs4pkdPLn9g6mf/gu0chIuH4fTu3R8i5TXm/M1WqnSEvjt30z4aaXNIejiuVu/ZxdPvOE5f2RA44k1Pt9ceoqrZ3n+Iq+a8rqlPkCDTPdNkmmZG5lrmenE9RIrRaoKhkYJLnuJ0nlmBwP3AbKpS6R6ixkQM66NdVkeRq9NjJttQjohpp2XFm5hQmjAGEuUgoqxKYDSb7LWGmPgFEJAjnPBGYu5wExjrttME65lz0AOQpBHkCOEBEFAKY2iKPbiHFrM9/mX/3UFYxA8UkrlBd45l/4lW+xYUKztvLIs+7PpA66f+w/WdygdRbBaas1dR589JDdtNUIZxopuF37e/q1YPQ3X6vE7aPZnmAyPRS4AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/4aa479316634f93f5a5250d2050dcbe9/01472/Setup-firebase-hosting.webp 240w,
/static/4aa479316634f93f5a5250d2050dcbe9/222bd/Setup-firebase-hosting.webp 480w,
/static/4aa479316634f93f5a5250d2050dcbe9/6252a/Setup-firebase-hosting.webp 711w&quot;
          sizes=&quot;(max-width: 711px) 100vw, 711px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/4aa479316634f93f5a5250d2050dcbe9/0783d/Setup-firebase-hosting.png 240w,
/static/4aa479316634f93f5a5250d2050dcbe9/782f4/Setup-firebase-hosting.png 480w,
/static/4aa479316634f93f5a5250d2050dcbe9/05c6f/Setup-firebase-hosting.png 711w&quot;
          sizes=&quot;(max-width: 711px) 100vw, 711px&quot;
          type=&quot;image/png&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/4aa479316634f93f5a5250d2050dcbe9/05c6f/Setup-firebase-hosting.png&quot;
          alt=&quot;Setup firebase hosting&quot;
          title=&quot;Setup firebase hosting&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt; &lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 708px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/b01d358bf5ec1e3cd87261ea38b88289/aeb3e/setup-firebase-hosting-2.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 61.29943502824858%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsSAAALEgHS3X78AAABaElEQVQoz42Py0rDQBSG56VcqAtvC8WFCII7V+58C19DKrYooiDixrUv4cJ6Rdskk3QylzOXTCcpeppiiTfw4+fw88/8nBmyepxsntGN02TrnM61opmDaLb1X5G5g7eVdrTcjheOop3LbKUTzx/+u7zQ6q2fJGsndLGd7F2z7YtstfZLnWS5M54TLR7FP0WeMtOlcE/hgcJtX93F0E3U88Bg/pTpx1SjwfnC3Cv330RCYQujUE4rb8BbQGOUEDmTnMmcoTcgh85Uw6KpUfCkLCtjrQKQUlnnyqrCJOcioSlNM5SQErSWSjUllATQWC6dcwBgjNFalzV8XKY0TQcDhkfqB1JKvEyKokCX5znnHI2pEeOEM8aEEFgufsN7T6y1k7XTOV2FH5E1/g9IVVXYwbV4G/eEEDDBnb1+FMXxW6+PfvLOJiCF0UDCJ5PfNn0z+Yb1wflAwt8Ma74m4X1UvvJi9yrdv8k/AJw8aUqRstZfAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/b01d358bf5ec1e3cd87261ea38b88289/01472/setup-firebase-hosting-2.webp 240w,
/static/b01d358bf5ec1e3cd87261ea38b88289/222bd/setup-firebase-hosting-2.webp 480w,
/static/b01d358bf5ec1e3cd87261ea38b88289/17e97/setup-firebase-hosting-2.webp 708w&quot;
          sizes=&quot;(max-width: 708px) 100vw, 708px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/b01d358bf5ec1e3cd87261ea38b88289/0783d/setup-firebase-hosting-2.png 240w,
/static/b01d358bf5ec1e3cd87261ea38b88289/782f4/setup-firebase-hosting-2.png 480w,
/static/b01d358bf5ec1e3cd87261ea38b88289/aeb3e/setup-firebase-hosting-2.png 708w&quot;
          sizes=&quot;(max-width: 708px) 100vw, 708px&quot;
          type=&quot;image/png&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/b01d358bf5ec1e3cd87261ea38b88289/aeb3e/setup-firebase-hosting-2.png&quot;
          alt=&quot;setup firebase hosting 2&quot;
          title=&quot;setup firebase hosting 2&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;$ firebase login

$ firebase init hosting&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Sau khi thực hiện xong 2 câu lệnh trên thì chúng ta sẽ thấy 1 file được tạo ra đó là &lt;strong&gt;firebase.json.&lt;/strong&gt; Trong file này thì **hosting.public **đó chính là đối tượng sẽ được deploy.&lt;/p&gt;
&lt;p&gt;Nhưng do VueJS đang sử dụng webpack để build, và thư mục sau khi build xong là &lt;strong&gt;dist&lt;/strong&gt; nên trong &lt;strong&gt;firebase.json&lt;/strong&gt; chúng ta sẽ chuyển &lt;strong&gt;hosting.public&lt;/strong&gt; thành &lt;strong&gt;dist&lt;/strong&gt;. Cụ thể sẽ như sau:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;{
  &amp;quot;hosting&amp;quot;: {
    &amp;quot;public&amp;quot;: &amp;quot;dist&amp;quot;,
    &amp;quot;ignore&amp;quot;: [
      &amp;quot;firebase.json&amp;quot;,
      &amp;quot;**/.*&amp;quot;,
      &amp;quot;**/node_modules/**&amp;quot;
    ],
    &amp;quot;rewrites&amp;quot;: [
      {
        &amp;quot;source&amp;quot;: &amp;quot;**&amp;quot;,
        &amp;quot;destination&amp;quot;: &amp;quot;/index.html&amp;quot;
      }
    ]
  }
}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Tiếp theo chúng ta cùng thực hiện deploy firebase nhé&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;$ npm run build

$ firebase deploy&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Sau khi deploy xong thì ở màn hình Hosting sẽ hiển thị ra domain đã được deploy, và có thể access được từ URL đó.&lt;/p&gt;
&lt;p&gt;Vậy việc cài đặt Firebase đến đây là kết thúc.&lt;/p&gt;
&lt;h2 id=&quot;liên-kết-màn-hình-với-firestore&quot;&gt;&lt;a href=&quot;#li%C3%AAn-k%E1%BA%BFt-m%C3%A0n-h%C3%ACnh-v%E1%BB%9Bi-firestore&quot; aria-label=&quot;liên kết màn hình với firestore permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Liên kết màn hình với Firestore&lt;/h2&gt;
&lt;p&gt;Tiếp theo chúng ta đến bước liên kết màn hình web với firestore nhé.&lt;/p&gt;
&lt;p&gt;Cấu trúc của FireStore sẽ đặt như sau:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;id của câu hỏi hiện tại&lt;/li&gt;
&lt;li&gt;thời gian kết thúc câu trả lời&lt;/li&gt;
&lt;li&gt;câu trả lời của người dùng&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;・Thực tế cấu trúc dữ liệu không phải dạng JSON, nhưng để dễ hiểu mình sẽ viết lại dưới dạng JSON&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;{
  &amp;quot;questions&amp;quot;: {
    &amp;quot;current&amp;quot;: {
      &amp;quot;id&amp;quot;: 1, // id câu hỏi hiện tại
      &amp;quot;endTime&amp;quot;: 1545906141 // thời gian kết thúc câu trả lời
    },
  },
  &amp;quot;votes&amp;quot;: { // câu trả lời của mỗi người dùng
    &amp;quot;001EjYAwtSMXlrWWTP5r&amp;quot;: { // (ID mà Firestore đã sinh ra)
      &amp;quot;answerId&amp;quot;: 0, // id câu trả lời
      &amp;quot;questionId&amp;quot;: 2 // id câu hỏi
    },
    &amp;quot;004gO0YzXUJ2bNFSbc5y&amp;quot;: {
      &amp;quot;answerId&amp;quot;: 1,
      &amp;quot;questionId&amp;quot;: 3
    },
    .
    .
    .
  }
}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;・Update dữ liệu tại màn hình kết quả&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;import firebase from &amp;#39;firebase&amp;#39;

export default {
  .
  .
  .
  created() {
    // this.db = firebase.firestore()
    this.unsubscribe = this.db.collection(&amp;#39;questions&amp;#39;).doc(&amp;#39;current&amp;#39;)
      .onSnapshot((doc) =&amp;gt; {
        const currentQuestion = doc.data()
        // =&amp;gt;
        //   {
        //     &amp;quot;id&amp;quot;: 1,
        //     &amp;quot;endTime&amp;quot;: 1545906141
        //   }
      })
  }
  .
  .
  .
}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;・Câu trả lời của mỗi người dùng:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;import firebase from &amp;#39;firebase&amp;#39;

const db = firebase.firestore()
export default {
  .
  .
  .
  created() {
    // this.db = firebase.firestore()
    this.db.collection(&amp;#39;votes&amp;#39;).onSnapshot((collection) =&amp;gt; {
      this.votes = collection.docChanges().reduce((votes, c) =&amp;gt; {
        const vote = c.doc.data()
        // =&amp;gt;
        //   {
        //     &amp;quot;answerId&amp;quot;: 0,
        //     &amp;quot;questionId&amp;quot;: 2
        //   }
        return {
          ...votes,
          [vote.questionId]: [...(votes[vote.questionId] || []), vote]
        }
      }, this.votes)
      // =&amp;gt;
      //   {
      //     .
      //     .
      //     .
      //     &amp;quot;2&amp;quot;: [ // thống kê dựa vào từng id của câu hỏi
      //       {
      //         &amp;quot;answerId&amp;quot;: 0,
      //         &amp;quot;questionId&amp;quot;: 2
      //       },
      //       .
      //       .
      //       .
      //     ],
      //     &amp;quot;3&amp;quot;: [
      //       {
      //         &amp;quot;answerId&amp;quot;: 1,
      //         &amp;quot;questionId&amp;quot;: 3
      //       },
      //       .
      //       .
      //       .
      //     ],
      //     .
      //     .
      //     .
      //   }
    })
  }
}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Tại màn hình kết quả sẽ đi thống kê dữ liệu dựa vào từng id câu hỏi. Đối với dữ liệu của câu trả lời, để làm tối thiểu cost nên ZOZO đã sử dụng hàm docChanges() để chỉ lấy cái sự khác nhau của từng kết quả.&lt;/p&gt;
&lt;p&gt;・ Ở màn hình Admin, sẽ tiến hành việc ghi dữ liệu câu hỏi vào trong FireStore&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;import firebase from &amp;#39;firebase&amp;#39;
import moment from &amp;#39;moment&amp;#39;

export default {
  .
  .
  .
  methods: {
    setQuestion() {
      db.collection(&amp;#39;questions&amp;#39;).doc(&amp;#39;current&amp;#39;).set({
        id: questionId,
        endTime: moment().add(questionTime, &amp;#39;second&amp;#39;).unix()
      })
    }
  }
  .
  .
  .
}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Ở màn hình Admin khi mà bắt đầu 1 câu hỏi, khi đó nó sẽ ghi question_id với endTime vào trong FireStore.&lt;/p&gt;
&lt;p&gt;Sau khi ghi vào FireStore xong, ngay lập tức sẽ gửi thông báo đến toàn bộ smartphone và thời gian bắt đầu câu hỏi sẽ được bắt đầu. Và khi thời gian kết thúc, màn hình hiển thị câu hỏi sẽ bị mất đi và sẽ đi đến màn hình kết quả.&lt;/p&gt;
&lt;p&gt;OK, vậy phần liên kết FireStore với màn hình đến đây đã xong.&lt;/p&gt;
&lt;p&gt;Và đây là phòng điều hành buổi tổng kết. Nhìn đã thấy sự chuyên nghiệp rồi. Đúng là nước ngoài có khác. Họ làm gì cũng thấy chuyên nghiệp&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 960px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/bf93445b12981cf2efabe03c248a5aa2/971c4/050a68e18db83f3b801caf1d18998bd5.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 78.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAQABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAIEAwX/xAAVAQEBAAAAAAAAAAAAAAAAAAABAv/aAAwDAQACEAMQAAABkTSua5Ywn//EABoQAAIDAQEAAAAAAAAAAAAAAAABAgMREgT/2gAIAQEAAQUC7eadSIUiqPUkrv/EABYRAQEBAAAAAAAAAAAAAAAAAAARIf/aAAgBAwEBPwHVf//EABcRAAMBAAAAAAAAAAAAAAAAAAEQEUH/2gAIAQIBAT8Boxf/xAAaEAACAwEBAAAAAAAAAAAAAAAAAQIRITFR/9oACAEBAAY/AtVluRlmu34bwahw/8QAHRABAAICAgMAAAAAAAAAAAAAAQARITFBUWGB0f/aAAgBAQABPyFPQ3F8AMWRPo8y8u59CGNYbvyYWAGOp//aAAwDAQACAAMAAAAQ+8//xAAXEQADAQAAAAAAAAAAAAAAAAABEBFB/9oACAEDAQE/EJop/8QAFxEAAwEAAAAAAAAAAAAAAAAAABEhAf/aAAgBAgEBPxDWxRH/xAAcEAEAAgIDAQAAAAAAAAAAAAABESEAMUFRgZH/2gAIAQEAAT8QcFwCVhdbPeseKlisjw1i8QOyWzGcqqB9O3ALSQpFxyG+3Fh0hYolM//Z&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/bf93445b12981cf2efabe03c248a5aa2/01472/050a68e18db83f3b801caf1d18998bd5.webp 240w,
/static/bf93445b12981cf2efabe03c248a5aa2/222bd/050a68e18db83f3b801caf1d18998bd5.webp 480w,
/static/bf93445b12981cf2efabe03c248a5aa2/620b9/050a68e18db83f3b801caf1d18998bd5.webp 960w,
/static/bf93445b12981cf2efabe03c248a5aa2/3cea3/050a68e18db83f3b801caf1d18998bd5.webp 1000w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/bf93445b12981cf2efabe03c248a5aa2/3bc27/050a68e18db83f3b801caf1d18998bd5.jpg 240w,
/static/bf93445b12981cf2efabe03c248a5aa2/98431/050a68e18db83f3b801caf1d18998bd5.jpg 480w,
/static/bf93445b12981cf2efabe03c248a5aa2/b3ee8/050a68e18db83f3b801caf1d18998bd5.jpg 960w,
/static/bf93445b12981cf2efabe03c248a5aa2/971c4/050a68e18db83f3b801caf1d18998bd5.jpg 1000w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/jpeg&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/bf93445b12981cf2efabe03c248a5aa2/b3ee8/050a68e18db83f3b801caf1d18998bd5.jpg&quot;
          alt=&quot;phòng điều hành buổi tổng kết cuối năm&quot;
          title=&quot;phòng điều hành buổi tổng kết cuối năm&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2 id=&quot;về-pricing-của-firebase&quot;&gt;&lt;a href=&quot;#v%E1%BB%81-pricing-c%E1%BB%A7a-firebase&quot; aria-label=&quot;về pricing của firebase permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Về Pricing của Firebase&lt;/h2&gt;
&lt;p&gt;Sau khi event kết thúc, vào màn hình Firebase để xác nhận xem mất bao nhiêu tiền.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;0.02$&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Làm đc 1 ứng dụng như vậy mà chỉ mất có 0.02$. Quá kinh khủng.&lt;/p&gt;
&lt;h2 id=&quot;tổng-kết&quot;&gt;&lt;a href=&quot;#t%E1%BB%95ng-k%E1%BA%BFt&quot; aria-label=&quot;tổng kết permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Tổng kết&lt;/h2&gt;
&lt;p&gt;Nếu bạn nào đang có ý định làm 1 ứng dụng trả lời survey realtime thì có thể tham khảo bài viết này nhé.&lt;/p&gt;
&lt;p&gt;Chúc các bạn thành công.&lt;/p&gt;
&lt;p&gt;==============&lt;/p&gt;
&lt;p&gt;Để nhận thông báo khi có bài viết mới nhất thì các bạn có thể like fanpage của mình ở bên dưới nhé:&lt;/p&gt;
&lt;p&gt;👉👉👉 &lt;a href=&quot;https://www.facebook.com/669339543503374&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Nghệ thuật Coding Fanpage Facebook&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Chúc các bạn 1 tuần thật vui vẻ.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Khi nào nút "Cancel" không nên đặt là "Cancel"]]></title><description><![CDATA[An Essay on Typography by Eric Gill takes the reader back to the year 1930. The year when a conflict between two worlds came to its term. The machines of the industrial world finally took over the handicrafts.]]></description><link>https://nghethuatcoding.com2019/05/03/khi-nao-nut-cancel-khong-nen-dat-la-cancel/</link><guid isPermaLink="false">https://nghethuatcoding.com2019/05/03/khi-nao-nut-cancel-khong-nen-dat-la-cancel/</guid><pubDate>Thu, 02 May 2019 19:00:46 GMT</pubDate><content:encoded>&lt;p&gt;Trong design, nút &lt;strong&gt;cancel&lt;/strong&gt; ngoài cái tên gọi là cancel ra, nó còn 1 vài cái tên gọi khác nữa.「&lt;strong&gt;Not Now - Không làm bây giờ&lt;/strong&gt;」 hay「&lt;strong&gt;Maybe Later - Làm lúc khác&lt;/strong&gt;」 là 1 trong những ví dụ đó.&lt;/p&gt;
&lt;p&gt;Nhưng đôi khi có 1 số trường hợp mà nút &lt;strong&gt;Cancel&lt;/strong&gt; không thể đặt là &lt;strong&gt;Cancel&lt;/strong&gt; hay những tên gọi tương tự khác. Vì có thể làm người dùng khó hiểu, hay nói cách khác sẽ khó thể thực hiện được hành động &lt;strong&gt;CTA (Call to Action)&lt;/strong&gt;.&lt;/p&gt;
&lt;blockquote&gt;Call to Action (CTA): là thuật ngữ viết tắt của call to action trong quảng cáo Google. Chúng được thể hiện thông qua văn bản hoặc hình ảnh nhằm mục đích kêu gọi người xem phải hành động bằng những cú click chuột. Như vậy, hiểu một cách đơn giản, CTA có nhiệm vụ tạo ra tỉ lệ chuyển đổi từ người dùng thành khách hàng tiềm năng.&lt;/blockquote&gt;
&lt;p&gt;Vậy chúng ta hãy cùng đi xem những trường hợp nào không nên đặt tên nút là ”&lt;strong&gt;Cancel&lt;/strong&gt;” nhé.&lt;/p&gt;
&lt;h2 id=&quot;phòng-chống-ấn-cancel-nhầm&quot;&gt;&lt;a href=&quot;#ph%C3%B2ng-ch%E1%BB%91ng-%E1%BA%A5n-cancel-nh%E1%BA%A7m&quot; aria-label=&quot;phòng chống ấn cancel nhầm permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Phòng chống ấn cancel “nhầm”&lt;/h2&gt;
&lt;p&gt;Ví dụ như có 1 màn hình ”&lt;strong&gt;cancel subscription&lt;/strong&gt;” như bên dưới. &lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 438px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/dd2766f1dd6bf083831d81c10f8d9053/f4471/cancel-label-confusion.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 61.64383561643836%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsSAAALEgHS3X78AAACZElEQVQoz2WS/U8ScRzH+SfKtQmlhXgERzx2gA+g/gGt9YPN1uxBxUXlw6DSxqq5WSmpU7TnNkNQkFBJnhau9Wcomwm/hQtSjruDO759OFm1dfvs+/3c+/V5f9/f3U6AKfQiseJ4raRG2PhvgXJSrDglUR77HwklwjM4GAXgHBge2fgc9fo+rfiDK6trUNCHNqN3hh5091hD4djyEfIHfTxa2wiPOMbqJCoBnORdCSCESqUSOnrK5SLDwO72+l/MzPOoWFHLHKzFIvRo6+s34Wm8amYYOplMplKpvb3U7u73nZ0kGNwe3+SUi+NYQOl0Giig7e0dksxHYl+qZg+fTNM0y7LQcBxH09XkyWnXEYJc/k5l6KGJxhO8WYQteXzwzoKHYX5kMgWK4vjRRffyc+csj8o/s9nM/n42l4MxUDYjcfhmf5OZQqFI04XDw2KBYgoUKB+9/gk+maEoKp8nDw4okoQxUCLxLT65TuZ++Q6NPs1dvZ3vtZEWe95iz3XfRffGFmdfTYw70SMnINDJPhvZZ/91fQANOjY/LAkxtaCmXu6Zf4t6bKUL11CnBV3uR1es7MUbqHvQPbPgfDaFrKMsINA7+1HXLfbSTdRlTbx3C6UaAaTbHj6JBUP+6YXA3JvA3GtY/TMLsdX1ofuOXutwYj1cQS4euSoovBx4PO6sa1AKxAp9O6ZswVRSYwdubJeeN8n0bVLChBNmTE6ImrQnjBrc0CElzDJDG27sOAtU21JbL6v8YQ1ywqAyNmualNpWjc6k1plU2lYoDWGWq5oxg1HW1KzWVkT1H6ozSc8ZGnHiN7MJnUtoF5a4AAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/dd2766f1dd6bf083831d81c10f8d9053/01472/cancel-label-confusion.webp 240w,
/static/dd2766f1dd6bf083831d81c10f8d9053/1d837/cancel-label-confusion.webp 438w&quot;
          sizes=&quot;(max-width: 438px) 100vw, 438px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/dd2766f1dd6bf083831d81c10f8d9053/0783d/cancel-label-confusion.png 240w,
/static/dd2766f1dd6bf083831d81c10f8d9053/f4471/cancel-label-confusion.png 438w&quot;
          sizes=&quot;(max-width: 438px) 100vw, 438px&quot;
          type=&quot;image/png&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/dd2766f1dd6bf083831d81c10f8d9053/f4471/cancel-label-confusion.png&quot;
          alt=&quot;sự nhầm lẫn của nút cancel&quot;
          title=&quot;sự nhầm lẫn của nút cancel&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Sự nhầm lẫn của nút cancelNếu như chúng ta đặt 1 cái nút &lt;strong&gt;Cancel&lt;/strong&gt; ở ngay bên trên nút &lt;strong&gt;Cancel Subscription&lt;/strong&gt; thì theo các bạn điều gì sẽ xảy ra?&lt;/p&gt;
&lt;p&gt;Như ở cái màn hình bên trái. Có thể dịch đơn giản như sau: Bạn có muốn huỷ subscription không?&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Nút bên trên là “Huỷ”&lt;/li&gt;
&lt;li&gt;Nút bên dưới là “Huỷ subscription”&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Nếu để 2 nút như này đúng quả thật gây khó hiểu thật. Cả 2 nút đều là “Huỷ”. wtf @@&lt;/p&gt;
&lt;p&gt;Vậy nếu đặt 2 nút như này thì có thể gây ra vấn đề gì?&lt;/p&gt;
&lt;p&gt;Đó chính là người dùng có thể ấn nhầm vào nút &lt;strong&gt;Cancel Subscription&lt;/strong&gt; ở bên dưới.&lt;/p&gt;
&lt;p&gt;Với những ai đang muốn huỷ Subscription thì không sao, nhưng ai không muốn huỷ mà ấn nhầm vào nút **Cancel Subscription **thì quả thực gây thiệt hại cho công ty đúng không nào.&lt;/p&gt;
&lt;p&gt;Nếu chúng ta thay nút &lt;strong&gt;Cancel&lt;/strong&gt; bằng nút &lt;strong&gt;Not Now&lt;/strong&gt; hay là &lt;strong&gt;Maybe Later&lt;/strong&gt; thì cũng vẫn gây hiểu nhầm. Bởi vì những nút này có ngụ ý là sẽ không huỷ subscription lúc này mà sẽ huỷ vào lúc khác.&lt;/p&gt;
&lt;p&gt;Để giải quyết vấn đề đó thì chúng ta nên thay cái nút &lt;strong&gt;Cancel&lt;/strong&gt; bằng nút &lt;strong&gt;Keep Plan - Vẫn giữ nguyên subscription&lt;/strong&gt; sẽ thân thiện và an toàn với người dùng hơn rất nhiều.&lt;/p&gt;
&lt;h2 id=&quot;tên-nút-không-được-gây-xung-đột-nhau&quot;&gt;&lt;a href=&quot;#t%C3%AAn-n%C3%BAt-kh%C3%B4ng-%C4%91%C6%B0%E1%BB%A3c-g%C3%A2y-xung-%C4%91%E1%BB%99t-nhau&quot; aria-label=&quot;tên nút không được gây xung đột nhau permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Tên nút không được gây xung đột nhau&lt;/h2&gt;
&lt;p&gt;Khi nghĩ về 1 tên mà đối lập với ”&lt;strong&gt;Cancel&lt;/strong&gt;” có thể ai trong chúng ta cũng đều nghĩ là ”&lt;strong&gt;Do not Cancel&lt;/strong&gt;”. Nhưng cái tên này không phải là lựa chọn tốt bởi vì nó đang cùng sử dụng từ giống nhau đó là ”&lt;strong&gt;Cancel&lt;/strong&gt;“.&lt;/p&gt;
&lt;p&gt;Đây cũng là lí do mà ”&lt;strong&gt;Keep Subscription&lt;/strong&gt;” sẽ không phải sự lựa chọn tốt, mà chúng ta nên đặt là ”&lt;strong&gt;Keep Plan&lt;/strong&gt;“.&lt;/p&gt;
&lt;p&gt;Khi mà chúng ta cùng sử dụng 1 từ giống nhau cho 2 button thì có thể làm người dùng nhầm lẫn nút này với nút kia, hay nói cách khác để không bị nhầm lẫn người dùng sẽ &lt;strong&gt;bỏ ra khoảng thời gian nào đó để đọc thật kĩ&lt;/strong&gt; 2 nút đó.&lt;/p&gt;
&lt;p&gt;Với UX thì điều đó là không tốt 1 chút nào.&lt;/p&gt;
&lt;p&gt;[caption id=“attachment_62” align=“alignnone” width=“438”]&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 438px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/54f5deba16fdfaf06552274a7a564fc4/f4471/cancel-label-connotation.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 61.64383561643836%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsSAAALEgHS3X78AAACb0lEQVQoz1WS+09ScRjG+SfK2jzeChECjtyRS0KRP7vWD91Wapk5qTSGLm3OmptdJHXeKrtsdoSAQAfJbeFa/4YyCX7KMHBygAOH8+09aJudvWd7vs9nz/d5d3Y4fLylhosfr+ZVYU1HB5xaLl7HkxzDeFU1/yOMh50WQ5ADyX7LsO9r0OHyOt2rzi9rMA6n178euv/wUUe32R8IH6IKBb3mCwyPjtfzpBy4yeH0IIRKxSJiGMSUGaZcKBTAIRzuVzMLICiKArNcpuGlKBZtfP+BnRKzYbvTUywWt2KxRCKZSCS2t+Obm1t0qUjYXZNT80yZjsViySSL4vGfgEiSDIa/VcI1bJhtLpXQv+dAE3Y3hEHA1QwsdQSFItGDMB8a4Ezmcr92dn6nUqnd3SxJgrNMfH5hmwVBl5k/6TSgdCYDq4MTCEbgm7Frr1Sac5DY38+xk81ls+B8crgnp9lmKp/PV2ieJKlcHpxgZKPSXC8kXr9HI88yN++RdwfZ6R3a63yAhsaXZ9+8nLChMVvmRgX1WMmewb2ufjQwuv5xBePLOFUNIvvCO9RtLbV3ocu96Eovum6mL95CHQPEzKLt+RTqG6HbO1kf6LU++tJtdLUv+oHABHIOtFsfPw15/e7pRc/ckmfurXd+CXTY47MMj90xW6K+gOsQsQMo5Fp9MmGrb5RwuHjLuSaJUSgX6tpw3QWR5jxfaRBrTQK5vo7bXKtXnNDImnVtApXxjNqIa00irekkF69uELJ/WKNIrZFq9XK9VGmQqQxSZatU0apQG0ELcA1fqxPq9DKFQaI4K1Ma5CqjTNkqlGgFzZomsfov9zecpUzhuQAAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/54f5deba16fdfaf06552274a7a564fc4/01472/cancel-label-connotation.webp 240w,
/static/54f5deba16fdfaf06552274a7a564fc4/1d837/cancel-label-connotation.webp 438w&quot;
          sizes=&quot;(max-width: 438px) 100vw, 438px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/54f5deba16fdfaf06552274a7a564fc4/0783d/cancel-label-connotation.png 240w,
/static/54f5deba16fdfaf06552274a7a564fc4/f4471/cancel-label-connotation.png 438w&quot;
          sizes=&quot;(max-width: 438px) 100vw, 438px&quot;
          type=&quot;image/png&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/54f5deba16fdfaf06552274a7a564fc4/f4471/cancel-label-connotation.png&quot;
          alt=&quot;cancel label connotation&quot;
          title=&quot;cancel label connotation&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt; cancel label connotation[/caption]&lt;/p&gt;
&lt;p&gt;Hơn nữa, ”&lt;strong&gt;Do Not Cancel&lt;/strong&gt;” không phải là từ trái lập với ”&lt;strong&gt;Cancel&lt;/strong&gt;” bởi vì cả 2 từ này đều mang ý nghĩa là phủ định.&lt;/p&gt;
&lt;p&gt;Nếu cả 2 nút đều mang nghĩa là phủ định thì khi đó người dùng sẽ xem 2 từ này như là ”&lt;strong&gt;Huỷ&lt;/strong&gt;”, và đây cũng chính là nguyên nhân gây nhầm lẫn.&lt;/p&gt;
&lt;p&gt;Từ ”&lt;strong&gt;Cancel - Huỷ&lt;/strong&gt;” nó mang nghĩa phủ định. Nếu mà 1 lúc nhìn vào 2 từ ”&lt;strong&gt;Do Not Cancel&lt;/strong&gt;” và ”&lt;strong&gt;Cancel Subscription&lt;/strong&gt;” thì người dùng có cảm giác khi ấn vào 1 trong 2 nút này thì có thể làm mất đi “1 thứ nào đó”.&lt;/p&gt;
&lt;p&gt;Để đặt tên nút an toàn hơn trong trường hợp này, thì từ ”&lt;strong&gt;Keep Plan&lt;/strong&gt;” có lẽ sẽ là giải pháp tốt nhất.&lt;/p&gt;
&lt;h2 id=&quot;cancel-subscription-vs-unsubscribe&quot;&gt;&lt;a href=&quot;#cancel-subscription-vs-unsubscribe&quot; aria-label=&quot;cancel subscription vs unsubscribe permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Cancel Subscription Vs. Unsubscribe&lt;/h2&gt;
&lt;p&gt;Đôi khi chúng ta nghĩ, sử dụng ”&lt;strong&gt;Unsubscribe&lt;/strong&gt;” có thể thay thế cho từ ”&lt;strong&gt;Cancel Subscription&lt;/strong&gt;”. Nhưng các bạn đã nhầm.&lt;/p&gt;
&lt;p&gt;2 từ ”&lt;strong&gt;Subscription&lt;/strong&gt;” với ”&lt;strong&gt;Subscribe&lt;/strong&gt;” là 2 từ không thể thay thế cho nhau được. Bởi vì ngữ cảnh sử dụng nó là hoàn toàn khác nhau.&lt;/p&gt;
&lt;p&gt;[caption id=“attachment_64” align=“alignnone” width=“438”]&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 438px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/97860dd299c406d84c16046f293740a3/f4471/subscribe-vs-subscription.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 50.68493150684932%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsSAAALEgHS3X78AAABgUlEQVQoz2VRy0rDQBSt3+BnudadX+AH+BXu/AEFF6IgCNKii4qiVqii1VabZpJMXpPM3JuZpKlCF+JtSmtUODPM45x77qOhsFgCsjEBIUdpZmddLt9RlwQ61PkNWhJyP0xcHnm+8PyYCWBgbB4xJ6AvguOFjhfZjh8nWNfPxICFxfzB0PHDNFYGbx+yk2bK46RSEiFVpoKeX3/EdDfF58lpa+/guHneDpWZrm9+raya1qWcfoEyRBi8269966VvjRj/55yNKXAkgPsCzET33k37DgRSzbDgzfP/6zz/iAVKOctNCIghj3QZp5lIMK2cqQCqlqInUtdDNCQWGZaMR2+uF/DETZHLzAkET8D1ItIQKYhSagcPEpLp/APN5McZcbzdP9ro7tqFya8f1eEZXNzAVZdIVBEJqikINut5aDuBy+Oac1ZuPe2vdXYsjbrTS9sd2e3L+2dV9YbENDPmBpbNR8wfjjwa26+0qVFcgcFSjj/Vx1TRTlg0JjOTJeppfwPdexm/KXKEOgAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/97860dd299c406d84c16046f293740a3/01472/subscribe-vs-subscription.webp 240w,
/static/97860dd299c406d84c16046f293740a3/1d837/subscribe-vs-subscription.webp 438w&quot;
          sizes=&quot;(max-width: 438px) 100vw, 438px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/97860dd299c406d84c16046f293740a3/0783d/subscribe-vs-subscription.png 240w,
/static/97860dd299c406d84c16046f293740a3/f4471/subscribe-vs-subscription.png 438w&quot;
          sizes=&quot;(max-width: 438px) 100vw, 438px&quot;
          type=&quot;image/png&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/97860dd299c406d84c16046f293740a3/f4471/subscribe-vs-subscription.png&quot;
          alt=&quot;subscribe vs subscription&quot;
          title=&quot;subscribe vs subscription&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt; subscribe vs subscription[/caption]&lt;/p&gt;
&lt;p&gt;Chắc xem nhiều Youtube chúng ta cũng đều nghe thấy từ ”&lt;strong&gt;Subscribe&lt;/strong&gt;” đúng không nào?&lt;/p&gt;
&lt;p&gt;Ý nghĩa của từ ”&lt;strong&gt;Subscribe&lt;/strong&gt;” là muốn nói đến việc người dùng đăng kí theo dõi kênh đó, và sẽ nhận thông báo khi có bài viết mới.&lt;/p&gt;
&lt;p&gt;Còn từ ”&lt;strong&gt;Subscription&lt;/strong&gt;” thì sao? Nó lại có ý nghĩa hoàn toàn khác.&lt;/p&gt;
&lt;p&gt;Với những ai đăng kí dùng &lt;strong&gt;Netflix&lt;/strong&gt; hay là **Spotify **để nghe nhạc thì cũng biết. Cả 2 dịch vụ này đều tính tiền theo tháng, và chúng ta phải mua thì mới dùng được. Nó có những plan khác nhau.&lt;/p&gt;
&lt;p&gt;Nếu chúng ta đăng kí plan và trả tiền theo tháng, cứ đến đầu tháng sẽ bị rút tiền từ thẻ VISA. Cái hành động đó được gọi là ”&lt;strong&gt;Subscription&lt;/strong&gt;“.&lt;/p&gt;
&lt;p&gt;Do đó tuỳ vào ngữ cảnh, nếu chúng ta không phân biệt cách sử dụng của 2 từ này 1 cách rõ ràng thì có thể gây nhầm lẫn cho người dùng.&lt;/p&gt;
&lt;p&gt;[caption id=“attachment_65” align=“alignnone” width=“438”]&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 438px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/9039708336394f51595cc3550810a833/f4471/cancel-label-congruence.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 61.64383561643836%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsSAAALEgHS3X78AAACZElEQVQoz1WS/U9SURzG+SMy+qELmAGiwAWBlLdMaP4B1XyprbVWKsxl06zJbL0uV0TmW4mVbXYVEVGmIuKitf4M2uQnYxEs4HJ5vXL6HtAtz56dfe/zOc99zu4uR0JqeULy5Gkxl6j/X+DwhaRArKwhxFzecUSIibNyCHIgeXfItrEVcK2suT3r7lUfyOVe2/Tv3BkcuXG7f3M7uFxFFQrHfBvbtofPa8VNHHiTy+1FCJWKxXL5oKJyPp8Hh3J53ky8g6GQz5cPYLFAi4UCON++/yDq5Di85PYWi8Vw+OfeXiQajeZyOZqm4cTCovv1+Awql8PhcCQS2d//hVEmA2h752slzMNh3FwqoaNVnaEZh48jlmVh39kNVcMSamkFnn/HYn/icaxEIp5I4GZq+ZVjEoZkKgUmoFg8/jeZxM2BXfhm+NqLlWY6TTNpOpvJZGm4Gr7bF5fH/hY3ZxmGoelsVQwDTuCwuVZKzc6jkRepjh6m735Vqc5eNPxsYdppH3OgR/bklVuHyPIg3dWLBkb9nxcJiYrDPSNdev8J3RwstV1G3RbUbYWdvdiBrg9QE7OOl+PIMsK2XkJdfeiaFV21suYO1NkXmqeIBjUH2odHnwbXtzyTTu/MnHcaa3VqLuTz37M97ukfCm0EVqac3ukPVbQ28zHo8T0Zc9SKlBwhqTVLlOclyvoWk0xrkmpNSmO7SG08wW/g15EC47lTOpVMawZfpjMrjO18qaZG0EjUyfAfJpK36Jr0BpVBoWnVNLc1aVpVzW0KtbGR1DaQOonOINUb1ZoLqiMkU+oxUujq5S3/AHCOm7NPMvxvAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/9039708336394f51595cc3550810a833/01472/cancel-label-congruence.webp 240w,
/static/9039708336394f51595cc3550810a833/1d837/cancel-label-congruence.webp 438w&quot;
          sizes=&quot;(max-width: 438px) 100vw, 438px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/9039708336394f51595cc3550810a833/0783d/cancel-label-congruence.png 240w,
/static/9039708336394f51595cc3550810a833/f4471/cancel-label-congruence.png 438w&quot;
          sizes=&quot;(max-width: 438px) 100vw, 438px&quot;
          type=&quot;image/png&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/9039708336394f51595cc3550810a833/f4471/cancel-label-congruence.png&quot;
          alt=&quot;cancel label congruence&quot;
          title=&quot;cancel label congruence&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt; cancel label congruence[/caption]&lt;/p&gt;
&lt;p&gt;Như ảnh ở bên trên, nếu chúng ta muốn hỏi người dùng là “Có muốn huỷ subscribe kênh hay không?” thì có lẽ câu trả lời tốt nhất vẫn là ”&lt;strong&gt;Stay Subscribed&lt;/strong&gt;” đúng không nào?&lt;/p&gt;
&lt;p&gt;Qua đó ta thấy được, để làm rõ hành động của người dùng thì việc đặt tên nút phù hợp với từng ngữ cảnh là điều khá quan trọng.&lt;/p&gt;
&lt;p&gt;Nếu sử dụng tên nút không thích hợp sẽ không chỉ làm người dùng nhầm lẫn, mà còn khiến người dùng ”&lt;strong&gt;phải bỏ chút thời gian&lt;/strong&gt;” để hiểu rõ xem nút này có ý nghĩa là gì.&lt;/p&gt;
&lt;p&gt;Và còn rất nhiều ví dụ khác nữa cũng khá thú vị. Đặc biệt là Nitendo họ đã làm rất tốt điều này.&lt;/p&gt;
&lt;p&gt;Nếu bạn nào biết tiếng nhật có thể tham khảo bài này về Design Nitendo (mình tìm mãi không thấy có bài viết về tiếng anh): &lt;a href=&quot;https://www.famitsu.com/news/201808/22162761.html&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Nintendo SwitchのUIはなぜ使い勝手がいいのか!? 全員で体験し、“あたりまえ”を磨く任天堂のもの作り【CEDEC 2018】&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;kết-luận&quot;&gt;&lt;a href=&quot;#k%E1%BA%BFt-lu%E1%BA%ADn&quot; aria-label=&quot;kết luận permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Kết luận&lt;/h2&gt;
&lt;p&gt;Các bạn thấy UX nó quan trọng thế nào với người dùng chưa ak?&lt;/p&gt;
&lt;p&gt;Việc đặt tên nút dường như là 1 việc rất nhỏ trong design, thế nhưng nó lại mang lại 1 hiệu quả vô cùng to lớn.&lt;/p&gt;
&lt;p&gt;Nếu tên nút đặt thích hợp, người dùng phán đoán nhanh, sẽ là nhân tố kết nối đến CTA (Call to Action) được cao hơn.&lt;/p&gt;
&lt;p&gt;Chúc các bạn thành công.&lt;/p&gt;
&lt;p&gt;==============&lt;/p&gt;
&lt;p&gt;Để nhận thông báo khi có bài viết mới nhất thì các bạn có thể like fanpage của mình ở bên dưới nhé:&lt;/p&gt;
&lt;p&gt;👉👉👉 &lt;a href=&quot;https://www.facebook.com/669339543503374&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Nghệ thuật Coding Fanpage Facebook&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Chúc các bạn 1 tuần thật vui vẻ.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Các kĩ sư Pinterest đã xây dựng Progressive Web App như thế nào]]></title><description><![CDATA[Ý tưởng xây dựng 1 Progressive Web App (viết tắt là PWA) không phải là mới, được Google giới thiệu lần đầu vào năm 2015 với mục đích mang lại thật nhiều lợi ích cho cả người dùng và các nhà phát triển.
Sau nhiều quá trình cố gắng, các engineers Pinterest đã xây dựng thành công Progressive Web App với trải nghiệm người dùng tuyệt vời trong trình duyệt trên mobile.]]></description><link>https://nghethuatcoding.com2019/05/02/cac-ki-su-pinterest-da-xay-dung-progressive-web-app-nhu-the-nao/</link><guid isPermaLink="false">https://nghethuatcoding.com2019/05/02/cac-ki-su-pinterest-da-xay-dung-progressive-web-app-nhu-the-nao/</guid><pubDate>Sat, 19 Aug 2017 22:40:32 GMT</pubDate><content:encoded>&lt;p&gt;Ý tưởng xây dựng 1 Progressive Web App (viết tắt là PWA) không phải là mới, được Google giới thiệu lần đầu vào năm 2015 với mục đích mang lại thật nhiều lợi ích cho cả người dùng và các nhà phát triển.&lt;/p&gt;
&lt;p&gt;Sau nhiều quá trình cố gắng, các engineers Pinterest đã xây dựng thành công Progressive Web App với trải nghiệm người dùng tuyệt vời trong trình duyệt trên mobile.&lt;/p&gt;
&lt;p&gt;Và đây là kết quả họ đã đạt được sau khi xây dựng thành công Progressive Web App:&lt;/p&gt;
&lt;p&gt;[caption id=“attachment_47” align=“alignnone” width=“1024”]&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 960px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/50afdf42e8cd6cc8e7eecc9c5bdabf9a/6ff5e/ket-qua-sau-khi-dung-Progressive-Web-App.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAABqklEQVQoz32QbWvVQBCF8+v11xSKCEKttVQpRgVFrrVqyc1mk9ykN8lmd/Oy7/EkVukXHZZwJucMzDxRCIFz3jHWtm3XddCMMQjW9xD9VvgJt2ka6GVZJprvnjw1UkZKqTQjtCgO9zUhBImM0j0he5JixjqXZllKsyRNtVJcCCSTfZJ8u7HWRs7aoedDWU+H46wUEmPL5OFeljXs4AOESHOeV2FZrDayOrI0H6rjEkLkh3l887k/eSWeXbmmD8qMV5/E6eVw9s613M9Kvoz56aV4ce06ESYlnr/tTy7keQw3wg16mrUc8TXTjD0NFpCDHic8EAnOeWW8scFahD0SSm+ti+AKIdgG7DcfIeXGq2/a1mi9/LtWYEVZlnXVdC2lFJzzrc1yKjhHAoSysiA5NcaM00TLAizzqsQGkfd+aDr+k4zVcdZKaw1g/I5wutoYhsu+J2IDhmme5qKs+9u9m9V6s7pJ5Pn78fpLMOtVGu3FhzHe4arV/ZoA0hTvVmtfDK8/mh+ZPIvVHY0e1vd+nQxh1RskvD8t3LD8bZ0PeN5DRA/24/p/+6h+ATewbIWymWWWAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/50afdf42e8cd6cc8e7eecc9c5bdabf9a/01472/ket-qua-sau-khi-dung-Progressive-Web-App.webp 240w,
/static/50afdf42e8cd6cc8e7eecc9c5bdabf9a/222bd/ket-qua-sau-khi-dung-Progressive-Web-App.webp 480w,
/static/50afdf42e8cd6cc8e7eecc9c5bdabf9a/620b9/ket-qua-sau-khi-dung-Progressive-Web-App.webp 960w,
/static/50afdf42e8cd6cc8e7eecc9c5bdabf9a/6bc95/ket-qua-sau-khi-dung-Progressive-Web-App.webp 1200w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/50afdf42e8cd6cc8e7eecc9c5bdabf9a/0783d/ket-qua-sau-khi-dung-Progressive-Web-App.png 240w,
/static/50afdf42e8cd6cc8e7eecc9c5bdabf9a/782f4/ket-qua-sau-khi-dung-Progressive-Web-App.png 480w,
/static/50afdf42e8cd6cc8e7eecc9c5bdabf9a/f570d/ket-qua-sau-khi-dung-Progressive-Web-App.png 960w,
/static/50afdf42e8cd6cc8e7eecc9c5bdabf9a/6ff5e/ket-qua-sau-khi-dung-Progressive-Web-App.png 1200w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/png&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/50afdf42e8cd6cc8e7eecc9c5bdabf9a/f570d/ket-qua-sau-khi-dung-Progressive-Web-App.png&quot;
          alt=&quot;Kết quả sau khi dùng Progressive Web App&quot;
          title=&quot;Kết quả sau khi dùng Progressive Web App&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt; Kết quả sau khi dùng Progressive Web App[/caption]&lt;/p&gt;
&lt;p&gt;Qua kết quả trên thấy được, thời gian sử dụng ứng dụng đã tăng lên 40%, doanh thu từ quảng cáo đã tăng đến 44%, số lượng click vào quảng cáo đã đạt đến 50%, và số lượng tương tác đã tăng đến 60%.&lt;/p&gt;
&lt;p&gt;Trong khi đó ở native app và phiên bản web trên desktop thì tốc độ tăng trưởng thấp hơn rất nhiều.&lt;/p&gt;
&lt;p&gt;Từ kết quả trên ta thấy được 1 điều, &lt;strong&gt;khi trải nghiệm người dùng tốt sẽ dẫn đến lượng tương tác của người dùng tăng lên, và kéo theo doanh thu cũng tăng theo.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Vậy chúng ta cùng tìm hiểu xem các kĩ sư Pinterest đã xây dựng thành công ứng dụng Progressive Web App lớn nhất thế giới như thế nào nhé.&lt;/p&gt;
&lt;p&gt;Trước khi bắt đầu, cùng điểm qua xem Progressive Web App nó là gì đã nhé.&lt;/p&gt;
&lt;p&gt;[caption id=“attachment_38” align=“alignnone” width=“800”]&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/21d7ae365cb0ab90a98c96095826c76e/8ff1e/Progressive-Web-App-Pinterest.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 97.125%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAAsSAAALEgHS3X78AAAFHUlEQVQ4yz1Ue0yTVxT/ssUtWdw/ZonLYtA5JDI02TLYlKgIgvJY6QMoBZS30FahrZUqKIqIuA151bEZJyDg4t4uy1zi/AsFUScoNmTKozieRhDafpS2t/T+dm/nvMkv99z7ne887vmdI0RFRno2bNiA9euDaWBgINvXIygoCGvXrsWaNWs8ISEhiIiIMEql0pLNmzYhODjYw/XWrVv3UjcoJIQGbtyI0LCwRaGurs7d39+Prq4u2t3dzYGenh7ad/8+tY4+Ibdv30ZMTIxeo9aYuJ7FYiF9ffdp/8OH9BbTvd7ZSa/V1tKrmVko1evnhI6ODteiaxHT09N0cnISXq8XfA1Y+umfV38hE9NTSElRGnXFxSYfpfwTYfALfPkYXMMj1NvVDfOZWlFobW31sYX5+Xk6OzsLymSny43aYwdxdkco+b38KDI12uP71JpjonMBz+12cuX6DVgGrbCLIojbxTz4/A7qGxqo0N7evsQPlNKXXol3Cb/90IGumiry6PJ3UGRnG4u02rLOO72oudBBdCfrcLSxGd9fu4kB6wT6B59Q+4ILDQ0NDh4hTwFut5suLCzA5XJhhkU6NTEOcXGBOBYXER8XbzAeMBw62diExL37Sb6pHFl6EwpKSlFe+yVKa8y0rrkdlVVVNqGtrc3BDXo8Hn+EPha90+mE978syCIzGBcXpztoNOqNZQZ8sPUjEvnpdoTv3IbQiE/w8Y7N+HDbFhojl+LQ4UM24eLFi+LU1BQY6OTEGGZmnvnTds4/x8zoKBm3WpEgkTCDBw3KPal4Zfky8vqK5YiUyqDaq0E0MxQWuYVGS3bBZCqxCWe/+lpUpSnxRXUlVcl2orqiDD9/+w1+qszB56ErSU1WJpQ52TpDsc6gSJfj1TcF8va7b0GaoUTufh0iY3dgxTtv0PdCAqA36G1C7dkmMbuoGCXlh6l8eyiqyvSoOlGBy6c1aNoVQFoKC5GclanTFBQYms43ob7pDKmpPY62tnM439KCytOnUFldTk99cQJlR0ptgslkEsOjohG+NZwWq2LR9NkxnDmwHx0ni6HeuJKcyM3D7twcXdE+raGv9y+IDpGwArKnmeFUAy+kwyH6H9xsNtuEExUVoiojg78TrddpUF1yAPtyMlFu1CM3P480NJqRmZmpK8jPN7g9HkYpr79Q3NAcM8hlURQp53J9fb1NuHTpksitc2Lb7HY/ZTwe8pKS3HVcbKxOW1RkGH7QC9vMM2J3ODDLInSwnXcWpxxXZjxkRTGbxQe999B9s5M+GZvAg4cW3Ovpwh+//sgKVUWuXbmCJKVSV6BWG6YGH+Hp+Bixjo5iaGgIVsaAEYah4WHKqeY3WFpaKmZnpCInL49ebm1Gy/lzqDmcj+ToLTQp7H1SXX4Eabv3+FN2MtKz6AhLl77oLiyxCL0vImxsbLQJF5qbHSPWEQwyLxNj/9DpyQk8mximllvd9Onjv8njwceQy+XFWq1WPzc3x0lP7HY7ZW9HHayXbbOzdG583C+zCOeFhIQEd3JyMhQKBZXJ5fxnSGUKKJKSIJHKiFyuQFRUlJF1S0lKSgpkMhlJTEwEm4+QSCSQJEqQKJXS+Ph4PuacQlhYmGXVqlVYvXq1j4HywcpAAwICOJb4AI2NjVUxpHGZ37HBSzn4oH0h+9g9mK1+Qa1WJyiVSpKamgqlMpXynYGyO59KpUJaWlrnwMDAsrt37r6Wnp5+g535d9//ukyP67KZmeIpLCyM+xfIR/c1DS0RTgAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/21d7ae365cb0ab90a98c96095826c76e/01472/Progressive-Web-App-Pinterest.webp 240w,
/static/21d7ae365cb0ab90a98c96095826c76e/222bd/Progressive-Web-App-Pinterest.webp 480w,
/static/21d7ae365cb0ab90a98c96095826c76e/0cbce/Progressive-Web-App-Pinterest.webp 800w&quot;
          sizes=&quot;(max-width: 800px) 100vw, 800px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/21d7ae365cb0ab90a98c96095826c76e/0783d/Progressive-Web-App-Pinterest.png 240w,
/static/21d7ae365cb0ab90a98c96095826c76e/782f4/Progressive-Web-App-Pinterest.png 480w,
/static/21d7ae365cb0ab90a98c96095826c76e/8ff1e/Progressive-Web-App-Pinterest.png 800w&quot;
          sizes=&quot;(max-width: 800px) 100vw, 800px&quot;
          type=&quot;image/png&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/21d7ae365cb0ab90a98c96095826c76e/8ff1e/Progressive-Web-App-Pinterest.png&quot;
          alt=&quot;Progressive Web App Pinterest&quot;
          title=&quot;Progressive Web App Pinterest&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt; Progressive Web App Pinterest[/caption]&lt;/p&gt;
&lt;h2 id=&quot;progressive-web-app-là-gì&quot;&gt;&lt;a href=&quot;#progressive-web-app-l%C3%A0-g%C3%AC&quot; aria-label=&quot;progressive web app là gì permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Progressive Web App là gì?&lt;/h2&gt;
&lt;p&gt;Đầu tiên mình nhấn mạnh là Progressive Web App không phải là 1 framework hay 1 công nghệ gì mới. Nó là 1 sự kết hợp tốt nhất của web và tốt nhất của ứng dụng.&lt;/p&gt;
&lt;p&gt;Nó sẽ giúp cho chức năng trên web tương tự như chức năng trên mobile. Tương tự đến mức mà người dùng khó phân biệt được mình đang dùng trên trình duyệt hay là đang dùng trên native app.&lt;/p&gt;
&lt;p&gt;Progressive Web App sẽ làm được những gì?&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Tải nhanh&lt;/strong&gt;: tốc độ tải dữ liệu cực nhanh, áp dụng cơ chế cache sẽ giúp cho ta có thể xem được dữ liệu khi mà đang offiline.&lt;/li&gt;
&lt;li&gt;**Trải nghiệm người dùng tốt: **Vì giao diện dùng trên Progressive Web App khá giống với trên native app. Nên sẽ giúp trải nghiệm người dùng tốt hơn. Ví dụ có thể gửi được thông báo, rồi có thể sử dụng quyền truy cập đến thiết bị như native app.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;tại-sao-pinterest-quyết-định-sử-dụng-progressive-web-app&quot;&gt;&lt;a href=&quot;#t%E1%BA%A1i-sao-pinterest-quy%E1%BA%BFt-%C4%91%E1%BB%8Bnh-s%E1%BB%AD-d%E1%BB%A5ng-progressive-web-app&quot; aria-label=&quot;tại sao pinterest quyết định sử dụng progressive web app permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Tại sao Pinterest quyết định sử dụng Progressive Web App?&lt;/h2&gt;
&lt;p&gt;Qua dữ liệu thống kê thấy được, 80% tổng số lượng người dùng Pinterest đang sử dụng trình duyệt browser trên mobile thay vì sử dụng ứng dụng native app.&lt;/p&gt;
&lt;p&gt;Mặc dù số lượng người dùng download app cũng tăng lên theo ngày nhưng mà cũng có không ít số lượng review không tốt. Đây là 1 ví dụ:&lt;/p&gt;
&lt;p&gt;[caption id=“attachment_39” align=“aligncenter” width=“1024”]&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 960px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/dd592c1335f71f2d8b5fa5ee9db1de9f/9fb8a/0_6zVRthZO-ShBvcwS.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 21.586206896551726%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAAsSAAALEgHS3X78AAAA40lEQVQI13WNP2vCQADF85H8Av0KLTgXQVCcxKUOHXR1sgUXcRDBb1Do6KoRISaQEJp4/6IHJ6EJxmuPhCOep7tveMPj/d4zlLqsFt/zySiOY8aYZVm2bbuua5rmZm0ilqA/VcriX4g8z6WU2oUQRVGUZWlMJ+PZW23YfOm0GhiT7dZyHIcQ4nneerWEB0bPkmen3yTJ7uKcp2mqeaWU0e2060+Vz/pz87WaZScAdgihIAgoPURRhCAEwQ+EUIeUUgCAzsMw1PwN3mMw6L9/ffSO0e7MObr3fN/X57pEMNYT6oGu0RbKXQmBfyQAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/dd592c1335f71f2d8b5fa5ee9db1de9f/01472/0_6zVRthZO-ShBvcwS.webp 240w,
/static/dd592c1335f71f2d8b5fa5ee9db1de9f/222bd/0_6zVRthZO-ShBvcwS.webp 480w,
/static/dd592c1335f71f2d8b5fa5ee9db1de9f/620b9/0_6zVRthZO-ShBvcwS.webp 960w,
/static/dd592c1335f71f2d8b5fa5ee9db1de9f/28063/0_6zVRthZO-ShBvcwS.webp 1440w,
/static/dd592c1335f71f2d8b5fa5ee9db1de9f/d0ccc/0_6zVRthZO-ShBvcwS.webp 1450w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/dd592c1335f71f2d8b5fa5ee9db1de9f/0783d/0_6zVRthZO-ShBvcwS.png 240w,
/static/dd592c1335f71f2d8b5fa5ee9db1de9f/782f4/0_6zVRthZO-ShBvcwS.png 480w,
/static/dd592c1335f71f2d8b5fa5ee9db1de9f/f570d/0_6zVRthZO-ShBvcwS.png 960w,
/static/dd592c1335f71f2d8b5fa5ee9db1de9f/8d0ff/0_6zVRthZO-ShBvcwS.png 1440w,
/static/dd592c1335f71f2d8b5fa5ee9db1de9f/9fb8a/0_6zVRthZO-ShBvcwS.png 1450w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/png&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/dd592c1335f71f2d8b5fa5ee9db1de9f/f570d/0_6zVRthZO-ShBvcwS.png&quot;
          alt=&quot;đánh giá về Pinterest&quot;
          title=&quot;đánh giá về Pinterest&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt; đánh giá về Pinterest[/caption]&lt;/p&gt;
&lt;p&gt;[caption id=“attachment_40” align=“alignnone” width=“1024”]&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 960px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/3b5ec993e66464f8a9fdf78641405f54/5edf4/0_aZnfgWcUlf7vuExT.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 22.55125284738041%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAAsSAAALEgHS3X78AAAA2klEQVQY031PywqCUBT0/1fZMlrntv6gEEHtgpAPVPAmmoqED9S8+W7KfbMY5nDPzJzLMcZM05ymaRxH13XDMAyCIIqiVXiel+c5Xruu6/seO90P7M3meeZOp+N+t8uez2VZFEURRZEQommaJEmqqsqyHMcxCsqyrKpqFUVRvNoXEjlyJfrtdqd0GIYkSSilKARDox9O27bvPziO4/s+hGVZKEcZx/MbQTjwW75pGhh0XTcMAxvgNE0Rj9D1UxBgXIsR/DWj53w5Px4hhrqusyzDYQiCaNt2+YsPmtQPgIFWpv0AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/3b5ec993e66464f8a9fdf78641405f54/01472/0_aZnfgWcUlf7vuExT.webp 240w,
/static/3b5ec993e66464f8a9fdf78641405f54/222bd/0_aZnfgWcUlf7vuExT.webp 480w,
/static/3b5ec993e66464f8a9fdf78641405f54/620b9/0_aZnfgWcUlf7vuExT.webp 960w,
/static/3b5ec993e66464f8a9fdf78641405f54/b97a9/0_aZnfgWcUlf7vuExT.webp 1317w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/3b5ec993e66464f8a9fdf78641405f54/0783d/0_aZnfgWcUlf7vuExT.png 240w,
/static/3b5ec993e66464f8a9fdf78641405f54/782f4/0_aZnfgWcUlf7vuExT.png 480w,
/static/3b5ec993e66464f8a9fdf78641405f54/f570d/0_aZnfgWcUlf7vuExT.png 960w,
/static/3b5ec993e66464f8a9fdf78641405f54/5edf4/0_aZnfgWcUlf7vuExT.png 1317w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/png&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/3b5ec993e66464f8a9fdf78641405f54/f570d/0_aZnfgWcUlf7vuExT.png&quot;
          alt=&quot;đánh giá về Pinterest&quot;
          title=&quot;đánh giá về Pinterest&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt; đánh giá về Pinterest[/caption]&lt;/p&gt;
&lt;p&gt;Cách đây 2 năm (năm 2017), bên Pinterest đã tập trung build 1 đội viết lại trang web trên mobile sử dụng Progressive Web App.&lt;/p&gt;
&lt;p&gt;Có 2 lí do khiến Pinterest đầu tư rất nhiều vào mobile web.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Đầu tiên là vì người dùng&lt;/strong&gt;. Progressive Web App sẽ giúp những người có mạng internet tốc độ thấp hay gói dữ liệu hạn chế có khả năng trải nghiệm tốt hơn. Với hơn 1 nửa người dùng không ở US, việc xây dựng 1 mobile web tốt, tốc độ tải trang nhanh, tiết kiệm băng thông sẽ giúp Pinterest dễ truy cập hơn trên toàn cầu, và cuối cùng sẽ giúp trải nghiệm người dùng tốt hơn.&lt;/li&gt;
&lt;li&gt;**Lí do thứ 2 là dựa trên dữ liệu (data-driven). **Do trải nghiệm người dùng trên native app không được tốt nên có 1 tỉ lệ rất nhỏ người dùng do không authen được nên đã chuyển sang dùng mobile web. Nhưng số lượng người dùng trên native app vẫn lớn hơn và có độ tương tác tốt hơn rất nhiều so với trên mobile web, và để chuyển đổi người dùng từ native app sang mobile web không phải là việc dễ dàng gì. Nhưng Pinterest nghĩ họ có thể làm tốt hơn.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;vậy-kĩ-sư-pinterest-đã-làm-nó-như-thế-nào&quot;&gt;&lt;a href=&quot;#v%E1%BA%ADy-k%C4%A9-s%C6%B0-pinterest-%C4%91%C3%A3-l%C3%A0m-n%C3%B3-nh%C6%B0-th%E1%BA%BF-n%C3%A0o&quot; aria-label=&quot;vậy kĩ sư pinterest đã làm nó như thế nào permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Vậy kĩ sư Pinterest đã làm nó như thế nào?&lt;/h2&gt;
&lt;p&gt;Vào tháng 7/2017, Pinterest đã thành lập ra 1 nhóm kết hợp từ các engineer từ nền tảng web và growth teams. Trong nội bộ Pinterest gọi nó là &lt;strong&gt;Project Duplo.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Vào thời điểm đó, mobile web chỉ chiếm khoảng 10% tổng số lượt signup (đăng kí tài khoản). Cùng thời điểm thì website trên nền tảng desktop đã tăng gấp 5 lần.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Mốc thời gian:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Tháng 7/2017: Bắt đầu dự án Duplo&lt;/li&gt;
&lt;li&gt;Tháng 8/2017: Launch 1 trang web mới trên mobile cho 1 tỉ lệ phần trăm người dùng đã logged-in.&lt;/li&gt;
&lt;li&gt;Tháng 9/2017: Ship trang web mới trên mobile cho toàn bộ người dùng đã logged-in vào&lt;/li&gt;
&lt;li&gt;Tháng 1/2018: Launch 1 trang web mới trên mobile cho tỉ lệ phần trăm của người dùng đã logged-out&lt;/li&gt;
&lt;li&gt;Tháng 2/2018: Ship trang web mới trên mobile cho toàn bộ người dùng đã logged-out.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Lí do mà các kĩ sư Pinterest có thể hoàn thành xong 1 phiên bản trên mobile web chỉ mất có 3 tháng là do họ có sử dụng 1 open source do chính họ tạo ra có tên là &lt;a href=&quot;https://github.com/pinterest/gestalt&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Gestalt. &lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Ở Pinterest họ đang sử dụng &lt;strong&gt;React&lt;/strong&gt; cho tất cả web development. Các bộ phận trong Gestalt được xây dựng để bao gồm các design language, giúp dễ dàng tạo ra các trang khá đẹp mà không phải lo lắng về CSS.&lt;/p&gt;
&lt;p&gt;Gestalt tạo ra 1 bộ các component dành riêng cho thiết bị di động để tạo ra các trang có khoảng cách nhất quán với toàn bộ trang. Điều đó giúp cho quá trình xây dựng website trở nên nhanh và đơn giản hơn.&lt;/p&gt;
&lt;p&gt;[caption id=“attachment_41” align=“alignnone” width=“1024”]&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 960px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/ed71ce77abc4fc19c7201df57df80215/fa92b/Gestalt-component.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 52.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAACP0lEQVQoz3WSTWjTYBjHs5M3UTbcxesYHkTEjXmQiSAMD/Pq1xDBgwwFvShOKQoqO2wM3GzL7PrF8LjiYW61U6ProVaGbrZr06ZJ2iRNO9tkaT6WNGkS3yT16J+Hl5f3z4/n64Ws/8h0TrWjb1TRVTL/gULcAPcNpnTQ0YELFYvo4tslURT//FOz2Ww0GoqqAntfFj2x6NRK+EksAuJpLPJ4Jfz8/TIrCTb8e+fny2dTPM/jOJ7P5yuVCkEQxWIRvABbVwUhF9CwYBsLqWhAw0MaHhQLQV1t2bBlMpYVVxQRx4lsNpvJZOr1ul22aRdu6pJJhSzca5X9ZjVgYH6j9Mago6Yu2rC4lcbu3JI5lmaYKk1LkqSqquEI2HsC/+7a9a2TI+mhc7svZr4NXUgODkdv3q7znA3vbabgS1cllq1QFKhZ07TuwJzMjNBaOD0KQ30JqD915d6nQ8dh6PD8yFiV33cGJrL+8q+WLJUJAkVR0G0ul3MbBqqJgvcMgI8koN70xP3PRwe+9hzznR9nXBhrNcJISpAliiSJMkE64jjOhavNxvKDR/mJu7uTD3c8c4mePpDZe3asCxc4bmF7W5BlmqLAnAFZKpVqtVo3c4sPXLz8vXcw2X8i65mDh8c3B0aXbkwyHGvD64h56rXFCgqOoQiCYBimOht2e+aUg+mIb3Zuemb2lR9eXfzxxZeMzyfj3T2zspkmTd0wNa2tKIo7atNFLavd0eEmtc5WPnLUGl1YI8EPQ+Aaphr2D/sLMHoUSZS7FJcAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/ed71ce77abc4fc19c7201df57df80215/01472/Gestalt-component.webp 240w,
/static/ed71ce77abc4fc19c7201df57df80215/222bd/Gestalt-component.webp 480w,
/static/ed71ce77abc4fc19c7201df57df80215/620b9/Gestalt-component.webp 960w,
/static/ed71ce77abc4fc19c7201df57df80215/95bc2/Gestalt-component.webp 1400w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/ed71ce77abc4fc19c7201df57df80215/0783d/Gestalt-component.png 240w,
/static/ed71ce77abc4fc19c7201df57df80215/782f4/Gestalt-component.png 480w,
/static/ed71ce77abc4fc19c7201df57df80215/f570d/Gestalt-component.png 960w,
/static/ed71ce77abc4fc19c7201df57df80215/fa92b/Gestalt-component.png 1400w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/png&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/ed71ce77abc4fc19c7201df57df80215/f570d/Gestalt-component.png&quot;
          alt=&quot;Gestalt component&quot;
          title=&quot;Gestalt component&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt; Gestalt component[/caption]&lt;/p&gt;
&lt;p&gt;Ngoài Gestalt thì Pinterest cũng sử dụng 1 số thư viện khác nữa như &lt;a href=&quot;https://github.com/facebook/react&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;React&lt;/a&gt; , &lt;a href=&quot;https://github.com/ReactTraining/react-router&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Reac-router v4&lt;/a&gt; , &lt;a href=&quot;https://github.com/reactjs/redux&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;redux&lt;/a&gt; , &lt;a href=&quot;https://github.com/gaearon/redux-thunk&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;redux-thunk&lt;/a&gt; , &lt;a href=&quot;https://github.com/gaearon/redux-thunk&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Reac &lt;/a&gt;&lt;a href=&quot;https://github.com/reactjs/react-redux&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;-redux&lt;/a&gt; , &lt;a href=&quot;https://github.com/paularmstrong/normalizr&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;normalizr&lt;/a&gt; , &lt;a href=&quot;https://github.com/reactjs/reselect&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;reselect&lt;/a&gt; , &lt;a href=&quot;https://github.com/facebook/flow&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Flow&lt;/a&gt; và &lt;a href=&quot;https://github.com/prettier/prettier&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;prettier&lt;/a&gt; .&lt;/p&gt;
&lt;h2 id=&quot;làm-thế-nào-để-làm-tốc-độ-tải-trang-được-nhanh-hơn&quot;&gt;&lt;a href=&quot;#l%C3%A0m-th%E1%BA%BF-n%C3%A0o-%C4%91%E1%BB%83-l%C3%A0m-t%E1%BB%91c-%C4%91%E1%BB%99-t%E1%BA%A3i-trang-%C4%91%C6%B0%E1%BB%A3c-nhanh-h%C6%A1n&quot; aria-label=&quot;làm thế nào để làm tốc độ tải trang được nhanh hơn permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Làm thế nào để làm tốc độ tải trang được nhanh hơn?&lt;/h2&gt;
&lt;p&gt;Hiệu năng luôn là vấn đề được quan tâm, bởi vì nó ảnh hưởng rất lớn đến mức độ tương tác của người dùng đến hệ thống. Đặc biệt với những người có tốc độ mạng kém hay bị giới hạn. Chẳng ai thích thú gì khi phải load những trang khá nặng mà mạng đang dùng thì khá chậm phải không nào.&lt;/p&gt;
&lt;p&gt;Sau khi tối ưu, Pinterest đã giảm kích thuớc file Javascript từ 490kb xuống còn 190kb. Việc này đạt được nhờ code-splitting ở tầng route, đặc biệt dùng component &lt;Loader&gt; sẽ giúp các bạn làm được điều đó.&lt;/p&gt;
&lt;p&gt;Ngoài ra nhờ việc sử dụng hệ thống preloading được đặt ở phía client side đã giúp cho tốc độ tải trang được nhanh hơn, làm trải nghiệm người dùng được tốt hơn.&lt;/p&gt;
&lt;p&gt;Cụ thể các bạn có thể đọc bài viết về tối ưu Progressive Web App ở đây nhé: &lt;a href=&quot;https://medium.com/dev-channel/a-pinterest-progressive-web-app-performance-case-study-3bd6ed2e6154&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;A Pinterest Progressive Web App Performance Case Study&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Chỉ trong 1 năm, phía mobile web đã có trên 600 file javascript, và tất cả nó đã được build vào 1 file được gọi là file bundle. Điều này sẽ rất khó trong việc &lt;strong&gt;đo lường để tối ưu hiệu năng&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Do đó, Pinterest đã phân tán các file javascript đó trên các trang web con dạng * .pinimg.com và đảm bảo rằng các dependencies trong mobile web luôn luôn được clean.&lt;/p&gt;
&lt;p&gt;[caption id=“attachment_49” align=“alignnone” width=“1024”]&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 960px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/1d628f40b0c3e538aa055ef8f80a0b1b/aa1b0/50b106cb4149299535ac992df768749b.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 53.48189415041783%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAACgklEQVQoz2VS204TURSdz/UPfPDBR2OCxqgvhpiI6JioJKYi1AQrbQkFIdRCawu0nRl6OvdL5z7TmZ7lpiRG8SQrZ+/sfdZZ+yJkSfJh5vtvp6omXl1NRMt2xDCKxSCM6I7+2EtENwjDUHRdRzRdT/SDSPSCRJStTNQNUxRKx1YD32dpPmcl5yxNU5YmCcuub0JCdp5lLMty8rMbvwArATafF5Qbs9CfUQ69yXMmgA7nJZRfHRjS8NpFURaI0xhZPidvASeIEfgGinmwjM/YPibdDZR5jF6vh/1mHc3tT5gOOhA48SVJxGuvVvju2hNeLBbc1U3eP25zSzN4nqf8cizxg4MWV9UJj8OIn1Xv8m7lDvddxmtbW/z96nO+/vAeH9S/8KXCNPLRXHuMwd4W6APYIwVKqwNHmWLBOanzcdrtww9JaeDjaOcl5J8VqoSj2j7D5uoKLsRHiEMPQlmWODo6xov7D/Dm6SrGsgLTsjC4PIema2BTFbVaA9XqDuqNfXS7A3z++Bob68/QaXfwrtNH5esmlEYFujqBYJsGVHqk6jokRcZYIkJdhSSNoUwYJpMJRmMJum6ANoBgw7BcmI6/tJkswbMM2JYJU1Mh1Hf7+H7A0GjJ2DuUsd2QsLkr4VtzBGkkwzBMuKTY9zxE/gzRbIZ45iH0XMRBAJo00ixDdo08h3B+coZ2b4T26QXGVyZsL6GpzuHbAdhwCE2REHY7mHVOkE4Z5tTDnMgyx0ERhrh9BHU0BLNs6CTfi0KkRQHaMVqJFFOKqZqGxHWRkzosFv8RcBra3xCmew1ctlpQfhwiIzWZPEZCyMZDmNQfpqowTAsplVMUJRbl4h+C26S/ATqSIlv1N550AAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/1d628f40b0c3e538aa055ef8f80a0b1b/01472/50b106cb4149299535ac992df768749b.webp 240w,
/static/1d628f40b0c3e538aa055ef8f80a0b1b/222bd/50b106cb4149299535ac992df768749b.webp 480w,
/static/1d628f40b0c3e538aa055ef8f80a0b1b/620b9/50b106cb4149299535ac992df768749b.webp 960w,
/static/1d628f40b0c3e538aa055ef8f80a0b1b/d4d3d/50b106cb4149299535ac992df768749b.webp 1436w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/1d628f40b0c3e538aa055ef8f80a0b1b/0783d/50b106cb4149299535ac992df768749b.png 240w,
/static/1d628f40b0c3e538aa055ef8f80a0b1b/782f4/50b106cb4149299535ac992df768749b.png 480w,
/static/1d628f40b0c3e538aa055ef8f80a0b1b/f570d/50b106cb4149299535ac992df768749b.png 960w,
/static/1d628f40b0c3e538aa055ef8f80a0b1b/aa1b0/50b106cb4149299535ac992df768749b.png 1436w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/png&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/1d628f40b0c3e538aa055ef8f80a0b1b/f570d/50b106cb4149299535ac992df768749b.png&quot;
          alt=&quot;tab network của pinterest&quot;
          title=&quot;tab network của pinterest&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt; tab network của pinterest[/caption]&lt;/p&gt;
&lt;p&gt;Nhìn vào hình ảnh trên chúng ta thấy được là các file js đang được nằm phân tán trên các website khác của pinterest (s.pinimg.com) và những file này đều được trả về từ Service Worker.&lt;/p&gt;
&lt;p&gt;Để file bundle không vượt quá giới hạn cho phép, phía Pinterest đã tạo ra những graph để report các file bundle đã được build và sẽ thông báo khi có file nào vượt quá kích thước cho phép.&lt;/p&gt;
&lt;p&gt;Cái thứ 2 mà Pinterest đã làm là đã &lt;strong&gt;customize eslint rule&lt;/strong&gt; để không cho phép import những files hay directories mà có thể là nguyên nhân gây “phình” to file bundle. Ví dụ như mobile web sẽ không cho phép import từ những file trên desktop web. Đương nhiên họ sẽ có 1 thư mục dùng chung cho cả 2 mobile web với desktop web.&lt;/p&gt;
&lt;p&gt;Và đây là kết quả khi họ tối ưu tốc độ load trang web:&lt;/p&gt;
&lt;p&gt;[caption id=“attachment_50” align=“alignnone” width=“766”]&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 766px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/66bbc808c37f7d3fcf18ed86b76093dc/c49b8/96170d3836d4afe29cf3a02a230022c9.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 13.838120104438643%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAAsSAAALEgHS3X78AAAAj0lEQVQI1yWL2w7CIBBE+/8fZnxQm6hpbOVaaCkQWhNBhSKKsg+TOWeyFTHcuOXzP7aMzQT8GnKP79hOMJsyOf+4KjK7W0E6D8fxUtVDI++mqE7jPTs/11fuPoYdO3WalElbs6F1zoKthFt8qAACxvyU1hoi1LOeMx5jDD5ABDOmlPIqpcSUCCHKs7VWKvUFM/+n4QDTaa0AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/66bbc808c37f7d3fcf18ed86b76093dc/01472/96170d3836d4afe29cf3a02a230022c9.webp 240w,
/static/66bbc808c37f7d3fcf18ed86b76093dc/222bd/96170d3836d4afe29cf3a02a230022c9.webp 480w,
/static/66bbc808c37f7d3fcf18ed86b76093dc/0c929/96170d3836d4afe29cf3a02a230022c9.webp 766w&quot;
          sizes=&quot;(max-width: 766px) 100vw, 766px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/66bbc808c37f7d3fcf18ed86b76093dc/0783d/96170d3836d4afe29cf3a02a230022c9.png 240w,
/static/66bbc808c37f7d3fcf18ed86b76093dc/782f4/96170d3836d4afe29cf3a02a230022c9.png 480w,
/static/66bbc808c37f7d3fcf18ed86b76093dc/c49b8/96170d3836d4afe29cf3a02a230022c9.png 766w&quot;
          sizes=&quot;(max-width: 766px) 100vw, 766px&quot;
          type=&quot;image/png&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/66bbc808c37f7d3fcf18ed86b76093dc/c49b8/96170d3836d4afe29cf3a02a230022c9.png&quot;
          alt=&quot;kết quả khi đo tốc độ tải trang&quot;
          title=&quot;kết quả khi đo tốc độ tải trang&quot;
          loading=&quot;lazy&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt; kết quả khi đo tốc độ tải trang[/caption]&lt;/p&gt;
&lt;p&gt;Sau khi đã tối ưu được tốc độ load trang, thì điều tiếp theo họ nghĩ là làm thế nào để hiển thị dữ liệu được nhanh hơn.&lt;/p&gt;
&lt;p&gt;Như chúng ta đã biết, với React thì cái driver lớn nhất mà ảnh hưởng đến hiệu năng phía client side đó chính là redux store (1 trong những component có thể giúp cho quá trình thay đổi route 1 cách tức thì).&lt;/p&gt;
&lt;p&gt;Ví dụ như màn hình list pins đang hiển thị hình ảnh vs title của pin. Từ màn hình list pins, chúng ta click vào 1 pin để xem chi tiết.&lt;/p&gt;
&lt;p&gt;Khi đó dữ liệu về ảnh với title của pin ở màn hình list sẽ được mang sang màn hình detail pin để hiển thị ngay lập tức.&lt;/p&gt;
&lt;p&gt;Đồng thời, Pinterest sẽ gửi thêm 1 request để lấy thêm dữ liệu về pin (như thông tin về owner của pin, description của pin, số lượng follow …). Khi đó người dùng có cảm giác tốc độ hiển thị dữ liệu khá nhanh, điều đó làm cho trải nghiệm người dùng cũng được tốt hơn.&lt;/p&gt;
&lt;p&gt;Ngoài ra “linh hồn” của trang web mới này đó là nó support cả phần app shell, add đến homescreen, push notifications and asset caching.&lt;/p&gt;
&lt;p&gt;Service Worker sẽ cache lại server-rendered đối với từng người dùng cụ thể, và phục vụ cho lần page load tiếp theo.&lt;/p&gt;
&lt;p&gt;Đặc biệt Pinterest đã rất “biết ơn” Apple đã tích hợp Service Worker trên Safari, để giúp cho người dùng có trải nghiệm tốt hơn như trên native app.&lt;/p&gt;
&lt;h2 id=&quot;kết-quả-đạt-được&quot;&gt;&lt;a href=&quot;#k%E1%BA%BFt-qu%E1%BA%A3-%C4%91%E1%BA%A1t-%C4%91%C6%B0%E1%BB%A3c&quot; aria-label=&quot;kết quả đạt được permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Kết quả đạt được&lt;/h2&gt;
&lt;p&gt;Bây giờ đến phần mà các bạn mong chờ: đó là những con số.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Active users hoạt động trên mobile web đã tăng lên &lt;strong&gt;103%&lt;/strong&gt; so với năm trước, với &lt;strong&gt;156%&lt;/strong&gt; ở Brazil và** 312%** ở India.&lt;/li&gt;
&lt;li&gt;Thời gian sử dụng mobile web đã tăng lên đến &lt;strong&gt;296%&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Số lượng pin đã tăng lên &lt;strong&gt;401%&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Số lượng người dùng muốn save Pin đến board tăng đến &lt;strong&gt;295%&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Và đặc biệt hơn, số lượng login đã tăng lên &lt;strong&gt;370%&lt;/strong&gt;, số lượng signup đã tăng &lt;strong&gt;843%&lt;/strong&gt; trên 1 năm.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Thời đại công nghệ ngày nay, quả thực trải nghiệm người dùng rất quan trọng, nó quyết định đến sự sống còn của dịch vụ.&lt;/p&gt;
&lt;p&gt;Nếu bạn nào đang có ý định phát triển Progressive Web App thì hi vọng qua bài này sẽ giúp 1 phần nào đó.&lt;/p&gt;
&lt;p&gt;==============&lt;/p&gt;
&lt;p&gt;Để nhận thông báo khi có bài viết mới nhất thì các bạn có thể like fanpage của mình ở bên dưới nhé:&lt;/p&gt;
&lt;p&gt;👉👉👉 &lt;a href=&quot;https://www.facebook.com/669339543503374&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Nghệ thuật Coding Fanpage Facebook&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Chúc các bạn 1 tuần thật vui vẻ.&lt;/p&gt;</content:encoded></item></channel></rss>